{"version":3,"sources":["../../../src/components/zhn-slider/CompSlider.jsx"],"names":["PERIOD_MS","S","SHOW_HIDE","position","overflow","PAGES","display","flexFlow","alignItems","overflowX","transition","_getTranslateX","node","parseInt","style","transform","substr","replace","_findIndexById","arr","id","findIndex","el","key","_replaceElTo2","index","splice","slice","_addElTo2","ModalSlider","props","_crPageElement","React","createElement","pageRouter","_pageStyle","onPrevPage","hPrevPage","onNextPage","hNextPage","setState","prevState","pageCurrent","_direction","pages","_pageIndex","_crTransform","pagesEl","_refPages","current","WIDTH","_PAGE_WIDTH","dX","prevInt","_renderPages","state","map","Page","cloneElement","pageNumber","pageWidth","maxPages","initialPageId","createRef","bind","_pagesStyle","width","render","_transform","_divStyle","Component","defaultProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\n\r\nimport throttleOnce from '../../utils/throttleOnce'\r\n\r\nconst PERIOD_MS = 750;\r\n\r\nconst S = {\r\n  SHOW_HIDE: {\r\n    position: 'absolute',\r\n    overflow: 'hidden'\r\n  },\r\n  PAGES: {\r\n    display: 'flex',\r\n    flexFlow: 'row nowrap',\r\n    alignItems: 'flex-start',\r\n    overflowX: 'hidden',\r\n    transition: `all ${PERIOD_MS}ms ease-out`\r\n  }\r\n};\r\n\r\nconst _getTranslateX = node => parseInt(node\r\n .style.transform\r\n    .substr(11)\r\n    .replace('px', '')\r\n    .replace(')', ''),\r\n 10);\r\n\r\nconst _findIndexById = (arr, id) => arr\r\n  .findIndex(el => el.key === id);\r\nconst _replaceElTo2 = (arr, index) => [\r\n  arr[0], arr.splice(index, 1)[0], ...arr.slice(1)\r\n];\r\nconst _addElTo2 = (arr, el) => [\r\n  arr[0], el, ...arr.slice(1)\r\n];\r\n\r\nclass ModalSlider extends Component {\r\n  /*\r\n  static propTypes = {\r\n    rootStyle: PropTypes.object,\r\n    className: PropTypes.string,\r\n    style: PropTypes.object,\r\n\r\n    pageWidth: PropTypes.number,\r\n    maxPages: PropTypes.number,\r\n\r\n    onClose: PropTypes.func\r\n  }\r\n  */\r\n\r\n  static defaultProps = {\r\n    pageWidth: 330,\r\n    maxPages: 3\r\n  }\r\n\r\n  constructor(props){\r\n    super(props)\r\n    const {\r\n      pageWidth, maxPages,\r\n      initialPageId\r\n    } = props;\r\n\r\n    this._refPages = React.createRef()\r\n\r\n    this.hNextPage = throttleOnce(\r\n      this.hNextPage.bind(this)\r\n    )\r\n    this.hPrevPage = throttleOnce(\r\n      this.hPrevPage.bind(this)\r\n    )\r\n\r\n    this._PAGE_WIDTH = pageWidth\r\n    this._pagesStyle = {\r\n      width: `${maxPages*pageWidth}px`\r\n    }\r\n    this._pageStyle = {\r\n      width: `${pageWidth}px`,\r\n    }\r\n    this._direction = 0\r\n\r\n    this.state = {\r\n      pageCurrent: 1,\r\n      pages: [ this._crPageElement(initialPageId) ]\r\n    }\r\n  }\r\n\r\n  _crPageElement = id => React\r\n     .createElement(this.props.pageRouter[id], {\r\n        key: id,\r\n        style: this._pageStyle,\r\n        onPrevPage: this.hPrevPage,\r\n        onNextPage: this.hNextPage\r\n      })\r\n\r\n  hPrevPage = () => {\r\n    this.setState(prevState => {\r\n      if (prevState.pageCurrent > 1) {\r\n        prevState.pageCurrent -= 1\r\n        this._direction = -1\r\n      }\r\n      return prevState;\r\n    })\r\n  }\r\n\r\n  hNextPage = (id) => {\r\n    this.setState(prevState => {\r\n      const { pages } = prevState;\r\n      const _pageIndex = _findIndexById(pages, id);\r\n      prevState.pages = _pageIndex !== -1\r\n         ? _replaceElTo2(pages, _pageIndex)\r\n         : _addElTo2(pages, this._crPageElement(id))\r\n      prevState.pageCurrent += 1\r\n      this._direction = 1\r\n      return prevState;\r\n    })\r\n  }\r\n\r\n  _crTransform = () => {\r\n    const pagesEl = this._refPages.current;\r\n    const WIDTH = this._PAGE_WIDTH;\r\n    let dX = 0;\r\n    if (this._direction !== 0 && pagesEl) {\r\n      const prevInt = _getTranslateX(pagesEl);\r\n      dX = this._direction === 1\r\n         ? prevInt - WIDTH\r\n         : prevInt + WIDTH\r\n      this._direction = 0\r\n    } else if ( this._direction === 0 && pagesEl) {\r\n      dX = _getTranslateX(pagesEl)\r\n    }\r\n    return {\r\n      transform: `translateX(${dX}px)`\r\n    };\r\n  }\r\n\r\n  _renderPages = () => {\r\n    const { pages, pageCurrent } = this.state;\r\n    return pages.map((Page, index) => React\r\n      .cloneElement(Page, {\r\n         pageCurrent,\r\n         pageNumber: index + 1,\r\n       }))\r\n  }\r\n\r\n  render(){\r\n    const { _pagesStyle } = this\r\n    , _transform = this._crTransform()\r\n    , _divStyle = {\r\n        ...S.PAGES,\r\n        ..._pagesStyle,\r\n        ..._transform\r\n      };\r\n    return (\r\n      <div style={S.SHOW_HIDE}>\r\n        <div\r\n          ref={this._refPages}\r\n          style={_divStyle}\r\n        >\r\n          {this._renderPages()}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ModalSlider\r\n"],"file":"CompSlider.js"}