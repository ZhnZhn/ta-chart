{"version":3,"sources":["../../../src/components/zhn-select/InputSelect.jsx"],"names":["MAX_WITHOUT_ANIMATION","CL_ROOT","CL","ROOT","INPUT","SPINNER","SPINNER_FAILED","INPUT_HR","OPTIONS","OPTIONS_DIV","OPTIONS_ROW","OPTIONS_ROW_ACTIVE","FOOTER","FOOTER_INDEX","FOOTER_BTS","FOOTER_MARGIN","NOT_SELECTED","INPUT_PREFIX","_fnNoItem","propCaption","inputValue","isWithInput","_inputValue","String","replace","trim","_caption","value","_toItem","item","_crWidth","width","style","indexOf","S","BLOCK","display","NONE","ARROW_SHOW","borderColor","ItemOptionDf","InputSelect","props","_setStateToInit","options","indexActiveOption","setState","isShowOption","isValidDomOptionsCache","_getActiveItemComp","_decorateActiveRowComp","comp","classList","add","indexNode","textContent","_undecorateActiveRowComp","_comp","remove","_makeVisibleActiveRowComp","offsetTop","scrollTop","optionsComp","_filterOptions","valueFor","toLowerCase","filter","option","i","_handleInputChange","event","token","target","tokenLn","length","state","valueLn","arr","push","_startAfterInputAnimation","arrowCell","startAnimation","_stopAfterInputAnimation","stopAnimation","_setShowOptions","_showOptions","ms","isShowOptionAnim","setTimeout","_stepDownOption","prevComp","nextComp","_stepUpOption","bottomComp","_handleInputKeyDown","keyCode","onSelect","undefined","preventDefault","_handleToggleOptions","_handleClickItem","index","_refIndexNode","n","_renderOptionsFooter","nFiltered","nAll","clearInput","_refOptionsComp","c","renderOptions","rootOptionsStyle","ItemOptionComp","_propCaption","_domOptions","map","bind","domOptionsCache","_styleOptions","_rootWidthStyle","_nFiltered","_nAll","_refArrowCell","_crAfterInputEl","isLoading","isLoadingFailed","placeholder","optionName","onLoadOption","optionNames","_placeholder","_afterInputEl","_arrowStyle","afterInputEl","_refDomInputText","domInputText","isLocalMode","componentWillReceiveProps","nextProps","shouldComponentUpdate","nextState","componentDidUpdate","render","rootStyle","focusInput","focus","focusNotValidInput","Component","defaultProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\n//import PropTypes from 'prop-types'\r\n\r\nimport ArrowCell from './ArrowCell';\r\n\r\nimport BtCircle from '../zhn/ButtonCircle2'\r\n\r\nconst MAX_WITHOUT_ANIMATION = 800;\r\n\r\nconst CL_ROOT = 'zhn-select';\r\nconst CL = {\r\n  ROOT: CL_ROOT,\r\n  INPUT: `${CL_ROOT}__input`,\r\n  SPINNER: `${CL_ROOT}__spinner`,\r\n  SPINNER_FAILED: `${CL_ROOT}__spinner--failed`,\r\n  INPUT_HR: `${CL_ROOT}__input__hr`,\r\n\r\n  OPTIONS: `${CL_ROOT}__options`,\r\n  OPTIONS_DIV: `${CL_ROOT}__options__div`,\r\n\r\n  OPTIONS_ROW: `${CL_ROOT}__row`,\r\n  OPTIONS_ROW_ACTIVE: `${CL_ROOT}__row--active`,\r\n\r\n  FOOTER: `${CL_ROOT}__footer`,\r\n  FOOTER_INDEX: `${CL_ROOT}__footer__index`,\r\n  FOOTER_BTS: `${CL_ROOT}__footer__bts`,\r\n  FOOTER_MARGIN: `${CL_ROOT}__footer--margin`,\r\n\r\n  NOT_SELECTED: 'not-selected'\r\n};\r\n\r\n\r\nconst INPUT_PREFIX = 'From input:';\r\nconst _fnNoItem = (propCaption, inputValue, isWithInput) => {\r\n  const _inputValue = String(inputValue)\r\n    .replace(INPUT_PREFIX,'').trim()\r\n    , _caption = (isWithInput)\r\n           ? `${INPUT_PREFIX} ${_inputValue}`\r\n           : 'No results found';\r\n  return {\r\n    [propCaption]: _caption,\r\n    value: 'noresult',\r\n    inputValue: _inputValue\r\n  };\r\n};\r\n\r\nconst _toItem = (item, propCaption) => ({\r\n  [propCaption]: 'From Input',\r\n  value: item.inputValue\r\n});\r\n\r\nconst _crWidth = (width, style) => {\r\n  return (width)\r\n    ? ((''+width).indexOf('%') !== -1)\r\n        ? { ...style, width: width }\r\n        : { ...style, width: width + 'px'}\r\n    : null;\r\n};\r\n\r\nconst S = {\r\n  BLOCK: {\r\n    display: 'block'\r\n  },\r\n  NONE: {\r\n    display: 'none'\r\n  },\r\n\r\n  ARROW_SHOW: {\r\n    borderColor: '#1B75BB transparent transparent'\r\n  }\r\n};\r\n\r\nconst ItemOptionDf = ({ item, propCaption }) => (\r\n  <span>\r\n    {item[propCaption]}\r\n  </span>\r\n);\r\n\r\nclass InputSelect extends Component {\r\n  /*\r\n  static propTypes = {\r\n     propCaption: PropTypes.string,\r\n     ItemOptionComp: PropTypes.element,\r\n     width: PropTypes.string,\r\n     isShowOptionAnim: PropTypes.bool,\r\n     options: PropTypes.arrayOf(PropTypes.shape({\r\n        caption: PropTypes.string,\r\n        value: PropTypes.oneOfType([\r\n          PropTypes.string,\r\n          PropTypes.number\r\n        ])\r\n     })),\r\n     optionName: PropTypes.string,\r\n     optionNames: PropTypes.string,\r\n     placeholder: PropTypes.string,\r\n     isWithInput: PropTypes.bool,\r\n     prefixInput: PropTypes.string\r\n\r\n     isLoading: PropTypes.bool,\r\n     isLoadingFailed: PropTypes.bool,\r\n\r\n     onSelect: PropTypes.func,\r\n     onLoadOption: PropTypes.func\r\n  }\r\n  */\r\n\r\n  static defaultProps = {\r\n    propCaption: 'caption',\r\n    ItemOptionComp: ItemOptionDf,\r\n    options: [],\r\n    optionName: '',\r\n    optionNames: '',\r\n    isWithInput: false,\r\n    //prefixInput: 'From Input:',\r\n    onSelect: () => {},\r\n    onLoadOption: () => {}\r\n  }\r\n\r\n  constructor(props){\r\n    super(props)\r\n    this.domOptionsCache = null\r\n    this.indexActiveOption = 0\r\n    this.propCaption = props.propCaption\r\n\r\n    const { optionName, optionNames, options } = props;\r\n    this.state = {\r\n      value: '',\r\n      isShowOption: false,\r\n      options: options,\r\n      optionNames: optionNames || optionName || '',\r\n      isValidDomOptionsCache: false,\r\n      isLocalMode: false\r\n    }\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps){\r\n    if (this.props !== nextProps){\r\n      if (this.props.options !== nextProps.options){\r\n        //New options come from Parent - Clear domCache, Init State\r\n        this._setStateToInit(nextProps.options);\r\n      }\r\n    }\r\n  }\r\n\r\n  shouldComponentUpdate(nextProps, nextState){\r\n    if (this.props !== nextProps) {\r\n      nextState.isLocalMode = false;\r\n    } else {\r\n      nextState.isLocalMode = true;\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  componentDidUpdate(){\r\n     //Decorate Active Option\r\n     if (this.state.isShowOption){\r\n       const comp = this._getActiveItemComp();\r\n       this._decorateActiveRowComp(comp);\r\n       this._makeVisibleActiveRowComp(comp);\r\n    }\r\n  }\r\n\r\n  _setStateToInit = (options) => {\r\n    this.indexActiveOption = 0;\r\n    this.setState({\r\n      value : '',\r\n      isShowOption : false,\r\n      options : options,\r\n      isValidDomOptionsCache : false\r\n    });\r\n  }\r\n\r\n  _getActiveItemComp = () => {\r\n    return this[`v${this.indexActiveOption}`];\r\n  }\r\n  _decorateActiveRowComp = (comp) => {\r\n    if (comp){\r\n      comp.classList.add(CL.OPTIONS_ROW_ACTIVE);\r\n    }\r\n    if (this.indexNode) {\r\n      this.indexNode.textContent = this.indexActiveOption + 1\r\n    }\r\n  }\r\n  _undecorateActiveRowComp = (comp) => {\r\n     const _comp = !comp\r\n              ? this._getActiveItemComp()\r\n              : comp;\r\n     if (_comp){\r\n      _comp.classList.remove(CL.OPTIONS_ROW_ACTIVE);\r\n     }\r\n  }\r\n\r\n  _makeVisibleActiveRowComp = (comp) => {\r\n    if (comp){\r\n      const offsetTop = comp.offsetTop;\r\n      const scrollTop = this.optionsComp.scrollTop;\r\n      if ( (offsetTop - scrollTop) > 70){\r\n         this.optionsComp.scrollTop += (offsetTop - scrollTop - 70);\r\n      }\r\n      if ( (offsetTop - scrollTop) < 0){\r\n        this.optionsComp.scrollTop= 0;\r\n      }\r\n    }\r\n  }\r\n\r\n  _filterOptions = (options, value) => {\r\n     const valueFor = value.toLowerCase()\r\n        ,  _caption = this.propCaption;\r\n     return options.filter( (option, i) => {\r\n       return option[_caption].toLowerCase().indexOf(valueFor) !== -1\r\n     })\r\n  }\r\n\r\n  _handleInputChange = (event) => {\r\n    const token = event.target.value\r\n        , tokenLn = token.length\r\n        , { value } = this.state\r\n        , valueLn = value.length;\r\n    let arr = [];\r\n    if (tokenLn !== valueLn){\r\n      if (tokenLn > valueLn){\r\n        arr = this._filterOptions(this.state.options, token);\r\n      } else if (tokenLn < valueLn) {\r\n        arr = this._filterOptions(this.props.options, token);\r\n      }\r\n      if (arr.length === 0){\r\n        arr.push(_fnNoItem(\r\n          this.propCaption, token, this.props.isWithInput\r\n        ))\r\n      }\r\n      this._undecorateActiveRowComp()\r\n      this.indexActiveOption = 0;\r\n      this.setState({\r\n        value : token,\r\n        isShowOption : true,\r\n        isValidDomOptionsCache : false,\r\n        options : arr\r\n      })\r\n    }\r\n  }\r\n\r\n  _startAfterInputAnimation = () => {\r\n    if (this.state.options.length>MAX_WITHOUT_ANIMATION){\r\n      this.arrowCell.startAnimation()\r\n    }\r\n  }\r\n  _stopAfterInputAnimation = () => {\r\n    this.arrowCell.stopAnimation()\r\n  }\r\n  _setShowOptions = () => {\r\n    this.setState(\r\n      { isShowOption : true },\r\n      this._stopAfterInputAnimation\r\n    )\r\n  }\r\n  _showOptions = (ms) => {\r\n    if (this.props.isShowOptionAnim) {\r\n      this._startAfterInputAnimation()\r\n      setTimeout( this._setShowOptions, ms )\r\n    } else {\r\n      this.setState({ isShowOption: true })\r\n    }\r\n  }\r\n\r\n  _stepDownOption = () => {\r\n    const prevComp = this._getActiveItemComp();\r\n\r\n    if (prevComp){\r\n       this._undecorateActiveRowComp(prevComp);\r\n\r\n       this.indexActiveOption += 1;\r\n       if (this.indexActiveOption>=this.state.options.length){\r\n          this.indexActiveOption = 0;\r\n          this.optionsComp.scrollTop = 0;\r\n       }\r\n\r\n       const nextComp = this._getActiveItemComp();\r\n       this._decorateActiveRowComp(nextComp)\r\n       //this.indexNode.innerHTML = this.indexActiveOption\r\n\r\n       const offsetTop = nextComp.offsetTop\r\n       const scrollTop = this.optionsComp.scrollTop;\r\n       if ( (offsetTop - scrollTop) > 70){\r\n          this.optionsComp.scrollTop += (offsetTop - scrollTop - 70);\r\n       }\r\n    }\r\n  }\r\n\r\n  _stepUpOption = () => {\r\n    const prevComp = this._getActiveItemComp();\r\n    if (prevComp){\r\n      this._undecorateActiveRowComp(prevComp);\r\n\r\n      this.indexActiveOption -= 1;\r\n      if (this.indexActiveOption < 0){\r\n        this.indexActiveOption = this.state.options.length - 1;\r\n        const bottomComp = this._getActiveItemComp()\r\n        this.optionsComp.scrollTop = bottomComp.offsetTop\r\n      }\r\n\r\n      const nextComp = this._getActiveItemComp();\r\n      this._decorateActiveRowComp(nextComp);\r\n      //this.indexNode.innerHTML = this.indexActiveOption\r\n\r\n      const offsetTop = nextComp.offsetTop;\r\n      const scrollTop = this.optionsComp.scrollTop;\r\n      if ( (offsetTop - scrollTop) < 70){\r\n        this.optionsComp.scrollTop -= ( 70 - (offsetTop - scrollTop) );\r\n      }\r\n    }\r\n  }\r\n\r\n  _handleInputKeyDown = (event) => {\r\n    switch(event.keyCode){\r\n      // enter\r\n      case 13:{\r\n         const item = this.state.options[this.indexActiveOption];\r\n\r\n         if (item && item[this.propCaption]){\r\n           this.setState({\r\n             value : item[this.propCaption],\r\n             isShowOption : false,\r\n             isValidDomOptionsCache : true\r\n           });\r\n\r\n           if (item.value !== 'noresult'){\r\n             this.props.onSelect(item);\r\n           } else {\r\n             if (!this.props.isWithInput) {\r\n                this.props.onSelect(undefined);\r\n             } else {\r\n               this.props.onSelect(_toItem(item, this.propCaption))\r\n             }\r\n           }\r\n         }\r\n      break; }\r\n      //escape, delete\r\n      case 27: case 46: {\r\n        event.preventDefault()\r\n        if (this.state.isShowOption){\r\n          this.setState({ isShowOption : false });\r\n        } else {\r\n          this._undecorateActiveRowComp();\r\n          this._setStateToInit(this.props.options);\r\n          this.props.onSelect(undefined);\r\n        }\r\n      break;}\r\n      case 40: //down\r\n        if (!this.state.isShowOption){\r\n          this._showOptions(0)\r\n          //this.setState({ isShowOption : true });\r\n        } else {\r\n          event.preventDefault()\r\n          this._stepDownOption()\r\n        }\r\n        break;\r\n      case 38: //up\r\n        if (this.state.isShowOption){\r\n          event.preventDefault()\r\n          this._stepUpOption()\r\n        }\r\n        break;\r\n      default: return undefined;\r\n    }\r\n  }\r\n\r\n  _handleToggleOptions = () => {\r\n    //this.setState({ isShowOption: !this.state.isShowOption });\r\n    if (this.state.isShowOption){\r\n      this.setState({ isShowOption: false })\r\n    } else {\r\n      this._showOptions(1)\r\n    }\r\n  }\r\n\r\n  _handleClickItem = (item, index, event) => {\r\n    this._undecorateActiveRowComp()\r\n    this.indexActiveOption = index;\r\n    this.setState({\r\n      value : item[this.propCaption],\r\n      isShowOption : false\r\n    });\r\n    this.props.onSelect(item);\r\n  }\r\n\r\n  _refIndexNode = n => this.indexNode = n\r\n\r\n  _renderOptionsFooter = (nFiltered, nAll) => {\r\n    return (\r\n      <div className={`${CL.FOOTER} ${CL.NOT_SELECTED}`}>\r\n        <span className={CL.FOOTER_INDEX}>\r\n          <span ref={this._refIndexNode} >\r\n            {this.indexActiveOption}\r\n          </span>\r\n          <span>\r\n             : {nFiltered}: {nAll}\r\n          </span>\r\n        </span>\r\n        <span className={CL.FOOTER_BTS}>\r\n          <BtCircle\r\n             className={CL.FOOTER_MARGIN}\r\n             caption=\"Dn\"\r\n             onClick={this._stepDownOption}\r\n          />\r\n          <BtCircle\r\n             className={CL.FOOTER_MARGIN}\r\n             caption=\"Up\"\r\n             onClick={this._stepUpOption}\r\n          />\r\n          <BtCircle\r\n             caption=\"CL\"\r\n             onClick={this.clearInput}\r\n          />\r\n        </span>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  _refOptionsComp = c => this.optionsComp = c\r\n\r\n  renderOptions = () => {\r\n    const {\r\n            rootOptionsStyle,\r\n            ItemOptionComp\r\n          } = this.props\r\n        , { isShowOption, options, isValidDomOptionsCache } = this.state\r\n        , _propCaption = this.propCaption;\r\n\r\n    let _domOptions;\r\n    if (options){\r\n      if (!isValidDomOptionsCache){\r\n         _domOptions = options.map((item, index)=>{\r\n           return (\r\n             <div\r\n                //role=\"option\"\r\n                //aria-selected={this.indexActiveOption === index}\r\n                //tabIndex=\"0\"\r\n                key={index}\r\n                className={CL.OPTIONS_ROW}\r\n                ref={c => this[`v${index}`] = c}\r\n                onClick={this._handleClickItem.bind(this, item, index)}\r\n              >\r\n                <ItemOptionComp\r\n                   item={item}\r\n                   propCaption={_propCaption}\r\n                />\r\n                {/*item.caption*/}\r\n            </div>\r\n           )\r\n        });\r\n        this.domOptionsCache = _domOptions;\r\n      } else {\r\n        _domOptions = this.domOptionsCache;\r\n      }\r\n    }\r\n\r\n    const { width } = this.props\r\n        ,  _styleOptions = isShowOption ? S.BLOCK : S.NONE\r\n        , _rootWidthStyle = _crWidth(width, _styleOptions)\r\n        , _nFiltered = (options[0] && (options[0].value !== 'noresult') )\r\n              ? options.length : 0\r\n        , _nAll = this.props.options\r\n              ? this.props.options.length : 0;\r\n\r\n    return (\r\n        <div\r\n           className={CL.OPTIONS}\r\n           style={_rootWidthStyle}\r\n           data-scrollable={true}\r\n         >\r\n          <div\r\n             ref={this._refOptionsComp}\r\n             className={CL.OPTIONS_DIV}\r\n             style={{...rootOptionsStyle, ..._rootWidthStyle}}\r\n           >\r\n            {_domOptions}\r\n          </div>\r\n          { this._renderOptionsFooter(_nFiltered, _nAll) }\r\n        </div>\r\n    );\r\n  }\r\n\r\n  _refArrowCell = c => this.arrowCell = c\r\n\r\n  _crAfterInputEl = () => {\r\n    const {\r\n           isLoading, isLoadingFailed,\r\n           placeholder, optionName, onLoadOption\r\n         } = this.props\r\n        , { isShowOption, optionNames } = this.state;\r\n\r\n    let _placeholder, _afterInputEl\r\n    if (!isLoading && !isLoadingFailed){\r\n       const _arrowStyle = isShowOption\r\n                ? S.ARROW_SHOW\r\n                : null;\r\n      _placeholder = (placeholder)\r\n          ? placeholder\r\n          : `Select ${optionName}...`;\r\n      _afterInputEl = (\r\n         <ArrowCell\r\n           ref={this._refArrowCell}\r\n           arrowStyle={_arrowStyle}\r\n           onClick={this._handleToggleOptions}\r\n         />\r\n      );\r\n    } else if (isLoading){\r\n      _placeholder = `Loading ${optionNames}...`;\r\n      _afterInputEl = (\r\n        <span\r\n          className={CL.SPINNER}\r\n          data-loader=\"circle\"\r\n        />        \r\n      );\r\n    } else if (isLoadingFailed) {\r\n       _placeholder=`Loading ${optionNames} Failed`;\r\n       _afterInputEl = (\r\n         <BtCircle\r\n           className={CL.SPINNER_FAILED}\r\n           data-loader=\"circle-failed\"\r\n           onClick={onLoadOption}\r\n         />\r\n       )\r\n    }\r\n    return {\r\n      placeholder: _placeholder,\r\n      afterInputEl: _afterInputEl\r\n    };\r\n  }\r\n\r\n  _refDomInputText = c => this.domInputText = c\r\n\r\n  render(){\r\n    const { rootStyle, width } = this.props\r\n        , { value, isLocalMode, isShowOption } = this.state\r\n        , _rootWidthStyle = _crWidth(width, rootStyle)\r\n        , { afterInputEl, placeholder } = this._crAfterInputEl()\r\n        , _domOptions = (isLocalMode || isShowOption)\r\n              ? this.renderOptions()\r\n              : null;\r\n    return (\r\n      <div\r\n        className={CL.ROOT}\r\n        style={_rootWidthStyle}\r\n      >\r\n        <input\r\n           ref={this._refDomInputText}\r\n           type=\"text\"\r\n           name=\"select\"\r\n           //autoComplete=\"new-select\"\r\n           autoComplete=\"off\"\r\n           autoCorrect=\"off\"\r\n           autoCapitalize=\"off\"\r\n           spellCheck={false}\r\n           value={value}\r\n           className={CL.INPUT}\r\n           placeholder={placeholder}\r\n           onChange={this._handleInputChange}\r\n           onKeyDown={this._handleInputKeyDown}>\r\n        </input>\r\n        {afterInputEl}\r\n        <hr className={CL.INPUT_HR} />\r\n        {_domOptions}\r\n      </div>\r\n    )\r\n  }\r\n\r\n  clearInput = () => {\r\n    const { options, onSelect } = this.props;\r\n    this._undecorateActiveRowComp()\r\n    onSelect(undefined)\r\n    this._setStateToInit(options)\r\n    this.setState({ isShowOption : false });\r\n  }\r\n\r\n  focusInput(){\r\n    this.domInputText.focus()\r\n  }\r\n  focusNotValidInput(){\r\n    this.domInputText.focus()\r\n  }\r\n\r\n}\r\n\r\nexport default InputSelect\r\n"],"file":"InputSelect.js"}