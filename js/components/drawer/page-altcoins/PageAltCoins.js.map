{"version":3,"sources":["../../../../src/components/drawer/page-altcoins/PageAltCoins.jsx"],"names":["crExchange","pageFns","crExchanges","crTimeframes","DF_TIMEFRAME","S","ROOT","height","DIV_BTS","paddingLeft","BT_LIVE_UPDATE","display","PageAltCoins","style","onPrevPage","AppValue","appSettings","dataAction","onLiveUpdate","onStopUpdate","AppLiveUpdating","isLiveUpdating","reducer","initialState","state","dispatch","exchange","pair","isMarkets","exchanges","markets","timeframes","setTimeframes","timeframe","setTimeframe","refExchange","proxy","type","ALTCOIN","EXCHANGES_SET","current","exchImpl","onSelectExchange","item","value","EXCHANGE_SET","onSelectTimeframe","onSelectMarket","PAIR_SET","undefined"],"mappings":"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","sourcesContent":["import React, { useState, useReducer, useEffect, useRef, useContext } from 'react'\r\n\r\nimport AppValue from '../../contexts/AppValue'\r\nimport AppLiveUpdating from '../../contexts/AppLiveUpdating'\r\n\r\nimport BackMenuBt from '../BackMenuBt'\r\nimport CoinSelect from './CoinSelect'\r\nimport FlatButton from '../../zhn-m/FlatButton'\r\n\r\nimport reducer from './reducer'\r\nimport initialState from './initialState'\r\nimport ALTCOIN from './enumAltcoin'\r\n\r\nimport loadMarkets from './loadMarkets'\r\nimport loadPair from './loadPair'\r\n\r\nimport pageFns from './pageFns';\r\n\r\nconst {\r\n  crExchange,\r\n  crExchanges,\r\n  crTimeframes\r\n} = pageFns;\r\n\r\n\r\nconst DF_TIMEFRAME = '1d';\r\n\r\nconst S = {\r\n  ROOT: {\r\n    height: 400\r\n  },\r\n  DIV_BTS: {\r\n    paddingLeft: 8\r\n  },\r\n  BT_LIVE_UPDATE: {\r\n    display: 'block',\r\n    paddingLeft: 8\r\n  }\r\n};\r\n\r\n\r\nconst PageAltCoins = ({ style, onPrevPage }) => {\r\n  const {\r\n    appSettings,\r\n    dataAction,\r\n    onLiveUpdate, onStopUpdate\r\n  } = useContext(AppValue)\r\n  , { isLiveUpdating } = useContext(AppLiveUpdating)\r\n  const [state, dispatch] = useReducer(reducer, initialState)\r\n  , { exchange, pair, isMarkets,\r\n      exchanges, markets\r\n  } = state\r\n  , [timeframes, setTimeframes] = useState([])\r\n  , [timeframe, setTimeframe] = useState(DF_TIMEFRAME)\r\n  , refExchange = useRef(null)\r\n  , proxy = appSettings.proxy();\r\n\r\n  useEffect(() => {\r\n    dispatch({\r\n      type: ALTCOIN.EXCHANGES_SET,\r\n      exchanges: crExchanges()\r\n    })\r\n  }, [])\r\n\r\n  useEffect(()=>{\r\n    if (exchange) {\r\n      refExchange.current = crExchange(exchange, proxy)\r\n      setTimeframe(DF_TIMEFRAME)\r\n      setTimeframes(crTimeframes(refExchange.current.timeframes))\r\n      loadMarkets({\r\n        dispatch, exchange,\r\n        exchImpl: refExchange.current\r\n      })\r\n    }\r\n  }, [exchange, proxy])\r\n\r\n  useEffect(() => {\r\n    if (pair && timeframe) {\r\n      loadPair({\r\n        exchange, pair,\r\n        timeframe: timeframe,\r\n        exchImpl: refExchange.current,\r\n        dataAction\r\n      })\r\n    }\r\n  }, [pair, timeframe])\r\n\r\n  const onSelectExchange = (item) => {\r\n    if (item && item.value) {\r\n      dispatch({\r\n        type: ALTCOIN.EXCHANGE_SET,\r\n        exchange: item.value\r\n      })\r\n    }\r\n  }\r\n\r\n  const onSelectTimeframe = (item) => {\r\n    setTimeframe((item && item.value) || DF_TIMEFRAME)\r\n  }\r\n\r\n  const onSelectMarket = (item) => {\r\n    dispatch({\r\n      type: ALTCOIN.PAIR_SET,\r\n      pair: item && item.value || undefined\r\n    })\r\n  }\r\n\r\n  return  (\r\n    <div style={{ ...S.ROOT, ...style }}>\r\n      <BackMenuBt\r\n        onClick={onPrevPage}\r\n      />\r\n      <CoinSelect\r\n        exchanges={exchanges}\r\n        onSelectExchange={onSelectExchange}\r\n        isMarkets={isMarkets}\r\n        markets={markets}\r\n        onSelectMarket={onSelectMarket}\r\n        timeframes={timeframes}\r\n        onSelectTimeframe={onSelectTimeframe}\r\n      />\r\n      { (exchange === 'binance' && timeframe === '1m') && <div\r\n         style={S.DIV_BTS}>\r\n          <FlatButton\r\n            caption={isLiveUpdating ? 'Stop Updating' : 'Live Updating 1min'}\r\n            onClick={isLiveUpdating ? onStopUpdate : () => onLiveUpdate(pair)}\r\n          />\r\n       </div>\r\n      }\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PageAltCoins\r\n"],"file":"PageAltCoins.js"}