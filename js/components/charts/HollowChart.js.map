{"version":3,"sources":["../../../src/components/charts/HollowChart.jsx"],"names":["sma","Ch","rsi","bollingerBand","fitWidth","scaleTime","chartFns","crTimeInterval","crTimeFormat","crExtends","ITEMS_NUM","MARGIN","left","right","top","bottom","S","EL","width","_xAccessor","d","date","HollowChart","props","id","style","data","resize","timeframe","sma20","options","windowSize","stroke","merge","c","accessor","sma50","bb","rsi14","calculatedData","timeInterval","timeFormat","xExtents","height","React","memo"],"mappings":"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","file":"HollowChart.js","sourcesContent":["import React, { useEffect } from 'react'\r\n\r\nimport Ch from './Ch'\r\nimport chartFns from './chartFns'\r\n\r\nimport CandleSeria from './series/CandleSeria'\r\nimport VolumeSeria from './series/VolumeSeria'\r\nimport RsiSeria from './series/RsiSeria'\r\nimport CloseSeria from './series/CloseSeria'\r\n\r\nconst {\r\n  sma, rsi, bollingerBand,\r\n  fitWidth\r\n} = Ch;\r\nconst {\r\n  scaleTime,\r\n  crTimeInterval,\r\n  crTimeFormat,\r\n  crExtends\r\n} = chartFns;\r\n\r\nconst ITEMS_NUM = 150;\r\n\r\nconst MARGIN = {\r\n\tleft: 50,\r\n\tright: 80,\r\n\t//top: 10,\r\n\ttop: 0,\r\n\tbottom: 30\r\n};\r\n\r\nconst S = {\r\n\tEL: {\r\n\t\twidth: '98%'\r\n\t}\r\n};\r\n\r\nconst _xAccessor = d => d\r\n ? d.date\r\n : 0;\r\n\r\nconst HollowChart = (props) => {\r\n  const {\r\n\t\tid,\r\n\t\tstyle,\r\n    data,\r\n\t\twidth,\r\n\t\tresize,\r\n    timeframe\r\n\t} = props;\r\n\r\n  const sma20 = sma()\r\n\t\t.options({ windowSize: 20, stroke: 'green' })\r\n\t\t.merge((d, c) => {d.sma20 = c;})\r\n\t\t.accessor(d => d.sma20)\r\n  , sma50 = sma()\r\n    .options({ windowSize: 50, stroke: 'orange' })\r\n    .merge((d, c) => {d.sma50 = c;})\r\n    .accessor(d => d.sma50)\r\n\t, bb = bollingerBand()\r\n\t  .merge((d, c) => {d.bb = c;})\r\n\t\t.accessor(d => d.bb)\r\n\t, rsi14 = rsi()\r\n\t\t.options({ windowSize: 14 })\r\n\t\t.merge((d, c) => {d.rsi = c;})\r\n\t\t.accessor(d => d.rsi);\r\n\r\n  const calculatedData = sma50(sma20(bb(rsi14(data))))\r\n\r\n  /*\r\n  const xScaleProvider = discontinuousTimeScaleProvider\r\n    .inputDateAccessor(d => d.date);\r\n  const {\r\n  data: calcData,\r\n  xScale,\r\n  xAccessor,\r\n  displayXAccessor,\r\n} = xScaleProvider(calculatedData);\r\n*/\r\n\r\n  useEffect(() => {\r\n\t\tresize()\r\n\t}, [])\r\n\r\n  const timeInterval = crTimeInterval(timeframe)\r\n  , timeFormat = crTimeFormat(timeframe)\r\n  , xExtents = crExtends(calculatedData, timeframe, ITEMS_NUM);\r\n\r\n  return (\r\n\t\t<div\r\n\t\t\tid={id}\r\n\t\t\tstyle={{...S.EL, ...style }}\r\n\t\t>\r\n    <Ch.ChartCanvas\r\n\t\t\tratio={2}\r\n\t\t\twidth={width}\r\n      height={550}\r\n\t\t\tmargin={MARGIN}\r\n      type=\"hybrid\"\r\n\t\t\tseriesName=\"Item\"\r\n      data={calculatedData}\r\n\t\t\txAccessor={_xAccessor}\r\n\t\t\txScale={scaleTime()}\r\n\t\t\txExtents={xExtents}\r\n     >\r\n\t\t\t {RsiSeria({ id: 1, height: 100, width: width, rsi: rsi14 })}\r\n\t\t\t {CloseSeria({ id: 2, height: 100})}\r\n\t\t\t {CandleSeria({\r\n          id: 3, height: 300,\r\n          timeInterval, timeFormat,\r\n          sma20, sma50, bb\r\n        })}\r\n\t\t\t  {VolumeSeria({\r\n           id: 4, height: 120,\r\n           timeInterval, timeFormat\r\n        })}\r\n        {<Ch.CrossHairCursor />}\r\n\t\t </Ch.ChartCanvas>\r\n\t\t  </div>\r\n  );\r\n}\r\n\r\nexport default fitWidth(React.memo(HollowChart))\r\n"]}