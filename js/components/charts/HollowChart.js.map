{"version":3,"sources":["../../../src/components/charts/HollowChart.jsx"],"names":["sma","Ch","rsi","bollingerBand","fitWidth","scaleTime","chartFns","crTimeInterval","crTimeFormat","MARGIN","left","right","top","bottom","S","EL","width","_xAccessor","d","date","ITEMS_NUM","fromDate","toDate","xExtends","_crExtends","data","itemsNum","_max","length","_from","_to","slice","HollowChart","props","id","style","resize","timeframe","sma20","options","windowSize","stroke","merge","c","accessor","sma50","bb","rsi14","calculatedData","timeInterval","timeFormat","xExtents","height"],"mappings":"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","file":"HollowChart.js","sourcesContent":["import React, { useEffect } from 'react'\r\n\r\nimport Ch from './Ch'\r\nimport chartFns from './chartFns'\r\n\r\nimport CandleSeria from './series/CandleSeria'\r\nimport VolumeSeria from './series/VolumeSeria'\r\nimport RsiSeria from './series/RsiSeria'\r\nimport CloseSeria from './series/CloseSeria'\r\n\r\nconst {\r\n  sma, rsi, bollingerBand,\r\n  fitWidth\r\n} = Ch;\r\nconst {\r\n  scaleTime,\r\n  crTimeInterval,\r\n  crTimeFormat\r\n} = chartFns;\r\n\r\nconst MARGIN = {\r\n\tleft: 50,\r\n\tright: 80,\r\n\t//top: 10,\r\n\ttop: 0,\r\n\tbottom: 30\r\n};\r\n\r\nconst S = {\r\n\tEL: {\r\n\t\twidth: '98%'\r\n\t}\r\n};\r\n\r\nconst _xAccessor = d => d\r\n ? d.date\r\n : 0;\r\n\r\nconst ITEMS_NUM = 150;\r\nlet fromDate, toDate, xExtends = [];\r\nconst _crExtends = (data, itemsNum) => {\r\n  const _max = data.length - 1\r\n  , _from = _max < itemsNum\r\n       ? data[0].date\r\n       : data[_max-itemsNum].date\r\n  , _to = data.slice(-1)[0].date;\r\n  return _from === fromDate && _to === toDate\r\n    ? xExtends\r\n    : fromDate = _from, toDate = _to, (xExtends = [_from, _to]);\r\n};\r\n\r\nconst HollowChart = (props) => {\r\n  const {\r\n\t\tid,\r\n\t\tstyle,\r\n    data,\r\n\t\twidth,\r\n\t\tresize,\r\n    timeframe\r\n\t} = props;\r\n\r\n  const sma20 = sma()\r\n\t\t.options({ windowSize: 20, stroke: 'green' })\r\n\t\t.merge((d, c) => {d.sma20 = c;})\r\n\t\t.accessor(d => d.sma20)\r\n  , sma50 = sma()\r\n    .options({ windowSize: 50, stroke: 'orange' })\r\n    .merge((d, c) => {d.sma50 = c;})\r\n    .accessor(d => d.sma50)\r\n\t, bb = bollingerBand()\r\n\t  .merge((d, c) => {d.bb = c;})\r\n\t\t.accessor(d => d.bb)\r\n\t, rsi14 = rsi()\r\n\t\t.options({ windowSize: 14 })\r\n\t\t.merge((d, c) => {d.rsi = c;})\r\n\t\t.accessor(d => d.rsi);\r\n\r\n  const calculatedData = sma50(sma20(bb(rsi14(data))))\r\n\r\n  /*\r\n  const xScaleProvider = discontinuousTimeScaleProvider\r\n    .inputDateAccessor(d => d.date);\r\n  const {\r\n  data: calcData,\r\n  xScale,\r\n  xAccessor,\r\n  displayXAccessor,\r\n} = xScaleProvider(calculatedData);\r\n*/\r\n\r\n  useEffect(() => {\r\n\t\tresize()\r\n\t}, [])\r\n\r\n  const timeInterval = crTimeInterval(timeframe)\r\n  , timeFormat = crTimeFormat(timeframe)\r\n  , xExtents = _crExtends(calculatedData, ITEMS_NUM);\r\n\r\n  return (\r\n\t\t<div\r\n\t\t\tid={id}\r\n\t\t\tstyle={{...S.EL, ...style }}\r\n\t\t>\r\n    <Ch.ChartCanvas\r\n\t\t\tratio={2}\r\n\t\t\twidth={width}\r\n      height={550}\r\n\t\t\tmargin={MARGIN}\r\n      type=\"hybrid\"\r\n\t\t\tseriesName=\"Item\"\r\n      data={calculatedData}\r\n\t\t\txAccessor={_xAccessor}\r\n\t\t\txScale={scaleTime()}\r\n\t\t\txExtents={xExtents}\r\n     >\r\n\t\t\t {RsiSeria({ id: 1, height: 100, width: width, rsi: rsi14 })}\r\n\t\t\t {CloseSeria({ id: 2, height: 100})}\r\n\t\t\t {CandleSeria({\r\n          id: 3, height: 300,\r\n          timeInterval, timeFormat,\r\n          sma20, sma50, bb\r\n        })}\r\n\t\t\t  {VolumeSeria({\r\n           id: 4, height: 120,\r\n           timeInterval, timeFormat\r\n        })}\r\n        {<Ch.CrossHairCursor />}\r\n\t\t </Ch.ChartCanvas>\r\n\t\t  </div>\r\n  );\r\n}\r\n\r\nexport default fitWidth(HollowChart)\r\n"]}