/*! For license information please see app_2b91e4103e196fd312bc.js.LICENSE.txt */
"use strict";(self.webpackChunkTA_Chart=self.webpackChunkTA_Chart||[]).push([[524],{20:(t,e,n)=>{var o=n(540),r=Symbol.for("react.element"),i=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(t,e,n){var o,i={},c=null,h=null;for(o in void 0!==n&&(c=""+n),void 0!==e.key&&(c=""+e.key),void 0!==e.ref&&(h=e.ref),e)s.call(e,o)&&!l.hasOwnProperty(o)&&(i[o]=e[o]);if(t&&t.defaultProps)for(o in e=t.defaultProps)void 0===i[o]&&(i[o]=e[o]);return{$$typeof:r,type:t,key:c,ref:h,props:i,_owner:a.current}}e.Fragment=i,e.jsx=c,e.jsxs=c},338:(t,e,n)=>{var o=n(961);e.H=o.createRoot,o.hydrateRoot},341:(t,e,n)=>{var o=n(338),r=n(540);const i=(t,e)=>({...e,...t}),s=t=>(t||{}).current,a=(t,e)=>{t&&(t.current=e)},l=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];return t.bind(null,...n)},c=t=>{const e=(0,r.useRef)();return e.current||(e.current=t())},h=(0,r.createContext)({}),u=(0,r.createContext)(),d=(0,r.createContext)(),p=Math.random,f=()=>p()*(p()>.5?1:-1),g=(t,e)=>t>e?t+.2:e+.2,m=(t,e)=>t>e?e-.2:t-.2,y={INITIAL_PROVIDER_TITLE:"Data Provider (Random)",INITIAL_ITEM_TITLE:"Item",PROXY:"http://127.0.0.1:3000/proxy",RATE_LIMIT:3e3,DF_DATA:(()=>{const t=new Date,e=[];let n,o;for(let r=0;r<100;r++)o=1+f(),n=1+f(),e.push({date:t.getTime()-864e5*r,open:o,close:n,high:g(o,n),low:m(o,n)});return e.reverse()})(),DF_TIMEFRAME:"1d"},x=Object.freeze(y);let v=x.PROXY;const w={proxy:t=>t?(v=t,!0):v||"",clearProxy:()=>{v=""}},b={1:"#5f5f5f",2:"#e1e1e1",3:"#e8e0cb"},k={1:{},2:{backgroundColor:"#d4d4d4"},3:{backgroundColor:"#e8dcbe"}},S={getBgColor:t=>b[""+t],getHeaderStyle:t=>k[""+t],getDrawerStyle:t=>k[""+t]},C=S,D=t=>"string"==typeof t?t.charAt(0).toUpperCase()+t.slice(1):"";var A=n(848);const M="Logo of web app TA Chart v0.3.0",T=t=>{let{className:e,style:n,title:o=M}=t;return(0,A.jsx)("span",{className:e,style:n,title:o,children:(0,A.jsxs)("svg",{viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:"2",strokeWidth:"2",children:[(0,A.jsx)("rect",{ry:"1.8825414",rx:"194.14471",y:"1.434558",x:"19.176462",height:"12.460618",width:"10.85316",fill:"#8ecc2d",stroke:"#8ecc2d"}),(0,A.jsx)("rect",{ry:"1.87537",rx:"204.478",y:"16.639841",x:"8.8410215",height:"13.752699",width:"18.307165",fill:"#232f3b",stroke:"#232f3b"}),(0,A.jsx)("rect",{ry:"1.87537",rx:"204.478",y:"3.4229634",x:"2.5897937",height:"10.894996",width:"10.001963",fill:"#a487d4",stroke:"#a487d4"})]})})},_=Object.freeze({INITIAL:"INITIAL",LOADING:"LOADING",SUCCESS:"SUCCESS",FAILED:"FAILED"}),P=()=>({}),N=()=>(0,r.useReducer)(P)[1],j="#2f7ed8",$=(t,e,n)=>({backgroundColor:t,width:e+"%",transition:n,opacity:1}),E=(t,e,n)=>s(t)?(a(t,!1),$(e,0)):$(e,((t,e)=>t<0?0:t>=100?(a(e,!0),100):t)(n,t),"width 500ms linear"),F=t=>{let{color:e=j,completed:n}=t;const o=N(),i=(0,r.useRef)(!1),l=(0,r.useRef)(null);(0,r.useEffect)((()=>{s(i)&&a(l,setTimeout(o,800))})),(0,r.useEffect)((()=>()=>{clearTimeout(s(l))}),[]);const c=E(i,e,n);return(0,A.jsx)("div",{className:"progress-line",style:c})},I="#2f7ed8",L=(t,e)=>[t,e],O=(0,r.memo)((t=>{let{fetchStatus:e}=t;const[n,o]=(t=>t===_.LOADING?L(35,I):t===_.SUCCESS?L(100,I):t===_.FAILED?L(100,"#ed5813"):L(0,I))(e);return(0,A.jsx)(F,{color:o,completed:n})})),z=t=>{const[e,n]=(0,r.useState)((()=>!!t));return[e,(0,r.useCallback)((t=>{(t=>"boolean"==typeof t)(t)?n(t):n((t=>!t))}),[])]},R="drawer",W=`${R}-bt`,H=`${R}-span`,X=`${R}-svg`,Y=`${R}-modal`,U={position:"absolute",top:0,right:16},B={transform:"translateX(334px)",pointerEvents:"none"},Z={transform:"translate(0px, 0px)"},V={display:"none",opacity:0,zIndex:-1,transition:"opacity 195ms cubic-bezier(0.4, 0, 0.2, 1) 0ms"},q={display:"block",opacity:1,zIndex:1e3,transition:"opacity 225ms cubic-bezier(0.4, 0, 0.2, 1) 0ms"},G=t=>{let{btStyle:e,children:n}=t;const[o,i]=z();(0,r.useEffect)((()=>{document.body.style.overflowY=o?"hidden":"auto"}),[o]);const s=o?Z:B,a=o?q:V,l=o?i:void 0;return[(0,A.jsx)("button",{className:W,style:{...U,...e},"aria-label":"Open Drawer",onClick:i,children:(0,A.jsx)("span",{className:H,children:(0,A.jsxs)("svg",{className:X,focusable:"false",viewBox:"0 0 24 24","aria-hidden":"true",children:[(0,A.jsx)("path",{fill:"none",d:"M0 0h24v24H0z"}),(0,A.jsx)("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"})]})})},"bt-drawer"),(0,A.jsx)("div",{role:"presentation","aria-hidden":!o,className:Y,style:a,onClick:l},"wrapper"),(0,A.jsx)("aside",{className:R,style:s,children:(0,r.cloneElement)(n,{onCloseDrawer:i})},"aside")]},K=t=>{let{w:e,h:n=e,children:o,...r}=t;return(0,A.jsx)("svg",{...r,viewBox:`0 0 ${e} ${n}`,width:"100%",height:"100%",preserveAspectRatio:"none",xmlns:"http://www.w3.org/2000/svg",children:o})},J={padding:3},Q=t=>{let{style:e,tabIndex:n=-1,onClick:o}=t;return(0,A.jsx)("button",{className:"svg-close",style:e,tabIndex:n,onClick:o,children:(0,A.jsxs)(K,{w:"12",style:J,strokeWidth:"2",stroke:"#f44336",strokeLinecap:"round",children:[(0,A.jsx)("path",{d:"M 0,0 L 12,12"}),(0,A.jsx)("path",{d:"M 12,0 L 0,12"})]})})},tt="bt-triple",et=`${tt}__one`,nt=`${tt}__two`,ot=`${tt}__three`,rt={backgroundColor:"#1b2836"},it=(t,e)=>t===e?rt:void 0,st=t=>{let{style:e,tabIndex:n=-1,initialValue:o=1,oneC:i="One",twoC:s="Two",threeC:a="Three",onClick:c}=t;const[h,u]=(0,r.useState)(o),d=it(h,1),p=it(h,2),f=it(h,3),g=t=>{c(t),u(t)};return(0,A.jsxs)("div",{className:tt,style:e,children:[(0,A.jsx)("button",{type:"button",className:et,style:d,tabIndex:n,onClick:l(g,1),children:i}),(0,A.jsx)("button",{type:"button",className:nt,style:p,tabIndex:n,onClick:l(g,2),children:s}),(0,A.jsx)("button",{type:"button",className:ot,style:f,tabIndex:n,onClick:l(g,3),children:a})]})},at=t=>{t&&(document.body.style.backgroundColor=t)},lt={paddingTop:12,paddingBottom:8},ct={marginRight:8},ht={position:"relative",top:4},ut=t=>{let{onClose:e,setThemeId:n}=t;const{theme:o}=(0,r.useContext)(h);return(0,A.jsxs)("div",{className:"drawer__title",style:lt,children:[(0,A.jsx)(st,{style:ct,oneC:"GREY",twoC:"LIGHT",threeC:"SAND",onClick:t=>{at(o.getBgColor(t)),n(t)}}),(0,A.jsx)(Q,{style:ht,onClick:e})]})},dt=Date.now||(()=>new Date.getTime),pt=function(t,e){void 0===e&&(e=800);let n=0;return function(){const o=dt();if(o-n>e)return n=o,t(...arguments)}},ft=(t,e,n)=>(0,r.useCallback)(pt(t,n),e||[]),gt=t=>{let{style:e,pages:n,pageCurrent:o,onPrevPage:i,onNextPage:s}=t;return n.map(((t,n)=>(0,r.cloneElement)(t,{style:e,pageCurrent:o,pageNumber:n+1,onPrevPage:i,onNextPage:s})))},mt={position:"absolute",overflow:"hidden"},yt={display:"flex",flexFlow:"row nowrap",alignItems:"flex-start",overflowX:"hidden",transition:"all 750ms ease-out"},xt=t=>parseInt(t.style.transform.substr(11).replace("px","").replace(")",""),10),vt=t=>{let{pageWidth:e=330,maxPages:n=3,initialPageId:o,pageRouter:i}=t;const l=(0,r.useRef)(),c=(0,r.useRef)(0),h=(0,r.useRef)({width:n*e+"px"}),u=(0,r.useRef)({width:`${e}px`}),[d,p]=(0,r.useState)({pageCurrent:1,pages:[(0,r.createElement)(i[o],{key:o})]}),{pageCurrent:f,pages:g}=d,m=ft((()=>{p((t=>(t.pageCurrent>1&&(t.pageCurrent-=1,a(c,-1)),{...t})))})),y=ft((t=>{p((e=>{const{pages:n}=e,o=((t,e)=>t.findIndex((t=>t.key===e)))(n,t);var s,l;return e.pages=-1!==o?(l=o,[(s=n)[0],s.splice(l,1)[0],...s.slice(1)]):((t,e)=>[t[0],e,...t.slice(1)])(n,(0,r.createElement)(i[t],{key:t})),e.pageCurrent+=1,a(c,1),{...e}}))})),x=((t,e,n)=>{const o=s(e),r=s(n);let i=0;if(0!==r&&o){const e=xt(o);i=1===r?e-t:e+t,a(n,0)}else 0===r&&o&&(i=xt(o));return{transform:`translateX(${i}px)`}})(e,l,c),v={...s(h),...yt,...x};return(0,A.jsx)("div",{style:mt,children:(0,A.jsx)("div",{ref:l,style:v,children:(0,A.jsx)(gt,{style:s(u),pages:g,pageCurrent:f,onPrevPage:m,onNextPage:y})})})},wt=()=>{},bt=function(t,e){void 0===t&&(t=wt),void 0===e&&(e=0);const n=(0,r.useRef)(null);return(0,r.useCallback)((o=>{if(0===e)return void t(o);const r=n.current,{timeStamp:i}=o;(null==r||i-r>e)&&(t(o),n.current=i)}),[e,t])},kt=Array.isArray,St=t=>kt(t)?t[0]?t[1]:"":t||"",Ct=(t,e)=>{const n=St(t),o=St(e);return n?o?`${n} ${o}`:n:o||void 0},Dt=Array.isArray,At=t=>Dt(t)?t[0]?t[1]:void 0:t||void 0,Mt=(t,e)=>{const n=At(t),o=At(e);return n?o?{...n,...o}:n:o||void 0},Tt={textDecoration:"underline"},_t=t=>{let{className:e,style:n,caption:o="",accessKey:r,children:i}=t;const s=((t,e)=>t?e.toLowerCase().indexOf(t):-1)(r,o),a=-1===s?o:((t,e)=>{const n=e.substring(0,t),o=e.substring(t,t+1),r=e.substring(t+1);return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("span",{children:n}),(0,A.jsx)("span",{style:Tt,children:o}),(0,A.jsx)("span",{children:r})]})})(s,o);return(0,A.jsxs)("span",{className:e,style:n,children:[a,i]})},Pt="bt-flat",Nt=`${Pt}__div`,jt=`${Pt}__span`,$t={color:"#607d8b"},Et=t=>{let{refEl:e,className:n,style:o,clDiv:i=Nt,clCaption:s,isPrimary:a,title:l="",caption:c,accessKey:h,timeout:u=500,onClick:d,children:p}=t;const f=(0,r.useRef)(),g=bt(d,u);(0,r.useImperativeHandle)(e,(()=>({focus:()=>{const t=f.current;t&&t.focus()}})),[]);const m=Ct(Pt,n),y=Ct(jt,s),x=Mt(o,[a,$t]),v=((t,e)=>e?`${t} [${e}]`:t)(l,h);return(0,A.jsx)("button",{ref:f,className:m,style:x,accessKey:h,tabIndex:0,title:v,onClick:g,children:(0,A.jsxs)("div",{className:i,children:[(0,A.jsx)(_t,{className:y,caption:c,accessKey:h}),p]})})},Ft="drawer__list-bt",It={listStyleType:"none"},Lt=t=>{let{style:e,onNextPage:n}=t;return(0,A.jsxs)("ul",{style:{...It,...e},children:[(0,A.jsx)("li",{children:(0,A.jsx)(Et,{className:Ft,caption:"App Settings",onClick:()=>n("p1-1")})}),(0,A.jsx)("li",{children:(0,A.jsx)(Et,{className:Ft,caption:"AltCoins",onClick:()=>n("p1-2")})})]})},Ot=t=>{let{onClick:e}=t;return(0,A.jsx)(Et,{className:"drawer__list-bt",caption:"< Menu",onClick:e})},zt=t=>{let{item:e,propCaption:n}=t;return(0,A.jsx)("span",{children:e[n]})},Rt="zhn-select",Wt=`${Rt}__input`,Ht=`${Rt}__spinner`,Xt=`${Ht}--failed`,Yt=`${Rt}__bt-arrow`,Ut=`${Rt}__input__hr`,Bt=`${Rt}__options`,Zt=`${Bt}__div`,Vt=`${Rt}__row`,qt=`${Vt}--active`,Gt=`${Rt}__footer`,Kt=`${Gt}__index`,Jt=`${Gt}__bts`,Qt=`${Gt}--margin`,te=(t,e)=>t?-1!==(""+t).indexOf("%")?{...e,width:t}:{...e,width:t+"px"}:null,ee=t=>{let{className:e="",style:n,caption:o="",onClick:r,...i}=t;return(0,A.jsx)("button",{className:`zhn-bt-circle2 ${e}`,style:n,onClick:r,...i,children:(0,A.jsx)("div",{children:o})})},ne={backgroundColor:"#949ab4"},oe=t=>{let{refIndexActive:e,indexActiveOption:n,nFiltered:o,nAll:r,onStepDown:i,onStepUp:s,onClear:a}=t;return(0,A.jsxs)("div",{className:`${Gt} not-selected`,children:[(0,A.jsxs)("span",{className:Kt,children:[(0,A.jsx)("span",{ref:e,children:n}),(0,A.jsxs)("span",{children:[": ",o,": ",r]})]}),(0,A.jsxs)("span",{className:Jt,children:[(0,A.jsx)(ee,{className:Qt,style:ne,caption:"Dn",onClick:i}),(0,A.jsx)(ee,{className:Qt,style:ne,caption:"Up",onClick:s}),(0,A.jsx)(ee,{style:ne,caption:"CL",onClick:a})]})]})},re={display:"block"},ie={display:"none"},se=t=>{let{refOptionsElement:e,refIndexElement:n,optionsStyle:o,width:r,isShowOption:i,indexActiveOption:s,nFiltered:a,nAll:l,onStepUp:c,onStepDown:h,onClear:u,children:d}=t;const p=te(r,i?re:ie);return(0,A.jsxs)("div",{className:Bt,style:p,"data-scrollable":!0,children:[(0,A.jsx)("div",{ref:e,className:Zt,style:{...o,...p},children:d}),(0,A.jsx)(oe,{refIndexActive:n,indexActiveOption:s,nAll:l,nFiltered:a,onStepUp:c,onStepDown:h,onClear:u})]})},ae=t=>{let{options:e,indexActiveOption:n,propCaption:o,ItemOptionComp:r,onClick:i}=t;return e.map(((t,e)=>(0,A.jsx)("div",{role:"option","aria-selected":n===e,tabIndex:"-1",className:Vt,"data-index":e,onClick:e=>i(t,e),children:(0,A.jsx)(r,{item:t,propCaption:o})},e)))},le={color:"#1b75bb"},ce={color:"#858585"},he=t=>{let{isShowOption:e,onClick:n}=t;return(0,A.jsx)("button",{className:Yt,type:"button",tabIndex:"-1","aria-label":"Toggle suggestions",onClick:n,children:(0,A.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",style:e?le:ce,children:(0,A.jsx)("path",{d:"M 3,6 L 10,12.5 M 10,12.5 L 17,6"})})})},ue=(t,e,n,o)=>{const{isLoading:r,isLoadingFailed:i,placeholder:s,optionName:a="",onLoadOption:l}=t,{optionNames:c}=e;return r||i?r?[`Loading ${c}...`,(0,A.jsx)("span",{className:Ht,"data-loader":"circle"})]:i?[`Loading ${c} Failed`,(0,A.jsx)(ee,{className:Xt,"data-loader":"circle-failed",onClick:l})]:[]:[s||`Select ${a}...`,(0,A.jsx)(he,{isShowOption:n,onClick:o})]},de="From input:",pe=(t,e,n,o)=>{const r=((t,e,n)=>{const o=e.toLowerCase();return(t||[]).filter((t=>-1!==t[n].toLowerCase().indexOf(o)))})(e,t,n);return 0===r.length&&r.push(((t,e,n)=>{const o=String(t).replace(de,"").trim(),r=n?`${de} ${o}`:"No results found";return{[e]:r,value:"noresult",inputValue:o}})(t,n,o)),r},fe=(t,e)=>{const n=(0,r.useRef)(t);return(0,r.useMemo)((()=>[t=>{n.current=t},()=>void 0===n.current?e:n.current]),[])},ge=t=>"number"==typeof t&&t-t==0,me=t=>{const{dataset:e}=t,{index:n}=e||{};return Number(n)},ye=(t,e)=>(0,r.useMemo)((()=>[e=>{if(e){e.classList.add(qt);const n=me(e),o=s(t);o&&ge(n)&&(o.textContent=n+1)}},t=>{const n=t||e();n&&n.classList.remove(qt)}]),[]),xe=t=>(t.children||{}).length,ve=()=>{const t=(0,r.useRef)(),e=(0,r.useRef)(),[n,o]=fe(0),i=(0,r.useMemo)((()=>()=>((s(t)||{}).childNodes||[])[o()]),[]),[a,l]=ye(e,i);return[t,e,n,o,i,a,l,...(0,r.useMemo)((()=>[()=>{const e=i();if(e){l(e);const r=s(t);n(o()+1),o()>=xe(r)&&(n(0),r.scrollTop=0);const c=i();a(c);const h=c.offsetTop,u=r.scrollTop;h-u>70&&(r.scrollTop+=h-u-70)}},()=>{const e=i();if(e){l(e);const r=s(t);if(n(o()-1),o()<0){n(xe(r)-1);const t=i();r.scrollTop=t.offsetTop}const c=i();a(c);const h=c.offsetTop,u=r.scrollTop;h-u<70&&(r.scrollTop-=70-(h-u))}}]),[])]},we=[],be=t=>{let{optionName:e,optionNames:n,options:o=we}=t;return{value:"",initialOptions:o,options:o,optionNames:n||e||""}},ke=()=>{},Se=t=>{const{style:e,width:n,optionsStyle:o,propCaption:i="caption",ItemOptionComp:s=zt,isWithInput:a=!1,onSelect:l=ke}=t,c=(0,r.useRef)(),[h,u]=(0,r.useState)((()=>be(t))),{value:d,options:p,initialOptions:f}=h,[g,m]=z(!1),[y,x,v,w,b,k,S,C,D]=ve(),M=(0,r.useCallback)((()=>{S(),u((()=>be(t))),m(!1),v(0),l()}),[t.options,l]),T=(0,r.useCallback)(((t,e)=>{S(),v(me(e.currentTarget)),m(!1),u((e=>({...e,value:t[i]}))),l(t)}),[]),_=(0,r.useMemo)((()=>(0,A.jsx)(ae,{options:p,indexActiveOption:w(),propCaption:i,ItemOptionComp:s,onClick:T})),[p]);(0,r.useEffect)((()=>{if(g){const t=b();k(t),(t=>{if(t){const{offsetTop:e}=t,n=t.parentElement,{scrollTop:o}=n;e-o>70&&(n.scrollTop+=e-o-70),e-o<0&&(n.scrollTop=0)}})(t)}}),[g]),(0,r.useEffect)((()=>{t.options!==f&&M()}),[t.options]);const P=w(),N=te(n,e),[j,$]=ue(t,h,g,m),[E,F]=((t,e)=>[t[0]&&"noresult"!==t[0].value?t.length:0,e?e.length:0])(p,f);return(0,A.jsxs)("div",{className:Rt,style:N,children:[(0,A.jsx)("input",{ref:c,className:Wt,type:"text",name:"select",autoCorrect:"off",autoCapitalize:"off",spellCheck:!1,value:d,placeholder:j,onChange:t=>{const e=t.target.value,n=e.length,o=d.length;n!==o&&(0!==w()&&(S(),v(0)),u((t=>({...t,value:e,options:pe(e,n>o?p:f,i,a)}))),m(!0))},onKeyDown:t=>{switch(t.keyCode){case 13:{const t=w();if(ge(t)){const e=p[t];e&&e[i]&&(l(((t,e,n)=>"noresult"!==t.value?t:n?{[e]:"From Input",value:t.inputValue}:void 0)(e,i,a)),m(!1),u((t=>({...t,value:e[i]}))))}else l();break}case 27:case 46:t.preventDefault(),g?m(!1):M();break;case 40:g?(t.preventDefault(),C()):m(!0);break;case 38:g&&(t.preventDefault(),D());break;default:return}}}),$,(0,A.jsx)("hr",{className:Ut}),(0,A.jsx)(se,{refOptionsElement:y,refIndexElement:x,optionsStyle:o,width:n,isShowOption:g,indexActiveOption:P,nFiltered:E,nAll:F,onStepUp:D,onStepDown:C,onClear:M,children:_})]})},Ce={display:"flex",alignItems:"center",marginRight:5,marginTop:5,marginLeft:5,marginBottom:5},De={marginLeft:12,marginRight:12},Ae={color:"#1b75bb",display:"inline-block",textAlign:"right",width:100,paddingRight:5,fontSize:"16px",fontWeight:"bold",userSelect:"none"},Me={display:"none"},Te=t=>{let{isShowLabels:e=!0,caption:n="",captionStyle:o,...r}=t;const i=(t=>t&&-1===t.indexOf(":")?`${t}:`:t)(n),[s,a]=function(t){return void 0===t&&(t=!0),t?[{...Ce},{...Ae}]:[{...Ce,...De},{...Ae,...Me}]}(e),l={width:270,...r,optionName:e?"":n.replace(":","")};return(0,A.jsxs)("div",{style:s,children:[(0,A.jsx)("span",{style:{...a,...o},children:i}),(0,A.jsx)(Se,{...l})]})},_e=t=>{let{style:e,exchanges:n,onSelectExchange:o,isMarkets:r={},markets:i,onSelectMarket:s,timeframes:a,onSelectTimeframe:l}=t;return(0,A.jsxs)("div",{style:e,children:[(0,A.jsx)(Te,{isShowLabels:!1,placeholder:"Exchanges",options:n,onSelect:o}),(0,A.jsx)(Te,{isShowLabels:!1,placeholder:"Time Frames (Default: 1d)",options:a,onSelect:l}),(0,A.jsx)(Te,{isShowLabels:!1,placeholder:"Markets",isLoading:r.loading,isLoadingFailed:r.failed,options:i,onSelect:s})]})},Pe="MARKET_LOADING",Ne="MARKET_LOADED",je="MARKET_LOADING_FAIL",$e="EXCHANGES_SET",Ee="EXCHANGE_SET",Fe="PAIR_SET",Ie=(t,e)=>{switch(e.type){case Pe:return{...t,isMarkets:{loading:!0,failed:!1}};case Ne:return{...t,exchange:e.exchange,markets:e.markets,isMarkets:{loading:!1,failed:!1}};case je:return{...t,isMarkets:{loading:!1,failed:!0}};case $e:return{...t,exchanges:e.exchanges};case Ee:return{...t,exchange:e.exchange,pair:void 0};case Fe:return{...t,pair:e.pair};default:throw new TypeError("Not existed action "+e.type)}},Le={exchange:"",pair:"",isMarkets:{loading:!1,failed:!1},exchanges:[],markets:[]},Oe=t=>{let{dispatch:e,exchImpl:n,exchange:o,proxy:r}=t;e({type:Pe}),n.fetchMarkets(r).then((t=>{e({type:Ne,exchange:o,markets:t})})).catch((t=>{e({type:je}),console.log(t.message)}))},ze=t=>{let{exchImpl:e,exchange:n,pair:o,timeframe:r,dataAction:i,proxy:s}=t;i.loading();const{v:a,tf:l}="object"==typeof r?r:{v:r,tf:r};e.fetchOHLCV(o,a,s).then((t=>{0!==t.length&&i.loadData({providerTitle:n,itemTitle:o,data:t,timeframe:l})})).catch((t=>{i.loadFailed(),console.log(t.message)}))},Re=t=>fetch(t).then((t=>{const{status:e}=t;if(e>=200&&e<400)return t.json();throw new Error("Response is incorrect: "+e)})),We=Array.isArray,He=(t,e)=>{const n=e?(t||{})[e]:t;return We(n)?n:[]},Xe=(t,e)=>t.caption<e.caption?-1:t.caption>e.caption?1:0,Ye=t=>"object"==typeof t,Ue="https://api.binance.com/api/v3",Be=`${Ue}/exchangeInfo`,Ze=`${Ue}/klines`,Ve={fetchMarkets:()=>Re(Be).then((t=>He(t,"symbols").reduce(((t,e)=>{const{baseAsset:n,quoteAsset:o,status:r}=e||{};return"TRADING"===r&&t.push({caption:`${n}/${o}`,value:`${n}${o}`}),t}),[]).sort(Xe))),getTimeframes:()=>[{caption:"1m",value:"1m"},{caption:"3m",value:"3m"},{caption:"5m",value:"5m"},{caption:"15m",value:"15m"},{caption:"30m",value:"30m"},{caption:"1h",value:"1h"},{caption:"2h",value:"2h"},{caption:"4h",value:"4h"},{caption:"8h",value:"8h"},{caption:"12h",value:"12h"},{caption:"1d",value:"1d"},{caption:"3d",value:"3d"},{caption:"1w",value:"1w"},{caption:"1M",value:"1M"}],fetchOHLCV:(t,e)=>Re(((t,e)=>`${Ze}?symbol=${t}&interval=${e}`)(t,e)).then((t=>He(t).reduce(((t,e)=>(Ye(e)&&t.push({date:e[0],open:parseFloat(e[1]),high:parseFloat(e[2]),low:parseFloat(e[3]),close:parseFloat(e[4]),volume:parseFloat(e[5])}),t)),[])))},qe="https://www.bitstamp.net/api/v2",Ge=`${qe}/trading-pairs-info/`,Ke=`${qe}/ohlc`,Je={binance:Ve,bitstamp:{fetchMarkets:()=>Re(`${Ge}`).then((t=>He(t).reduce(((t,e)=>{const{trading:n,name:o,url_symbol:r}=e||{};if("Enabled"===n)return t.push({caption:o,value:r}),t}),[]))),getTimeframes:()=>[{caption:"1m",value:{v:"60",tf:"1m"}},{caption:"3m",value:{v:"180",tf:"3m"}},{caption:"5m",value:{v:"300",tf:"5m"}},{caption:"15m",value:{v:"900",tf:"15m"}},{caption:"30m",value:{v:"1800",tf:"30m"}},{caption:"1h",value:{v:"3600",tf:"1h"}},{caption:"2h",value:{v:"7200",tf:"2h"}},{caption:"4h",value:{v:"14400",tf:"4h"}},{caption:"10h",value:{v:"21600",tf:"10h"}},{caption:"12h",value:{v:"43200",tf:"12h"}},{caption:"1d",value:{v:"86400",tf:"1d"}},{caption:"3d",value:{v:"259200",tf:"3d"}}],fetchOHLCV:(t,e)=>Re(((t,e)=>`${Ke}/${t}?step=${e}&limit=300`)(t,e)).then((t=>He((t||{}).data,"ohlc").reduce(((t,e)=>(Ye(e)&&t.push({date:1e3*parseFloat(e.timestamp),open:parseFloat(e.open),high:parseFloat(e.high),low:parseFloat(e.low),close:parseFloat(e.close),volume:parseFloat(e.volume)}),t)),[])))}},Qe=[{caption:"Binance",value:"binance"},{caption:"Bitstamp",value:"bitstamp"}],tn="1d",en={height:400},nn={paddingLeft:8},on=(t,e)=>"binance"===t&&"1m"===e,rn=(t,e)=>t.isRequireProxy&&!e,sn=t=>{let{style:e,onPrevPage:n}=t;const{appSettings:o,dataAction:i,onLiveUpdate:s,onStopUpdate:a}=(0,r.useContext)(h),{isLiveUpdating:l}=(0,r.useContext)(d),[c,u]=(0,r.useReducer)(Ie,Le),{exchange:p,pair:f,isMarkets:g,exchanges:m,markets:y}=c,[x,v]=(0,r.useState)([]),[w,b]=(0,r.useState)(tn),k=(0,r.useRef)(null);(0,r.useEffect)((()=>{u({type:$e,exchanges:Qe})}),[]),(0,r.useEffect)((()=>{if(p){k.current=(t=>Je[t])(p);const t=k.current,e=o.proxy();if(rn(t,e))return;b(tn),v(t.getTimeframes()),Oe({dispatch:u,exchange:p,exchImpl:t,proxy:e})}}),[p]),(0,r.useEffect)((()=>{if(f&&w){const t=k.current,e=o.proxy();if(rn(t,e))return;ze({exchange:p,pair:f,timeframe:w,exchImpl:t,dataAction:i,proxy:e})}}),[f,w]);return(0,A.jsxs)("div",{style:{...en,...e},children:[(0,A.jsx)(Ot,{onClick:n}),(0,A.jsx)(_e,{exchanges:m,onSelectExchange:t=>{t&&t.value&&u({type:Ee,exchange:t.value})},isMarkets:g,markets:y,onSelectMarket:t=>{u({type:Fe,pair:t&&t.value||void 0})},timeframes:x,onSelectTimeframe:t=>{b(t&&t.value||tn)}}),on(p,w)&&(0,A.jsx)("div",{style:nn,children:(0,A.jsx)(Et,{caption:l?"Stop Updating":"Live Updating 1min",onClick:l?a:()=>s(f)})})]})},an={display:"inline",color:"green",height:26,width:40,paddingLeft:5,margin:"0 5px",fontSize:"16px",fontWeight:"bold",border:"medium none",outline:"medium none",background:"transparent none repeat scroll 0 0",backgroundColor:"#e1e1cb"},ln="text",cn="off",hn=()=>{},un=t=>{let{refEl:e,initValue:n,style:o,spellCheck:i,placeholder:s,type:a=ln,maxLenght:l=125,onEnter:c=hn}=t;const h=(0,r.useRef)(),[u,d]=(0,r.useState)((()=>null!=n?n:"")),p=(0,r.useCallback)((t=>{const{value:e}=t.target;e.length<=l&&d(e)}),[l]),f=(0,r.useCallback)((t=>{switch(t.keyCode){case 27:case 46:t.preventDefault(),d("");break;case 13:c(t.target.value);break;default:return}}),[]);(0,r.useImperativeHandle)(e,(()=>({getValue:()=>(h.current||{}).value,setValue:t=>d(t)})),[]);const g=i?"on":cn,m=!!i;return(0,A.jsx)("input",{ref:h,style:{...an,...o},type:a,name:ln,autoCapitalize:cn,autoComplete:cn,autoCorrect:g,spellCheck:m,translate:"false",value:u,placeholder:s,maxLength:l,onChange:p,onKeyDown:f})},dn={paddingLeft:4},pn={color:"#265782",display:"inline-block",padding:"0 0 4px 8px",fontWeight:"bold"},fn={display:"block",width:"92%",height:32,padding:"8px 0 8px 4px"},gn={float:"right",padding:"6px 22px 0 0"},mn="http://127.0.0.1",yn=t=>!!(t=>"string"==typeof t)(t)&&-1!==t.indexOf(mn),xn=t=>{let{style:e,onPrevPage:n}=t;const{appSettings:o}=(0,r.useContext)(h),i=(0,r.useRef)(),[a,l]=(0,r.useState)(0),c=o.proxy();return(0,A.jsxs)("div",{style:{...dn,...e},children:[(0,A.jsx)(Ot,{onClick:n}),(0,A.jsxs)("div",{children:[(0,A.jsx)("span",{style:pn,children:"Local Proxy Server"}),(0,A.jsx)(un,{refEl:i,style:fn,initValue:c,placeholder:mn,onEnter:t=>{yn(t)?o.proxy(t):s(i).setValue("")}},a),(0,A.jsxs)("div",{style:gn,children:[(0,A.jsx)(Et,{caption:"Clear",onClick:()=>{o.clearProxy(),l((t=>t+1))}}),(0,A.jsx)(Et,{caption:"Apply",onClick:()=>{const t=s(i),e=t.getValue();yn(e)?o.proxy(e):t.setValue("")}})]})]})]})},vn={p1:Lt,"p1-1":xn,"p1-2":sn},wn=t=>{let{onCloseDrawer:e}=t;const{theme:n,setThemeId:o}=(0,r.useContext)(h),i=(0,r.useContext)(u),s=n.getDrawerStyle(i);return(0,A.jsxs)("div",{className:"drawer__list",style:s,children:[(0,A.jsx)(ut,{setThemeId:o,onClose:e}),(0,A.jsx)(vt,{pageRouter:vn,initialPageId:"p1",maxPages:4})]})},bn=t=>(0,A.jsx)(G,{children:(0,A.jsx)(wn,{...t})}),kn={position:"relative",top:6,left:8,display:"inline-block",verticalAlign:"middle",cursor:"pointer"},Sn={color:"#80c040",display:"inline-block",paddingLeft:6,fontSize:16,fontWeight:"bold"},Cn=t=>{let{spinnerCn:e,onStopUpdate:n}=t;const{isLiveUpdating:o,sec:i}=(0,r.useContext)(d);return o&&(0,A.jsxs)("button",{style:kn,onClick:n,children:[(0,A.jsx)("span",{className:e,"data-loader":"circle"}),(0,A.jsx)("span",{style:Sn,children:i})]})},Dn="header",An=`${Dn}__logo-notes`,Mn=`${Dn}__title-gap`,Tn=`${Dn}__title`,_n=`${Dn}__spinner`,Pn=t=>{let{text:e,is:n}=t;return(0,A.jsxs)("span",{className:Tn,children:[D(e),!n&&(0,A.jsx)("span",{children:": "})]})},Nn=t=>{let{fetchStatus:e,providerTitle:n="",itemTitle:o="",timeframe:i="",isLiveUpdating:s,...a}=t;const{theme:l,onStopUpdate:c}=(0,r.useContext)(h),d=(0,r.useContext)(u),p=l.getHeaderStyle(d);return(0,A.jsxs)("header",{className:Dn,style:p,children:[(0,A.jsx)(O,{fetchStatus:e}),(0,A.jsx)(T,{className:An}),(0,A.jsx)("span",{className:Mn}),(0,A.jsx)(Pn,{text:n}),(0,A.jsx)(Pn,{text:o}),(0,A.jsx)(Pn,{text:i,is:!0}),(0,A.jsx)(Cn,{spinnerCn:_n,onStopUpdate:c}),(0,A.jsx)(bn,{...a})]})},jn=Math.sqrt,$n=(t,e)=>{let n,o;if(void 0===e)for(const e of t)null!=e&&(void 0===n?e>=e&&(n=o=e):(n>e&&(n=e),o<e&&(o=e)));else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(void 0===n?i>=i&&(n=o=i):(n>i&&(n=i),o<i&&(o=i)))}return[n,o]},En=(t,e)=>{let n;if(void 0===e)for(const e of t)null!=e&&(n<e||void 0===n&&e>=e)&&(n=e);else{let o=-1;for(let r of t)null!=(r=e(r,++o,t))&&(n<r||void 0===n&&r>=r)&&(n=r)}return n},Fn=(t,e)=>{let n;if(void 0===e)for(const e of t)null!=e&&(n>e||void 0===n&&e>=e)&&(n=e);else{let o=-1;for(let r of t)null!=(r=e(r,++o,t))&&(n>r||void 0===n&&r>=r)&&(n=r)}return n},In=(t,e)=>{let n=0,o=0;if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(++n,o+=e);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(i=+i)>=i&&(++n,o+=i)}if(n)return o/n},Ln=Math.max,On=Math.ceil,zn=t=>t.length,Rn=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return(t=>{let e=t.length;if(!e)return[];let n,o,r=-1,i=Fn(t,zn),s=new Array(i);for(;++r<i;)for(n=-1,o=s[r]=new Array(e);++n<e;)o[n]=t[n][r];return s})(e)},Wn=(t,e)=>null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN,Hn=()=>0,Xn=t=>{let e,n,o;2!==t.length?(e=Wn,n=(e,n)=>Wn(t(e),n),o=(e,n)=>t(e)-n):(e=t===Wn?t:Hn,n=t,o=t);const r=function(t,o,r,i){if(void 0===r&&(r=0),void 0===i&&(i=t.length),r<i){if(0!==e(o,o))return i;do{const e=r+i>>>1;n(t[e],o)<0?r=e+1:i=e}while(r<i)}return r};return{left:r,center:function(t,e,n,i){void 0===n&&(n=0),void 0===i&&(i=t.length);const s=r(t,e,n,i-1);return s>n&&o(t[s-1],e)>-o(t[s],e)?s-1:s},right:function(t,o,r,i){if(void 0===r&&(r=0),void 0===i&&(i=t.length),r<i){if(0!==e(o,o))return i;do{const e=r+i>>>1;n(t[e],o)<=0?r=e+1:i=e}while(r<i)}return r}}},Yn=Xn(Wn).right,Un=Math.max,Bn=Math.sqrt,Zn=Math.floor,Vn=Math.pow,qn=Math.log10,Gn=Math.round,Kn=Bn(50),Jn=Bn(10),Qn=Bn(2);function to(t,e,n){const o=(e-t)/Un(0,n),r=Zn(qn(o)),i=o/Vn(10,r),s=i>=Kn?10:i>=Jn?5:i>=Qn?2:1;let a,l,c;return r<0?(c=Vn(10,-r)/s,a=Gn(t*c),l=Gn(e*c),a/c<t&&++a,l/c>e&&--l,c=-c):(c=Vn(10,r)*s,a=Gn(t/c),l=Gn(e/c),a*c<t&&++a,l*c>e&&--l),l<a&&.5<=n&&n<2?to(t,e,2*n):[a,l,c]}function eo(t,e,n){return to(t=+t,e=+e,n=+n)[2]}function no(t,e,n){n=+n;const o=(e=+e)<(t=+t),r=o?eo(e,t,n):eo(t,e,n);return(o?-1:1)*(r<0?1/-r:r)}const oo=t=>t;function ro(){let t=oo;const e=t=>t.length;function n(){for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];const i=o.length;if(!i)return[];const s=Fn(o,e),a=new Array(s);for(let e=-1;++e<s;){for(let t=-1,n=a[e]=new Array(i);++t<i;)n[t]=o[t][e];a[e]=t.apply(this,a[e])}return a}return n.combine=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],n):t},n}const io=Array.isArray,so=function(t){void 0===t&&(t=[]);const e=io(t)?t:[t],n=e.length;return(t,o)=>{if(0===n)return null==t?o:t;let r=0;for(;null!=t&&r<n;)t=t[e[r++]];return r===n?t:o}},ao=t=>"function"==typeof t?t:()=>t;function lo(){let t,e,n,o,r=10,i=()=>{},s=0,a=function(a){const l=n||so(e),c=ao(r).apply(this,arguments),h=a.slice(s,c+s).map(l);let u=0;const d=ao(t);return a.map(((t,e)=>e<s+c-1?d(l(t),e,o):(e>=s+c&&(h.shift(),h.push(l(t,e))),i(h,e,u++,o))))};return a.undefinedValue=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],a):t},a.windowSize=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],a):r},a.misc=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],a):o},a.accumulator=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],a):i},a.skipInitial=function(){return arguments.length?(s=arguments.length<=0?void 0:arguments[0],a):s},a.sourcePath=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],a):e},a.source=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],a):n},a}const co=t=>{switch(t){default:case"Solid":return"none";case"ShortDash":return"6, 2";case"ShortDash2":return"6, 3";case"ShortDot":return"2, 2";case"ShortDashDot":return"6, 2, 2, 2";case"ShortDashDotDot":return"6, 2, 2, 2, 2, 2";case"Dot":return"2, 6";case"Dash":return"4, 6";case"LongDash":return"16, 6";case"DashDot":return"8, 6, 2, 6";case"LongDashDot":return"16, 6, 2, 6";case"LongDashDotDot":return"16, 6, 2, 6, 2, 6"}},ho=t=>{const e=co(t).split(",");return 1===e.length?[]:e.map((t=>Number(t)))};function uo(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function po(t,e){var n=Object.create(t.prototype);for(var o in e)n[o]=e[o];return n}function fo(){}let go=.7,mo=1/go,yo="\\s*([+-]?\\d+)\\s*",xo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",vo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",wo=/^#([0-9a-f]{3,8})$/,bo=new RegExp(`^rgb\\(${yo},${yo},${yo}\\)$`),ko=new RegExp(`^rgb\\(${vo},${vo},${vo}\\)$`),So=new RegExp(`^rgba\\(${yo},${yo},${yo},${xo}\\)$`),Co=new RegExp(`^rgba\\(${vo},${vo},${vo},${xo}\\)$`),Do=new RegExp(`^hsl\\(${xo},${vo},${vo}\\)$`),Ao=new RegExp(`^hsla\\(${xo},${vo},${vo},${xo}\\)$`);const Mo={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},To=Math.min,_o=Math.max,Po=Math.pow,No=Math.round,jo=t=>(t=(t||0)%360)<0?t+360:t,$o=t=>_o(0,To(1,t||0)),Eo=(t,e,n)=>255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e);function Fo(){return this.rgb().formatHex()}function Io(){return this.rgb().formatRgb()}function Lo(t){let e,n;return t=(t+"").trim().toLowerCase(),(e=wo.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?Oo(e):3===n?new Wo(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?zo(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?zo(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=bo.exec(t))?new Wo(e[1],e[2],e[3],1):(e=ko.exec(t))?new Wo(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=So.exec(t))?zo(e[1],e[2],e[3],e[4]):(e=Co.exec(t))?zo(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Do.exec(t))?Zo(e[1],e[2]/100,e[3]/100,1):(e=Ao.exec(t))?Zo(e[1],e[2]/100,e[3]/100,e[4]):Mo.hasOwnProperty(t)?Oo(Mo[t]):"transparent"===t?new Wo(NaN,NaN,NaN,0):null}function Oo(t){return new Wo(t>>16&255,t>>8&255,255&t,1)}function zo(t,e,n,o){return o<=0&&(t=e=n=NaN),new Wo(t,e,n,o)}function Ro(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const[o,r,i,s]=e;return 1===e.length?((a=o)instanceof fo||(a=Lo(a)),a?new Wo((a=a.rgb()).r,a.g,a.b,a.opacity):new Wo):new Wo(o,r,i,null==s?1:s);var a}function Wo(t,e,n,o){this.r=+t,this.g=+e,this.b=+n,this.opacity=+o}function Ho(){return`#${Bo(this.r)}${Bo(this.g)}${Bo(this.b)}`}function Xo(){const t=Yo(this.opacity);return`${1===t?"rgb(":"rgba("}${Uo(this.r)}, ${Uo(this.g)}, ${Uo(this.b)}${1===t?")":`, ${t})`}`}function Yo(t){return isNaN(t)?1:_o(0,To(1,t))}function Uo(t){return _o(0,To(255,No(t)||0))}function Bo(t){return((t=Uo(t))<16?"0":"")+t.toString(16)}function Zo(t,e,n,o){return o<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new qo(t,e,n,o)}function Vo(t){if(t instanceof qo)return new qo(t.h,t.s,t.l,t.opacity);if(t instanceof fo||(t=Lo(t)),!t)return new qo;if(t instanceof qo)return t;let e=(t=t.rgb()).r/255,n=t.g/255,o=t.b/255,r=To(e,n,o),i=_o(e,n,o),s=NaN,a=i-r,l=(i+r)/2;return a?(s=e===i?(n-o)/a+6*(n<o):n===i?(o-e)/a+2:(e-n)/a+4,a/=l<.5?i+r:2-i-r,s*=60):a=l>0&&l<1?0:s,new qo(s,a,l,t.opacity)}function qo(t,e,n,o){this.h=+t,this.s=+e,this.l=+n,this.opacity=+o}function Go(t,e,n,o,r){const i=t*t,s=i*t;return((1-3*t+3*i-s)*e+(4-6*i+3*s)*n+(1+3*t+3*i-3*s)*o+s*r)/6}uo(fo,Lo,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Fo,formatHex:Fo,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Vo(this).formatHsl()},formatRgb:Io,toString:Io}),uo(Wo,Ro,po(fo,{brighter(t){return t=null==t?mo:Po(mo,t),new Wo(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?go:Po(go,t),new Wo(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Wo(Uo(this.r),Uo(this.g),Uo(this.b),Yo(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ho,formatHex:Ho,formatHex8:function(){return`#${Bo(this.r)}${Bo(this.g)}${Bo(this.b)}${Bo(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Xo,toString:Xo})),uo(qo,(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const[o,r,i,s]=e;return 1===e.length?Vo(o):new qo(o,r,i,null==s?1:s)}),po(fo,{brighter(t){return t=null==t?mo:Po(mo,t),new qo(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?go:Po(go,t),new qo(this.h,this.s,this.l*t,this.opacity)},rgb(){let t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*e,r=2*n-o;return new Wo(Eo(t>=240?t-240:t+120,r,o),Eo(t,r,o),Eo(t<120?t+240:t-120,r,o),this.opacity)},clamp(){return new qo(jo(this.h),$o(this.s),$o(this.l),Yo(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Yo(this.opacity);return`${1===t?"hsl(":"hsla("}${jo(this.h)}, ${100*$o(this.s)}%, ${100*$o(this.l)}%${1===t?")":`, ${t})`}`}}));const Ko=t=>()=>t;function Jo(t,e){return function(n){return t+n*e}}function Qo(t){return 1==(t=+t)?tr:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(o){return Math.pow(t+o*e,n)}}(e,n,t):Ko(isNaN(e)?n:e)}}function tr(t,e){const n=e-t;return n?Jo(t,n):Ko(isNaN(t)?e:t)}const er=function t(e){const n=Qo(e);function o(t,e){const o=n((t=Ro(t)).r,(e=Ro(e)).r),r=n(t.g,e.g),i=n(t.b,e.b),s=tr(t.opacity,e.opacity);return function(e){return t.r=o(e),t.g=r(e),t.b=i(e),t.opacity=s(e),t+""}}return o.gamma=t,o}(1);function nr(t){return function(e){let n,o,r=e.length,i=new Array(r),s=new Array(r),a=new Array(r);for(n=0;n<r;++n)o=Ro(e[n]),i[n]=o.r||0,s[n]=o.g||0,a[n]=o.b||0;return i=t(i),s=t(s),a=t(a),o.opacity=1,function(t){return o.r=i(t),o.g=s(t),o.b=a(t),o+""}}}nr((function(t){const e=t.length-1;return function(n){let o=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),r=t[o],i=t[o+1],s=o>0?t[o-1]:2*r-i,a=o<e-1?t[o+2]:2*i-r;return Go((n-o/e)*e,s,r,i,a)}})),nr((function(t){const e=t.length;return function(n){let o=Math.floor(((n%=1)<0?++n:n)*e),r=t[(o+e-1)%e],i=t[o%e],s=t[(o+1)%e],a=t[(o+2)%e];return Go((n-o/e)*e,r,i,s,a)}}));function or(t,e){let n,o=e?e.length:0,r=t?Math.min(o,t.length):0,i=new Array(r),s=new Array(o);for(n=0;n<r;++n)i[n]=ur(t[n],e[n]);for(;n<o;++n)s[n]=e[n];return function(t){for(n=0;n<r;++n)s[n]=i[n](t);return s}}function rr(t,e){const n=new Date;return t=+t,e=+e,function(o){return n.setTime(t*(1-o)+e*o),n}}function ir(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function sr(t,e){let n,o={},r={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?o[n]=ur(t[n],e[n]):r[n]=e[n];return function(t){for(n in o)r[n]=o[n](t);return r}}const ar=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,lr=new RegExp(ar.source,"g");function cr(t,e){let n,o,r,i=ar.lastIndex=lr.lastIndex=0,s=-1,a=[],l=[];for(t+="",e+="";(n=ar.exec(t))&&(o=lr.exec(e));)(r=o.index)>i&&(r=e.slice(i,r),a[s]?a[s]+=r:a[++s]=r),(n=n[0])===(o=o[0])?a[s]?a[s]+=o:a[++s]=o:(a[++s]=null,l.push({i:s,x:ir(n,o)})),i=lr.lastIndex;return i<e.length&&(r=e.slice(i),a[s]?a[s]+=r:a[++s]=r),a.length<2?l[0]?function(t){return function(e){return t(e)+""}}(l[0].x):function(t){return function(){return t}}(e):(e=l.length,function(t){for(var n,o=0;o<e;++o)a[(n=l[o]).i]=n.x(t);return a.join("")})}function hr(t,e){e||(e=[]);let n,o=t?Math.min(e.length,t.length):0,r=e.slice();return function(i){for(n=0;n<o;++n)r[n]=t[n]*(1-i)+e[n]*i;return r}}function ur(t,e){let n,o=typeof e;return null==e||"boolean"===o?Ko(e):("number"===o?ir:"string"===o?(n=Lo(e))?(e=n,er):cr:e instanceof Lo?er:e instanceof Date?rr:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}(e)?hr:Array.isArray(e)?or:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?sr:ir)(t,e)}function dr(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}const pr=t=>void 0===t,fr=Array.from,gr=Math.min,mr=Math.max;let yr=[0,1];const xr=t=>+t,vr=t=>t,wr=(t,e)=>(e-=t=+t)?n=>(n-t)/e:(t=>()=>t)(isNaN(e)?NaN:.5);function br(t,e,n){let[o,r]=t,[i,s]=e;return r<o?(o=wr(r,o),i=n(s,i)):(o=wr(o,r),i=n(i,s)),t=>i(o(t))}function kr(t,e,n){let o=gr(t.length,e.length)-1,r=new Array(o),i=new Array(o),s=-1;for(t[o]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<o;)r[s]=wr(t[s],t[s+1]),i[s]=n(e[s],e[s+1]);return function(e){let n=Yn(t,e,1,o)-1;return i[n](r[n](e))}}function Sr(){let t,e,n,o,r,i,s=yr,a=yr,l=ur,c=vr;function h(){let t=gr(s.length,a.length);return c!==vr&&(c=((t,e)=>{const[n,o]=t>e?[e,t]:[t,e];return t=>mr(n,gr(o,t))})(s[0],s[t-1])),o=t>2?kr:br,r=i=null,u}function u(e){return null==e||isNaN(e=+e)?n:(r||(r=o(s.map(t),a,l)))(t(c(e)))}return u.invert=n=>c(e((i||(i=o(a,s.map(t),ir)))(n))),u.domain=t=>pr(t)?s.slice():(s=fr(t,xr),h()),u.range=t=>pr(t)?a.slice():(a=fr(t),h()),u.rangeRound=t=>(a=fr(t),l=dr,h()),u.clamp=t=>pr(t)?c!==vr:(c=!!t||vr,h()),u.interpolate=t=>pr(t)?l:(l=t,h()),u.unknown=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],u):n},function(n,o){return t=n,e=o,h()}}const Cr=(t,e)=>e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown());function Dr(){return Sr()(vr,vr)}function Ar(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const[o,r]=e;switch(e.length){case 0:break;case 1:this.range(o);break;default:this.range(r).domain(o)}return this}function Mr(t,e){let n,o;return(n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0?null:(o=t.slice(0,n),[o.length>1?o[0]+o.slice(2):o,+t.slice(n+1)])}function Tr(t){return(t=Mr(Math.abs(t)))?t[1]:NaN}const _r=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Pr(t){let e;if(!(e=_r.exec(t)))throw new Error("invalid format: "+t);return new Nr({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function Nr(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}let jr;function $r(t,e){let n=Mr(t,e);if(!n)return t+"";let o=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+o:o.length>r+1?o.slice(0,r+1)+"."+o.slice(r+1):o+new Array(r-o.length+2).join("0")}Pr.prototype=Nr.prototype,Nr.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const Er={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>$r(100*t,e),r:$r,s:function(t,e){let n=Mr(t,e);if(!n)return t+"";let o=n[0],r=n[1],i=r-(jr=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,s=o.length;return i===s?o:i>s?o+new Array(i-s+1).join("0"):i>0?o.slice(0,i)+"."+o.slice(i):"0."+new Array(1-i).join("0")+Mr(t,Math.max(0,e+i-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Fr(t){return t}const Ir=Array.prototype.map,Lr=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Or(t){let e=void 0===t.grouping||void 0===t.thousands?Fr:(c=Ir.call(t.grouping,Number),h=t.thousands+"",function(t,e){let n=t.length,o=[],r=0,i=c[0],s=0;for(;n>0&&i>0&&(s+i+1>e&&(i=Math.max(1,e-s)),o.push(t.substring(n-=i,n+i)),!((s+=i+1)>e));)i=c[r=(r+1)%c.length];return o.reverse().join(h)}),n=void 0===t.currency?"":t.currency[0]+"",o=void 0===t.currency?"":t.currency[1]+"",r=void 0===t.decimal?".":t.decimal+"",i=void 0===t.numerals?Fr:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(Ir.call(t.numerals,String)),s=void 0===t.percent?"%":t.percent+"",a=void 0===t.minus?"−":t.minus+"",l=void 0===t.nan?"NaN":t.nan+"";var c,h;function u(t){let c=(t=Pr(t)).fill,h=t.align,u=t.sign,d=t.symbol,p=t.zero,f=t.width,g=t.comma,m=t.precision,y=t.trim,x=t.type;"n"===x?(g=!0,x="g"):Er[x]||(void 0===m&&(m=12),y=!0,x="g"),(p||"0"===c&&"="===h)&&(p=!0,c="0",h="=");let v="$"===d?n:"#"===d&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",w="$"===d?o:/[%p]/.test(x)?s:"",b=Er[x],k=/[defgprs%]/.test(x);function S(t){let n,o,s,d=v,S=w;if("c"===x)S=b(t)+S,t="";else{let e=(t=+t)<0||1/t<0;if(t=isNaN(t)?l:b(Math.abs(t),m),y&&(t=function(t){let e,n=t.length,o=1,r=-1;t:for(;o<n;++o)switch(t[o]){case".":r=e=o;break;case"0":0===r&&(r=o),e=o;break;default:if(!+t[o])break t;r>0&&(r=0)}return r>0?t.slice(0,r)+t.slice(e+1):t}(t)),e&&0==+t&&"+"!==u&&(e=!1),d=(e?"("===u?u:a:"-"===u||"("===u?"":u)+d,S=("s"===x?Lr[8+jr/3]:"")+S+(e&&"("===u?")":""),k)for(n=-1,o=t.length;++n<o;)if(s=t.charCodeAt(n),48>s||s>57){S=(46===s?r+t.slice(n+1):t.slice(n))+S,t=t.slice(0,n);break}}g&&!p&&(t=e(t,1/0));let C=d.length+t.length+S.length,D=C<f?new Array(f-C+1).join(c):"";switch(g&&p&&(t=e(D+t,D.length?f-S.length:1/0),D=""),h){case"<":t=d+t+S+D;break;case"=":t=d+D+t+S;break;case"^":t=D.slice(0,C=D.length>>1)+d+t+S+D.slice(C);break;default:t=D+d+t+S}return i(t)}return m=void 0===m?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),S.toString=function(){return t+""},S}return{format:u,formatPrefix:function(t,e){let n=u(((t=Pr(t)).type="f",t)),o=3*Math.max(-8,Math.min(8,Math.floor(Tr(e)/3))),r=Math.pow(10,-o),i=Lr[8+o/3];return function(t){return n(r*t)+i}}}}let zr,Rr,Wr;zr=Or({thousands:",",grouping:[3],currency:["$",""]}),Rr=zr.format,Wr=zr.formatPrefix;const Hr=Math.max,Xr=Math.min,Yr=Math.abs,Ur=Math.floor;function Br(t,e,n,o){let r,i=no(t,e,n);switch((o=Pr(null==o?",f":o)).type){case"s":{const n=Math.max(Math.abs(t),Math.abs(e));return null!=o.precision||isNaN(r=((t,e)=>Hr(0,3*Hr(-8,Xr(8,Ur(Tr(e)/3)))-Tr(Yr(t))))(i,n))||(o.precision=r),Wr(o,n)}case"":case"e":case"g":case"p":case"r":null!=o.precision||isNaN(r=((t,e)=>(t=Yr(t),e=Yr(e)-t,Hr(0,Tr(e)-Tr(t))+1))(i,Math.max(Math.abs(t),Math.abs(e))))||(o.precision=r-("e"===o.type));break;case"f":case"%":null!=o.precision||isNaN(r=(t=>Hr(0,-Tr(Yr(t))))(i))||(o.precision=r-2*("%"===o.type))}return Rr(o)}const Zr=Math.floor,Vr=Math.ceil;function qr(t){let e=t.domain;return t.ticks=t=>{let n=e();return function(t,e,n){if(!((n=+n)>0))return[];if((t=+t)==(e=+e))return[t];const o=e<t,[r,i,s]=o?to(e,t,n):to(t,e,n);if(!(i>=r))return[];const a=i-r+1,l=new Array(a);let c=0;if(o)if(s<0)for(;c<a;++c)l[c]=(i-c)/-s;else for(;c<a;++c)l[c]=(i-c)*s;else if(s<0)for(;c<a;++c)l[c]=(r+c)/-s;else for(;c<a;++c)l[c]=(r+c)*s;return l}(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=(t,n)=>{let o=e();return Br(o[0],o[o.length-1],null==t?10:t,n)},t.nice=n=>{null==n&&(n=10);let o,r,i=e(),s=0,a=i.length-1,l=i[s],c=i[a],h=10;for(c<l&&(r=l,l=c,c=r,r=s,s=a,a=r);h-- >0;){if(r=eo(l,c,n),r===o)return i[s]=l,i[a]=c,e(i);if(r>0)l=Zr(l/r)*r,c=Vr(c/r)*r;else{if(!(r<0))break;l=Vr(l*r)/r,c=Zr(c*r)/r}o=r}return t},t}function Gr(t){return null!==t&&"object"==typeof t?t.valueOf():t}function Kr(t,e){let{_intern:n,_key:o}=t;const r=o(e);return n.has(r)?n.get(r):e}class Jr extends Map{constructor(t,e){if(void 0===e&&(e=Gr),super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const[e,n]of t)this.set(e,n)}get(t){return super.get(Kr(this,t))}has(t){return super.has(Kr(this,t))}set(t,e){return super.set(function(t,e){let{_intern:n,_key:o}=t;const r=o(e);return n.has(r)?n.get(r):(n.set(r,e),e)}(this,t),e)}delete(t){return super.delete(function(t,e){let{_intern:n,_key:o}=t;const r=o(e);return n.has(r)&&(e=n.get(r),n.delete(r)),e}(this,t))}}const Qr=Array.from,ti=Symbol("implicit");const ei=new Date,ni=new Date,oi=Math.floor,ri=(t,e,n,o)=>{const r=e=>(t(e=void 0===e?new Date:new Date(+e)),e);return r.floor=e=>(t(e=new Date(+e)),e),r.ceil=n=>(t(n=new Date(n-1)),e(n,1),t(n),n),r.round=t=>{const e=r(t),n=r.ceil(t);return t-e<n-t?e:n},r.offset=(t,n)=>(e(t=new Date(+t),null==n?1:oi(n)),t),r.range=(n,o,i)=>{const s=[];if(n=r.ceil(n),i=null==i?1:oi(i),!(n<o&&i>0))return s;let a;do{s.push(a=new Date(+n)),e(n,i),t(n)}while(a<n&&n<o);return s},r.filter=n=>ri((e=>{if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),((t,o)=>{if(t>=t)if(o<0)for(;++o<=0;)for(;e(t,-1),!n(t););else for(;--o>=0;)for(;e(t,1),!n(t););})),n&&(r.count=(e,o)=>(ei.setTime(+e),ni.setTime(+o),t(ei),t(ni),oi(n(ei,ni))),r.every=t=>(t=oi(t),isFinite(t)&&t>0?t>1?r.filter(o?e=>o(e)%t==0:e=>r.count(0,e)%t==0):r:null)),r},ii=1e3,si=6e4,ai=36e5,li=864e5,ci=6048e5,hi=2592e6,ui=31536e6,di=ri((t=>{t.setTime(t-t.getMilliseconds())}),((t,e)=>{t.setTime(+t+e*ii)}),((t,e)=>(e-t)/ii),(t=>t.getUTCSeconds())),pi=ri((t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*ii)}),((t,e)=>{t.setTime(+t+e*si)}),((t,e)=>(e-t)/si),(t=>t.getMinutes())),fi=ri((t=>{t.setUTCSeconds(0,0)}),((t,e)=>{t.setTime(+t+e*si)}),((t,e)=>(e-t)/si),(t=>t.getUTCMinutes())),gi=ri((t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*ii-t.getMinutes()*si)}),((t,e)=>{t.setTime(+t+e*ai)}),((t,e)=>(e-t)/ai),(t=>t.getHours())),mi=ri((t=>{t.setUTCMinutes(0,0,0)}),((t,e)=>{t.setTime(+t+e*ai)}),((t,e)=>(e-t)/ai),(t=>t.getUTCHours())),yi=ri((t=>t.setHours(0,0,0,0)),((t,e)=>t.setDate(t.getDate()+e)),((t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*si)/li),(t=>t.getDate()-1)),xi=ri((t=>{t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCDate(t.getUTCDate()+e)}),((t,e)=>(e-t)/li),(t=>t.getUTCDate()-1)),vi=t=>ri((e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),((t,e)=>{t.setDate(t.getDate()+7*e)}),((t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*si)/ci)),wi=vi(0),bi=vi(1),ki=vi(4),Si=(t=>ri((e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCDate(t.getUTCDate()+7*e)}),((t,e)=>(e-t)/ci)))(0),Ci=ri((t=>{t.setDate(1),t.setHours(0,0,0,0)}),((t,e)=>{t.setMonth(t.getMonth()+e)}),((t,e)=>e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())),(t=>t.getMonth())),Di=ri((t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)}),((t,e)=>e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())),(t=>t.getUTCMonth())),Ai=Math.floor,Mi=ri((t=>{t.setMonth(0,1),t.setHours(0,0,0,0)}),((t,e)=>{t.setFullYear(t.getFullYear()+e)}),((t,e)=>e.getFullYear()-t.getFullYear()),(t=>t.getFullYear()));Mi.every=t=>isFinite(t=Ai(t))&&t>0?ri((e=>{e.setFullYear(Ai(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),((e,n)=>{e.setFullYear(e.getFullYear()+n*t)})):null;const Ti=ri((t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)}),((t,e)=>e.getUTCFullYear()-t.getUTCFullYear()),(t=>t.getUTCFullYear()));Ti.every=t=>isFinite(t=Ai(t))&&t>0?ri((e=>{e.setUTCFullYear(Ai(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),((e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null;const _i=Math.floor,Pi=ri((()=>{}),((t,e)=>{t.setTime(+t+e)}),((t,e)=>e-t));Pi.every=t=>(t=_i(t),isFinite(t)&&t>0?t>1?ri((e=>{e.setTime(_i(e/t)*t)}),((e,n)=>{e.setTime(+e+n*t)}),((e,n)=>(n-e)/t)):Pi:null);const Ni=Math.abs,ji=Math.max,[$i,Ei]=((t,e,n,o,r,i)=>{const s=[[di,1,ii],[di,5,5e3],[di,15,15e3],[di,30,3e4],[i,1,si],[i,5,3e5],[i,15,9e5],[i,30,18e5],[r,1,ai],[r,3,108e5],[r,6,216e5],[r,12,432e5],[o,1,li],[o,2,1728e5],[n,1,ci],[e,1,hi],[e,3,7776e6],[t,1,ui]],a=(e,n,o)=>{const r=Ni(n-e)/o,i=Xn((t=>{let[,,e]=t;return e})).right(s,r);if(i===s.length)return t.every(no(e/ui,n/ui,o));if(0===i)return Pi.every(ji(no(e,n,o),1));const[a,l]=s[r/s[i-1][2]<s[i][2]/r?i-1:i];return a.every(l)};return[(t,e,n)=>{const o=e<t;o&&([t,e]=[e,t]);const r=n&&"function"==typeof n.range?n:a(t,e,n),i=r?r.range(t,+e+1):[];return o?i.reverse():i},a]})(Mi,Ci,wi,yi,gi,pi),Fi=Math.floor,Ii={"-":"",_:" ",0:"0"},Li=(t,e,n)=>{const o=t<0?"-":"",r=(o?-t:t)+"",i=r.length;return o+(i<n?new Array(n-i+1).join(e)+r:r)},Oi=(t,e)=>Li(t.getDate(),e,2),zi=(t,e)=>Li(t.getHours(),e,2),Ri=(t,e)=>Li(t.getHours()%12||12,e,2),Wi=(t,e)=>Li(1+yi.count(Mi(t),t),e,3),Hi=(t,e)=>Li(t.getMilliseconds(),e,3),Xi=(t,e)=>Hi(t,e)+"000",Yi=(t,e)=>Li(t.getMonth()+1,e,2),Ui=(t,e)=>Li(t.getMinutes(),e,2),Bi=(t,e)=>Li(t.getSeconds(),e,2),Zi=t=>{const e=t.getDay();return 0===e?7:e},Vi=(t,e)=>Li(wi.count(Mi(t)-1,t),e,2),qi=t=>{const e=t.getDay();return e>=4||0===e?ki(t):ki.ceil(t)},Gi=(t,e)=>(t=qi(t),Li(ki.count(Mi(t),t)+(4===Mi(t).getDay()),e,2)),Ki=t=>t.getDay(),Ji=(t,e)=>Li(bi.count(Mi(t)-1,t),e,2),Qi=(t,e)=>Li(t.getFullYear()%100,e,2),ts=(t,e)=>(t=qi(t),Li(t.getFullYear()%100,e,2)),es=(t,e)=>Li(t.getFullYear()%1e4,e,4),ns=(t,e)=>{let n=t.getDay();return t=n>=4||0===n?ki(t):ki.ceil(t),Li(t.getFullYear()%1e4,e,4)},os=t=>{let e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Li(e/60|0,"0",2)+Li(e%60,"0",2)},rs=()=>"%",is=t=>+t,ss=t=>Fi(+t/1e3);let as=function(t){const e=t.dateTime,n=t.date,o=t.time,r=t.periods,i=t.days,s=t.shortDays,a=t.months,l=t.shortMonths,c={a:t=>s[t.getDay()],A:t=>i[t.getDay()],b:t=>l[t.getMonth()],B:t=>a[t.getMonth()],c:null,d:Oi,e:Oi,f:Xi,g:ts,G:ns,H:zi,I:Ri,j:Wi,L:Hi,m:Yi,M:Ui,p:t=>r[+(t.getHours()>=12)],q:t=>1+~~(t.getMonth()/3),Q:is,s:ss,S:Bi,u:Zi,U:Vi,V:Gi,w:Ki,W:Ji,x:null,X:null,y:Qi,Y:es,Z:os,"%":rs},h=(t,e)=>n=>{let o,r,i,s=[],a=-1,l=0,c=t.length;for(n instanceof Date||(n=new Date(+n));++a<c;)37===t.charCodeAt(a)&&(s.push(t.slice(l,a)),null!=(r=Ii[o=t.charAt(++a)])?o=t.charAt(++a):r="e"===o?" ":"0",(i=e[o])&&(o=i(n,r)),s.push(o),l=a+1);return s.push(t.slice(l,a)),s.join("")};return c.x=h(n,c),c.X=h(o,c),c.c=h(e,c),{format:t=>{const e=h(t+="",c);return e.toString=()=>t,e}}}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}).format;const ls=Array.from,cs=t=>new Date(t),hs=t=>t instanceof Date?+t:+new Date(+t);function us(t,e,n,o,r,i,s,a,l,c){let h=Dr(),u=h.invert,d=h.domain;const p=c(".%L"),f=c(":%S"),g=c("%I:%M"),m=c("%I %p"),y=c("%a %d"),x=c("%b %d"),v=c("%B"),w=c("%Y"),b=t=>(l(t)<t?p:a(t)<t?f:s(t)<t?g:i(t)<t?m:o(t)<t?r(t)<t?y:x:n(t)<t?v:w)(t);return h.invert=t=>new Date(u(t)),h.domain=function(){return arguments.length?d(ls(arguments.length<=0?void 0:arguments[0],hs)):d().map(cs)},h.ticks=e=>{let n=d();return t(n[0],n[n.length-1],null==e?10:e)},h.tickFormat=(t,e)=>null==e?b:c(e),h.nice=t=>{let n=d();return t&&"function"==typeof t.range||(t=e(n[0],n[n.length-1],null==t?10:t)),t?d(function(t,e){let n,o=0,r=(t=t.slice()).length-1,i=t[o],s=t[r];return s<i&&(n=o,o=r,r=n,n=i,i=s,s=n),t[o]=e.floor(i),t[r]=e.ceil(s),t}(n,t)):h},h.copy=()=>Cr(h,us(t,e,n,o,r,i,s,a,l,c)),h}const ds=(t,e,n)=>{const o=e[n];if("function"!=typeof o)throw new Error(`Attempt to rebind ${n} which isn't a function on the source object`);return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];const s=o.apply(e,r);return s===e?t:s}},ps=function(t,e){for(var n=arguments.length,o=new Array(n>2?n-2:0),r=2;r<n;r++)o[r-2]=arguments[r];for(const n of o)t[n]=ds(t,e,n);return t};function fs(){let t=oo,e=!0,n=()=>{};function o(o){return ro().combine(((t,o)=>{const r=e&&void 0===o?t:n(t,o);return void 0===r?t:r}))(o,t(o))}return o.algorithm=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],o):t},o.merge=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],o):n},o.skipUndefined=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],o):e},o}const gs=t=>`translate(${t[0]}, ${t[1]})`,ms=function t(){let e=new Jr,n=[],o=[],r=ti;function i(t){let i=e.get(t);if(pr(i)){if(r!==ti)return r;e.set(t,i=n.push(t)-1)}return o[i%o.length]}i.domain=function(t){if(pr(t))return n.slice();n=[],e=new Jr;for(const o of t)e.has(o)||e.set(o,n.push(o)-1);return i},i.range=t=>pr(t)?o.slice():(o=Qr(t),i),i.unknown=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],i):r},i.copy=()=>t(n,o).unknown(r);for(var s=arguments.length,a=new Array(s),l=0;l<s;l++)a[l]=arguments[l];return Ar.apply(i,a),i}(["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"]);const ys=(t,e)=>{const n=t.replace("#","");if(t.indexOf("#")>-1&&(3===n.length||6===n.length)){const t=3===n.length?1:2;return`rgba(${parseInt(n.substring(0,1*t),16)}, ${parseInt(n.substring(1*t,2*t),16)}, ${parseInt(n.substring(2*t,3*t),16)}, ${e})`}return t},xs=(t,e)=>{if(e&&t){let n;for(let o=t.length-1;o>=0;o--)if(n=t[o],null!=e(n))return n;return}const n=t?t.length:0;return n?t[n-1]:void 0},vs=(t,e)=>{if(!e||!t)return t?t[0]:void 0;{let n;for(let o=0;o<t.length;o++)if(n=t[o],null!=e(n))return n}},ws=vs,bs=(t,e)=>{const{widthRatio:n}=t,{xScale:o}=e,[r,i]=o.range(),s=Math.abs(i-r);let a;if(null!=o.invert){const[t,e]=o.domain();a=s/Math.abs(t-e)}else a=s/o.domain().length;return a*n},ks=(t,e,n)=>{let o=0,r=t.length-1;for(;r-o>1;){const i=Math.round((o+r)/2);n(t[i])<=e?o=i:r=i}const i=n(t[o]),s=n(t[r]);return i?.valueOf()===e?.valueOf()&&(r=o),s?.valueOf()===e?.valueOf()&&(o=r),i<e&&s<e&&(o=r),i>e&&s>e&&(r=o),{left:o,right:r}},Ss=(t,e)=>{if(t===e)return!0;if(!(t instanceof Object&&e instanceof Object))return!1;const n=Object.keys(t),o=n.length;for(let t=0;t<o;t++)if(!(n[t]in e))return!1;for(let r=0;r<o;r++)if(t[n[r]]!==e[n[r]])return!1;return o===Object.keys(e).length};const Cs=Array.isArray,Ds=Object.keys,As=Math.round,Ms=(Math.abs,t=>(t>0)-(t<0)),Ts=t=>t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView),_s="mouseenter.interaction",Ps="mouseleave.interaction",Ns="mousemove.pan",js="mouseup.pan",$s="touchmove.pan",Es="touchend.pan touchcancel.pan",Fs="wheel",Is=t=>({pageX:t.pageX,pageY:t.pageY,clientX:t.clientX,clientY:t.clientY}),Ls=(t,e,n)=>[As(t.clientX-e.left-n.clientLeft),As(t.clientY-e.top-n.clientTop)],Os=(t,e)=>{const n=e.currentTarget,o=n.getBoundingClientRect();return Ls(t,o,n)},zs=(t,e)=>{const n=t.currentTarget,o=e??n.getBoundingClientRect();return Ls(t,o,n)},Rs=(t,e)=>{t.forEach((t=>{t.setTransform(1,0,0,1,0,0),t.clearRect(-1,-1,t.canvas.width+2,t.canvas.height+2),t.scale(e,e)}))},Ws=t=>`chart_${t}`,Hs=(t,e)=>(t||[]).find((t=>{let{id:n}=t;return n===e})),Xs=()=>{},Ys={amIOnTop:()=>!1,chartConfigs:[],chartId:0,displayXAccessor:()=>0,fullData:[],getMutableState:()=>({}),height:0,margin:{},plotData:[],setCursorClass:Xs,subscribe:Xs,unsubscribe:Xs,width:0,xAccessor:()=>0,xScale:Xs},Us=(0,r.createContext)({...Ys,chartConfig:{},chartId:0}),Bs=(0,r.memo)((t=>{let{id:e=0,onContextMenu:n,onDoubleClick:o,children:i}=t;const s=(0,r.useContext)(Nl),{subscribe:a,unsubscribe:l,chartConfigs:c}=s,h=(0,r.useCallback)(((t,r,i,s)=>{switch(t){case"contextmenu":{if(void 0===n)return;const{currentCharts:t}=r;t.indexOf(e)>-1&&n(s,r);break}case"dblclick":{if(void 0===o)return;const{currentCharts:t}=r;t.indexOf(e)>-1&&o(s,r);break}default:return}}),[n,o,e]),u=Hs(c,e),d=(0,r.useMemo)((()=>({...s,chartId:e,chartConfig:u})),[s,e,u]),p=gs(u.origin);return(0,r.useEffect)((()=>(a(Ws(e),{listener:h}),()=>{l(Ws(e))})),[]),(0,A.jsx)(Us.Provider,{value:d,children:(0,A.jsx)("g",{transform:p,children:i})})})),Zs={id:0,flipYScale:!1,origin:[0,0],padding:0,yPan:!0,yPanEnabled:!1,yScale:function t(){let e=Dr();e.copy=()=>Cr(e,t());for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return Ar.apply(e,o),qr(e)}()},Vs=Array.isArray,qs=Math.abs,Gs=t=>e=>{const n=t(e);return(t=>t&&"object"==typeof t&&!Cs(t))(n)?function(t,e){void 0===t&&(t={}),void 0===e&&(e=t=>t);const n=Ds(t),o=new Array(n.length);return n.forEach(((n,r)=>{o[r]=e(t[n],n,t)})),o}(n):n},Ks=t=>"number"==typeof t,Js=t=>{if(Vs(t)&&2===t.length){const[e,n]=t;return Ks(e)&&Ks(n)}return!1},Qs=function(t,e,n){return void 0===n&&(n=[]),r.Children.map(e,(e=>{if(null!=e&&(void 0!==(o=e.props)&&void 0!==o.id)){const o={...Zs,...e.props},{id:r,origin:i,padding:s,yExtents:a,yScale:l=Zs.yScale,flipYScale:c,yExtentsCalculator:h}=o,u=l.copy(),{width:d,height:p,availableHeight:f}=((t,e)=>{let{width:n,height:o}=t;return{availableHeight:o,width:n,height:e.height||o}})(t,o),{yPan:g}=o,m=a?(Vs(a)?a:[a]).map(ao):void 0,y=n.find((t=>t.id===r));let{yPanEnabled:x}=o;if(Js(a))if(y&&y.yPan&&y.yPanEnabled&&g&&x&&Ss(y.originalYExtentsProp,a))u.domain(y.yScale.domain());else{const[t,e]=a;u.domain([t,e])}else y&&y.yPanEnabled&&(Js(y.originalYExtentsProp)||(u.domain(y.yScale.domain()),x=!0));return{id:r,origin:ao(i)(d,f),padding:s,originalYExtentsProp:a,yExtents:m,yExtentsCalculator:h,flipYScale:c,yScale:u,yPan:g,yPanEnabled:x,width:d,height:p}}var o})).filter((t=>void 0!==t))},ta=(t,e)=>t.filter((t=>{const n=t.origin[1],o=n+t.height;return e[1]>n&&e[1]<o})).map((t=>t.id)),ea=(t,e,n)=>{const o=(t=>t.reduce(((t,e)=>(Vs(e[0])?e.forEach((e=>{t.push(...e)})):t.push(...e),t)),[]))(t.map((t=>n.map(Gs(t)))));return e.invert?$n(o):[...new Set(o).values()]},na=(t,e,n,o,r)=>{let{plotData:i,xAccessor:s,displayXAccessor:a,fullData:l}=e;const c=t.map((t=>{let{yExtentsCalculator:e,yExtents:r,yScale:c}=t;const h=e?e({plotData:i,xDomain:n,xAccessor:s,displayXAccessor:a,fullData:l}):ea(r,c,i),u=void 0!==o?c.range().map((t=>t-o)).map(c.invert):c.domain();return{realYDomain:h,yDomainDY:u,prevYDomain:c.domain()}})),h=ro().combine(((t,e)=>{let{realYDomain:n,yDomainDY:o,prevYDomain:i}=e;const{id:s,padding:a,height:l,yScale:c,yPan:h,flipYScale:u,yPanEnabled:d=!1}=t,p=void 0===r||r.indexOf(s)>-1,f=h&&d?p?o:i:n,g=((t,e,n,o)=>{if(t.rangeRoundPoints||null==t.invert){if(isNaN(n))throw new Error("padding has to be a number for ordinal scale");t.rangeRoundPoints&&t.rangeRoundPoints(o?[0,e]:[e,0],n),t.rangeRound&&t.range(o?[0,e]:[e,0]).padding(n)}else{const{top:r,bottom:i}=isNaN(n)?n:{top:n,bottom:n};t.range(o?[r,e-i]:[e-i,r])}return t})(c.copy().domain(f),l,a,u);return{...t,yScale:g,realYDomain:n}}));return h(t,c)},oa=(t,e,n,o)=>{let r;if(t.invert){r=((t,e,n)=>{const{left:o,right:r}=ks(t,e,n);if(o===r)return t[o];const i=n(t[o]),s=n(t[r]);return Math.abs(i.valueOf()-e.valueOf())<Math.abs(s.valueOf()-e.valueOf())?t[o]:t[r]})(o,t.invert(n[0]),e)}else{const e=t.range().map(((t,e)=>({x:qs(t-n[0]),idx:e}))).reduce(((t,e)=>t.x<e.x?t:e));r=void 0!==e?o[e.idx]:o[0]}return r},ra=t=>{let{xScale:e,xAccessor:n,mouseXY:o,plotData:r}=t;return n(oa(e,n,o,r))};function ia(t){let e;for(;e=t.sourceEvent;)t=e;return t}function sa(t,e){if(t=ia(t),void 0===e&&(e=t.currentTarget),e){const n=e.ownerSVGElement||e;if(n.createSVGPoint){let o=n.createSVGPoint();return o.x=t.clientX,o.y=t.clientY,o=o.matrixTransform(e.getScreenCTM().inverse()),[o.x,o.y]}if(e.getBoundingClientRect){const t=e.getBoundingClientRect();return[event.clientX-t.left-e.clientLeft,event.clientY-t.top-e.clientTop]}}return[event.pageX,event.pageY]}const aa=Array.from;function la(t,e){return t.target&&(t=ia(t),void 0===e&&(e=t.currentTarget),t=t.touches||[t]),aa(t,(t=>sa(t,e)))}const ca=t=>function(e){t.call(this,e,this.__data__)},ha=t=>function(){let e=this.__on;if(!e)return;let n,o=0,r=-1,i=e.length;for(;o<i;++o)n=e[o],t.type&&n.type!==t.type||n.name!==t.name?e[++r]=n:this.removeEventListener(n.type,n.listener,n.options);++r?e.length=r:delete this.__on},ua=(t,e,n)=>function(){let o,r,i=this.__on,s=ca(e),a=0;if(i)for(r=i.length;a<r;++a)if((o=i[a]).type===t.type&&o.name===t.name)return this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=s,o.options=n),void(o.value=e);this.addEventListener(t.type,s,n),o={type:t.type,name:t.name,value:e,listener:s,options:n},i?i.push(o):this.__on=[o]};let da=[null];function pa(t,e){this._groups=t,this._parents=e}function fa(){return new pa([[document.documentElement]],da)}pa.prototype=fa.prototype={constructor:pa,each:function(t){let e,n,o,r,i=this._groups,s=0,a=i.length;for(;s<a;++s)for(e=i[s],n=0,o=e.length;n<o;++n)(r=e[n])&&t.call(r,r.__data__,n,e);return this},on:function(){let t,e,n,o,r,i=(t=>t.trim().split(/^|\s+/).map((t=>{let e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}})))((arguments.length<=0?void 0:arguments[0])+""),s=arguments.length<=1?void 0:arguments[1],a=arguments.length<=2?void 0:arguments[2],l=i.length,c=0;if(!(arguments.length<2)){for(n=s?ua:ha,t=0;t<l;++t)this.each(n(i[t],s,a));return this}if(n=this.node().__on,n)for(o=n.length;c<o;++c)for(t=0,r=n[c];t<l;++t)if((e=i[t]).type===r.type&&e.name===r.name)return r.value}};function ga(t){return"string"==typeof t?new pa([[document.querySelector(t)]],[document.documentElement]):new pa([[t]],da)}const ma="zhn-charts",ya="tooltip",xa=`${ma}-${ya}`,va=`${ma}-${ya}-label`,wa=`${ma}-${ya}-hover`,ba=`${ma}-bb-${ya}`,ka=`${ma}-ma-${ya}`,Sa=`${ma}-ohlc-${ya}`,Ca="cursor",Da=`${ma}-grabbing-${Ca}`,Aa=`${ma}-crosshair-${Ca}`,Ma=`${ma}-default-${Ca}`,Ta=`${ma}-move-${Ca}`,_a=`${ma}-pointer-${Ca}`,Pa=`${ma}-ns-resize-${Ca}`,Na=`${ma}-ew-resize-${Ca}`,ja="interaction",$a=`${ma}-avoid-${ja}`,Ea=`${ma}-enable-${ja}`,Fa="axis",Ia=`${ma}-x-${Fa}`,La=`${ma}-y-${Fa}`,Oa=`${ma}-${Fa}-domain`,za="series",Ra=`${ma}-bb-${za}`,Wa=`${ma}-bb-${za}-area`,Ha=`${ma}-rsi-${za}`,Xa="candlestick",Ya=`${ma}-${Xa}`,Ua=`${ma}-${Xa}-wick`,Ba=`${ma}-${Xa}-candle`,Za=`${ma}-up`,Va=`${ma}-down`,qa=`${ma}-crosshair`,Ga=`${ma}-cross_hair`,Ka=`${ma}-text-background`,Ja="line",Qa=`${ma}-${Ja}`,tl=`${ma}-${Ja}-stroke`,el=`${ma}-bar`,nl="-apple-system, system-ui, Roboto, 'Helvetica Neue', Ubuntu, sans-serif",ol=function(t,e,n){void 0===n&&(n=null),t.panInProgress||t.dragInProgress||ga(Ts(e.current)).on(Ns,n)};class rl extends r.Component{static defaultProps={mouseMove:!1,zoom:!1,pan:!1,panSpeedMultiplier:1,focus:!1,disableInteraction:!1};clicked;dx=0;dy=0;dragHappened;focus;lastNewPos;mouseInside=!1;mouseInteraction=!0;panEndTimeout;panHappened;ref=(()=>(0,r.createRef)())();constructor(t){super(t),this.focus=t.focus,this.state={panInProgress:!1}}componentDidMount(){const{disableInteraction:t}=this.props,{current:e}=this.ref;null!==e&&(t||ga(e).on(_s,this.handleEnter).on(Ps,this.handleLeave).on(Fs,this.handleWheel,{passive:!1}))}componentDidUpdate(){this.componentDidMount()}componentWillUnmount(){const{disableInteraction:t}=this.props,{current:e}=this.ref;null!==e&&(t||(ga(e).on(_s,null).on(Ps,null).on(Fs,null,{passive:!1}),ga(Ts(e)).on(Ns,null)))}handleEnter=t=>{const{onMouseEnter:e}=this.props;void 0!==e&&(this.mouseInside=!0,ol(this.state,this.ref,this.handleMouseMove),e(t))};handleLeave=t=>{const{onMouseLeave:e}=this.props;void 0!==e&&(this.mouseInside=!1,ol(this.state,this.ref),e(t))};handleWheel=t=>{const{pan:e,onPan:n,zoom:o,onZoom:r}=this.props;if(!e&&!o)return;const{panInProgress:i}=this.state,s=Math.abs(t.deltaY)>Math.abs(t.deltaX)&&Math.abs(t.deltaY)>0,a=zs(t);if(t.preventDefault(),o&&this.focus&&s&&!i){const e=t.deltaY>0?1:-1;void 0!==r&&r(e,a,t)}else if(this.focus){if(this.shouldPan()&&void 0!==this.state.panStart){const{panStartXScale:e,chartsToPan:o}=this.state.panStart;this.lastNewPos=a,this.panHappened=!0,void 0===this.dx&&(this.dx=0),void 0===this.dy&&(this.dy=0),this.dx-=t.deltaX,this.dy+=t.deltaY;const r={dx:this.dx,dy:this.dy};void 0!==n&&n(a,e,r,o,t)}else{const{xScale:t,chartConfig:e}=this.props,n=ta(e,a);this.dx=0,this.dy=0,this.setState({panInProgress:!0,panStart:{panStartXScale:t,panOrigin:a,chartsToPan:n}})}this.queuePanEnd(t)}};queuePanEnd(t){void 0!==this.panEndTimeout&&window.clearTimeout(this.panEndTimeout),this.panEndTimeout=window.setTimeout((()=>{this.handlePanEnd(t)}),100)}handleMouseMove=t=>{const{onMouseMove:e,mouseMove:n}=this.props;if(void 0!==e&&this.mouseInteraction&&n&&!this.state.panInProgress){e(sa(t,this.ref.current),"mouse",t)}};handleClick=t=>{const e=zs(t),{onClick:n,onDoubleClick:o}=this.props;this.panHappened||this.dragHappened||(this.clicked&&void 0!==o?(o(e,t),this.clicked=!1):void 0!==n&&(n(e,t),this.clicked=!0,setTimeout((()=>{this.clicked&&(this.clicked=!1)}),400)))};handleRightClick=t=>{t.stopPropagation(),t.preventDefault();const{onContextMenu:e,onPanEnd:n}=this.props,o=zs(t,this.ref.current.getBoundingClientRect());if(void 0!==this.state.panStart){const{panStartXScale:e,panOrigin:[r,i],chartsToPan:s}=this.state.panStart;this.panHappened&&void 0!==n&&n(o,e,{dx:r,dy:i},s,t);ga(Ts(this.ref.current)).on(Ns,null).on(js,null),this.setState({panInProgress:!1,panStart:void 0})}void 0!==e&&e(o,t)};handleDrag=t=>{const{onDrag:e}=this.props;if(void 0===e)return;this.dragHappened=!0;const{dragStartPosition:n}=this.state;if(void 0===n)return;e({startPos:n,mouseXY:sa(t,this.ref.current)},t)};cancelDrag(){ga(Ts(this.ref.current)).on(Ns,this.mouseInside?this.handleMouseMove:null).on(js,null),this.mouseInteraction=!0,this.setState({dragInProgress:!1})}handleDragEnd=t=>{const e=sa(t,this.ref.current);if(ga(Ts(this.ref.current)).on(Ns,this.mouseInside?this.handleMouseMove:null).on(js,null),this.dragHappened){const{onDragComplete:n}=this.props;void 0!==n&&n({mouseXY:e},t)}this.mouseInteraction=!0,this.setState({dragInProgress:!1})};canPan=()=>{const{getAllPanConditions:t}=this.props,{pan:e}=this.props,{panEnabled:n,draggable:o}=t().reduce(((t,e)=>({draggable:t.draggable||e.draggable,panEnabled:t.panEnabled&&e.panEnabled})),{draggable:!1,panEnabled:e});return{panEnabled:n,somethingSelected:o}};handleMouseDown=t=>{if(0!==t.button)return;const{xScale:e,chartConfig:n,onMouseDown:o}=this.props;if(this.panHappened=!1,this.dragHappened=!1,this.focus=!0,!this.state.panInProgress&&this.mouseInteraction){const r=zs(t),i=ta(n,r),{panEnabled:s,somethingSelected:a}=this.canPan(),l=s&&!a;if(l)this.setState({panInProgress:l,panStart:{panStartXScale:e,panOrigin:r,chartsToPan:i}}),ga(Ts(this.ref.current)).on(Ns,this.handlePan).on(js,this.handlePanEnd);else if(a){this.setState({panInProgress:!1,dragInProgress:!0,panStart:void 0,dragStartPosition:r});const{onDragStart:e}=this.props;void 0!==e&&e({startPos:r},t),ga(Ts(this.ref.current)).on(Ns,this.handleDrag).on(js,this.handleDragEnd)}void 0!==o&&o(r,i,t)}t.preventDefault()};shouldPan=()=>{const{pan:t,onPan:e}=this.props;return t&&e&&void 0!==this.state.panStart};handlePan=t=>{if(this.shouldPan()&&void 0!==this.state.panStart){this.panHappened=!0;const{panStartXScale:e,panOrigin:n,chartsToPan:o}=this.state.panStart;let r,i,s;this.mouseInteraction?(s=sa(t,this.ref.current),this.lastNewPos=s,r=s[0]-n[0],i=s[1]-n[1]):(s=la(t,this.ref.current)[0],this.lastNewPos=s,r=n[0]-s[0],i=n[1]-s[1]),this.dx=r,this.dy=i;const{onPan:a}=this.props;void 0!==a&&a(s,e,{dx:r,dy:i},o,t)}};handlePanEnd=t=>{const{pan:e,onPanEnd:n}=this.props;if(void 0!==this.state.panStart){const{panStartXScale:o,chartsToPan:r}=this.state.panStart;if(ga(Ts(this.ref.current)).on(Ns,this.mouseInside?this.handleMouseMove:null).on(js,null).on($s,null).on(Es,null),this.panHappened&&e&&n){const{dx:e=0,dy:i=0}=this;delete this.dx,delete this.dy,void 0!==this.lastNewPos&&n(this.lastNewPos,o,{dx:e,dy:i},r,t)}this.setState({panInProgress:!1,panStart:void 0})}};handleTouchMove=t=>{const{onMouseMove:e}=this.props;if(void 0===e)return;const n=Is(t.touches[0]);e(Os(n,t),"touch",t)};handleTouchStart=t=>{this.mouseInteraction=!1;const{pan:e,chartConfig:n,onMouseMove:o,xScale:r,onPanEnd:i}=this.props;if(1===t.touches.length){this.panHappened=!1;const i=Os(Is(t.touches[0]),t);if(void 0!==o&&o(i,"touch",t),e){const t=ta(n,i);this.setState({panInProgress:!0,panStart:{panStartXScale:r,panOrigin:i,chartsToPan:t}}),ga(Ts(this.ref.current)).on($s,this.handlePan,!1).on(Es,this.handlePanEnd,!1)}}else if(2===t.touches.length){const{panInProgress:n,panStart:o}=this.state;if(n&&e&&i&&void 0!==o){const{panStartXScale:n,panOrigin:[s,a],chartsToPan:l}=o;ga(Ts(this.ref.current)).on(Ns,this.mouseInside?this.handleMouseMove:null).on(js,null).on($s,this.handlePinchZoom,!1).on(Es,this.handlePinchZoomEnd,!1);const c=Os(Is(t.touches[0]),t),h=Os(Is(t.touches[1]),t);this.panHappened&&e&&i&&void 0!==this.lastNewPos&&i(this.lastNewPos,n,{dx:s,dy:a},l,t),this.setState({panInProgress:!1,pinchZoomStart:{xScale:r,touch1Pos:c,touch2Pos:h,range:r.range(),chartsToPan:l}})}}};handlePinchZoom=t=>{const{pinchZoomStart:e}=this.state;if(void 0===e)return;const{xScale:n,zoom:o,onPinchZoom:r}=this.props;if(!o||void 0===r)return;const[i,s]=la(this.ref.current),{chartsToPan:a,...l}=e;r(l,{touch1Pos:i,touch2Pos:s,xScale:n},t)};handlePinchZoomEnd=t=>{ga(Ts(this.ref.current)).on($s,null).on(Es,null);const{pinchZoomStart:e}=this.state;if(void 0===e)return;const{chartsToPan:n,...o}=e,{zoom:r,onPinchZoomEnd:i}=this.props;r&&i&&i(o,t),this.setState({pinchZoomStart:void 0})};setCursorClass=t=>{t!==this.state.cursorOverrideClass&&this.setState({cursorOverrideClass:t})};render(){const{height:t,width:e,disableInteraction:n,useCrossHairStyleCursor:o}=this.props,{cursorOverrideClass:r,panInProgress:i}=this.state,s=n?void 0:void 0!==r?r:o?i?Da:Aa:void 0,a=n||{onMouseDown:this.handleMouseDown,onClick:this.handleClick,onContextMenu:this.handleRightClick,onTouchStart:this.handleTouchStart,onTouchMove:this.handleTouchMove};return(0,A.jsx)("rect",{ref:this.ref,className:s,width:e,height:t,style:{opacity:0},...a})}}const il=t=>s(t)?.getContext("2d")??void 0,sl=(0,r.memo)((t=>{let{refEl:e,style:n,width:o,height:i,ratio:s}=t;const a=(0,r.useRef)(),l=(0,r.useRef)(),c=(0,r.useRef)();(0,r.useImperativeHandle)(e,(()=>({getCanvasContexts:()=>({bg:il(a),axes:il(l),mouseCoord:il(c)})})));const h=o*s,u=i*s,d={position:"absolute",width:o,height:i};return(0,A.jsxs)("div",{style:{...n,position:"absolute"},children:[(0,A.jsx)("canvas",{ref:a,width:h,height:u,style:d}),(0,A.jsx)("canvas",{ref:l,width:h,height:u,style:d}),(0,A.jsx)("canvas",{ref:c,width:h,height:u,style:d})]})})),al="chart-area-clip",ll=t=>{let{configs:e}=t;return e.map(((t,e)=>(0,A.jsx)("clipPath",{id:`${al}-${t.id}`,children:(0,A.jsx)("rect",{x:"0",y:"0",width:t.width,height:t.height})},e)))},cl=t=>{let{dimensions:e,chartConfig:n}=t;return(0,A.jsxs)("defs",{children:[(0,A.jsx)("clipPath",{id:al,children:(0,A.jsx)("rect",{x:"0",y:"0",width:e.width,height:e.height})}),(0,A.jsx)(ll,{configs:n})]})},hl=Math.floor,ul=Math.max,dl=Math.ceil,pl=(t,e,n,o)=>{const{lastItem:r,lastItemX:i}=t,s=e(r),[a,l]=n.range();return(l-a)/(i.valueOf()-a)*(s.valueOf()-o.valueOf())+o.valueOf()},fl=(t,e,n,o)=>{const r=gl(t,o),i=ml(t,n);return e>=r&&e<i},gl=(t,e)=>ul(1,dl(t*e)),ml=(t,e)=>hl(t*e),yl=(t,e)=>hl(.97*ml(t,e)),xl=(t,e,n,o)=>t.slice(ks(t,e,o).left,ks(t,n,o).right+1);function vl(t){let{xScale:e,useWholeData:n,clamp:o,pointsPerPxThreshold:r,minPointsPerPxThreshold:i,flipXScale:s}=t;return((t,e,n,o,r)=>({filterData:function(i,s,a,l,c){let{currentPlotData:h,currentDomain:u,fallbackStart:d,fallbackEnd:p,ignoreThresholds:f=!1}=void 0===c?{}:c;if(t)return{plotData:i,domain:s};let g=vs(s),m=xs(s),y=s,x=xl(i,g,m,a);1===x.length&&void 0!==d&&(g=d,m=pl(p,a,l,g),y=[g,m],x=xl(i,g,m,a)),"function"==typeof e?y=e(y,[a(vs(i)),a(xs(i))]):("left"!==e&&"both"!==e&&!0!==e||(y=[En([g,a(vs(i))]),y[1]]),"right"!==e&&"both"!==e&&!0!==e||(y=[y[0],Fn([m,a(xs(i))])])),y!==s&&(x=xl(i,y[0],y[1],a));const v=y,w=l.copy().domain(v);let b,k,S=hl(w(a(xs(x)))-w(a(vs(x))));r&&S<0&&(S*=-1);const C=xs(w.range())-vs(w.range());if(f&&x.length>1||fl(S,x.length,n,o))b=x,k=v;else if(C>ml(S,n)&&null!=p){b=x;const t=pl(p,a,l,vs(v));k=[vs(v),t]}else b=h??x.slice(x.length-yl(S,n)),k=u??[a(vs(b)),a(xs(b))];return{plotData:b,domain:k}}}))(n||null==e.invert,o,r,i,s)}const wl=["seriesName"],bl=()=>{const t=`\n\t.${Da} {\n\t\tpointer-events: all;\n\t\tcursor: -moz-grabbing;\n\t\tcursor: -webkit-grabbing;\n\t\tcursor: grabbing;\n\t}\n\t.${Aa} {\n\t\tpointer-events: all;\n\t\tcursor: arrow;\n\t}\n\t.${wa} {\n\t\tpointer-events: all;\n\t\tcursor: pointer;\n\t}\n\t.${$a} {\n\t\tpointer-events: none;\n\t}\n\t.${Ea} {\n\t\tpointer-events: all;\n\t}\n\t.${xa} {\n\t\tpointer-events: all;\n\t\tcursor: pointer;\n\t}\n\t.${Ma} {\n\t\tcursor: default;\n\t}\n\t.${Ta} {\n\t\tcursor: move;\n\t}\n\t.${_a} {\n\t\tcursor: pointer;\n\t}\n\t.${Pa} {\n\t\tcursor: ns-resize;\n\t}\n\t.${Na} {\n\t\tcursor: ew-resize;\n\t}`;return(0,A.jsx)("style",{type:"text/css",children:t})},kl=t=>{let{margin:{top:e,bottom:n,left:o,right:r},height:i,width:s}=t;return{height:i-e-n,width:s-o-r}},Sl=t=>{const{data:e,plotFull:n,xScale:o,clamp:r,pointsPerPxThreshold:i,flipXScale:s,xAccessor:a,displayXAccessor:l,minPointsPerPxThreshold:c}=t,h=void 0!==n?n:a===oo,{filterData:u}=vl({xScale:o,useWholeData:h,clamp:r,pointsPerPxThreshold:i,minPointsPerPxThreshold:c,flipXScale:s});return{xAccessor:a,displayXAccessor:l??a,xScale:o.copy(),fullData:e,filterData:u}},Cl=function(t,e,n,o){if(void 0===o&&(o=1),t.rangeRoundPoints){if(isNaN(n))throw new Error("padding has to be a number for ordinal scale");t.rangeRoundPoints([0,e.width],n)}else if(t.padding){if(isNaN(n))throw new Error("padding has to be a number for ordinal scale");t.range([0,e.width]),t.padding(n/2)}else{const{left:r,right:i}=isNaN(n)?n:{left:n,right:n};o>0?t.range([r,e.width-i]):t.range([e.width-i,r])}return t},Dl=t=>t?-1:1,Al=t=>{const e=(t=>{const{xAccessor:e,xExtents:n,data:o,padding:r,flipXScale:i}=t,s=Dl(i),a=kl(t),l="function"==typeof n?n(o):$n(n.map((t=>ao(t))).map((t=>t(o,e)))),{xAccessor:c,displayXAccessor:h,xScale:u,fullData:d,filterData:p}=Sl(t),f=Cl(u,a,r,s),{plotData:g,domain:m}=p(d,l,e,f);return{plotData:g,xScale:f.domain(m),xAccessor:c,displayXAccessor:h,fullData:d,filterData:p}})(t),{xAccessor:n,displayXAccessor:o,fullData:r,plotData:i,xScale:s}=e,{postCalculator:a,children:l}=t,c=void 0!==a?a(i):i,h=kl(t),u=na(Qs(h,l),{plotData:c,xAccessor:n,displayXAccessor:o,fullData:r},s.domain());return{...e,xScale:s,plotData:c,chartConfigs:u}},Ml=t=>{let{touch1Pos:e,touch2Pos:n}=t;return{topLeft:[Math.min(e[0],n[0]),Math.min(e[1],n[1])],bottomRight:[Math.max(e[0],n[0]),Math.max(e[1],n[1])]}},Tl=(t,e,n)=>!isNaN(t(e(vs(n))))&&null!=t.invert,_l=(t,e,n,o,r)=>{const i=vs(t),s=vs(e.domain()),a=n(i),l=xs(t),c=xs(e.domain()),h=n(l);s<a&&void 0!==r&&r(s,a),h<c&&void 0!==o&&o(h,c)},Pl=()=>{},Nl=(0,r.createContext)(Ys),jl=(t,e,n)=>t.map((t=>t.id===e?{...t,yScale:t.yScale.copy().domain(n),yPanEnabled:!0}:t));class $l extends r.Component{static defaultProps=(()=>({clamp:!1,className:ma,defaultFocus:!0,disablePan:!1,disableInteraction:!1,disableZoom:!1,flipXScale:!1,maintainPointsPerPixelOnResize:!0,margin:{top:0,right:40,bottom:40,left:0},minPointsPerPxThreshold:.01,mouseMoveEvent:!0,postCalculator:oo,padding:0,pointsPerPxThreshold:2,useCrossHairStyleCursor:!0,xAccessor:oo,xExtents:[Fn,En],zIndex:1,zoomAnchor:ra,zoomMultiplier:1.1,onZoom:Pl}))();canvasContainerRef=(()=>(0,r.createRef)())();eventCaptureRef=(()=>(0,r.createRef)())();finalPinch;lastSubscriptionId=0;mutableState={};panInProgress=!1;prevMouseXY;_isDidUpdateRedraw=!1;_asyncRedrawId;subscriptions=[];waitingForPinchZoomAnimationFrame;waitingForPanAnimationFrame;waitingForMouseMoveAnimationFrame;hackyWayToStopPanBeyondBounds__plotData;hackyWayToStopPanBeyondBounds__domain;constructor(t){super(t),this.state=Al(t)}getMutableState=()=>this.mutableState;getCanvasContexts=()=>this.canvasContainerRef.current?.getCanvasContexts();generateSubscriptionId=()=>(this.lastSubscriptionId++,this.lastSubscriptionId);clearBothCanvas(){const{axes:t,mouseCoord:e}=this.getCanvasContexts()||{};t&&e&&Rs([t,e],this.props.ratio)}clearMouseCanvas(){const{mouseCoord:t}=this.getCanvasContexts()||{};t&&Rs([t],this.props.ratio)}clearThreeCanvas(){const{axes:t,mouseCoord:e,bg:n}=this.getCanvasContexts()||{};t&&e&&n&&Rs([t,e,n],this.props.ratio)}subscribe=(t,e)=>{const{getPanConditions:n=ao({draggable:!1,panEnabled:!0})}=e;this.subscriptions=this.subscriptions.concat({id:t,...e,getPanConditions:n})};unsubscribe=t=>{this.subscriptions=this.subscriptions.filter((e=>e.id!==t))};getAllPanConditions=()=>this.subscriptions.map((t=>t.getPanConditions()));setCursorClass=t=>{this.eventCaptureRef.current?.setCursorClass(t)};amIOnTop=t=>{const e=this.subscriptions.filter((t=>t.getPanConditions().draggable));return e.length>0&&xs(e).id===t};handleContextMenu=(t,e)=>{const{xAccessor:n,chartConfigs:o,plotData:r,xScale:i}=this.state,s=ta(o,t),a=oa(i,n,t,r);this.triggerEvent("contextmenu",{mouseXY:t,currentItem:a,currentCharts:s},e)};calculateStateForDomain=t=>{const{fullData:e,xAccessor:n,displayXAccessor:o,xScale:r,chartConfigs:i,plotData:s,filterData:a}=this.state,{postCalculator:l}=this.props,{plotData:c,domain:h}=a(e,t,n,r,{currentPlotData:s,currentDomain:r.domain()}),u=l(c),d=r.copy().domain(h),p=na(i,{plotData:u,xAccessor:n,displayXAccessor:o,fullData:e},d.domain());return{xScale:d,plotData:u,chartConfigs:p}};pinchZoomHelper=(t,e)=>{const{xScale:n}=t,{fullData:o,xScale:r,chartConfigs:i,plotData:s,xAccessor:a,displayXAccessor:l,filterData:c}=this.state,{postCalculator:h}=this.props,u=((t,e,n)=>{const{topLeft:o,bottomRight:r}=Ml(t),{topLeft:i,bottomRight:s}=Ml(e),a=n.range()[1],l=Math.round(-(r[0]*i[0]-o[0]*s[0])/(o[0]-r[0])),c=Math.round(a+((a-r[0])*(a-i[0])-(a-o[0])*(a-s[0]))/(a-o[0]-(a-r[0])));return[Math.round(-l*o[0]/(-l+i[0])),Math.round(a-(c-a)*(a-o[0])/(c+(a-i[0])))].map(n.invert)})(t,e,n),{plotData:d,domain:p}=c(o,u,a,n,{currentPlotData:s,currentDomain:r.domain()}),f=h(d),g=r.copy().domain(p),m=e.touch1Pos;return{chartConfigs:na(i,{plotData:f,xAccessor:a,displayXAccessor:l,fullData:o},g.domain()),xScale:g,plotData:f,mouseXY:m,currentItem:oa(g,a,m,f)}};cancelDrag(){this.eventCaptureRef.current?.cancelDrag(),this.triggerEvent("dragcancel")}handlePinchZoom=(t,e,n)=>{if(!this.waitingForPinchZoomAnimationFrame){this.waitingForPinchZoomAnimationFrame=!0;const o=this.pinchZoomHelper(t,e);this.triggerEvent("pinchzoom",o,n),this.finalPinch=e,requestAnimationFrame((()=>{this.clearBothCanvas(),this.draw({trigger:"pinchzoom"}),this.waitingForPinchZoomAnimationFrame=!1}))}};handlePinchZoomEnd=(t,e)=>{const{fullData:n,xAccessor:o=$l.defaultProps.xAccessor}=this.state;if(this.finalPinch){const r=this.pinchZoomHelper(t,this.finalPinch),{xScale:i}=r,{onLoadAfter:s,onLoadBefore:a}=this.props;this.triggerEvent("pinchzoom",r,e),this.finalPinch=void 0,this.clearThreeCanvas(),this.setState(r,(()=>_l(n,i,o,s,a)))}};_zoomXImpl=(t,e,n,o,r)=>{this.triggerEvent("zoom",{xScale:n,plotData:t,chartConfigs:e,...o,show:!0},r);const{fullData:i,xAccessor:s}=this.state,{onZoom:a,onLoadAfter:l,onLoadBefore:c}=this.props;a((t||[]).length),this._isDidUpdateRedraw=!0,this.setState({xScale:n,plotData:t,chartConfigs:e},(()=>_l(i,n,s,l,c)))};handleZoom=(t,e,n)=>{if(this.panInProgress)return;const{xAccessor:o,xScale:r,plotData:i}=this.state,{zoomMultiplier:s,zoomAnchor:a}=this.props,l=a({xScale:r,xAccessor:o,mouseXY:e,plotData:i}),c=((t,e)=>t>0?1*e:1/e)(t,s),h=((t,e,n)=>{const o=t(e);return t.range().map((t=>o+(t-o)*n)).map((e=>t.invert(e)))})(r,l,c),{xScale:u,plotData:d,chartConfigs:p}=this.calculateStateForDomain(h);this.mutableState={mouseXY:e,currentItem:oa(u,o,e,d),currentCharts:ta(p,e)},this._zoomXImpl(d,p,u,this.mutableState,n)};xAxisZoom=t=>{const{xScale:e,plotData:n,chartConfigs:o}=this.calculateStateForDomain(t);this._zoomXImpl(n,o,e)};yAxisZoom=(t,e)=>{this._isDidUpdateRedraw=!0,this.setState({chartConfigs:jl(this.state.chartConfigs,t,e)})};triggerEvent(t,e,n){this.subscriptions.forEach((o=>{const r={...this.state,subscriptions:this.subscriptions};o.listener(t,e,r,n)}))}draw=t=>{this.subscriptions.forEach((e=>{e.draw&&e.draw(t)}))};redraw=()=>{this.clearThreeCanvas(),this.draw({force:!0})};panHelper=(t,e,n,o)=>{let{dx:r,dy:i}=n;const{fullData:s,xAccessor:a,displayXAccessor:l,chartConfigs:c,filterData:h}=this.state,{postCalculator:u}=this.props,d=e.range().map((t=>t-r)).map((t=>e.invert(t))),{plotData:p,domain:f}=h(s,d,a,e,{currentPlotData:this.hackyWayToStopPanBeyondBounds__plotData,currentDomain:this.hackyWayToStopPanBeyondBounds__domain,ignoreThresholds:!0}),g=e.copy().domain(f),m=u(p),y=oa(g,a,t,m),x=na(c,{plotData:m,xAccessor:a,displayXAccessor:l,fullData:s},g.domain(),i,o);return{xScale:g,plotData:m,chartConfigs:x,mouseXY:t,currentCharts:ta(x,t),currentItem:y}};handlePan=(t,e,n,o,r)=>{if(!this.waitingForPanAnimationFrame){this.waitingForPanAnimationFrame=!0,this.hackyWayToStopPanBeyondBounds__plotData=this.hackyWayToStopPanBeyondBounds__plotData??this.state.plotData,this.hackyWayToStopPanBeyondBounds__domain=this.hackyWayToStopPanBeyondBounds__domain??this.state.xScale.domain();const i=this.panHelper(t,e,n,o);this.hackyWayToStopPanBeyondBounds__plotData=i.plotData,this.hackyWayToStopPanBeyondBounds__domain=i.xScale.domain(),this.panInProgress=!0,this.triggerEvent("pan",i,r),this.mutableState={mouseXY:i.mouseXY,currentItem:i.currentItem,currentCharts:i.currentCharts},requestAnimationFrame((()=>{this.waitingForPanAnimationFrame=!1,this.clearBothCanvas(),this.draw({trigger:"pan"})}))}};handlePanEnd=(t,e,n,o,r)=>{const i=this.panHelper(t,e,n,o),{xScale:s,plotData:a,chartConfigs:l}=i;this.hackyWayToStopPanBeyondBounds__plotData=null,this.hackyWayToStopPanBeyondBounds__domain=null,this.panInProgress=!1,this.triggerEvent("panend",i,r),requestAnimationFrame((()=>{const{fullData:t,xAccessor:e}=this.state,{onLoadAfter:n,onLoadBefore:o}=this.props;this._isDidUpdateRedraw=!0,this.setState({xScale:s,plotData:a,chartConfigs:l},(()=>_l(t,s,e,n,o)))}))};handleMouseDown=(t,e,n)=>{this.triggerEvent("mousedown",this.mutableState,n)};handleMouseEnter=t=>{this.triggerEvent("mouseenter",{show:!0},t)};handleMouseMove=(t,e,n)=>{if(!this.waitingForMouseMoveAnimationFrame){this.waitingForMouseMoveAnimationFrame=!0;const{chartConfigs:e,plotData:o,xScale:r,xAccessor:i}=this.state,s=ta(e,t),a=oa(r,i,t,o);this.triggerEvent("mousemove",{show:!0,mouseXY:t,prevMouseXY:this.prevMouseXY,currentItem:a,currentCharts:s},n),this.prevMouseXY=t,this.mutableState={mouseXY:t,currentItem:a,currentCharts:s},requestAnimationFrame((()=>{this.clearMouseCanvas(),this.draw({trigger:"mousemove"}),this.waitingForMouseMoveAnimationFrame=!1}))}};handleMouseLeave=t=>{this.triggerEvent("mouseleave",{show:!1},t),this.clearMouseCanvas(),this.draw({trigger:"mouseleave"})};handleDragStart=(t,e)=>{let{startPos:n}=t;this.triggerEvent("dragstart",{startPos:n},e)};handleDrag=(t,e)=>{let{startPos:n,mouseXY:o}=t;const{chartConfigs:r,plotData:i,xScale:s,xAccessor:a}=this.state,l=ta(r,o),c=oa(s,a,o,i);this.triggerEvent("drag",{startPos:n,mouseXY:o,currentItem:c,currentCharts:l},e),this.mutableState={mouseXY:o,currentItem:c,currentCharts:l},requestAnimationFrame((()=>{this.clearMouseCanvas(),this.draw({trigger:"drag"})}))};handleDragEnd=(t,e)=>{let{mouseXY:n}=t;this.triggerEvent("dragend",{mouseXY:n},e),requestAnimationFrame((()=>{this.clearMouseCanvas(),this.draw({trigger:"dragend"})}))};handleClick=(t,e)=>{this.triggerEvent("click",this.mutableState,e),requestAnimationFrame((()=>{this.clearMouseCanvas(),this.draw({trigger:"click"})}))};handleDoubleClick=(t,e)=>{this.triggerEvent("dblclick",{},e)};getContextValues(){const{margin:t,ratio:e}=this.props,{fullData:n,plotData:o,chartConfigs:r,xScale:i,xAccessor:s,displayXAccessor:a}=this.state,{width:l,height:c}=kl(this.props);return{chartId:-1,margin:t,ratio:e,plotData:o,chartConfigs:r,xScale:i,xAccessor:s,displayXAccessor:a,width:l,height:c,fullData:n||[],xAxisZoom:this.xAxisZoom,yAxisZoom:this.yAxisZoom,getCanvasContexts:this.getCanvasContexts,redraw:this.redraw,subscribe:this.subscribe,unsubscribe:this.unsubscribe,generateSubscriptionId:this.generateSubscriptionId,getMutableState:this.getMutableState,amIOnTop:this.amIOnTop,setCursorClass:this.setCursorClass}}static getDerivedStateFromProps(t,e){const{recentProps:n={},chartConfigs:o,plotData:r,xAccessor:i,xScale:s}=e,a=((t,e)=>!wl.every((n=>Ss(t[n],e[n]))))(n,t);let l;if(Tl(s,i,r)&&!a&&Ss(n.xExtents,t.xExtents)){const[n,r]=s.domain(),i=xs(e.fullData),a=Sl(t),{xAccessor:c}=a,h=c(i);l=((t,e,n,o,r)=>{const{fullData:i,xScale:s,xAccessor:a,displayXAccessor:l,filterData:c}=t,h=xs(i),u=a(h),[d,p]=e.domain(),{postCalculator:f,children:g,padding:m,flipXScale:y,maintainPointsPerPixelOnResize:x}=n,v=Dl(y),w=kl(n),b=Cl(s,w,m,v);let k;if(!o||p>=u){const[t,n]=e.range(),[o,r]=b.range(),s=(r-o)/(n-t)*(p.valueOf()-d.valueOf()),l=c(i,[x?p.valueOf()-s:d,p],a,b,{fallbackStart:d,fallbackEnd:{lastItem:h,lastItemX:e(u)}});k=l.plotData,b.domain(l.domain)}else if(o&&p<u){const t=e(u)-e.range()[1],[n,o]=e.range().map((e=>e+t)).map((t=>e.invert(t))),r=c(i,[n,o],a,b);k=r.plotData,b.domain(r.domain)}const S=f(k),C=Qs(w,g,r),D=na(C,{plotData:S,xAccessor:a,displayXAccessor:l,fullData:i},b.domain());return{xScale:b,xAccessor:a,chartConfigs:D,plotData:S,fullData:i,filterData:c}})(a,s,t,h<=r&&h>=n,o)}else l=Al(t);return{...l,recentProps:t}}componentDidUpdate(t){this._isDidUpdateRedraw?(this._isDidUpdateRedraw=!1,this.redraw()):t===this.props||this.panInProgress||(clearTimeout(this._asyncRedrawId),this._asyncRedrawId=setTimeout((()=>{this.redraw()}),0)),t.data!==this.props.data&&this.triggerEvent("dataupdated",{chartConfigs:this.state.chartConfigs,xScale:this.state.xScale,plotData:this.state.plotData})}resetYDomain=t=>{const{chartConfigs:e}=this.state;let n=!1;const o=e.map((e=>null!=t&&e.id!==t||Ss(e.yScale.domain(),e.realYDomain)?e:(n=!0,{...e,yScale:e.yScale.domain(e.realYDomain),yPanEnabled:!1})));n&&(this.clearThreeCanvas(),this.setState({chartConfigs:o}))};shouldComponentUpdate(){return!this.panInProgress}render(){const{disableInteraction:t,disablePan:e,disableZoom:n,useCrossHairStyleCursor:o,height:r,width:i,margin:s,className:a,zIndex:l,defaultFocus:c,ratio:h,mouseMoveEvent:u,onClick:d,onDoubleClick:p,children:f}=this.props,{plotData:g,xScale:m,xAccessor:y,chartConfigs:x}=this.state,v=kl(this.props),w=Tl(m,y,g),b=o&&w;return(0,A.jsx)(Nl.Provider,{value:this.getContextValues(),children:(0,A.jsxs)("div",{className:a,style:{position:"relative",width:i,height:r},onClick:d,onDoubleClick:p,children:[(0,A.jsx)(sl,{refEl:this.canvasContainerRef,ratio:h,width:i,height:r,style:{height:r,zIndex:l,width:i}}),(0,A.jsxs)("svg",{className:a,width:i,height:r,style:{position:"absolute",zIndex:l+5},children:[bl(),(0,A.jsx)(cl,{dimensions:v,chartConfig:x}),(0,A.jsxs)("g",{transform:`translate(${s.left+.5}, ${s.top+.5})`,children:[(0,A.jsx)(rl,{ref:this.eventCaptureRef,useCrossHairStyleCursor:b,mouseMove:u&&w,zoom:!n&&w,pan:!e&&w,width:v.width,height:v.height,chartConfig:x,xScale:m,xAccessor:y,focus:c,disableInteraction:t,getAllPanConditions:this.getAllPanConditions,onContextMenu:this.handleContextMenu,onClick:this.handleClick,onDoubleClick:this.handleDoubleClick,onMouseDown:this.handleMouseDown,onMouseMove:this.handleMouseMove,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onDragStart:this.handleDragStart,onDrag:this.handleDrag,onDragComplete:this.handleDragEnd,onZoom:this.handleZoom,onPinchZoom:this.handlePinchZoom,onPinchZoomEnd:this.handlePinchZoomEnd,onPan:this.handlePan,onPanEnd:this.handlePanEnd}),(0,A.jsx)("g",{className:$a,children:f})]})]})]})})}}const El=t=>{const e=(0,r.useRef)(null);return(0,r.useLayoutEffect)((()=>{e.current=t})),(0,r.useCallback)((function(){const t=e.current;return t?t(...arguments):void 0}),[])},Fl=Object.assign,Il={mouseleave:"mousemove",panend:"pan",pinchzoom:"pan",mousedown:"mousemove",click:"mousemove",contextmenu:"mousemove",dblclick:"mousemove",dragstart:"drag",dragend:"drag",dragcancel:"drag",zoom:"zoom"},Ll=t=>t.mouseCoord,Ol=(t,e)=>e?{clipPath:`url(#chart-area-clip${void 0!==t?"-"+t:""})`}:void 0,zl=(0,r.memo)((t=>{const{refEl:e,isHover:n,clip:o=!0,edgeClip:i=!1,canvasToDraw:s=Ll,canvasDraw:a,svgDraw:l,preCanvasDraw:c,postCanvasDraw:h,updateMoreProps:u,getMoreProps:d}=t,p=(0,r.useContext)(Nl),{chartId:f}=(0,r.useContext)(Us),g=(0,r.useMemo)((()=>p.generateSubscriptionId?.()||0),[]),m=N(),{getCanvasContexts:y,subscribe:x,unsubscribe:v}=p,w=(0,r.useRef)({chartId:p.chartId,hovering:!1,currentCharts:[],chartConfigs:p.chartConfigs,fullData:p.fullData,plotData:p.plotData,xScale:p.xScale,xAccessor:p.xAccessor}),b=(0,r.useRef)(!1),k=(0,r.useRef)(!1),S=(0,r.useRef)(!1),C=(0,r.useCallback)(((t,e)=>{Fl(e,t||{}),u?.(t,e)}),[u]),D=(0,r.useCallback)((()=>{const{chartConfigs:t,xAccessor:e,displayXAccessor:n,width:o,height:r,fullData:i}=p,s=d?.(w.current);return{displayXAccessor:n,width:o,height:r,...w.current,fullData:i,chartConfigs:t,xAccessor:e,...s,chartConfig:Hs(t,f)}}),[p,d,f]);(0,r.useImperativeHandle)(e,(()=>({getMoreProps:D})),[D]);const M=(0,r.useCallback)((t=>void 0!==n&&n(D(),t)),[n,D]),T=(0,r.useCallback)(((t,e)=>{c?.(t,e)}),[c]),_=(0,r.useCallback)(((t,e)=>{h?.(t,e)}),[h]),P=El(((e,n)=>{const o=Il[e]||e;if(t.drawOn.includes(o)&&(!t.shouldTypeProceed||t.shouldTypeProceed(e,w.current)))switch(e){case"zoom":case"mouseenter":break;case"mouseleave":w.current.hovering=!1,t.onUnHover&&t.onUnHover(n,D());break;case"contextmenu":t.onContextMenu&&t.onContextMenu(n,D()),w.current.hovering&&t.onContextMenuWhenHover&&t.onContextMenuWhenHover(n,D());break;case"mousedown":t.onMouseDown&&t.onMouseDown(n,D());break;case"click":{const{onClick:e,onClickOutside:o,onClickWhenHover:r}=t,i=D();i.hovering&&void 0!==r?r(n,i):void 0!==o&&o(n,i),void 0!==e&&e(n,i);break}case"mousemove":{const e=w.current.hovering;w.current.hovering=M(n);const{amIOnTop:o,setCursorClass:r}=p;w.current.hovering&&!t.selected&&o(g)&&void 0!==t.onHover?(r("react-financial-charts-pointer-cursor"),S.current=!0):w.current.hovering&&t.selected&&o(g)?(r(t.interactiveCursorClass),S.current=!0):e&&!w.current.hovering&&S.current&&(S.current=!1,r(null));const i=D();w.current.hovering&&!e&&t.onHover&&t.onHover(n,i),e&&!w.current.hovering&&t.onUnHover&&t.onUnHover(n,i),t.onMouseMove&&t.onMouseMove(n,i);break}case"dblclick":{const e=D();t.onDoubleClick&&t.onDoubleClick(n,e),w.current.hovering&&t.onDoubleClickWhenHover&&t.onDoubleClickWhenHover(n,e);break}case"pan":w.current.hovering=!1,t.onPan&&t.onPan(n,D());break;case"panend":t.onPanEnd&&t.onPanEnd(n,D());break;case"dragstart":if(F().draggable){const{amIOnTop:e}=p;e(g)&&(b.current=!0,void 0!==t.onDragStart&&t.onDragStart(n,D()))}break;case"drag":b.current&&t.onDrag&&t.onDrag(n,D());break;case"dragend":b.current&&t.onDragComplete&&t.onDragComplete(n,D()),b.current=!1;break;case"dragcancel":if(b.current||S.current){const{setCursorClass:t}=p;t(null)}break;default:return}})),j=El(((t,e,n,o)=>{e&&C(e,w.current),k.current=!0,P(t,o),k.current=!1})),$=(0,r.useCallback)((()=>{if(void 0===a||void 0===s)return;const t=D(),e=y?.();if(void 0===e)return;const n=s(e);void 0!==n&&(T(n,t),a(n,t),_(n,t))}),[s,a,y,T,_,D]),E=El((e=>{let{trigger:n,force:o=!1}=e;const r=Il[n]||n;(t.drawOn.indexOf(r)>-1||t.selected||o)&&(void 0===a?m():$())})),F=El((()=>({draggable:!!(w.current.hovering&&(t.selected||t.enableDragOnHover)),panEnabled:!t.disablePan})));return(0,r.useEffect)((()=>{const{setCursorClass:e}=p;t.selected&&w.current.hovering?(S.current=!0,e(t.interactiveCursorClass)):(S.current=!1,e(null))}),[t.selected]),(0,r.useEffect)((()=>{void 0===a||k.current||(C(void 0,w.current),$())})),(0,r.useEffect)((()=>(x(g,{chartId:f,clip:o,edgeClip:i,listener:j,draw:E,getPanConditions:F}),()=>{v(g),S.current&&p.setCursorClass(null)})),[f,g,i,o]),void 0!==a||void 0===l?null:(0,A.jsx)("g",{style:Ol(f,o),children:l(D())})})),Rl=Array.isArray,Wl=["drag","dragend"],Hl=(t,e,n,o,r)=>{t.beginPath(),t.rect(e,n,o,r),t.clip()},Xl=[],Yl=t=>{let{refComp:e,drawOn:n=Xl,...o}=t;const i=(0,r.useContext)(Us),{clip:s,edgeClip:a,disablePan:l}=o,{chartId:c,ratio:h,margin:{left:u,right:d,top:p}}=i,f=(0,r.useCallback)(((t,e)=>{const n=Hs(e.chartConfigs,c);if(!n)return;t.save();const{width:o,height:r,origin:i}=n,l=.5*h,f=l+i[0]+u,g=l+i[1]+p;t.setTransform(1,0,0,1,0,0),t.scale(h,h),a&&Hl(t,-1,g-10,o+u+d+1,r+20),t.translate(f,g),s&&Hl(t,-1,-1,o+1,r+1)}),[u,d,p,h,s,a,c]),g=(0,r.useCallback)(((t,e)=>{t.restore()}),[]),m=(0,r.useCallback)(((t,e)=>{const{chartConfig:n}=t||e;if(n&&Rl(n)&&(e.chartConfig=n.find((t=>t.id===c))),e.chartConfig){const{origin:[n,o]}=e.chartConfig,{mouseXY:r,startPos:i}=t;if(r){const[t,i]=r;e.mouseXY=[t-n,i-o]}if(i){const[t,r]=i;e.startPos=[t-n,r-o]}}}),[c]),y=(0,r.useCallback)(((t,e)=>{if(l&&("mousemove"===t||"click"===t))return!0;const{currentCharts:n}=e||{};return!n||-1!==Wl.indexOf(t)||n.indexOf(c)>-1}),[l,c]);return(0,A.jsx)(zl,{...o,refEl:e,drawOn:n,preCanvasDraw:f,postCanvasDraw:g,updateMoreProps:m,shouldTypeProceed:y})};class Ul extends r.Component{ref=(()=>(0,r.createRef)())();clicked=!1;dragHappened=!1;state={startPosition:null};handleDragEnd=t=>{const e=s(this.ref);if(e){if(!this.dragHappened)if(this.clicked){const n=sa(t,e),{onDoubleClick:o}=this.props;void 0!==o&&o(t,n)}else this.clicked=!0,setTimeout((()=>{this.clicked=!1}),300);ga(Ts(e)).on(Ns,null).on(js,null).on($s,null).on(Es,null),this.setState({startPosition:null})}};handleDrag=t=>{const e=s(this.ref);if(!e)return;this.dragHappened=!0;const{getMouseDelta:n,inverted:o}=this.props,{startPosition:r}=this.state;if(null!==r){const{startScale:i,startXY:s}=r,a=n(s,sa(t,e)),l=In(i.range());if(void 0===l)return;const c=i.range().map((t=>o?t-Ms(t-l)*a:t+Ms(t-l)*a)),h=c.map(i.invert);if(Ms(xs(i.range())-ws(i.range()))===Ms(xs(c)-ws(c))){const{axisZoomCallback:t}=this.props;void 0!==t&&t(h)}}};handleDragStartTouch=t=>{const e=s(this.ref);if(!e)return;this.dragHappened=!1;const n=this.props.getScale();if(1===t.touches.length&&void 0!==n.invert){ga(Ts(e)).on($s,this.handleDrag).on(Es,this.handleDragEnd);const o=Os(Is(t.touches[0]),t);this.setState({startPosition:{startScale:n,startXY:o}})}};handleDragStartMouse=t=>{t.preventDefault();const e=s(this.ref);if(!e)return;this.dragHappened=!1;const n=this.props.getScale();if(void 0!==n.invert){ga(Ts(e)).on(Ns,this.handleDrag,!1).on(js,this.handleDragEnd,!1);const o=zs(t);this.setState({startPosition:{startXY:o,startScale:n}})}};handleRightClick=t=>{t.stopPropagation(),t.preventDefault();const e=s(this.ref),{onContextMenu:n}=this.props;if(!e||!n)return;const o=e.getBoundingClientRect(),r=zs(t,o);ga(Ts(e)).on(Ns,null).on(js,null),this.setState({startPosition:null}),n(t,r)};render(){const{bg:t,className:e,zoomCursorClassName:n}=this.props,o=null===this.state.startPosition?Ma:n||"";return(0,A.jsx)("rect",{ref:this.ref,className:`${Ea} ${o} ${e}`,x:t.x,y:t.y,height:t.h,width:t.w,opacity:0,onContextMenu:this.handleRightClick,onMouseDown:this.handleDragStartMouse,onTouchStart:this.handleDragStartTouch})}}Ul.defaultProps={inverted:!0,className:""};const Bl=Ul,Zl=t=>t.axes,Vl=t=>t.mouseCoord;function ql(t,e,n,o){if(isNaN(e)||isNaN(n))return t;var r,i,s,a,l,c,h,u,d,p=t._root,f={data:o},g=t._x0,m=t._y0,y=t._x1,x=t._y1;if(!p)return t._root=f,t;for(;p.length;)if((c=e>=(i=(g+y)/2))?g=i:y=i,(h=n>=(s=(m+x)/2))?m=s:x=s,r=p,!(p=p[u=h<<1|c]))return r[u]=f,t;if(a=+t._x.call(null,p.data),l=+t._y.call(null,p.data),e===a&&n===l)return f.next=p,r?r[u]=f:t._root=f,t;do{r=r?r[u]=new Array(4):t._root=new Array(4),(c=e>=(i=(g+y)/2))?g=i:y=i,(h=n>=(s=(m+x)/2))?m=s:x=s}while((u=h<<1|c)==(d=(l>=s)<<1|a>=i));return r[d]=p,r[u]=f,t}function Gl(t,e,n,o,r){this.node=t,this.x0=e,this.y0=n,this.x1=o,this.y1=r}function Kl(t){return t[0]}function Jl(t){return t[1]}function Ql(t,e,n){var o=new tc(null==e?Kl:e,null==n?Jl:n,NaN,NaN,NaN,NaN);return null==t?o:o.addAll(t)}function tc(t,e,n,o,r,i){this._x=t,this._y=e,this._x0=n,this._y0=o,this._x1=r,this._y1=i,this._root=void 0}function ec(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var nc=Ql.prototype=tc.prototype;function oc(t){return()=>t}nc.copy=function(){var t,e,n=new tc(this._x,this._y,this._x0,this._y0,this._x1,this._y1),o=this._root;if(!o)return n;if(!o.length)return n._root=ec(o),n;for(t=[{source:o,target:n._root=new Array(4)}];o=t.pop();)for(var r=0;r<4;++r)(e=o.source[r])&&(e.length?t.push({source:e,target:o.target[r]=new Array(4)}):o.target[r]=ec(e));return n},nc.add=function(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return ql(this.cover(e,n),e,n,t)},nc.addAll=function(t){var e,n,o,r,i=t.length,s=new Array(i),a=new Array(i),l=1/0,c=1/0,h=-1/0,u=-1/0;for(n=0;n<i;++n)isNaN(o=+this._x.call(null,e=t[n]))||isNaN(r=+this._y.call(null,e))||(s[n]=o,a[n]=r,o<l&&(l=o),o>h&&(h=o),r<c&&(c=r),r>u&&(u=r));if(l>h||c>u)return this;for(this.cover(l,c).cover(h,u),n=0;n<i;++n)ql(this,s[n],a[n],t[n]);return this},nc.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,o=this._y0,r=this._x1,i=this._y1;if(isNaN(n))r=(n=Math.floor(t))+1,i=(o=Math.floor(e))+1;else{for(var s,a,l=r-n||1,c=this._root;n>t||t>=r||o>e||e>=i;)switch(a=(e<o)<<1|t<n,(s=new Array(4))[a]=c,c=s,l*=2,a){case 0:r=n+l,i=o+l;break;case 1:n=r-l,i=o+l;break;case 2:r=n+l,o=i-l;break;case 3:n=r-l,o=i-l}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=o,this._x1=r,this._y1=i,this},nc.data=function(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t},nc.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},nc.find=function(t,e,n){var o,r,i,s,a,l,c,h=this._x0,u=this._y0,d=this._x1,p=this._y1,f=[],g=this._root;for(g&&f.push(new Gl(g,h,u,d,p)),null==n?n=1/0:(h=t-n,u=e-n,d=t+n,p=e+n,n*=n);l=f.pop();)if(!(!(g=l.node)||(r=l.x0)>d||(i=l.y0)>p||(s=l.x1)<h||(a=l.y1)<u))if(g.length){var m=(r+s)/2,y=(i+a)/2;f.push(new Gl(g[3],m,y,s,a),new Gl(g[2],r,y,m,a),new Gl(g[1],m,i,s,y),new Gl(g[0],r,i,m,y)),(c=(e>=y)<<1|t>=m)&&(l=f[f.length-1],f[f.length-1]=f[f.length-1-c],f[f.length-1-c]=l)}else{var x=t-+this._x.call(null,g.data),v=e-+this._y.call(null,g.data),w=x*x+v*v;if(w<n){var b=Math.sqrt(n=w);h=t-b,u=e-b,d=t+b,p=e+b,o=g.data}}return o},nc.remove=function(t){if(isNaN(i=+this._x.call(null,t))||isNaN(s=+this._y.call(null,t)))return this;var e,n,o,r,i,s,a,l,c,h,u,d,p=this._root,f=this._x0,g=this._y0,m=this._x1,y=this._y1;if(!p)return this;if(p.length)for(;;){if((c=i>=(a=(f+m)/2))?f=a:m=a,(h=s>=(l=(g+y)/2))?g=l:y=l,e=p,!(p=p[u=h<<1|c]))return this;if(!p.length)break;(e[u+1&3]||e[u+2&3]||e[u+3&3])&&(n=e,d=u)}for(;p.data!==t;)if(o=p,!(p=p.next))return this;return(r=p.next)&&delete p.next,o?(r?o.next=r:delete o.next,this):e?(r?e[u]=r:delete e[u],(p=e[0]||e[1]||e[2]||e[3])&&p===(e[3]||e[2]||e[1]||e[0])&&!p.length&&(n?n[d]=p:this._root=p),this):(this._root=r,this)},nc.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},nc.root=function(){return this._root},nc.size=function(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t},nc.visit=function(t){var e,n,o,r,i,s,a=[],l=this._root;for(l&&a.push(new Gl(l,this._x0,this._y0,this._x1,this._y1));e=a.pop();)if(!t(l=e.node,o=e.x0,r=e.y0,i=e.x1,s=e.y1)&&l.length){var c=(o+i)/2,h=(r+s)/2;(n=l[3])&&a.push(new Gl(n,c,h,i,s)),(n=l[2])&&a.push(new Gl(n,o,h,c,s)),(n=l[1])&&a.push(new Gl(n,c,r,i,h)),(n=l[0])&&a.push(new Gl(n,o,r,c,h))}return this},nc.visitAfter=function(t){var e,n=[],o=[];for(this._root&&n.push(new Gl(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var r=e.node;if(r.length){var i,s=e.x0,a=e.y0,l=e.x1,c=e.y1,h=(s+l)/2,u=(a+c)/2;(i=r[0])&&n.push(new Gl(i,s,a,h,u)),(i=r[1])&&n.push(new Gl(i,h,a,l,u)),(i=r[2])&&n.push(new Gl(i,s,u,h,c)),(i=r[3])&&n.push(new Gl(i,h,u,l,c))}o.push(e)}for(;e=o.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},nc.x=function(t){return arguments.length?(this._x=t,this):this._x},nc.y=function(t){return arguments.length?(this._y=t,this):this._y};const rc=Math.random;function ic(){return 1e-6*(rc()-.5)}const sc=t=>"function"==typeof t,ac=Math.sqrt,lc=t=>t.x+t.vx,cc=t=>t.y+t.vy;const hc={value:()=>{}},uc=Object.prototype.hasOwnProperty;function dc(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];let o,r,i=e.length,s={};for(o=0;o<i;++o){if(!(r=e[o]+"")||r in s||/[\s.]/.test(r))throw new Error("illegal type: "+r);s[r]=[]}return new pc(s)}function pc(t){this._=t}function fc(t,e){let n,o=0,r=t.length;for(;o<r;++o)if((n=t[o]).name===e)return n.value}function gc(t,e,n){let o=0,r=t.length;for(;o<r;++o)if(t[o].name===e){t[o]=hc,t=t.slice(0,o).concat(t.slice(o+1));break}return null!=n&&t.push({name:e,value:n}),t}pc.prototype=dc.prototype={constructor:pc,on:function(t,e){let n,o=this._,r=(a=o,(t+"").trim().split(/^|\s+/).map((function(t){let e="",n=t.indexOf(".");if(n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!uc.call(a,t))throw new Error("unknown type: "+t);return{type:t,name:e}}))),i=-1,s=r.length;var a;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++i<s;)if(n=(t=r[i]).type)o[n]=gc(o[n],t.name,e);else if(null==e)for(n in o)o[n]=gc(o[n],t.name,null);return this}for(;++i<s;)if((n=(t=r[i]).type)&&(n=fc(o[n],t.name)))return n},copy:function(){let t={},e=this._;for(let n in e)t[n]=e[n].slice();return new pc(t)},call:function(t,e){let n,o,r,i;if((n=arguments.length-2)>0)for(r=new Array(n),i=0;i<n;++i)r[i]=arguments[i+2];if(!uc.call(this._,t))throw new Error("unknown type: "+t);for(o=this._[t],i=0,n=o.length;i<n;++i)o[i].value.apply(e,r)},apply:function(t,e,n){if(!uc.call(this._,t))throw new Error("unknown type: "+t);let o=this._[t],r=0,i=o.length;for(;r<i;++r)o[r].value.apply(e,n)}};const mc=dc;let yc,xc,vc=0,wc=0,bc=0,kc=0,Sc=0,Cc=0,Dc=t=>"object"==typeof t,Ac=Dc(performance)&&performance.now?performance:Date,Mc=Dc(window)&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Tc(){return Sc||(Mc(_c),Sc=Ac.now()+Cc)}function _c(){Sc=0}function Pc(){this._call=this._time=this._next=null}function Nc(t,e,n){const o=new Pc;return o.restart(t,e,n),o}function jc(){Sc=(kc=Ac.now())+Cc,vc=wc=0;try{!function(){Tc(),++vc;let t,e=yc;for(;e;)(t=Sc-e._time)>=0&&e._call.call(void 0,t),e=e._next;--vc}()}finally{vc=0,function(){let t,e,n=yc,o=1/0;for(;n;)n._call?(o>n._time&&(o=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:yc=e);xc=t,Ec(o)}(),Sc=0}}function $c(){let t=Ac.now(),e=t-kc;e>1e3&&(Cc-=e,kc=t)}function Ec(t){if(vc)return;wc&&(wc=clearTimeout(wc)),t-Sc>24?(t<1/0&&(wc=setTimeout(jc,t-Ac.now()-Cc)),bc&&(bc=clearInterval(bc))):(bc||(kc=Ac.now(),bc=setInterval($c,1e3)),vc=1,Mc(jc))}Pc.prototype=Nc.prototype={constructor:Pc,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?Tc():+n)+(null==e?0:+e),this._next||xc===this||(xc?xc._next=this:yc=this,xc=this),this._call=t,this._time=n,Ec()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ec())}};let Fc=Math.PI*(3-Math.sqrt(5));const Ic=t=>"function"==typeof t;const Lc=t=>"top"===t||"left"===t?-1:1,Oc=t=>"bottom"===t||"top"===t,zc=(t,e)=>{const{orient:n,innerTickSize:o=4,tickFormat:r,tickPadding:i=4,tickLabelFill:s,tickStrokeWidth:a,tickStrokeDasharray:l,fontSize:c=12,fontFamily:h,fontWeight:u,showTicks:d,showTickLabel:p,ticks:f,tickValues:g,tickStrokeStyle:m,tickInterval:y,tickIntervalFunction:x,...v}=t;let w;if(void 0!==g)w="function"==typeof g?g(e.domain()):g;else if(void 0!==y){const[t,n]=e.domain(),o=function(){let t=+(arguments.length<=0?void 0:arguments[0]),e=+(arguments.length<=1?void 0:arguments[1]),n=arguments.length,o=n<2?(e=t,t=0,1):n<3?1:+(arguments.length<=2?void 0:arguments[2]),r=new Array(n),i=-1;for(n=0|Ln(0,On((e-t)/o));++i<n;)r[i]=t+i*o;return r}(t,n,(n-t)/y);w=x?x(t,n,y):o}else w=void 0!==e.ticks?e.ticks(f):e.domain();const b=void 0===r?e.tickFormat(f):t=>r(t)||"",k=Lc(n),S=Math.max(o,0)+i;let C,D,A,M;if(Oc(n)){const t=k*o,n=k*S;if(D=k<0?"0em":".71em",A=k<0?0:.71*c,M="middle",C=w.map((o=>{const r=Math.round(e(o));return{value:o,x1:r,y1:0,x2:r,y2:t,labelX:r,labelY:n}})),d){const t=C.map((t=>({id:t.value,value:t.value,fy:t.y2,origX:t.x1}))),e=function(t){let e,n=1,o=.001,r=1-Math.pow(o,1/300),i=0,s=.6,a=new Map,l=Nc(h),c=mc("tick","end");function h(){u(),c.call("tick",e),n<o&&(l.stop(),c.call("end",e))}function u(o){let l,c,h,u=t.length;for(void 0===o&&(o=1),h=0;h<o;++h)for(n+=(i-n)*r,a.forEach((function(t){t(n)})),l=0;l<u;++l)c=t[l],null==c.fx?c.x+=c.vx*=s:(c.x=c.fx,c.vx=0),null==c.fy?c.y+=c.vy*=s:(c.y=c.fy,c.vy=0);return e}function d(){let e,n=0,o=t.length;for(;n<o;++n){if(e=t[n],e.index=n,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){const t=10*Math.sqrt(n),o=n*Fc;e.x=t*Math.cos(o),e.y=t*Math.sin(o)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function p(e){return e.initialize&&e.initialize(t),e}return null==t&&(t=[]),d(),e={tick:u,restart:function(){return l.restart(h),e},stop:function(){return l.stop(),e},nodes:function(n){return arguments.length?(t=n,d(),a.forEach(p),e):t},alpha:function(t){return arguments.length?(n=+t,e):n},alphaMin:function(t){return arguments.length?(o=+t,e):o},alphaDecay:function(t){return arguments.length?(r=+t,e):+r},alphaTarget:function(t){return arguments.length?(i=+t,e):i},velocityDecay:function(t){return arguments.length?(s=1-t,e):1-s},force:function(t,n){return arguments.length>1?(null==n?a.delete(t):a.set(t,p(n)),e):a.get(t)},find:function(e,n,o){let r,i,s,a,l,c=0,h=t.length;for(null==o?o=1/0:o*=o,c=0;c<h;++c)a=t[c],r=e-a.x,i=n-a.y,s=r*r+i*i,s<o&&(l=a,o=s);return l},on:function(t,n){return arguments.length>1?(c.on(t,n),e):c.on(t)}}}(t).force("x",function(t){let e,n,o,r=oc(.1);Ic(t)||(t=oc(null==t?0:+t));const i=t=>{let r,i=0,s=e.length;for(;i<s;++i)r=e[i],r.vx+=(o[i]-r.x)*n[i]*t},s=()=>{if(!e)return;let i,s=e.length;for(n=new Array(s),o=new Array(s),i=0;i<s;++i)n[i]=isNaN(o[i]=+t(e[i],i,e))?0:+r(e[i],i,e)};return i.initialize=t=>{e=t,s()},i.strength=function(){return arguments.length?(r=Ic(arguments.length<=0?void 0:arguments[0])?arguments.length<=0?void 0:arguments[0]:oc(+(arguments.length<=0?void 0:arguments[0])),s(),i):r},i.x=function(){return arguments.length?(t=Ic(arguments.length<=0?void 0:arguments[0])?arguments.length<=0?void 0:arguments[0]:oc(+(arguments.length<=0?void 0:arguments[0])),s(),i):t},i}((t=>t.origX)).strength(1)).force("collide",function(t){let e,n,o=1,r=1;sc(t)||(t=oc(null==t?1:+t));const i=t=>{if(t.data)return t.r=n[t.data.index];let e;for(e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)},s=()=>{let t,s,a,l,c,h,u,d,p=e.length,f=(t,e,n,r,i)=>{let s=t.data,d=t.r,p=h+d;if(!s)return e>l+p||r<l-p||n>c+p||i<c-p;if(s.index>a.index){let t=l-s.x-s.vx,e=c-s.y-s.vy,n=t*t+e*e;n<p*p&&(0===t&&(t=ic(),n+=t*t),0===e&&(e=ic(),n+=e*e),n=(p-(n=ac(n)))/n*o,a.vx+=(t*=n)*(p=(d*=d)/(u+d)),a.vy+=(e*=n)*p,s.vx-=t*(p=1-p),s.vy-=e*p)}};for(d=0;d<r;++d)for(s=Ql(e,lc,cc).visitAfter(i),t=0;t<p;++t)a=e[t],h=n[a.index],u=h*h,l=a.x+a.vx,c=a.y+a.vy,s.visit(f)},a=()=>{if(!e)return;let o,r,i=e.length;for(n=new Array(i),o=0;o<i;++o)r=e[o],n[r.index]=+t(r,o,e)};return s.initialize=t=>{e=t,a()},s.iterations=t=>t.length?(r=+t[0],s):r,s.strength=t=>t.length?(o=+t[0],s):o,s.radius=e=>e.length?(t=sc(e[0])?e[0]:oc(+e[0]),a(),s):t,s}(22)).stop();for(let t=0;t<100;++t)e.tick();C=Rn(C,t).map((t=>{const[e,n]=t;return Math.abs(n.x-n.origX)>.01?{...e,x2:n.x,labelX:n.x}:e}))}}else C=w.map((t=>{const n=Math.round(e(t));return{value:t,x1:0,y1:n,x2:k*o,y2:n,labelX:k*S,labelY:n}})),D=".32em",A=.32*c,M=k<0?"end":"start";return{orient:n,ticks:C,scale:e,tickStrokeStyle:m,tickLabelFill:s||m,tickStrokeWidth:a,tickStrokeDasharray:l,dy:D,canvas_dy:A,textAnchor:M,fontSize:c,fontFamily:h,fontWeight:u,format:b,showTickLabel:p,...v}},Rc=(t,e)=>{const{ticks:n,tickStrokeStyle:o}=e;void 0!==o&&(t.strokeStyle=o,t.fillStyle=o),n.forEach((n=>{((t,e,n)=>{const{tickStrokeWidth:o,tickStrokeDasharray:r}=n;t.beginPath(),t.moveTo(e.x1,e.y1),t.lineTo(e.x2,e.y2),t.lineWidth=o;const i=ho(r);t.setLineDash(i),t.stroke()})(t,n,e)}))},Wc=(t,e,n)=>{e.ticks.forEach((o=>{((t,e,n,o)=>{const{orient:r,gridLinesStrokeWidth:i,gridLinesStrokeStyle:s,gridLinesStrokeDasharray:a}=n,{chartConfig:l}=o,{height:c,width:h}=l;void 0!==s&&(t.strokeStyle=s),t.beginPath();const u=Lc(r);Oc(r)?(t.moveTo(e.x1,0),t.lineTo(e.x2,u*c)):(t.moveTo(0,e.y1),t.lineTo(u*h,e.y2)),t.lineWidth=i;const d=ho(a);t.setLineDash(d),t.stroke()})(t,o,e,n)}))},Hc=["pan"],Xc=t=>{const{getScale:e,edgeClip:n,zoomEnabled:o,zoomCursorClassName:i,bg:a,className:l,inverted:c,transform:h,getMouseDelta:u,axisZoomCallback:d,onContextMenu:p,onDoubleClick:f}=t,g=(0,r.useRef)(),m=(0,r.useCallback)((()=>e(s(g).getMoreProps())),[e]);return(0,A.jsxs)("g",{transform:gs(h),children:[o?(0,A.jsx)(Bl,{className:l,zoomCursorClassName:i,inverted:c,bg:a,axisZoomCallback:d,getScale:m,getMouseDelta:u,onContextMenu:p,onDoubleClick:f}):null,(0,A.jsx)(Yl,{refComp:g,clip:!1,edgeClip:n,canvasToDraw:Zl,canvasDraw:(n,o)=>{((t,e)=>{t.save(),t.translate(e[0],e[1])})(n,h);const r=zc(t,e(o));t.showTicks&&Rc(n,r),t.showGridLines&&Wc(n,r,o),t.showTickLabel&&((t,e)=>{const{textAnchor:n,tickLabelFill:o}=e;t.font=(t=>{let{fontWeight:e,fontSize:n,fontFamily:o}=t;return`${e} ${n}px ${o}`})(e),void 0!==o&&(t.fillStyle=o),t.textAlign="middle"===n?"center":n,e.ticks.forEach((n=>{((t,e,n)=>{const{canvas_dy:o,format:r}=n,i=r(e.value);t.beginPath(),t.fillText(i,e.labelX,e.labelY+o)})(t,n,e)}))})(n,r),t.showDomain&&((t,e)=>{const{orient:n,outerTickSize:o,strokeStyle:r,strokeWidth:i,range:s}=e,a=Lc(n);t.lineWidth=i,t.strokeStyle=r,t.beginPath();const l=ws(s),c=xs(s),h=a*o;Oc(n)?(t.moveTo(l,h),t.lineTo(l,0),t.lineTo(c,0),t.lineTo(c,h)):(t.moveTo(h,l),t.lineTo(0,l),t.lineTo(0,c),t.lineTo(h,c)),t.stroke()})(n,t),n.restore()},drawOn:Hc})]})},Yc=t=>t<400?2:t<500?6:8,Uc=t=>{let{xScale:e,width:n}=t;return e.invert?((t,e)=>{const n=e.map(t.invert);return t.copy().domain(n).range(e)})(e,[0,n]):e},Bc="#000000",Zc={axisAt:"bottom",className:Ia,domainClassName:Oa,fontFamily:nl,fontSize:12,fontWeight:400,getMouseDelta:(t,e)=>t[0]-e[0],gridLinesStrokeStyle:"#e2e4ec",gridLinesStrokeWidth:1,orient:"bottom",outerTickSize:0,innerTickSize:4,showDomain:!0,showGridLines:!1,showTicks:!0,showTickLabel:!0,strokeStyle:Bc,strokeWidth:1,tickPadding:4,tickLabelFill:Bc,tickStrokeStyle:Bc,xZoomHeight:25,zoomEnabled:!0,zoomCursorClassName:Na},Vc=t=>{const e=i(t,Zc),{xAxisZoom:n,chartConfig:{width:o,height:s}}=(0,r.useContext)(Us),{getMouseDelta:a,outerTickSize:l,showTicks:c,strokeStyle:h,strokeWidth:u,zoomEnabled:d,...p}=e,f=((t,e,n)=>{const{axisAt:o,xZoomHeight:r,orient:i,ticks:s}=t,a="top"===i?-r:0,l=r,c=e,h=((t,e)=>"top"===t?0:"bottom"===t?e:"middle"===t?e/2:t)(o,n);return{bg:{x:0,y:a,h:l,w:c},transform:[0,h],range:[0,e],getScale:Uc,ticks:s??Yc(e)}})(e,o,s);return(0,A.jsx)(Xc,{...p,...f,getMouseDelta:a,outerTickSize:l,showTicks:c,strokeStyle:h,strokeWidth:u,zoomEnabled:d&&c,axisZoomCallback:n})},qc=t=>t<300?2:t<500?6:8,Gc=t=>{const{yScale:e,flipYScale:n,height:o}=t.chartConfig;if(e.invert){const t=n?[0,o]:[o,0],r=t.map(e.invert);return e.copy().domain(r).range(t)}return e},Kc="#000000",Jc={axisAt:"right",className:La,domainClassName:Oa,fontFamily:nl,fontSize:12,fontWeight:400,getMouseDelta:(t,e)=>t[1]-e[1],gridLinesStrokeStyle:"#e2e4ec",gridLinesStrokeWidth:1,innerTickSize:4,outerTickSize:0,orient:"right",showDomain:!0,showGridLines:!1,showTicks:!0,showTickLabel:!0,strokeStyle:Kc,strokeWidth:1,tickPadding:4,tickLabelFill:Kc,tickStrokeStyle:Kc,yZoomWidth:40,zoomEnabled:!0,zoomCursorClassName:Pa},Qc=t=>{const e=i(t,Jc),n=(0,r.useContext)(Us),{chartId:o,chartConfig:{width:s,height:a,yPan:l},yAxisZoom:c}=n,h=(0,r.useCallback)((t=>{c(o,t)}),[o,c]),{getMouseDelta:u,outerTickSize:d,strokeStyle:p,strokeWidth:f,...g}=e,{zoomEnabled:m,...y}=((t,e,n,o)=>{const{axisAt:r,ticks:i,yZoomWidth:s,orient:a}=t,l=((t,e)=>"left"===t?0:"right"===t?e:"middle"===t?e/2:t)(r,e);return{transform:[l,0],range:[0,n],bg:{x:"left"===a?-s:0,y:0,h:n,w:s},getScale:Gc,ticks:i??qc(n),zoomEnabled:o}})(e,s,a,l);return(0,A.jsx)(Xc,{...g,...y,edgeClip:!0,outerTickSize:d,strokeStyle:p,strokeWidth:f,zoomEnabled:t.zoomEnabled&&m,getMouseDelta:u,axisZoomCallback:h})};function th(t){this._context=t}function eh(t){return new th(t)}th.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};const nh=Math.PI,oh=2*nh,rh=1e-6,ih=oh-rh;function sh(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}class ah{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==t?sh:function(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return sh;const n=10**e;return function(t){this._+=t[0];for(let e=1,o=t.length;e<o;++e)this._+=Math.round(arguments[e]*n)/n+t[e]}}(t)}moveTo(t,e){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,e){this._append`L${this._x1=+t},${this._y1=+e}`}quadraticCurveTo(t,e,n,o){this._append`Q${+t},${+e},${this._x1=+n},${this._y1=+o}`}bezierCurveTo(t,e,n,o,r,i){this._append`C${+t},${+e},${+n},${+o},${this._x1=+r},${this._y1=+i}`}arcTo(t,e,n,o,r){if(t=+t,e=+e,n=+n,o=+o,(r=+r)<0)throw new Error(`negative radius: ${r}`);let i=this._x1,s=this._y1,a=n-t,l=o-e,c=i-t,h=s-e,u=c*c+h*h;if(null===this._x1)this._append`M${this._x1=t},${this._y1=e}`;else if(u>rh)if(Math.abs(h*a-l*c)>rh&&r){let d=n-i,p=o-s,f=a*a+l*l,g=d*d+p*p,m=Math.sqrt(f),y=Math.sqrt(u),x=r*Math.tan((nh-Math.acos((f+u-g)/(2*m*y)))/2),v=x/y,w=x/m;Math.abs(v-1)>rh&&this._append`L${t+v*c},${e+v*h}`,this._append`A${r},${r},0,0,${+(h*d>c*p)},${this._x1=t+w*a},${this._y1=e+w*l}`}else this._append`L${this._x1=t},${this._y1=e}`;else;}arc(t,e,n,o,r,i){if(t=+t,e=+e,i=!!i,(n=+n)<0)throw new Error(`negative radius: ${n}`);let s=n*Math.cos(o),a=n*Math.sin(o),l=t+s,c=e+a,h=1^i,u=i?o-r:r-o;null===this._x1?this._append`M${l},${c}`:(Math.abs(this._x1-l)>rh||Math.abs(this._y1-c)>rh)&&this._append`L${l},${c}`,n&&(u<0&&(u=u%oh+oh),u>ih?this._append`A${n},${n},0,1,${h},${t-s},${e-a}A${n},${n},0,1,${h},${this._x1=l},${this._y1=c}`:u>rh&&this._append`A${n},${n},0,${+(u>=nh)},${h},${this._x1=t+n*Math.cos(r)},${this._y1=e+n*Math.sin(r)}`)}rect(t,e,n,o){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${n=+n}v${+o}h${-n}Z`}toString(){return this._}}const lh=t=>"function"==typeof t,ch=t=>void 0===t;function hh(t){return function(){return t}}const uh=Array.from;function dh(t){return"object"==typeof t&&"length"in t?t:uh(t)}const ph=Math.floor;function fh(t){let e=3;return t.digits=function(n){if(ch(n))return e;if(null==n)e=null;else{const t=ph(n);if(!(t>=0))throw new RangeError(`invalid digits: ${n}`);e=t}return t},()=>new ah(e)}function gh(t){return t[0]}function mh(t){return t[1]}const yh=(t,e)=>lh(t)?t:void 0===t?e:hh(t);function xh(t,e){let n=hh(!0),o=null,r=eh,i=null,s=fh(a);function a(a){let l,c,h,u=(a=dh(a)).length,d=!1;for(null==o&&(i=r(h=s())),l=0;l<=u;++l)!(l<u&&n(c=a[l],l,a))===d&&((d=!d)?i.lineStart():i.lineEnd()),d&&i.point(+t(c,l,a),+e(c,l,a));if(h)return i=null,h+""||null}return t=yh(t,gh),e=yh(e,mh),a.x=e=>ch(e)?t:(t=lh(e)?e:hh(+e),a),a.y=t=>ch(t)?e:(e=lh(t)?t:hh(+t),a),a.defined=t=>ch(t)?n:(n=lh(t)?t:hh(!!t),a),a.curve=t=>ch(t)?r:(r=t,null!=o&&(i=r(o)),a),a.context=t=>ch(t)?o:(null==t?o=i=null:i=r(o=t),a),a}const vh=(t,e)=>lh(t)?t:ch(t)?e:hh(+t);const wh=()=>{},bh=Math.round,kh=Math.pow,Sh=(t,e,n,o)=>xh().x((e=>bh(t(n(e))))).y((t=>bh(e(o(t))))),Ch={className:Qa,strokeWidth:1,strokeOpacity:1,hoverStrokeWidth:4,fill:"none",stroke:"#4682b4",strokeDasharray:"Solid",defined:t=>!isNaN(t),hoverTolerance:6,highlightOnHover:!1,connectNulls:!1,onClick:wh,onDoubleClick:wh,onContextMenu:wh},Dh=t=>{const e=i(t,Ch),{yAccessor:n,hoverTolerance:o,highlightOnHover:r,stroke:s,strokeOpacity:a,strokeWidth:l,strokeDasharray:c,hoverStrokeWidth:h,defined:u,connectNulls:d,interpolation:p,style:f,fill:g,className:m,canvasClip:y,onClick:x,onDoubleClick:v,onContextMenu:w,onHover:b,onUnHover:k}=e,S=r||b||k?{isHover:t=>{if(!r)return!1;const{mouseXY:e,currentItem:i,xScale:s,xAccessor:a,plotData:l,chartConfig:{yScale:c,origin:h}}=t,[u,d]=h,p=t=>[s(a(t))+u,c(n(t))+d],[f,g]=e,m=o,{left:y,right:x}=ks(l,s.invert(f),a);if(y===x){const[t,e]=p(i);return kh(f-t,2)+kh(g-e,2)<kh(m,2)}{const t=l[y],e=l[x],[n,o]=p(t),[r,i]=p(e),s=(i-o)/(r-n),a=bh(s*f+(-1*s*n+o));return g>=a-m&&g<=a+m}},drawOn:["mousemove","pan"],canvasToDraw:Vl}:{drawOn:["pan"],canvasToDraw:Zl};return(0,A.jsx)(Yl,{svgDraw:t=>{const{xAccessor:e,xScale:o,plotData:r,hovering:i,chartConfig:y}=t,{yScale:x}=y,v=Sh(o,x,e,n);return p&&v.curve(p),d||v.defined((t=>u(n(t)))),(0,A.jsx)("path",{style:f,className:`${m} ${s?"":tl}`,d:v(r),stroke:s,strokeOpacity:a,strokeWidth:i?h:l,strokeDasharray:co(c),fill:g})},canvasDraw:(t,e)=>{const{hovering:o,xScale:r,xAccessor:i,plotData:f,chartConfig:{yScale:g}}=e;y&&(t.save(),y(t,e)),t.lineWidth=o?h:l,t.strokeStyle=ys(s,a),t.setLineDash(co(c).split(","));const m=Sh(r,g,i,n);p&&m.curve(p),d||m.defined((t=>u(n(t)))),t.beginPath(),m.context(t)(f),t.stroke(),y&&t.restore()},onClickWhenHover:x,onDoubleClickWhenHover:v,onContextMenuWhenHover:w,onHover:b,onUnHover:k,...S})},Ah=Math.round,Mh=(t,e)=>Ah(t(e)),Th=(t,e,n,o,r,i,s)=>"horizontal"===t?{x1:0,y1:Mh(n,r),x2:i,y2:Mh(n,r)}:{x1:Mh(e,o),y1:0,x2:Mh(e,o),y2:s},_h=["pan"],Ph=t=>{const{type:e="horizontal",className:n=Qa,opacity:o=.5,stroke:r="#000000",strokeWidth:i=1,strokeDasharray:s="Solid",yValue:a,xValue:l}=t;return(0,A.jsx)(Yl,{svgDraw:t=>{const{width:c,height:h,xScale:u,chartConfig:{yScale:d}}=t,p=Th(e,u,d,l,a,c,h);return(0,A.jsx)("line",{className:n,strokeDasharray:co(s),stroke:r,strokeWidth:i,strokeOpacity:o,...p})},canvasDraw:(t,n)=>{const{xScale:c}=n,{chartConfig:{yScale:h,width:u,height:d}}=n,{x1:p,y1:f,x2:g,y2:m}=Th(e,c,h,l,a,u,d);t.beginPath(),t.strokeStyle=ys(r,o),t.lineWidth=i,t.setLineDash((t=>co(t).split(","))(s)),t.moveTo(p,f),t.lineTo(g,m),t.stroke()},canvasToDraw:Zl,drawOn:_h})},Nh=t=>{let{children:e}=t;return(0,A.jsx)(Yl,{svgDraw:e})},jh=Math.round,$h=Math.random,Eh=()=>`rsi-clip-${String(jh(1e4*$h()*1e4))}`,Fh=t=>({clipPath:`url(#${t})`});class Ih extends r.Component{constructor(t){super(t),this.clipPathId1=Eh(),this.clipPathId2=Eh()}topAndBottomClip=(t,e)=>{const{overSold:n,overBought:o}=this.props,{chartConfig:{yScale:r,width:i}}=e;t.beginPath(),t.rect(0,r(n),i,r(o)-r(n)),t.clip()};mainClip=(t,e)=>{const{overSold:n,overBought:o}=this.props,{chartConfig:{yScale:r,width:i,height:s}}=e;t.beginPath(),t.rect(0,0,i,r(n)),t.rect(0,r(o),i,s-r(o)),t.clip()};renderClip=t=>{const{overSold:e,overBought:n}=this.props,{chartConfig:{yScale:o,width:r,height:i}}=t;return(0,A.jsxs)("defs",{children:[(0,A.jsx)("clipPath",{id:this.clipPathId1,children:(0,A.jsx)("rect",{x:0,y:o(e),width:r,height:o(n)-o(e)})}),(0,A.jsxs)("clipPath",{id:this.clipPathId2,children:[(0,A.jsx)("rect",{x:0,y:0,width:r,height:o(e)}),(0,A.jsx)("rect",{x:0,y:o(n),width:r,height:i-o(n)})]})]})};render(){const{className:t,opacity:e,stroke:n,strokeDasharray:o,strokeWidth:r,yAccessor:i,overSold:s,middle:a,overBought:l}=this.props,c=Fh(this.clipPathId1),h=Fh(this.clipPathId2);return(0,A.jsxs)("g",{className:t,children:[(0,A.jsx)(Nh,{children:this.renderClip}),(0,A.jsx)(Ph,{opacity:e.top,stroke:n.top,strokeWidth:r.top,strokeDasharray:o.top,yValue:s}),(0,A.jsx)(Ph,{opacity:e.middle,stroke:n.middle,strokeWidth:r.middle,strokeDasharray:o.middle,yValue:a}),(0,A.jsx)(Ph,{opacity:e.bottom,stroke:n.bottom,strokeWidth:r.bottom,strokeDasharray:o.bottom,yValue:l}),(0,A.jsx)(Dh,{style:c,canvasClip:this.topAndBottomClip,className:t,yAccessor:i,stroke:n.insideThreshold||n.line,strokeWidth:r.insideThreshold,strokeDasharray:o.line}),(0,A.jsx)(Dh,{style:h,canvasClip:this.mainClip,className:t,yAccessor:i,stroke:n.outsideThreshold||n.line,strokeWidth:r.outsideThreshold,strokeDasharray:o.line})]})}}const Lh="ShortDash";Ih.defaultProps={className:Ha,stroke:{line:"#000000",top:"#b8b2bb",middle:"#8795a1",bottom:"#b8c2cc",outsideThreshold:"#b300b3",insideThreshold:"#ffccff"},opacity:{top:1,middle:1,bottom:1},strokeDasharray:{line:"Solid",top:Lh,middle:Lh,bottom:Lh},strokeWidth:{outsideThreshold:1,insideThreshold:1,top:1,middle:1,bottom:1},overSold:70,middle:50,overBought:30};const Oh=()=>new Map,zh=(t,e,n)=>{t.set(e,n)};function Rh(){let t,e,n=[],o=[];const r=(e,o,i,s)=>{if(o>=n.length)return null==t?e:e.sort(t);let a,l,c,h=-1,u=e.length,d=n[o++],p=new Map,f=i();for(;++h<u;)c=p.get(a=d(l=e[h])+""),c?c.push(l):p.set(a,[l]);return p.forEach(((t,e)=>{s(f,e,r(t,o,i,s))})),f},i=(t,e)=>{if(++e>n.length)return t;let r,s=o[e-1];return r=[],t.forEach(((t,n)=>{r.push({key:n,values:i(t,e)})})),null==s?r:r.sort(((t,e)=>s(t.key,e.key)))};return e={entries:t=>i(r(t,0,Oh,zh),0),key:t=>(n.push(t),e),sortKeys:t=>(o[n.length-1]=t,e),sortValues:n=>(t=n,e)}}const Wh=Math.round,Hh=Math.floor,Xh=Math.max,Yh=Math.abs,Uh=t=>t.map(((t,e)=>{const{className:n,wick:o}=t,{stroke:r,x:i,y1:s,y2:a,y3:l,y4:c}=o;return(0,A.jsx)("path",{className:n,stroke:r,d:`M${i},${s} L${i},${a} M${i},${l} L${i},${c}`},e)})),Bh=(t,e)=>{const{opacity:n,candleStrokeWidth:o}=t;return e.map(((t,e)=>{const{className:r,fill:i,stroke:s,x:a,y:l,width:c,height:h}=t;return t.width<=1?(0,A.jsx)("line",{className:r,stroke:i,x1:a,y1:l,x2:a,y2:l+h},e):0===t.height?(0,A.jsx)("line",{stroke:i,x1:a,y1:l,x2:a+c,y2:l+h},e):(0,A.jsx)("rect",{className:r,fillOpacity:n,fill:i,stroke:s,strokeWidth:o,x:a,y:l,width:c,height:h},e)}))},Zh=(t,e,n,o,r)=>{const{classNames:i,yAccessor:s,fill:a,stroke:l,wickStroke:c,width:h}=t,u=ao(c),d=ao(i),p=ao(a),f=ao(l),g=.5*ao(h)(t,{xScale:n,xAccessor:e,plotData:r}),m=g>.7?Wh(g):Hh(g);let y=[];for(let t=0;t<r.length;t++){const i=r[t],a=t>0?r[t-1]:{};if(null!=s(i).close){const t=Wh(n(e(i))),r=s(i),l=s(a),c=Wh(o(Xh(r.open,r.close))),h=Wh(Yh(o(r.open)-o(r.close)));y.push({x:t-m,y:c,wick:{stroke:u(r,l),x:t,y1:Wh(o(r.high)),y2:c,y3:c+h,y4:Wh(o(r.low))},height:h,width:2*m,className:d(r),fill:p(r,l),stroke:f(r,l),direction:r.close-r.open})}}return y},Vh=["pan"],qh={className:Ya,wickClassName:Ua,candleClassName:Ba,yAccessor:t=>({open:t.open,high:t.high,low:t.low,close:t.close}),classNames:t=>t.close>t.open?Za:Va,width:bs,wickStroke:"#000000",fill:t=>t.close>t.open?"#6ba583":"#ff0000",stroke:"#000000",candleStrokeWidth:.5,widthRatio:.8,opacity:.5,clip:!0},Gh=t=>{const e=i(t,qh),{className:n,wickClassName:o,candleClassName:r,clip:s}=e;return(0,A.jsx)(Yl,{clip:s,svgDraw:t=>{const{xAccessor:i,xScale:s,plotData:a,chartConfig:{yScale:l}}=t,c=Zh(e,i,s,l,a);return(0,A.jsxs)("g",{className:n,children:[(0,A.jsx)("g",{className:o,children:Uh(c)},"wicks"),(0,A.jsx)("g",{className:r,children:Bh(e,c)},"candles")]})},canvasDraw:(t,n)=>{((t,e,n)=>{const{opacity:o,candleStrokeWidth:r}=e,{xAccessor:i,xScale:s,plotData:a,chartConfig:{yScale:l}}=n,c=Zh(e,i,s,l,a);Rh().key((t=>t.wick.stroke)).entries(c).forEach((e=>{const{key:n,values:o}=e;t.strokeStyle=n,t.fillStyle=n,o.forEach((e=>{const n=e.wick;t.fillRect(n.x-.5,n.y1,1,n.y2-n.y1),t.fillRect(n.x-.5,n.y3,1,n.y4-n.y3)}))})),Rh().key((t=>t.stroke)).key((t=>t.fill)).entries(c).forEach((e=>{const{key:n,values:i}=e;"none"!==n&&(t.strokeStyle=n,t.lineWidth=r),i.forEach((e=>{const{key:r,values:i}=e,s=vs(i).width<=1?r:ys(r,o);t.fillStyle=s,i.forEach((e=>{e.width<=1?t.fillRect(e.x-.5,e.y,1,e.height):0===e.height?t.fillRect(e.x,e.y-.5,e.width,1):(t.fillRect(e.x,e.y,e.width,e.height),"none"!==n&&t.strokeRect(e.x,e.y,e.width,e.height))}))}))}))})(t,e,n)},canvasToDraw:Zl,drawOn:Vh})},Kh=Math.round,Jh=(t,e,n,o,r,i,s)=>function(t,e,n){let o=null,r=hh(!0),i=null,s=eh,a=null,l=fh(c);function c(c){let h,u,d,p,f,g=(c=dh(c)).length,m=!1,y=new Array(g),x=new Array(g);for(null==i&&(a=s(f=l())),h=0;h<=g;++h){if(!(h<g&&r(p=c[h],h,c))===m)if(m=!m)u=h,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),d=h-1;d>=u;--d)a.point(y[d],x[d]);a.lineEnd(),a.areaEnd()}m&&(y[h]=+t(p,h,c),x[h]=+e(p,h,c),a.point(o?+o(p,h,c):y[h],n?+n(p,h,c):x[h]))}if(f)return a=null,f+""||null}function h(){return xh().defined(r).curve(s).context(i)}return t=vh(t,gh),e=vh(e,hh(0)),n=vh(n,mh),c.x=e=>ch(e)?t:(t=lh(e)?e:hh(+e),o=null,c),c.x0=e=>ch(e)?t:(t=lh(e)?e:hh(+e),c),c.x1=t=>ch(t)?o:(o=null==t?null:lh(t)?t:hh(+t),c),c.y=t=>ch(t)?e:(e=lh(t)?t:hh(+t),n=null,c),c.y0=t=>ch(t)?e:(e=lh(t)?t:hh(+t),c),c.y1=t=>ch(t)?n:(n=null==t?null:lh(t)?t:hh(+t),c),c.lineX0=c.lineY0=()=>h().x(t).y(e),c.lineY1=()=>h().x(t).y(n),c.lineX1=()=>h().x(o).y(e),c.defined=t=>ch(t)?r:(r=lh(t)?t:hh(!!t),c),c.curve=t=>ch(t)?s:(s=t,null!=i&&(a=s(i)),c),c.context=t=>ch(t)?i:(null==t?i=a=null:a=s(i=t),c),c}().defined((t=>e(o(t)))).x((t=>Kh(r(n(t))))).y0((e=>ao(t)(i,e,s))).y1((t=>Kh(i(o(t))))),Qh=["pan"],tu=t=>!isNaN(t),eu=t=>ws(t.range()),nu=t=>{const{yAccessor:e,defined:n=tu,base:o=eu,style:r,className:i=Qa,stroke:s,fill:a="none",opacity:l=1,interpolation:c,canvasGradient:h,canvasClip:u}=t;return(0,A.jsx)(Yl,{svgDraw:t=>{const{plotData:h,xScale:u,xAccessor:d,chartConfig:{yScale:p}}=t,f=Jh(o,n,d,e,u,p,t);null!=c&&f.curve(c);const g=f(h),m=Ct(i,null==s&&tl);return(0,A.jsx)("path",{className:m,style:r,stroke:s,fill:ys(a,l),d:g})},canvasDraw:(t,r)=>{const{xScale:i,plotData:d,xAccessor:p,chartConfig:{yScale:f}}=r;u&&(t.save(),u(t,r)),t.fillStyle=null==h?ys(a,l):h(r,t),t.strokeStyle=s,t.beginPath();const g=Jh(o,n,p,e,i,f,r).context(t);null!=c&&g.curve(c),g(d),t.fill(),u&&t.restore()},canvasToDraw:Zl,drawOn:Qh})};class ou extends r.Component{yAccessorForTop=t=>{const{yAccessor:e}=this.props,n=e(t);return n&&n.top};yAccessorForMiddle=t=>{const{yAccessor:e}=this.props,n=e(t);return n&&n.middle};yAccessorForBottom=t=>{const{yAccessor:e}=this.props,n=e(t);return n&&n.bottom};yAccessorForScalledBottom=(t,e)=>{const{yAccessor:n}=this.props,o=n(e);return t(o&&o.bottom)};render(){const{className:t,areaClassName:e,opacity:n,stroke:o,fill:r}=this.props;return(0,A.jsxs)("g",{className:t,children:[(0,A.jsx)(Dh,{yAccessor:this.yAccessorForTop,stroke:o.top,fill:"none"}),(0,A.jsx)(Dh,{yAccessor:this.yAccessorForMiddle,stroke:o.middle,fill:"none"}),(0,A.jsx)(Dh,{yAccessor:this.yAccessorForBottom,stroke:o.bottom,fill:"none"}),(0,A.jsx)(nu,{className:e,yAccessor:this.yAccessorForTop,base:this.yAccessorForScalledBottom,opacity:n,stroke:"none",fill:r})]})}}ou.defaultProps={className:Ra,areaClassName:Wa,opacity:.2};const ru=Array.isArray,iu=Math.round,su={baseAt:(t,e)=>vs(e.range()),direction:"up",className:el,stroke:!0,fill:"#4682b4",opacity:.5,width:bs,widthRatio:.8,clip:!0,swapScales:!1},au=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];let o=[];const r=t=>o.map(((e,n)=>{const o=t.map((t=>{const n=[0,t[e]];return n.data=t,n}));return o.key=e,o.index=n,o}));return r.keys=t=>e.length?(o=t,r):o,r},lu=t=>`y${t}`,cu=function(t,e,n,o,r,i,s,a){void 0===s&&(s=au),void 0===a&&(a=oo);const{baseAt:l,className:c,fill:h,stroke:u,spaceBetweenBar:d=0,width:p}=t,f=ao(c),g=ao(h),m=ao(l),y=ao(p)(t,{xScale:o,xAccessor:e,plotData:i}),x=iu(y),v=(x-d*(n.length-1))/n.length,w=1===x?0:.5*y,b=i.map((t=>{const o={appearance:{},x:e(t)};return n.forEach(((e,n)=>{const r=lu(n),i={className:f(t,n),stroke:u?g(t,n):"none",fill:g(t,n)};o[r]=e(t),o.appearance[r]=i})),o})),k=n.map(((t,e)=>lu(e))),S=s().keys(k)(b).map(((t,e)=>{const n=t.key;return t.map((t=>{const o=[t[0],t[1]];return o.data={i:e,x:t.data.x,appearance:t.data.appearance[n]},o}))})),C=(t=>{let e,n,o,r=t.length,i=-1,s=0;for(;++i<r;)s+=t[i].length;for(n=new Array(s);--r>=0;)for(o=t[r],e=o.length;--e>=0;)n[--s]=o[e];return n})(S).map((t=>{let e=r(t[1]),n=m(o,r,t.data)-r(t[1]-t[0]);return n<0&&(e+=n,n=-n),{...t.data.appearance,x:iu(o(t.data.x)-y/2),y:e,groupOffset:iu(w-(t.data.i>0?(v+d)*t.data.i:0)),groupWidth:iu(v),offset:iu(w),height:n,width:x}})).filter((t=>!isNaN(t.y)));return a(C)},hu=t=>ru(t)?t:[t],uu=(t,e,n,o,r,i,s,a)=>{const{xAccessor:l,yAccessor:c,swapScales:h}=t,[u,d,p,f,g]=h?[hu(l),c,r,o,s]:[hu(c),e,o,r,a];return cu(t,d,u,p,f,n,i,g)},du=t=>t.map((t=>({...t,x:t.y,y:t.x,height:t.width,width:t.height}))),pu=(t,e,n)=>{const{stroke:o,opacity:r}=e;Rh().key((t=>t.fill)).entries(n).forEach((e=>{const{key:n,values:i}=e;vs(i).width>1&&(t.strokeStyle=n),t.fillStyle=vs(i).width<=1?n:ys(n,r),i.forEach((e=>{let{x:n,y:r,width:i,height:s}=e;i<=1?t.fillRect(n-.5,r,1,s):(t.fillRect(n,r,i,s),o&&t.strokeRect(n,r,i,s))}))}))},fu=function(t,e,n,o,r){void 0===o&&(o=oo),void 0===r&&(r=du);const{xAccessor:i,plotData:s,xScale:a,chartConfig:{yScale:l}}=e,c=uu(t,i,s,a,l,n,r,o);return gu(t,c)},gu=(t,e)=>{let{opacity:n}=t;return e.map(((t,e)=>{const{className:o,fill:r,stroke:i,x:s,y:a,width:l,height:c}=t;return l<=1?(0,A.jsx)("line",{className:o,stroke:r,x1:s,y1:a,x2:s,y2:a+c},e):(0,A.jsx)("rect",{className:o,fill:r,fillOpacity:n,stroke:i,x:s,y:a,width:l,height:c},e)}))},mu=Math.round,yu=Math.floor,xu=(t,e)=>{const{baseAt:n,fill:o,stroke:r,yAccessor:i}=t,{xScale:s,xAccessor:a,plotData:l,chartConfig:{yScale:c}}=e,h=ao(n),u=ao(t.width)(t,{xScale:s,xAccessor:a,plotData:l}),d=yu(.5*u),p=l.filter((t=>null!=i(t))).map(((t,e,n)=>{const l=n[e-1]||t,u=i(t),p=mu(s(a(t)))-d;let f=c(u),g=h(s,c,t)-c(u);return g<0&&(f+=g,g=-g),{x:p,y:mu(f),height:mu(g),width:2*d,fill:o(t,l),stroke:r(t,l)}}));return p},vu=["pan"],wu=t=>{const e=i(t,su),{swapScales:n,clip:o}=e;return(0,A.jsx)(Yl,{clip:o,svgDraw:t=>(0,A.jsx)("g",{children:n?fu(e,t,au):gu(e,xu(e,t))}),canvasToDraw:Zl,canvasDraw:(t,o)=>{n?function(t,e,n,o,r,i){void 0===r&&(r=oo),void 0===i&&(i=du);const{xAccessor:s,plotData:a,xScale:l,chartConfig:{yScale:c}}=n,h=uu(e,s,a,l,c,o,i,r);pu(t,e,h)}(t,e,o,au):pu(t,e,xu(e,o))},drawOn:vu})},bu=Array.isArray,ku=Math.round,Su=(t,e)=>{const{mouseXY:n,currentItem:o,show:r,height:i,width:s}=e,{customX:a,stroke:l,opacity:c,strokeDasharray:h}=t;if(!r||null==o)return null;const u={x1:0,x2:s,y1:n[1],y2:n[1],stroke:l,strokeDasharray:h,opacity:c},d=a(t,e);return[u,{x1:d,x2:d,y1:0,y2:i,stroke:l,strokeDasharray:h,opacity:c}]},Cu={customX:(t,e)=>{let{xScale:n,xAccessor:o,currentItem:r,mouseXY:i}=e;return t.snapX?ku(n(o(r))):i[0]},opacity:.3,snapX:!0,stroke:"#000000",strokeDasharray:"ShortDash"},Du=t=>{const e=i(t,Cu),n=(0,r.useContext)(Nl);return(0,A.jsx)(zl,{clip:!1,canvasDraw:(t,o)=>{const r=Su(e,o);if(bu(r)){const{margin:e,ratio:o}=n,i=.5*o+e.left,s=.5*o+e.top;t.save(),t.setTransform(1,0,0,1,0,0),t.scale(o,o),t.translate(i,s),r.forEach((e=>{const n=co(e.strokeDasharray).split(",").map((t=>+t));t.strokeStyle=ys(e.stroke,e.opacity),t.setLineDash(n),t.beginPath(),t.moveTo(e.x1,e.y1),t.lineTo(e.x2,e.y2),t.stroke()})),t.restore()}},canvasToDraw:Vl,drawOn:["mousemove","pan","drag"],svgDraw:n=>{const o=Su(e,n);return bu(o)?(0,A.jsx)("g",{className:Ct(qa,t.className),children:o.map(((t,e)=>{let{strokeDasharray:n,...o}=t;return(0,A.jsx)("line",{strokeDasharray:co(n),...o},e)}))}):null}})};function Au(t){const{coordinate:e,show:n,type:o,orient:r,edgeAt:i,hideLine:s,lineStrokeDasharray:a}=t,{fill:l,opacity:c,fontFamily:h,fontSize:u,textFill:d,lineStroke:p,lineOpacity:f}=t,{stroke:g,strokeOpacity:m,strokeWidth:y}=t,{arrowWidth:x,rectWidth:v,rectHeight:w,rectRadius:b}=t,{x1:k,y1:S,x2:C,y2:D,dx:A}=t;if(!n)return null;let M,T;if(null!=e){let t,n,s,a;if("horizontal"===o)t=A+("right"===r?i+1:i-v-1),n=S-w/2-y,s=A+("right"===r?i+v/2:i-v/2),a=S;else{const e="bottom"===r?y-1:1-y;t=k-v/2,n=("bottom"===r?i:i-w)+e,s=k,a=("bottom"===r?i+w/2:i-w/2)+e}M={edgeXRect:t,edgeYRect:n,rectHeight:w+y,rectWidth:v,rectRadius:b,fill:l,opacity:c,arrowWidth:x,stroke:g,strokeOpacity:m,strokeWidth:y},T={edgeXText:s,edgeYText:a,textAnchor:"middle",fontFamily:h,fontSize:u,textFill:d,displayCoordinate:e}}return{coordinateBase:M,coordinate:T,orient:r,line:s?void 0:{opacity:f,stroke:p,strokeDasharray:a,x1:k,y1:S,x2:C,y2:D}}}const Mu=["mousemove","pan","drag"],Tu=(t,e)=>n=>{const o=i(n,e);return(0,A.jsx)(Yl,{clip:!1,svgDraw:e=>{const n=t(o,e);return null==n?null:function(t){const{className:e}=t,n=Au(t);if(null===n)return null;let o,r,i;if(n.line&&(o=(0,A.jsx)("line",{className:Ga,strokeOpacity:n.line.opacity,stroke:n.line.stroke,strokeDasharray:co(n.line.strokeDasharray),x1:n.line.x1,y1:n.line.y1,x2:n.line.x2,y2:n.line.y2})),n.coordinateBase){const{rectWidth:t,rectHeight:e,arrowWidth:o}=n.coordinateBase,s="left"===n.orient?`M0,0L0,${e}L${t},${e}L${t+o},10L${t},0L0,0L0,0`:`M0,${o}L${o},${e}L${t+o},${e}L${t+o},0L${o},0L0,${o}`;r="left"===n.orient||"right"===n.orient?(0,A.jsx)("g",{transform:`translate(${n.coordinateBase.edgeXRect},${n.coordinateBase.edgeYRect})`,children:(0,A.jsx)("path",{d:s,className:Ka,height:e,width:t,stroke:n.coordinateBase.stroke,strokeLinejoin:"miter",strokeOpacity:n.coordinateBase.strokeOpacity,strokeWidth:n.coordinateBase.strokeWidth,fill:n.coordinateBase.fill,fillOpacity:n.coordinateBase.opacity})},1):(0,A.jsx)("rect",{className:Ka,x:n.coordinateBase.edgeXRect,y:n.coordinateBase.edgeYRect,height:e,width:t,fill:n.coordinateBase.fill,opacity:n.coordinateBase.opacity},1);const{edgeXText:a,edgeYText:l,textAnchor:c,fontFamily:h,fontSize:u,textFill:d,displayCoordinate:p}=n.coordinate;i=(0,A.jsx)("text",{x:a,y:l,textAnchor:c,fontFamily:h,fontSize:u,dy:".32em",fill:d,children:null!=p?p:""},2)}return(0,A.jsxs)("g",{className:e,children:[o,r,i]})}(n)},canvasDraw:(e,n)=>{const r=t(o,n);if(null==r)return null;!function(t,e){const{fontSize:n,fontFamily:o}=e;t.font=`${n}px ${o}`,t.textBaseline="middle";const r=Math.round(t.measureText(e.coordinate).width+10),i=Au({...e,rectWidth:r});if(null!==i){if(i.line){const e=co(i.line.strokeDasharray).split(",").map((t=>+t));t.setLineDash(e),t.strokeStyle=ys(i.line.stroke,i.line.opacity),t.lineWidth=1,t.beginPath(),t.moveTo(i.line.x1,i.line.y1),t.lineTo(i.line.x2,i.line.y2),t.stroke()}if(t.setLineDash([]),i.coordinateBase){const{rectWidth:e,rectHeight:n,rectRadius:o,arrowWidth:r}=i.coordinateBase;t.fillStyle=ys(i.coordinateBase.fill,i.coordinateBase.opacity),i.coordinateBase.stroke&&(t.strokeStyle=ys(i.coordinateBase.stroke,i.coordinateBase.strokeOpacity),t.lineWidth=i.coordinateBase.strokeWidth);let s=i.coordinateBase.edgeXRect;const a=i.coordinateBase.edgeYRect,l=n/2;t.beginPath(),"right"===i.orient?(s-=r,t.moveTo(s,a+l),t.lineTo(s+r,a),t.lineTo(s+e+r,a),t.lineTo(s+e+r,a+n),t.lineTo(s+r,a+n),t.closePath()):"left"===i.orient?(t.moveTo(s,a),t.lineTo(s+e,a),t.lineTo(s+e+r,a+l),t.lineTo(s+e,a+n),t.lineTo(s,a+n),t.closePath()):o?function(t,e,n,o,r,i){t.beginPath(),t.moveTo(e+i,n),t.lineTo(e+o-i,n),t.quadraticCurveTo(e+o,n,e+o,n+i),t.lineTo(e+o,n+r-i),t.quadraticCurveTo(e+o,n+r,e+o-i,n+r),t.lineTo(e+i,n+r),t.quadraticCurveTo(e,n+r,e,n+r-i),t.lineTo(e,n+i),t.quadraticCurveTo(e,n,e+i,n),t.closePath()}(t,s,a,e,n,3):t.rect(s,a,e,n),t.fill(),i.coordinateBase.stroke&&t.stroke(),t.fillStyle=i.coordinate.textFill,t.textAlign="middle"===i.coordinate.textAnchor?"center":i.coordinate.textAnchor,t.fillText(i.coordinate.displayCoordinate,i.coordinate.edgeXText,i.coordinate.edgeYText)}}}(e,r)},canvasToDraw:Vl,drawOn:Mu})},_u="#525252",Pu="#ffffff",Nu="Helvetica Neue, Helvetica, Arial, sans-serif",ju={fill:_u,textFill:Pu,fontFamily:Nu,fontSize:13,yAxisPad:0,rectWidth:80,rectHeight:20,strokeOpacity:1,strokeWidth:1,orient:"bottom",at:"bottom",opacity:1,snapX:!0,customX:(t,e)=>{const{snapX:n,displayFormat:o}=t,{xScale:r,xAccessor:i,currentItem:s,mouseXY:a,displayXAccessor:l}=e,[c,h]=n?[r(i(s)),l(s)]:[a[0],r.invert(c)];return{x:c,coordinate:o(h)}}},$u=Tu(((t,e)=>{const{show:n,currentItem:o,chartConfig:{height:r}}=e;if(null==o)return null;const{orient:i,at:s,stroke:a,strokeOpacity:l,strokeWidth:c,rectRadius:h,rectWidth:u,rectHeight:d,fill:p,opacity:f,fontFamily:g,fontSize:m,textFill:y,customX:x}=t,{x:v,coordinate:w}=x(t,e);return{type:"vertical",hideLine:!0,edgeAt:"bottom"===s?r:0,coordinate:w,show:n,orient:i,fill:p,opacity:f,fontFamily:g,fontSize:m,textFill:y,stroke:a,strokeOpacity:l,strokeWidth:c,rectWidth:u,rectHeight:d,rectRadius:h,arrowWidth:0,x1:v,x2:v,y1:0,y2:r}}),ju),Eu=Tu(((t,e)=>{const{displayFormat:n,yAccessor:o}=t,{chartConfig:r,currentCharts:i,currentItem:s,mouseXY:a,show:l}=e,{id:c,yScale:h}=r||{};if(null==a||i.indexOf(c)<0||!l||o&&!s)return null;const u=o?h(o(s)):a[1]-r.origin[1];return((t,e,n,o)=>{const{width:r}=o,{orient:i,at:s,rectWidth:a,rectHeight:l,dx:c,fill:h,opacity:u,fontFamily:d,fontSize:p,textFill:f,arrowWidth:g,stroke:m,strokeOpacity:y,strokeWidth:x}=n;return{coordinate:"NaNundefined"===e?"no data":e,show:!0,type:"horizontal",hideLine:!0,edgeAt:"right"===s?r:0,orient:i,fill:h,opacity:u,fontFamily:d,fontSize:p,textFill:f,stroke:m,strokeOpacity:y,strokeWidth:x,rectWidth:a,rectHeight:l,arrowWidth:g,dx:c,x1:0,x2:r,y1:t,y2:t}})(u,n(h.invert(u)),t,e)}),{fill:_u,textFill:Pu,fontFamily:Nu,fontSize:13,yAxisPad:0,rectWidth:50,rectHeight:20,orient:"left",at:"left",dx:0,arrowWidth:10,opacity:1,strokeOpacity:1,strokeWidth:1}),Fu=11,Iu="-apple-system, system-ui, 'Helvetica Neue', Ubuntu, sans-serif",Lu=t=>{let{className:e=xa,fontFamily:n=Iu,fontSize:o=Fu,children:r,...i}=t;return(0,A.jsx)("text",{className:e,fontFamily:n,fontSize:o,...i,children:r})},Ou="#4682b4",zu=t=>{let{className:e=va,fill:n=Ou,children:o,...r}=t;return(0,A.jsx)("tspan",{className:e,fill:n,...r,children:o})},Ru=["mousemove"],Wu={className:ba,displayFormat:Rr(".2f"),displayValuesFor:(t,e)=>e.currentItem,displayInit:"n/a",origin:[8,8],yAccessor:t=>t.bb},Hu=t=>{const e=i(t,Wu);return(0,A.jsx)(Yl,{clip:!1,svgDraw:t=>{const{onClick:n,displayFormat:o,yAccessor:r,options:i,origin:s,textFill:a,labelFill:l,labelFontWeight:c,className:h,displayValuesFor:u,displayInit:d,fontFamily:p,fontSize:f,fontWeight:g}=e,{chartConfig:{width:m,height:y},fullData:x}=t,v=u(e,t)??xs(x);let w=d,b=d,k=d;if(void 0!==v){const t=r(v);void 0!==t&&(w=o(t.top),b=o(t.middle),k=o(t.bottom))}const S=ao(s),[C,D]=S(m,y),{sourcePath:M,windowSize:T,multiplier:_,movingAverageType:P}=i,N=`BB(${M}, ${T}, ${_}, ${P})`,j=`${w}, ${b}, ${k}`,$=gs([C,D]);return(0,A.jsx)("g",{transform:$,className:h,onClick:n,children:(0,A.jsxs)(Lu,{x:0,y:0,fontFamily:p,fontSize:f,fontWeight:g,children:[(0,A.jsx)(zu,{fill:l,fontWeight:c,children:N}),(0,A.jsx)("tspan",{x:0,dy:15,fill:a,children:j})]})})},drawOn:Ru})},Xu=t=>{let{color:e,displayName:n,fontSize:o,fontFamily:i,fontWeight:s,textFill:a,labelFill:l,labelFontWeight:c,value:h,origin:u,onClick:d,forChart:p,options:f}=t;const g=(0,r.useCallback)((t=>{void 0!==d&&d(t,{chartId:p,...f})}),[d,p,f]),m=gs(u);return(0,A.jsxs)("g",{transform:m,children:[(0,A.jsx)("line",{x1:0,y1:2,x2:0,y2:28,stroke:e,strokeWidth:4}),(0,A.jsxs)(Lu,{x:5,y:11,fontFamily:i,fontSize:o,fontWeight:s,children:[(0,A.jsx)(zu,{fill:l,fontWeight:c,children:n}),(0,A.jsx)("tspan",{x:5,dy:15,fill:a,children:h})]}),(0,A.jsx)("rect",{x:0,y:0,width:55,height:30,fill:"none",stroke:"none",onClick:g})]})},Yu=["mousemove"],Uu={className:ka,displayFormat:Rr(".2f"),displayInit:"n/a",displayValuesFor:(t,e)=>e.currentItem,origin:[0,10],width:65},Bu=t=>{const e=i(t,Uu);return(0,A.jsx)(Yl,{clip:!1,svgDraw:t=>{const{chartId:n,chartConfig:o,chartConfig:{height:r},fullData:i}=t,{className:s,displayInit:a,onClick:l,width:c,fontFamily:h,fontSize:u,fontWeight:d,textFill:p,labelFill:f,origin:g,displayFormat:m,displayValuesFor:y,options:x}=e,v=y(e,t)??xs(i),w=ao(g),[b,k]=w(c,r),[S,C]=o.origin,D=gs([S+b,C+k]);return(0,A.jsx)("g",{transform:D,className:s,children:x.map(((t,e)=>{const o=v&&t.yAccessor(v),r=`${t.type} (${t.windowSize})`,i=o?m(o):a;return(0,A.jsx)(Xu,{origin:[c*e,0],color:t.stroke,displayName:r,value:i,options:t,forChart:n,onClick:l,fontFamily:h,fontSize:u,fontWeight:d,textFill:p,labelFill:f},e)}))})},drawOn:Yu})},Zu=t=>{let{labelFill:e,labelFontWeight:n,text:o,valueFill:r,value:i}=t;return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(zu,{fill:e,fontWeight:n,children:o}),(0,A.jsx)("tspan",{fill:r,children:i},"value_O")]})},Vu=["mousemove"],qu={className:Sa,fontFamily:nl,fontWeight:"bold",accessor:t=>t,changeFormat:Rr("+.2f"),displayTexts:{o:"O: ",h:" H: ",l:" L: ",c:" C: ",na:"n/a"},displayValuesFor:(t,e)=>e.currentItem,ohlcFormat:Rr(".2f"),origin:[0,0],percentFormat:Rr("+.2%")},Gu=t=>{const e=i(t,qu);return(0,A.jsx)(Yl,{clip:!1,svgDraw:n=>{const{accessor:o,changeFormat:r,className:i,displayTexts:s,displayValuesFor:a,fontFamily:l,fontSize:c,fontWeight:h,labelFill:u,labelFontWeight:d,ohlcFormat:p,onClick:f,percentFormat:g,textFill:m}=e,{chartConfig:{width:y,height:x},fullData:v}=n,w=a(e,n)??xs(v),{na:b}=s;let k=b,S=b,C=b,D=b,M=b;if(void 0!==w&&void 0!==o){const t=o(w);void 0!==t&&(k=p(t.open),S=p(t.high),C=p(t.low),D=p(t.close),M=`${r(t.close-t.open)} (${g((t.close-t.open)/t.open)})`)}const{origin:T}=t,[_,P]=ao(T)(y,x),N=ao(m)(w),j=gs([_,P]);return(0,A.jsx)("g",{className:i,transform:j,onClick:f,children:(0,A.jsxs)(Lu,{x:0,y:0,fontFamily:l,fontSize:c,fontWeight:h,children:[(0,A.jsx)(Zu,{fill:u,fontWeight:d,text:s.o,valueFill:N,value:k}),(0,A.jsx)(Zu,{fill:u,fontWeight:d,text:s.h,valueFill:N,value:S}),(0,A.jsx)(Zu,{fill:u,fontWeight:d,text:s.l,valueFill:N,value:C}),(0,A.jsx)(Zu,{fill:u,fontWeight:d,text:s.c,valueFill:N,value:D}),(0,A.jsx)("tspan",{fill:N,children:` ${M}`},"value_Change")]})})},drawOn:Vu})},Ku=Rr(".2f"),Ju="n/a",Qu=(t,e)=>e.currentItem,td=[0,0],ed=["mousemove"],nd=t=>{const{className:e=xa,displayInit:n=Ju,displayFormat:o=Ku,displayValuesFor:r=Qu,origin:i=td,fontFamily:s,fontSize:a,fontWeight:l,yAccessor:c,options:h,labelFill:u,labelFontWeight:d,textFill:p,onClick:f}=t;return(0,A.jsx)(Yl,{clip:!1,svgDraw:g=>{const{chartConfig:{width:m,height:y}}=g,x=r(t,g),v=x&&c(x),w=v&&o(v)||n,b=ao(i),[k,S]=b(m,y),C=`RSI (${h.windowSize}): `;return(0,A.jsx)("g",{className:e,transform:`translate(${k}, ${S})`,onClick:f,children:(0,A.jsxs)(Lu,{x:0,y:0,fontFamily:s,fontSize:a,fontWeight:l,children:[(0,A.jsx)(zu,{fill:u,fontWeight:d,children:C}),(0,A.jsx)("tspan",{fill:p,children:w})]})})},drawOn:ed})},od={sourcePath:"close",multiplier:2,movingAverageType:"sma",windowSize:20},rd={sourcePath:"close",windowSize:10},id={sourcePath:"close",windowSize:14},sd={sourcePath:"close",windowSize:10};function ad(){let t=od;const e=e=>{const{windowSize:n,multiplier:o,movingAverageType:r,sourcePath:i}=t,s=so(i),a="ema"===r?function(){let t=rd;const e=e=>{const{windowSize:n,sourcePath:o}=t,r=so(o),i=2/(n+1);let s,a=0,l=0;return e.map(((t,e)=>{const o=r(t,e);if(void 0!==s||void 0!==o){if(!(e<n+l-1)){if(e===n+l-1){a+=o;const t=a/n;return s=t,t}{const t=o*i+(1-i)*s;return s=t,t}}a+=o}else l++}))};return e.undefinedLength=()=>t.windowSize-1,e.options=function(){return arguments.length?(t={...rd,...arguments.length<=0?void 0:arguments[0]},e):t},e}().options({windowSize:n,sourcePath:i}):lo().windowSize(n).accumulator((t=>In(t))).sourcePath(i),l=lo().windowSize(n).accumulator((t=>{const e=t[t.length-1].mean,n=((t,e)=>{const n=((t,e)=>{let n,o=0,r=0,i=0;if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(n=e-r,r+=n/++o,i+=n*(e-r));else{let s=-1;for(let a of t)null!=(a=e(a,++s,t))&&(a=+a)>=a&&(n=a-r,r+=n/++o,i+=n*(a-r))}if(o>1)return i/(o-1)})(t,e);return n?jn(n):n})(t,(t=>s(t.datum)));return void 0===n?void 0:{top:e+o*n,middle:e,bottom:e-o*n}})),c=ro().combine(((t,e)=>({datum:t,mean:e})));return l(c(e,a(e)))};return e.undefinedLength=()=>t.windowSize-1,e.options=function(){return arguments.length?(t={...od,...arguments.length<=0?void 0:arguments[0]},e):t},e}let ld=0;function cd(){let t,e,n,o,r,i=ld++;function s(){}return s.id=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],s):i},s.accessor=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],s):t},s.stroke=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],s):e||(e=ms(i))},s.fill=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],s):n||(n=ms(i))},s.echo=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],s):o},s.type=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],s):r},s}const hd={merge:!0},ud=(t,e,n,o)=>{const r=function(r,i){if(void 0===i&&(i=hd),i.merge){if(!e.accessor())throw new Error(`Set an accessor to ${t} before calculating`);return o(r)}return n(r)};return ps(r,e,"id","accessor","stroke","fill","echo","type"),ps(r,n,"options","undefinedLength"),ps(r,o,"merge","skipUndefined"),r},dd=()=>{const t=cd().type("SMA").accessor((t=>t.sma)),e=function(){let t=sd;function e(e){const{windowSize:n,sourcePath:o}=t,r=lo().windowSize(n).sourcePath(o).accumulator((t=>In(t)));return r(e)}return e.undefinedLength=()=>t.windowSize-1,e.options=function(){return arguments.length?(t={...sd,...arguments.length<=0?void 0:arguments[0]},e):t},e}(),n=fs().algorithm(e).merge(((t,e)=>{t.sma=e}));return ud("SMA",t,e,n)},pd="BollingerBand",fd=Math.round,gd={pointerEvents:"all",transform:"translate(0, 50px)"},md={transform:"translate(-40px, 0)"},yd={transform:"translate(-56px, 0)"},xd=(t,e,n)=>`translate (${t-20}, ${e-8+n/4})`,vd=t=>{let{zoomMultiplier:e=1.5,heightFromBase:n=32,r:o=16,fill:i="#ffffff",fillOpacity:s=.4,stroke:a="grey",strokeWidth:l=1,textFill:c="#000000"}=t;const h=(0,r.useContext)(Us),u=t=>{const{xAxisZoom:n,xScale:o,plotData:r,xAccessor:i}=h,s=o(i(xs(r))),a=t>0?1*e:1/e,[l,c]=o.domain(),[u,d]=o.range().map((t=>s+(t-s)*a)).map(o.invert),p=ir(l,u),f=ir(c,d);n([p(.2),f(.2)])},{chartConfig:{width:d,height:p}}=h,f=fd(d/2),g=p-n,m=f-8,y=f+16+2*o,x=xd(f-16-2*o,g,o),v=xd(m,g,o),w=g+o/2,b=m-o/2,k=y-o/2;return(0,A.jsxs)("g",{style:gd,children:[(0,A.jsx)("g",{transform:x,children:(0,A.jsx)("path",{d:"M19,13H5V11H19V13Z",fill:c})}),(0,A.jsx)("circle",{style:md,cx:b,cy:w,fill:i,fillOpacity:s,stroke:a,strokeWidth:l,r:o,onClick:()=>u(1)}),(0,A.jsx)("g",{transform:v,children:(0,A.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z",fill:c})}),(0,A.jsx)("circle",{style:yd,cx:k,cy:w,fill:i,fillOpacity:s,stroke:a,strokeWidth:l,r:o,onClick:()=>u(-1)})]})},wd=t=>function(e,n){const{widthRatio:o}=e,{xScale:r,xAccessor:i,plotData:s}=n,a=i(((t,e)=>{if(!e||!t)return t?t[0]:void 0;for(let n=0;n<t.length;n++){const o=t[n];if(null!=e(o))return o}})(s));return Math.abs(r(t.offset(a,1))-r(a))*o},bd={UP:"black",DOWN:"#980032",TRANSPARENT:"transparent"},kd=t=>"string"==typeof t,Sd=(t,e)=>-1!==t.indexOf(e),Cd=Rr(".8~"),Dd=Rr(".4f"),Ad=Rr(".2f"),Md=Rr(".4s"),Td=Rr(".0s"),_d=t=>{if(!t||!kd(t))return xi;const e=parseInt(t,10);return Sd(t,"m")?fi.every(e):Sd(t,"h")?mi.every(e):Sd(t,"d")?xi.every(e):Sd(t,"w")?Si.every(e):Sd(t,"M")?Di.every(e):xi},Pd=t=>kd(t)&&(Sd(t,"m")||Sd(t,"h"))?as("%m-%d %H:%M"):as("%Y-%m-%d");let Nd,jd,$d=[];const Ed=document&&"ontouchstart"in document.documentElement,Fd=t=>(0,r.useMemo)((()=>wd(t)),[t]),Id="rs-tooltip",Ld=(t,e)=>(t||{}).close>(e||{}).close?bd.UP:bd.DOWN,Od=(t,e)=>(t||{}).close>(t||{}).open?bd.TRANSPARENT:Ld(t,e),zd={top:"#964b00",middle:"#000000",bottom:"#964b00"},Rd=(t,e)=>({type:"SMA",yAccessor:t,stroke:e.stroke,windowSize:e.windowSize}),Wd=[5,-90],Hd=[5,320],Xd=[190,432],Yd=t=>t.bb,Ud=t=>{let{id:e,height:n,timeInterval:o,timeFormat:i,sma20:s,sma50:a,bb:l,yExtents:c,origin:h}=t;const u=Fd(o),[d,p]=(0,r.useMemo)((()=>[s.accessor(),s.options()]),[s]),[f,g]=(0,r.useMemo)((()=>[a.accessor(),a.options()]),[a]),m=(0,r.useMemo)((()=>[Rd(d,p),Rd(f,g)]),[d,p,f,g]),y=(0,r.useMemo)((()=>l.options()),[l]);return(0,A.jsxs)(Bs,{id:e,height:n,yExtents:c,origin:h,children:[(0,A.jsx)(Qc,{axisAt:"right",orient:"right",ticks:5,stroke:"black"}),(0,A.jsx)(ou,{yAccessor:Yd,stroke:zd,fill:"#4682b4"}),(0,A.jsx)(Dh,{yAccessor:d,stroke:p.stroke}),(0,A.jsx)(Dh,{yAccessor:f,stroke:g.stroke}),(0,A.jsx)(Gh,{width:u,fill:Od,stroke:Ld,wickStroke:Ld,candleStrokeWidth:.8}),(0,A.jsx)(Eu,{at:"right",orient:"right",displayFormat:Dd}),(0,A.jsx)(Gu,{fontSize:15,xDisplayFormat:i,textFill:"black",ohlcFormat:Cd,forChart:3,origin:Wd}),(0,A.jsx)(Bu,{className:Id,width:100,fontSize:15,origin:Hd,options:m}),(0,A.jsx)(Hu,{className:Id,fontSize:15,origin:Xd,yAccessor:Yd,options:y}),Ed&&(0,A.jsx)(vd,{})]})},Bd=(t,e)=>(t||{}).close>(e||{}).close?bd.UP:bd.DOWN,Zd=t=>t.volume,Vd=t=>{let{id:e,height:n,timeInterval:o,timeFormat:r,yExtents:i,origin:s}=t;const a=Fd(o);return(0,A.jsxs)(Bs,{id:e,height:n,yExtents:i,origin:s,children:[(0,A.jsx)(Qc,{axisAt:"left",orient:"left",ticks:3,tickFormat:Td,stroke:"black"}),(0,A.jsx)(Eu,{at:"left",orient:"left",displayFormat:Md}),(0,A.jsx)(wu,{width:a,yAccessor:Zd,fill:Bd,stroke:Bd}),(0,A.jsx)(Vc,{axisAt:"bottom",orient:"bottom",ticks:6}),(0,A.jsx)($u,{at:"bottom",orient:"bottom",displayFormat:r})]})},qd={line:"#000000",top:"#b8b2bb",middle:"transparent",bottom:"#b8c2cc",outsideThreshold:"#b300b3",insideThreshold:"#4699cb"},Gd=[30,50,70],Kd=t=>t.rsi,Jd=t=>{let{id:e,height:n,width:o,rsi:i,yExtents:s,origin:a}=t;const l=(0,r.useMemo)((()=>[o-160,10]),[o]),c=(0,r.useMemo)((()=>i.options()),[i]);return(0,A.jsxs)(Bs,{id:e,height:n,yExtents:s,origin:a,children:[(0,A.jsx)(Qc,{axisAt:"right",orient:"right",stroke:"black",tickStroke:"#4699cb",tickValues:Gd}),(0,A.jsx)(Eu,{at:"right",orient:"right",displayFormat:Ad}),(0,A.jsx)(Ih,{yAccessor:Kd,stroke:qd}),(0,A.jsx)(nd,{className:"rs-tooltip",fontSize:15,yAccessor:Kd,origin:l,options:c})]})},Qd=t=>t.close,tp=t=>{let{id:e,height:n,yExtents:o,origin:r}=t;return(0,A.jsxs)(Bs,{id:e,height:n,yExtents:o,origin:r,children:[(0,A.jsx)(Qc,{axisAt:"left",orient:"left",stroke:"black",ticks:5}),(0,A.jsx)(Dh,{yAccessor:Qd,stroke:"black"}),(0,A.jsx)(Eu,{at:"left",orient:"left",displayFormat:Ad})]})},ep={left:50,right:80,top:0,bottom:30},np={width:"98%"},op=t=>t?t.date:0,rp=function(){return Ar.apply(us($i,Ei,Mi,Ci,wi,yi,gi,pi,di,as).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}(),ip=(t,e)=>[0,e-510],sp=[0,100],ap=t=>[t.high,t.low],lp=(t,e)=>[0,e-420],cp=t=>t.volume,hp=(t,e)=>[0,e-120],up=(t,e,n)=>dd().options({windowSize:e,stroke:n}).merge(((e,n)=>{e[t]=n})).accessor((e=>e[t])),dp=(()=>{const t=cd().type(pd),e=ad(),n=fs().algorithm(e).merge(((t,e)=>{t.bollingerBand=e}));return ud(pd,t,e,n)})().merge(((t,e)=>{t.bb=e})).accessor((t=>t.bb)),pp=(()=>{const t=cd().type("RSI").accessor((t=>t.rsi)),e=function(){let t=id;const e=e=>{let n,o;const{windowSize:r,sourcePath:i}=t,s=so(i),a=lo().windowSize(r).accumulator((t=>{const e=void 0!==n?(n*(r-1)+t[t.length-1].gain)/r:In(t,(t=>t.gain));if(void 0===e)return;const i=void 0!==o?(o*(r-1)+t[t.length-1].loss)/r:In(t,(t=>t.loss));return void 0!==i?(n=e,o=i,100-100/(1+e/i)):void 0})),l=lo().windowSize(2).undefinedValue((()=>[0,0])).accumulator((t=>{const e=t[0],n=t[1],o=s(n)-s(e);return{gain:Math.max(o,0),loss:Math.abs(Math.min(o,0))}}));return a(l(e))};return e.undefinedLength=()=>t.windowSize-1,e.options=function(){return arguments.length?(t={...id,...arguments.length<=0?void 0:arguments[0]},e):t},e}(),n=fs().algorithm(e).merge(((t,e)=>{t.rsi=e}));return ud("RSI",t,e,n)})().options({windowSize:14}).merge(((t,e)=>{t.rsi=e})).accessor((t=>t.rsi)),fp=(0,r.memo)((t=>{let{id:e,style:n,data:o,height:i,timeframe:a}=t;const[l]=function(t){let{id:e,minWidth:n=100,initialWidth:o=1e3}=void 0===t?{}:t;const i=(0,r.useRef)(),[a,l]=(0,r.useState)(o),c=(0,r.useCallback)((()=>{const t=e?document.getElementById(e):s(i);if(t){const{width:e,paddingLeft:o,paddingRight:r}=window.getComputedStyle(t),i=parseFloat(e)-(parseFloat(o)+parseFloat(r));l(Math.round(Math.max(i,n)))}}),[]);return(0,r.useLayoutEffect)(c,[]),(0,r.useEffect)((()=>(window.addEventListener("resize",c),()=>window.removeEventListener("resize",c))),[]),[a,i]}({id:e}),c=(0,r.useRef)(150),[h]=(0,r.useState)(20),[u]=(0,r.useState)(50),d=(0,r.useMemo)((()=>up("sma20",h,"green")),[h]),p=(0,r.useMemo)((()=>up("sma50",u,"orange")),[u]),f=(0,r.useMemo)((()=>p(d(dp(pp(o))))),[o,d,p]),[g,m]=(0,r.useMemo)((()=>[_d(a),Pd(a)]),[a]),y=(0,r.useMemo)((()=>((t,e,n)=>{const o=t.length-1,r=o<n?(t[0]||{}).date:(t[o-n]||{}).date,i=(t.slice(-1)[0]||{}).date,s="1m"===e?i+3e5:i;return r===Nd&&s===jd||(Nd=r),jd=s,$d=[r,s]})(f,a,s(c))),[f,a]),x=(0,r.useMemo)((()=>t=>{c.current=t}),[]);return(0,A.jsx)("div",{id:e,style:{...np,...n},children:(0,A.jsxs)($l,{ratio:2,width:l,height:i,margin:ep,data:f,xAccessor:op,displayXAccessor:op,xScale:rp,xExtents:y,onZoom:x,children:[(0,A.jsx)(Jd,{id:1,height:100,width:l,rsi:pp,yExtents:sp,origin:ip}),(0,A.jsx)(tp,{id:2,height:100,yExtents:ap,origin:ip}),(0,A.jsx)(Ud,{id:3,height:300,timeInterval:g,timeFormat:m,sma20:d,sma50:p,bb:dp,yExtents:ap,origin:lp}),(0,A.jsx)(Vd,{id:4,height:100,timeInterval:g,timeFormat:m,yExtents:cp,origin:hp}),(0,A.jsx)(Du,{})]})})})),gp={providerTitle:x.INITIAL_PROVIDER_TITLE,itemTitle:x.INITIAL_ITEM_TITLE,data:x.DF_DATA,timeframe:x.DF_TIMEFRAME,fetchStatus:_.INITIAL,isLiveUpdating:!1},mp=Object.freeze({LOADING:"DATA_LOADING",LOADED:"DATA_LOADED",LOAD_FAILED:"DATA_LOAD_FAILED",UPDATE:"DATA_UPDATE"}),yp=(t,e)=>{switch(e.type){case mp.LOADING:return{...t,fetchStatus:_.LOADING};case mp.LOADED:{const{data:n}=e;return(t=>Array.isArray(t)||t.length>20)(n)?{...t,data:e.data,providerTitle:e.providerTitle,itemTitle:e.itemTitle,timeframe:e.timeframe,fetchStatus:_.SUCCESS}:t}case mp.LOAD_FAILED:return{...t,fetchStatus:_.FAILED};case mp.UPDATE:return{...t,data:[...t.data,e.point]};default:throw new TypeError("Not existed action "+e.type)}};let xp;const vp=(t,e,n,o,r)=>{let i;xp=new WebSocket((t=>`wss://stream.binance.com:9443/ws/${t}@kline_1m`)(t)),xp.addEventListener("open",(()=>{i=(new Date).getMinutes(),n()})),xp.addEventListener("message",(t=>{try{const{E:n,k:o}=JSON.parse(t.data),s=new Date(n),a=s.getMinutes();i!==a?(i=a,e(((t,e)=>({date:t,high:parseFloat(e.h),low:parseFloat(e.l),open:parseFloat(e.o),close:parseFloat(e.c),volume:parseFloat(e.v)}))(n,o)),r("")):r(s.getSeconds())}catch(t){console.log(t)}})),xp.addEventListener("error",(t=>{o()})),xp.addEventListener("close",(t=>{o()}))},wp={startLiveUpdate:t=>{let{pair:e,onMessage:n,onOpen:o,onClose:r,onSecond:i}=t;vp((t=>(""+t).replace("/","").toLowerCase())(e),n,o,r,i)},stopLiveUpdate:()=>{try{void 0===(t=1e3)&&(t=1005),xp&&xp.close(t)}catch(t){console.log(t)}var t}},bp=t=>{let{appSettings:e,theme:n,setThemeId:o,dispatch:r,setLiveUpdating:i}=t;return{appSettings:e,theme:n,setThemeId:o,dataAction:{loading:()=>r({type:mp.LOADING}),loadData:t=>{let{timeframe:e=x.DF_TIMEFRAME,...n}=t;i({isLiveUpdating:!1}),wp.stopLiveUpdate(),r({type:mp.LOADED,timeframe:e,...n})},loadFailed:()=>r({type:mp.LOAD_FAILED})},onLiveUpdate:t=>{wp.startLiveUpdate({pair:t,onMessage:(t,e)=>r({type:mp.UPDATE,point:t}),onOpen:()=>i({isLiveUpdating:!0}),onClose:()=>i({isLiveUpdating:!1}),onSecond:t=>i({isLiveUpdating:!0,sec:t})})},onStopUpdate:()=>{wp.stopLiveUpdate()}}},kp={paddingTop:8},Sp={isLiveUpdating:!1,sec:""},Cp=()=>{const[t,e]=(0,r.useState)(1),[n,o]=(0,r.useReducer)(yp,gp),{providerTitle:i,itemTitle:s,data:a,timeframe:l,fetchStatus:p}=n,[f,g]=(0,r.useState)(Sp),m=c((()=>bp({appSettings:w,theme:C,setThemeId:e,dispatch:o,setLiveUpdating:g})));return(0,A.jsx)(h.Provider,{value:m,children:(0,A.jsx)(u.Provider,{value:t,children:(0,A.jsxs)(d.Provider,{value:f,children:[(0,A.jsx)(Nn,{fetchStatus:p,providerTitle:i,itemTitle:s,timeframe:l}),(0,A.jsx)("main",{style:kp,children:(0,A.jsx)(fp,{id:"chart_wrapper",height:550,data:a,timeframe:l})})]})})})};(0,o.H)(document.getElementById("app")).render((0,A.jsx)(Cp,{}))},848:(t,e,n)=>{t.exports=n(20)}},t=>{var e;e=341,t(t.s=e)}]);