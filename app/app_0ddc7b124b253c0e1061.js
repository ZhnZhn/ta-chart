/*! For license information please see app_0ddc7b124b253c0e1061.js.LICENSE.txt */
"use strict";(self.webpackChunkTA_Chart=self.webpackChunkTA_Chart||[]).push([[143],{988:(t,e,n)=>{var o=n(745),r=n(294);const i=t=>(t||{}).current,s=(t,e)=>{t&&(t.current=e)},a=t=>{const e=i(t);return e&&e.style||{}},l=t=>{const e=(0,r.useRef)();return e.current||(e.current=t())},c=(0,r.createContext)({}),h=(0,r.createContext)(),u=(0,r.createContext)(),d=Math.random,p=()=>d()*(d()>.5?1:-1),f=(t,e)=>t>e?t+.2:e+.2,g=(t,e)=>t>e?e-.2:t-.2,m={INITIAL_PROVIDER_TITLE:"Data Provider (Random)",INITIAL_ITEM_TITLE:"Item",PROXY:"http://127.0.0.1:3000/proxy",RATE_LIMIT:3e3,DF_DATA:(()=>{const t=new Date,e=[];let n,o;for(let r=0;r<100;r++)o=1+p(),n=1+p(),e.push({date:t.getTime()-864e5*r,open:o,close:n,high:f(o,n),low:g(o,n)});return e.reverse()})(),DF_TIMEFRAME:"1d"},y=Object.freeze(m);let x=y.PROXY;const v={proxy:t=>t?(x=t,!0):x||"",clearProxy:()=>{x=""}},w={1:"#5f5f5f",2:"#e1e1e1",3:"#e8e0cb"},b={1:{},2:{backgroundColor:"#d4d4d4"},3:{backgroundColor:"#e8dcbe"}},k={getBgColor:t=>w[""+t],getHeaderStyle:t=>b[""+t],getDrawerStyle:t=>b[""+t]},S=k,C=t=>"string"==typeof t?t.charAt(0).toUpperCase()+t.slice(1):"";var D=n(893);const A="Logo of web app TA Chart v0.3.0",M=t=>{let{className:e,style:n,title:o=A}=t;return(0,D.jsx)("span",{className:e,style:n,title:o,children:(0,D.jsxs)("svg",{viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:"2",strokeWidth:"2",children:[(0,D.jsx)("rect",{ry:"1.8825414",rx:"194.14471",y:"1.434558",x:"19.176462",height:"12.460618",width:"10.85316",fill:"#8ecc2d",stroke:"#8ecc2d"}),(0,D.jsx)("rect",{ry:"1.87537",rx:"204.478",y:"16.639841",x:"8.8410215",height:"13.752699",width:"18.307165",fill:"#232f3b",stroke:"#232f3b"}),(0,D.jsx)("rect",{ry:"1.87537",rx:"204.478",y:"3.4229634",x:"2.5897937",height:"10.894996",width:"10.001963",fill:"#a487d4",stroke:"#a487d4"})]})})},T=Object.freeze({INITIAL:"INITIAL",LOADING:"LOADING",SUCCESS:"SUCCESS",FAILED:"FAILED"}),_=()=>({}),P=()=>(0,r.useReducer)(_)[1],N="#2f7ed8",j=(t,e,n)=>({backgroundColor:t,width:e+"%",transition:n,opacity:1}),$=(t,e,n)=>i(t)?(s(t,!1),j(e,0)):j(e,((t,e)=>t<0?0:t>=100?(s(e,!0),100):t)(n,t),"width 500ms linear"),E=t=>{let{color:e=N,completed:n}=t;const o=P(),a=(0,r.useRef)(!1),l=(0,r.useRef)(null);(0,r.useEffect)((()=>{i(a)&&s(l,setTimeout(o,800))})),(0,r.useEffect)((()=>()=>{clearTimeout(i(l))}),[]);const c=$(a,e,n);return(0,D.jsx)("div",{className:"progress-line",style:c})},F="#2f7ed8",I=(t,e)=>[t,e],L=(0,r.memo)((t=>{let{fetchStatus:e}=t;const[n,o]=(t=>t===T.LOADING?I(35,F):t===T.SUCCESS?I(100,F):t===T.FAILED?I(100,"#ed5813"):I(0,F))(e);return(0,D.jsx)(E,{color:o,completed:n})})),O=t=>{const[e,n]=(0,r.useState)((()=>!!t));return[e,(0,r.useCallback)((t=>{(t=>"boolean"==typeof t)(t)?n(t):n((t=>!t))}),[])]},R="drawer",z=`${R}-bt`,W=`${R}-span`,X=`${R}-svg`,H=`${R}-modal`,Y={position:"absolute",top:0,right:16},U={transform:"translateX(334px)",pointerEvents:"none"},B={transform:"translate(0px, 0px)"},Z={display:"none",opacity:0,zIndex:-1,transition:"opacity 195ms cubic-bezier(0.4, 0, 0.2, 1) 0ms"},V={display:"block",opacity:1,zIndex:1e3,transition:"opacity 225ms cubic-bezier(0.4, 0, 0.2, 1) 0ms"},q=t=>{let{btStyle:e,children:n}=t;const[o,i]=O();(0,r.useEffect)((()=>{document.body.style.overflowY=o?"hidden":"auto"}),[o]);const s=o?B:U,a=o?V:Z,l=o?i:void 0;return[(0,D.jsx)("button",{className:z,style:{...Y,...e},"aria-label":"Open Drawer",onClick:i,children:(0,D.jsx)("span",{className:W,children:(0,D.jsxs)("svg",{className:X,focusable:"false",viewBox:"0 0 24 24","aria-hidden":"true",children:[(0,D.jsx)("path",{fill:"none",d:"M0 0h24v24H0z"}),(0,D.jsx)("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"})]})})},"bt-drawer"),(0,D.jsx)("div",{role:"presentation","aria-hidden":!o,className:H,style:a,onClick:l},"wrapper"),(0,D.jsx)("aside",{className:R,style:s,children:(0,r.cloneElement)(n,{onCloseDrawer:i})},"aside")]},G={padding:3},K=t=>{let{style:e,tabIndex:n=-1,onClick:o}=t;return(0,D.jsx)("button",{className:"svg-close",style:e,tabIndex:n,onClick:o,children:(0,D.jsxs)("svg",{viewBox:"0 0 12 12",width:"100%",height:"100%",preserveAspectRatio:"none",xmlns:"http://www.w3.org/2000/svg",style:G,strokeWidth:"2",stroke:"#f44336",strokeLinecap:"round",children:[(0,D.jsx)("path",{d:"M 0,0 L 12,12"}),(0,D.jsx)("path",{d:"M 12,0 L 0,12"})]})})},J={backgroundColor:"#1b2836"},Q=(t,e)=>t===e?J:void 0,tt=t=>{let{style:e,tabIndex:n=-1,initialValue:o=1,oneC:i="One",twoC:s="Two",threeC:a="Three",onClick:l}=t;const[c,h]=(0,r.useState)(o),u=Q(c,1),d=Q(c,2),p=Q(c,3),f=t=>{l(t),h(t)};return(0,D.jsxs)("div",{className:"bt-triple",style:e,children:[(0,D.jsx)("button",{className:"bt-triple__one",style:u,tabIndex:n,onClick:f.bind(null,1),children:i}),(0,D.jsx)("button",{className:"bt-triple__two",style:d,tabIndex:n,onClick:f.bind(null,2),children:s}),(0,D.jsx)("button",{className:"bt-triple__three",style:p,tabIndex:n,onClick:f.bind(null,3),children:a})]})},et=t=>{t&&(document.body.style.backgroundColor=t)},nt={paddingTop:12,paddingBottom:8},ot={marginRight:8},rt={position:"relative",top:4},it=t=>{let{onClose:e,setThemeId:n}=t;const{theme:o}=(0,r.useContext)(c);return(0,D.jsxs)("div",{className:"drawer__title",style:nt,children:[(0,D.jsx)(tt,{style:ot,oneC:"GREY",twoC:"LIGHT",threeC:"SAND",onClick:t=>{et(o.getBgColor(t)),n(t)}}),(0,D.jsx)(K,{style:rt,onClick:e})]})},st=Date.now||(()=>new Date.getTime),at=function(t,e){void 0===e&&(e=800);let n=0;return function(){const o=st();if(o-n>e)return n=o,t(...arguments)}},lt=(t,e,n)=>(0,r.useCallback)(at(t,n),e||[]),ct=t=>{let{style:e,pages:n,pageCurrent:o,onPrevPage:i,onNextPage:s}=t;return n.map(((t,n)=>(0,r.cloneElement)(t,{style:e,pageCurrent:o,pageNumber:n+1,onPrevPage:i,onNextPage:s})))},ht={position:"absolute",overflow:"hidden"},ut={display:"flex",flexFlow:"row nowrap",alignItems:"flex-start",overflowX:"hidden",transition:"all 750ms ease-out"},dt=t=>parseInt(t.style.transform.substr(11).replace("px","").replace(")",""),10),pt=t=>{let{pageWidth:e=330,maxPages:n=3,initialPageId:o,pageRouter:a}=t;const l=(0,r.useRef)(),c=(0,r.useRef)(0),h=(0,r.useRef)({width:n*e+"px"}),u=(0,r.useRef)({width:`${e}px`}),[d,p]=(0,r.useState)({pageCurrent:1,pages:[(0,r.createElement)(a[o],{key:o})]}),{pageCurrent:f,pages:g}=d,m=lt((()=>{p((t=>(t.pageCurrent>1&&(t.pageCurrent-=1,s(c,-1)),{...t})))})),y=lt((t=>{p((e=>{const{pages:n}=e,o=((t,e)=>t.findIndex((t=>t.key===e)))(n,t);var i,l;return e.pages=-1!==o?(l=o,[(i=n)[0],i.splice(l,1)[0],...i.slice(1)]):((t,e)=>[t[0],e,...t.slice(1)])(n,(0,r.createElement)(a[t],{key:t})),e.pageCurrent+=1,s(c,1),{...e}}))})),x=((t,e,n)=>{const o=i(e),r=i(n);let a=0;if(0!==r&&o){const e=dt(o);a=1===r?e-t:e+t,s(n,0)}else 0===r&&o&&(a=dt(o));return{transform:`translateX(${a}px)`}})(e,l,c),v={...i(h),...ut,...x};return(0,D.jsx)("div",{style:ht,children:(0,D.jsx)("div",{ref:l,style:v,children:(0,D.jsx)(ct,{style:i(u),pages:g,pageCurrent:f,onPrevPage:m,onNextPage:y})})})},ft=()=>{},gt=function(t,e){void 0===t&&(t=ft),void 0===e&&(e=0);const n=(0,r.useRef)(null);return(0,r.useCallback)((o=>{if(0===e)return void t(o);const r=n.current,{timeStamp:i}=o;(null==r||i-r>e)&&(t(o),n.current=i)}),[e,t])},mt=Array.isArray,yt=t=>mt(t)?t[0]?t[1]:"":t||"",xt=(t,e)=>{const n=yt(t),o=yt(e);return n?o?`${n} ${o}`:n:o||void 0},vt=Array.isArray,wt=t=>vt(t)?t[0]?t[1]:void 0:t||void 0,bt=(t,e)=>{const n=wt(t),o=wt(e);return n?o?{...n,...o}:n:o||void 0},kt={textDecoration:"underline"},St=t=>{let{className:e,style:n,caption:o="",accessKey:r,children:i}=t;const s=((t,e)=>t?e.toLowerCase().indexOf(t):-1)(r,o),a=-1===s?o:((t,e)=>{const n=e.substring(0,t),o=e.substring(t,t+1),r=e.substring(t+1);return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("span",{children:n}),(0,D.jsx)("span",{style:kt,children:o}),(0,D.jsx)("span",{children:r})]})})(s,o);return(0,D.jsxs)("span",{className:e,style:n,children:[a,i]})},Ct="bt-flat__div",Dt={color:"#607d8b"},At=(0,r.forwardRef)(((t,e)=>{let{className:n,style:o,clDiv:i=Ct,clCaption:s,isPrimary:a,title:l="",caption:c,accessKey:h,timeout:u=500,onClick:d,children:p}=t;const f=(0,r.useRef)(),g=gt(d,u);(0,r.useImperativeHandle)(e,(()=>({focus:()=>{const t=f.current;t&&t.focus()}})),[]);const m=xt("bt-flat",n),y=xt("bt-flat__span",s),x=bt(o,[a,Dt]),v=((t,e)=>e?`${t} [${e}]`:t)(l,h);return(0,D.jsx)("button",{ref:f,className:m,style:x,accessKey:h,tabIndex:0,title:v,onClick:g,children:(0,D.jsxs)("div",{className:i,children:[(0,D.jsx)(St,{className:y,caption:c,accessKey:h}),p]})})})),Mt=At,Tt="drawer__list-bt",_t={listStyleType:"none"},Pt=t=>{let{style:e,onNextPage:n}=t;return(0,D.jsxs)("ul",{style:{..._t,...e},children:[(0,D.jsx)("li",{children:(0,D.jsx)(Mt,{className:Tt,caption:"App Settings",onClick:()=>n("p1-1")})}),(0,D.jsx)("li",{children:(0,D.jsx)(Mt,{className:Tt,caption:"AltCoins",onClick:()=>n("p1-2")})})]})},Nt=t=>{let{onClick:e}=t;return(0,D.jsx)(Mt,{className:"drawer__list-bt",caption:"< Menu",onClick:e})},jt=t=>{let{item:e,propCaption:n}=t;return(0,D.jsx)("span",{children:e[n]})},$t="zhn-select",Et=`${$t}__input`,Ft=`${$t}__spinner`,It=`${Ft}--failed`,Lt=`${$t}__input__hr`,Ot=`${$t}__options`,Rt=`${Ot}__div`,zt=`${$t}__row`,Wt=`${zt}--active`,Xt=`${$t}__footer`,Ht=`${Xt}__index`,Yt=`${Xt}__bts`,Ut=`${Xt}--margin`,Bt=(t,e)=>t?-1!==(""+t).indexOf("%")?{...e,width:t}:{...e,width:t+"px"}:null,Zt=t=>{let{className:e="",style:n,caption:o="",onClick:r,...i}=t;return(0,D.jsx)("button",{className:`zhn-bt-circle2 ${e}`,style:n,onClick:r,...i,children:(0,D.jsx)("div",{children:o})})},Vt={backgroundColor:"#949ab4"},qt=(0,r.forwardRef)(((t,e)=>{let{indexActiveOption:n,nFiltered:o,nAll:r,onStepDown:i,onStepUp:s,onClear:a}=t;return(0,D.jsxs)("div",{className:`${Xt} not-selected`,children:[(0,D.jsxs)("span",{className:Ht,children:[(0,D.jsx)("span",{ref:e,children:n}),(0,D.jsxs)("span",{children:[": ",o,": ",r]})]}),(0,D.jsxs)("span",{className:Yt,children:[(0,D.jsx)(Zt,{className:Ut,style:Vt,caption:"Dn",onClick:i}),(0,D.jsx)(Zt,{className:Ut,style:Vt,caption:"Up",onClick:s}),(0,D.jsx)(Zt,{style:Vt,caption:"CL",onClick:a})]})]})})),Gt={display:"block"},Kt={display:"none"},Jt=t=>{let{refOptionsElement:e,refIndexElement:n,optionsStyle:o,width:r,isShowOption:i,indexActiveOption:s,nFiltered:a,nAll:l,onStepUp:c,onStepDown:h,onClear:u,children:d}=t;const p=Bt(r,i?Gt:Kt);return(0,D.jsxs)("div",{className:Ot,style:p,"data-scrollable":!0,children:[(0,D.jsx)("div",{ref:e,className:Rt,style:{...o,...p},children:d}),(0,D.jsx)(qt,{ref:n,indexActiveOption:s,nAll:l,nFiltered:a,onStepUp:c,onStepDown:h,onClear:u})]})},Qt=t=>{let{options:e,indexActiveOption:n,propCaption:o,ItemOptionComp:r,onClick:i}=t;return e.map(((t,e)=>(0,D.jsx)("div",{role:"option","aria-selected":n===e,tabIndex:"-1",className:zt,"data-index":e,onClick:e=>i(t,e),children:(0,D.jsx)(r,{item:t,propCaption:o})},e)))},te={position:"absolute",top:10,right:0,width:35,paddingRight:5,textAlign:"center",verticalAlign:"middle",cursor:"pointer"},ee={position:"relative",top:2,display:"inline-block",height:0,width:0,borderColor:"#999 transparent transparent",borderStyle:"solid",borderWidth:"10px 8px 4px"},ne=(0,r.forwardRef)(((t,e)=>{let{arrowStyle:n,onClick:o}=t;const i=(0,r.useRef)(),s=(0,r.useRef)();return(0,r.useImperativeHandle)(e,(()=>({startAnimation:()=>{a(i).animation="circle infinite 1.25s linear",a(s).borderColor="#1b75bb transparent transparent"},stopAnimation:()=>{a(i).animation=""}}))),(0,D.jsx)("button",{type:"button",ref:i,style:te,tabIndex:"-1",onClick:o,children:(0,D.jsx)("span",{ref:s,style:{...ee,...n}})})})),oe={borderColor:"#1b75bb transparent transparent"},re=(t,e,n,o)=>{const{isLoading:r,isLoadingFailed:i,placeholder:s,optionName:a="",onLoadOption:l}=t,{isShowOption:c,optionNames:h}=e;return r||i?r?[`Loading ${h}...`,(0,D.jsx)("span",{className:Ft,"data-loader":"circle"})]:i?[`Loading ${h} Failed`,(0,D.jsx)(Zt,{className:It,"data-loader":"circle-failed",onClick:l})]:[]:[s||`Select ${a}...`,(0,D.jsx)(ne,{ref:n,arrowStyle:c?oe:void 0,onClick:o})]},ie="From input:",se=(t,e,n,o)=>{const r=((t,e,n)=>{const o=e.toLowerCase();return(t||[]).filter((t=>-1!==t[n].toLowerCase().indexOf(o)))})(e,t,n);return 0===r.length&&r.push(((t,e,n)=>{const o=String(t).replace(ie,"").trim();return{[e]:n?`${ie} ${o}`:"No results found",value:"noresult",inputValue:o}})(t,n,o)),r},ae=(t,e)=>{const n=(0,r.useRef)(t);return(0,r.useMemo)((()=>[t=>{n.current=t},()=>void 0===n.current?e:n.current]),[])},le=t=>"number"==typeof t&&t-t==0,ce=t=>{const{dataset:e}=t,{index:n}=e||{};return Number(n)},he=(t,e)=>(0,r.useMemo)((()=>[e=>{if(e){e.classList.add(Wt);const n=ce(e),o=i(t);o&&le(n)&&(o.textContent=n+1)}},t=>{const n=t||e();n&&n.classList.remove(Wt)}]),[]),ue=t=>(t.children||{}).length,de=()=>{const t=(0,r.useRef)(),e=(0,r.useRef)(),[n,o]=ae(0),s=(0,r.useMemo)((()=>()=>((i(t)||{}).childNodes||[])[o()]),[]),[a,l]=he(e,s);return[t,e,n,o,s,a,l,...(0,r.useMemo)((()=>[()=>{const e=s();if(e){l(e);const r=i(t);n(o()+1),o()>=ue(r)&&(n(0),r.scrollTop=0);const c=s();a(c);const h=c.offsetTop,u=r.scrollTop;h-u>70&&(r.scrollTop+=h-u-70)}},()=>{const e=s();if(e){l(e);const r=i(t);if(n(o()-1),o()<0){n(ue(r)-1);const t=s();r.scrollTop=t.offsetTop}const c=s();a(c);const h=c.offsetTop,u=r.scrollTop;h-u<70&&(r.scrollTop-=70-(h-u))}}]),[])]},pe=[],fe=t=>{let{optionName:e,optionNames:n,options:o=pe}=t;return{value:"",initialOptions:o,options:o,optionNames:n||e||""}},ge=()=>{},me=t=>{const{style:e,width:n,optionsStyle:o,propCaption:i="caption",ItemOptionComp:s=jt,isWithInput:a=!1,onSelect:l=ge}=t,c=(0,r.useRef)(),h=(0,r.useRef)(),[u,d]=(0,r.useState)((()=>fe(t))),{value:p,options:f,initialOptions:g}=u,[m,y]=O(!1),[x,v,w,b,k,S,C,A,M]=de(),T=(0,r.useCallback)((()=>{C(),d((()=>fe(t))),y(!1),w(0),l()}),[t.options,l]),_=(0,r.useCallback)(((t,e)=>{C(),w(ce(e.currentTarget)),y(!1),d((e=>({...e,value:t[i]}))),l(t)}),[]),P=(0,r.useMemo)((()=>(0,D.jsx)(Qt,{options:f,indexActiveOption:b(),propCaption:i,ItemOptionComp:s,onClick:_})),[f]);(0,r.useEffect)((()=>{if(m){const t=k();S(t),(t=>{if(t){const{offsetTop:e}=t,n=t.parentElement,{scrollTop:o}=n;e-o>70&&(n.scrollTop+=e-o-70),e-o<0&&(n.scrollTop=0)}})(t)}}),[m]),(0,r.useEffect)((()=>{t.options!==g&&T()}),[t.options]);const N=b(),j=Bt(n,e),[$,E]=re(t,u,c,y),[F,I]=((t,e)=>[t[0]&&"noresult"!==t[0].value?t.length:0,e?e.length:0])(f,g);return(0,D.jsxs)("div",{className:$t,style:j,children:[(0,D.jsx)("input",{ref:h,className:Et,type:"text",name:"select",autoCorrect:"off",autoCapitalize:"off",spellCheck:!1,value:p,placeholder:$,onChange:t=>{const e=t.target.value,n=e.length,o=p.length;n!==o&&(0!==b()&&(C(),w(0)),d((t=>({...t,value:e,options:se(e,n>o?f:g,i,a)}))),y(!0))},onKeyDown:t=>{switch(t.keyCode){case 13:{const t=b();if(le(t)){const e=f[t];e&&e[i]&&(l(((t,e,n)=>"noresult"!==t.value?t:n?{[e]:"From Input",value:t.inputValue}:void 0)(e,i,a)),y(!1),d((t=>({...t,value:e[i]}))))}else l();break}case 27:case 46:t.preventDefault(),m?y(!1):T();break;case 40:m?(t.preventDefault(),A()):y(!0);break;case 38:m&&(t.preventDefault(),M());break;default:return}}}),E,(0,D.jsx)("hr",{className:Lt}),(0,D.jsx)(Jt,{refOptionsElement:x,refIndexElement:v,optionsStyle:o,width:n,isShowOption:m,indexActiveOption:N,nFiltered:F,nAll:I,onStepUp:M,onStepDown:A,onClear:T,children:P})]})},ye={display:"flex",alignItems:"center",marginRight:5,marginTop:5,marginLeft:5,marginBottom:5},xe={marginLeft:12,marginRight:12},ve={color:"#1b75bb",display:"inline-block",textAlign:"right",width:100,paddingRight:5,fontSize:"16px",fontWeight:"bold",userSelect:"none"},we={display:"none"},be=t=>{let{isShowLabels:e=!0,caption:n="",captionStyle:o,...r}=t;const i=(t=>t&&-1===t.indexOf(":")?`${t}:`:t)(n),[s,a]=function(t){return void 0===t&&(t=!0),t?[{...ye},{...ve}]:[{...ye,...xe},{...ve,...we}]}(e),l={width:270,...r,optionName:e?"":n.replace(":","")};return(0,D.jsxs)("div",{style:s,children:[(0,D.jsx)("span",{style:{...a,...o},children:i}),(0,D.jsx)(me,{...l})]})},ke=t=>{let{style:e,exchanges:n,onSelectExchange:o,isMarkets:r={},markets:i,onSelectMarket:s,timeframes:a,onSelectTimeframe:l}=t;return(0,D.jsxs)("div",{style:e,children:[(0,D.jsx)(be,{isShowLabels:!1,placeholder:"Exchanges",options:n,onSelect:o}),(0,D.jsx)(be,{isShowLabels:!1,placeholder:"Time Frames (Default: 1d)",options:a,onSelect:l}),(0,D.jsx)(be,{isShowLabels:!1,placeholder:"Markets",isLoading:r.loading,isLoadingFailed:r.failed,options:i,onSelect:s})]})},Se="MARKET_LOADING",Ce="MARKET_LOADED",De="MARKET_LOADING_FAIL",Ae="EXCHANGES_SET",Me="EXCHANGE_SET",Te="PAIR_SET",_e=(t,e)=>{switch(e.type){case Se:return{...t,isMarkets:{loading:!0,failed:!1}};case Ce:return{...t,exchange:e.exchange,markets:e.markets,isMarkets:{loading:!1,failed:!1}};case De:return{...t,isMarkets:{loading:!1,failed:!0}};case Ae:return{...t,exchanges:e.exchanges};case Me:return{...t,exchange:e.exchange,pair:void 0};case Te:return{...t,pair:e.pair};default:throw new TypeError("Not existed action "+e.type)}},Pe={exchange:"",pair:"",isMarkets:{loading:!1,failed:!1},exchanges:[],markets:[]},Ne=t=>{let{dispatch:e,exchImpl:n,exchange:o,proxy:r}=t;e({type:Se}),n.fetchMarkets(r).then((t=>{e({type:Ce,exchange:o,markets:t})})).catch((t=>{e({type:De}),console.log(t.message)}))},je=t=>{let{exchImpl:e,exchange:n,pair:o,timeframe:r,dataAction:i,proxy:s}=t;i.loading();const{v:a,tf:l}="object"==typeof r?r:{v:r,tf:r};e.fetchOHLCV(o,a,s).then((t=>{0!==t.length&&i.loadData({providerTitle:n,itemTitle:o,data:t,timeframe:l})})).catch((t=>{i.loadFailed(),console.log(t.message)}))},$e=t=>fetch(t).then((t=>{const{status:e}=t;if(e>=200&&e<400)return t.json();throw new Error("Response is incorrect: "+e)})),Ee=Array.isArray,Fe=(t,e)=>{const n=e?(t||{})[e]:t;return Ee(n)?n:[]},Ie=(t,e)=>t.caption<e.caption?-1:t.caption>e.caption?1:0,Le=t=>"object"==typeof t,Oe="https://api.binance.com/api/v3",Re=`${Oe}/exchangeInfo`,ze=`${Oe}/klines`,We={fetchMarkets:()=>$e(Re).then((t=>Fe(t,"symbols").reduce(((t,e)=>{const{baseAsset:n,quoteAsset:o,status:r}=e||{};return"TRADING"===r&&t.push({caption:`${n}/${o}`,value:`${n}${o}`}),t}),[]).sort(Ie))),getTimeframes:()=>[{caption:"1m",value:"1m"},{caption:"3m",value:"3m"},{caption:"5m",value:"5m"},{caption:"15m",value:"15m"},{caption:"30m",value:"30m"},{caption:"1h",value:"1h"},{caption:"2h",value:"2h"},{caption:"4h",value:"4h"},{caption:"8h",value:"8h"},{caption:"12h",value:"12h"},{caption:"1d",value:"1d"},{caption:"3d",value:"3d"},{caption:"1w",value:"1w"},{caption:"1M",value:"1M"}],fetchOHLCV:(t,e)=>$e(((t,e)=>`${ze}?symbol=${t}&interval=${e}`)(t,e)).then((t=>Fe(t).reduce(((t,e)=>(Le(e)&&t.push({date:e[0],open:parseFloat(e[1]),high:parseFloat(e[2]),low:parseFloat(e[3]),close:parseFloat(e[4]),volume:parseFloat(e[5])}),t)),[])))},Xe="https://www.bitstamp.net/api/v2",He=`${Xe}/trading-pairs-info/`,Ye=`${Xe}/ohlc`,Ue={binance:We,bitstamp:{isRequireProxy:!0,fetchMarkets:t=>$e(`${t}/${He}`).then((t=>Fe(t).reduce(((t,e)=>{const{trading:n,name:o,url_symbol:r}=e||{};if("Enabled"===n)return t.push({caption:o,value:r}),t}),[]))),getTimeframes:()=>[{caption:"1m",value:{v:"60",tf:"1m"}},{caption:"3m",value:{v:"180",tf:"3m"}},{caption:"5m",value:{v:"300",tf:"5m"}},{caption:"15m",value:{v:"900",tf:"15m"}},{caption:"30m",value:{v:"1800",tf:"30m"}},{caption:"1h",value:{v:"3600",tf:"1h"}},{caption:"2h",value:{v:"7200",tf:"2h"}},{caption:"4h",value:{v:"14400",tf:"4h"}},{caption:"10h",value:{v:"21600",tf:"10h"}},{caption:"12h",value:{v:"43200",tf:"12h"}},{caption:"1d",value:{v:"86400",tf:"1d"}},{caption:"3d",value:{v:"259200",tf:"3d"}}],fetchOHLCV:(t,e,n)=>$e(((t,e,n)=>`${n}/${Ye}/${t}?step=${e}&limit=300`)(t,e,n)).then((t=>Fe((t||{}).data,"ohlc").reduce(((t,e)=>(Le(e)&&t.push({date:1e3*parseFloat(e.timestamp),open:parseFloat(e.open),high:parseFloat(e.high),low:parseFloat(e.low),close:parseFloat(e.close),volume:parseFloat(e.volume)}),t)),[])))}},Be=[{caption:"Binance",value:"binance"},{caption:"Bitstamp",value:"bitstamp"}],Ze="1d",Ve={height:400},qe={paddingLeft:8},Ge=(t,e)=>"binance"===t&&"1m"===e,Ke=(t,e)=>t.isRequireProxy&&!e,Je=t=>{let{style:e,onPrevPage:n}=t;const{appSettings:o,dataAction:i,onLiveUpdate:s,onStopUpdate:a}=(0,r.useContext)(c),{isLiveUpdating:l}=(0,r.useContext)(u),[h,d]=(0,r.useReducer)(_e,Pe),{exchange:p,pair:f,isMarkets:g,exchanges:m,markets:y}=h,[x,v]=(0,r.useState)([]),[w,b]=(0,r.useState)(Ze),k=(0,r.useRef)(null);(0,r.useEffect)((()=>{d({type:Ae,exchanges:Be})}),[]),(0,r.useEffect)((()=>{if(p){k.current=(t=>Ue[t])(p);const t=k.current,e=o.proxy();if(Ke(t,e))return;b(Ze),v(t.getTimeframes()),Ne({dispatch:d,exchange:p,exchImpl:t,proxy:e})}}),[p]),(0,r.useEffect)((()=>{if(f&&w){const t=k.current,e=o.proxy();if(Ke(t,e))return;je({exchange:p,pair:f,timeframe:w,exchImpl:t,dataAction:i,proxy:e})}}),[f,w]);return(0,D.jsxs)("div",{style:{...Ve,...e},children:[(0,D.jsx)(Nt,{onClick:n}),(0,D.jsx)(ke,{exchanges:m,onSelectExchange:t=>{t&&t.value&&d({type:Me,exchange:t.value})},isMarkets:g,markets:y,onSelectMarket:t=>{d({type:Te,pair:t&&t.value||void 0})},timeframes:x,onSelectTimeframe:t=>{b(t&&t.value||Ze)}}),Ge(p,w)&&(0,D.jsx)("div",{style:qe,children:(0,D.jsx)(Mt,{caption:l?"Stop Updating":"Live Updating 1min",onClick:l?a:()=>s(f)})})]})},Qe={display:"inline",color:"green",height:26,width:40,paddingLeft:5,margin:"0 5px",fontSize:"16px",fontWeight:"bold",border:"medium none",outline:"medium none",background:"transparent none repeat scroll 0 0",backgroundColor:"#e1e1cb"},tn="text",en="off",nn=()=>{},on=(0,r.forwardRef)(((t,e)=>{let{initValue:n,style:o,spellCheck:i,placeholder:s,type:a=tn,maxLenght:l=125,onEnter:c=nn}=t;const h=(0,r.useRef)(),[u,d]=(0,r.useState)((()=>null!=n?n:"")),p=(0,r.useCallback)((t=>{const{value:e}=t.target;e.length<=l&&d(e)}),[l]),f=(0,r.useCallback)((t=>{switch(t.keyCode){case 27:case 46:t.preventDefault(),d("");break;case 13:c(t.target.value);break;default:return}}),[]);(0,r.useImperativeHandle)(e,(()=>({getValue:()=>(h.current||{}).value,setValue:t=>d(t)})),[]);const g=i?"on":en,m=!!i;return(0,D.jsx)("input",{ref:h,style:{...Qe,...o},type:a,name:tn,autoCapitalize:en,autoComplete:en,autoCorrect:g,spellCheck:m,translate:"false",value:u,placeholder:s,maxLength:l,onChange:p,onKeyDown:f})})),rn=on,sn={paddingLeft:4},an={color:"#265782",display:"inline-block",padding:"0 0 4px 8px",fontWeight:"bold"},ln={display:"block",width:"92%",height:32,padding:"8px 0 8px 4px"},cn={float:"right",padding:"6px 22px 0 0"},hn="http://127.0.0.1",un=t=>!!(t=>"string"==typeof t)(t)&&-1!==t.indexOf(hn),dn=t=>{let{style:e,onPrevPage:n}=t;const{appSettings:o}=(0,r.useContext)(c),s=(0,r.useRef)(),[a,l]=(0,r.useState)(0),h=o.proxy();return(0,D.jsxs)("div",{style:{...sn,...e},children:[(0,D.jsx)(Nt,{onClick:n}),(0,D.jsxs)("div",{children:[(0,D.jsx)("span",{style:an,children:"Local Proxy Server"}),(0,D.jsx)(rn,{ref:s,style:ln,initValue:h,placeholder:hn,onEnter:t=>{un(t)?o.proxy(t):i(s).setValue("")}},a),(0,D.jsxs)("div",{style:cn,children:[(0,D.jsx)(Mt,{caption:"Clear",onClick:()=>{o.clearProxy(),l((t=>t+1))}}),(0,D.jsx)(Mt,{caption:"Apply",onClick:()=>{const t=i(s),e=t.getValue();un(e)?o.proxy(e):t.setValue("")}})]})]})]})},pn={p1:Pt,"p1-1":dn,"p1-2":Je},fn=t=>{let{onCloseDrawer:e}=t;const{theme:n,setThemeId:o}=(0,r.useContext)(c),i=(0,r.useContext)(h),s=n.getDrawerStyle(i);return(0,D.jsxs)("div",{className:"drawer__list",style:s,children:[(0,D.jsx)(it,{setThemeId:o,onClose:e}),(0,D.jsx)(pt,{pageRouter:pn,initialPageId:"p1",maxPages:4})]})},gn=t=>(0,D.jsx)(q,{children:(0,D.jsx)(fn,{...t})}),mn={position:"relative",top:6,left:8,display:"inline-block",verticalAlign:"middle",cursor:"pointer"},yn={color:"#80c040",display:"inline-block",paddingLeft:6,fontSize:16,fontWeight:"bold"},xn=t=>{let{spinnerCn:e,onStopUpdate:n}=t;const{isLiveUpdating:o,sec:i}=(0,r.useContext)(u);return o&&(0,D.jsxs)("button",{style:mn,onClick:n,children:[(0,D.jsx)("span",{className:e,"data-loader":"circle"}),(0,D.jsx)("span",{style:yn,children:i})]})},vn="header",wn=`${vn}__logo-notes`,bn=`${vn}__title-gap`,kn=`${vn}__title`,Sn=`${vn}__spinner`,Cn=t=>{let{text:e,is:n}=t;return(0,D.jsxs)("span",{className:kn,children:[C(e),!n&&(0,D.jsx)("span",{children:": "})]})},Dn=t=>{let{fetchStatus:e,providerTitle:n="",itemTitle:o="",timeframe:i="",isLiveUpdating:s,...a}=t;const{theme:l,onStopUpdate:u}=(0,r.useContext)(c),d=(0,r.useContext)(h),p=l.getHeaderStyle(d);return(0,D.jsxs)("header",{className:vn,style:p,children:[(0,D.jsx)(L,{fetchStatus:e}),(0,D.jsx)(M,{className:wn}),(0,D.jsx)("span",{className:bn}),(0,D.jsx)(Cn,{text:n}),(0,D.jsx)(Cn,{text:o}),(0,D.jsx)(Cn,{text:i,is:!0}),(0,D.jsx)(xn,{spinnerCn:Sn,onStopUpdate:u}),(0,D.jsx)(gn,{...a})]})},An=Math.sqrt,Mn=(t,e)=>{let n,o;if(void 0===e)for(const e of t)null!=e&&(void 0===n?e>=e&&(n=o=e):(n>e&&(n=e),o<e&&(o=e)));else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(void 0===n?i>=i&&(n=o=i):(n>i&&(n=i),o<i&&(o=i)))}return[n,o]},Tn=(t,e)=>{let n;if(void 0===e)for(const e of t)null!=e&&(n<e||void 0===n&&e>=e)&&(n=e);else{let o=-1;for(let r of t)null!=(r=e(r,++o,t))&&(n<r||void 0===n&&r>=r)&&(n=r)}return n},_n=(t,e)=>{let n;if(void 0===e)for(const e of t)null!=e&&(n>e||void 0===n&&e>=e)&&(n=e);else{let o=-1;for(let r of t)null!=(r=e(r,++o,t))&&(n>r||void 0===n&&r>=r)&&(n=r)}return n},Pn=(t,e)=>{let n=0,o=0;if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(++n,o+=e);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(i=+i)>=i&&(++n,o+=i)}if(n)return o/n},Nn=Math.max,jn=Math.ceil,$n=t=>t.length,En=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return(t=>{let e=t.length;if(!e)return[];let n,o,r=-1,i=_n(t,$n),s=new Array(i);for(;++r<i;)for(n=-1,o=s[r]=new Array(e);++n<e;)o[n]=t[n][r];return s})(e)},Fn=(t,e)=>null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN,In=()=>0,Ln=t=>{let e,n,o;2!==t.length?(e=Fn,n=(e,n)=>Fn(t(e),n),o=(e,n)=>t(e)-n):(e=t===Fn?t:In,n=t,o=t);const r=function(t,o,r,i){if(void 0===r&&(r=0),void 0===i&&(i=t.length),r<i){if(0!==e(o,o))return i;do{const e=r+i>>>1;n(t[e],o)<0?r=e+1:i=e}while(r<i)}return r};return{left:r,center:function(t,e,n,i){void 0===n&&(n=0),void 0===i&&(i=t.length);const s=r(t,e,n,i-1);return s>n&&o(t[s-1],e)>-o(t[s],e)?s-1:s},right:function(t,o,r,i){if(void 0===r&&(r=0),void 0===i&&(i=t.length),r<i){if(0!==e(o,o))return i;do{const e=r+i>>>1;n(t[e],o)<=0?r=e+1:i=e}while(r<i)}return r}}},On=Ln(Fn).right,Rn=Math.max,zn=Math.sqrt,Wn=Math.floor,Xn=Math.pow,Hn=Math.log10,Yn=Math.round,Un=zn(50),Bn=zn(10),Zn=zn(2);function Vn(t,e,n){const o=(e-t)/Rn(0,n),r=Wn(Hn(o)),i=o/Xn(10,r),s=i>=Un?10:i>=Bn?5:i>=Zn?2:1;let a,l,c;return r<0?(c=Xn(10,-r)/s,a=Yn(t*c),l=Yn(e*c),a/c<t&&++a,l/c>e&&--l,c=-c):(c=Xn(10,r)*s,a=Yn(t/c),l=Yn(e/c),a*c<t&&++a,l*c>e&&--l),l<a&&.5<=n&&n<2?Vn(t,e,2*n):[a,l,c]}function qn(t,e,n){return Vn(t=+t,e=+e,n=+n)[2]}function Gn(t,e,n){n=+n;const o=(e=+e)<(t=+t),r=o?qn(e,t,n):qn(t,e,n);return(o?-1:1)*(r<0?1/-r:r)}const Kn=t=>t;function Jn(){let t=Kn;const e=t=>t.length;function n(){for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];const i=o.length;if(!i)return[];const s=_n(o,e),a=new Array(s);for(let e=-1;++e<s;){for(let t=-1,n=a[e]=new Array(i);++t<i;)n[t]=o[t][e];a[e]=t.apply(this,a[e])}return a}return n.combine=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],n):t},n}const Qn=Array.isArray,to=function(t){void 0===t&&(t=[]);const e=Qn(t)?t:[t],n=e.length;return(t,o)=>{if(0===n)return null==t?o:t;let r=0;for(;null!=t&&r<n;)t=t[e[r++]];return r===n?t:o}},eo=t=>"function"==typeof t?t:()=>t;function no(){let t,e,n,o,r=10,i=()=>{},s=0,a=function(a){const l=n||to(e),c=eo(r).apply(this,arguments),h=a.slice(s,c+s).map(l);let u=0;const d=eo(t);return a.map(((t,e)=>e<s+c-1?d(l(t),e,o):(e>=s+c&&(h.shift(),h.push(l(t,e))),i(h,e,u++,o))))};return a.undefinedValue=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],a):t},a.windowSize=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],a):r},a.misc=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],a):o},a.accumulator=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],a):i},a.skipInitial=function(){return arguments.length?(s=arguments.length<=0?void 0:arguments[0],a):s},a.sourcePath=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],a):e},a.source=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],a):n},a}const oo=t=>{switch(t){default:case"Solid":return"none";case"ShortDash":return"6, 2";case"ShortDash2":return"6, 3";case"ShortDot":return"2, 2";case"ShortDashDot":return"6, 2, 2, 2";case"ShortDashDotDot":return"6, 2, 2, 2, 2, 2";case"Dot":return"2, 6";case"Dash":return"4, 6";case"LongDash":return"16, 6";case"DashDot":return"8, 6, 2, 6";case"LongDashDot":return"16, 6, 2, 6";case"LongDashDotDot":return"16, 6, 2, 6, 2, 6"}},ro=t=>{const e=oo(t).split(",");return 1===e.length?[]:e.map((t=>Number(t)))};function io(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function so(t,e){var n=Object.create(t.prototype);for(var o in e)n[o]=e[o];return n}function ao(){}let lo=.7,co=1/lo,ho="\\s*([+-]?\\d+)\\s*",uo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",po="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",fo=/^#([0-9a-f]{3,8})$/,go=new RegExp(`^rgb\\(${ho},${ho},${ho}\\)$`),mo=new RegExp(`^rgb\\(${po},${po},${po}\\)$`),yo=new RegExp(`^rgba\\(${ho},${ho},${ho},${uo}\\)$`),xo=new RegExp(`^rgba\\(${po},${po},${po},${uo}\\)$`),vo=new RegExp(`^hsl\\(${uo},${po},${po}\\)$`),wo=new RegExp(`^hsla\\(${uo},${po},${po},${uo}\\)$`);const bo={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ko=Math.min,So=Math.max,Co=Math.pow,Do=Math.round,Ao=t=>(t=(t||0)%360)<0?t+360:t,Mo=t=>So(0,ko(1,t||0)),To=(t,e,n)=>255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e);function _o(){return this.rgb().formatHex()}function Po(){return this.rgb().formatRgb()}function No(t){let e,n;return t=(t+"").trim().toLowerCase(),(e=fo.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?jo(e):3===n?new Fo(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?$o(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?$o(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=go.exec(t))?new Fo(e[1],e[2],e[3],1):(e=mo.exec(t))?new Fo(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=yo.exec(t))?$o(e[1],e[2],e[3],e[4]):(e=xo.exec(t))?$o(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=vo.exec(t))?Wo(e[1],e[2]/100,e[3]/100,1):(e=wo.exec(t))?Wo(e[1],e[2]/100,e[3]/100,e[4]):bo.hasOwnProperty(t)?jo(bo[t]):"transparent"===t?new Fo(NaN,NaN,NaN,0):null}function jo(t){return new Fo(t>>16&255,t>>8&255,255&t,1)}function $o(t,e,n,o){return o<=0&&(t=e=n=NaN),new Fo(t,e,n,o)}function Eo(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const[o,r,i,s]=e;return 1===e.length?((a=o)instanceof ao||(a=No(a)),a?new Fo((a=a.rgb()).r,a.g,a.b,a.opacity):new Fo):new Fo(o,r,i,null==s?1:s);var a}function Fo(t,e,n,o){this.r=+t,this.g=+e,this.b=+n,this.opacity=+o}function Io(){return`#${zo(this.r)}${zo(this.g)}${zo(this.b)}`}function Lo(){const t=Oo(this.opacity);return`${1===t?"rgb(":"rgba("}${Ro(this.r)}, ${Ro(this.g)}, ${Ro(this.b)}${1===t?")":`, ${t})`}`}function Oo(t){return isNaN(t)?1:So(0,ko(1,t))}function Ro(t){return So(0,ko(255,Do(t)||0))}function zo(t){return((t=Ro(t))<16?"0":"")+t.toString(16)}function Wo(t,e,n,o){return o<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Ho(t,e,n,o)}function Xo(t){if(t instanceof Ho)return new Ho(t.h,t.s,t.l,t.opacity);if(t instanceof ao||(t=No(t)),!t)return new Ho;if(t instanceof Ho)return t;let e=(t=t.rgb()).r/255,n=t.g/255,o=t.b/255,r=ko(e,n,o),i=So(e,n,o),s=NaN,a=i-r,l=(i+r)/2;return a?(s=e===i?(n-o)/a+6*(n<o):n===i?(o-e)/a+2:(e-n)/a+4,a/=l<.5?i+r:2-i-r,s*=60):a=l>0&&l<1?0:s,new Ho(s,a,l,t.opacity)}function Ho(t,e,n,o){this.h=+t,this.s=+e,this.l=+n,this.opacity=+o}function Yo(t,e,n,o,r){const i=t*t,s=i*t;return((1-3*t+3*i-s)*e+(4-6*i+3*s)*n+(1+3*t+3*i-3*s)*o+s*r)/6}io(ao,No,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:_o,formatHex:_o,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Xo(this).formatHsl()},formatRgb:Po,toString:Po}),io(Fo,Eo,so(ao,{brighter(t){return t=null==t?co:Co(co,t),new Fo(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?lo:Co(lo,t),new Fo(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Fo(Ro(this.r),Ro(this.g),Ro(this.b),Oo(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Io,formatHex:Io,formatHex8:function(){return`#${zo(this.r)}${zo(this.g)}${zo(this.b)}${zo(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Lo,toString:Lo})),io(Ho,(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const[o,r,i,s]=e;return 1===e.length?Xo(o):new Ho(o,r,i,null==s?1:s)}),so(ao,{brighter(t){return t=null==t?co:Co(co,t),new Ho(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?lo:Co(lo,t),new Ho(this.h,this.s,this.l*t,this.opacity)},rgb(){let t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*e,r=2*n-o;return new Fo(To(t>=240?t-240:t+120,r,o),To(t,r,o),To(t<120?t+240:t-120,r,o),this.opacity)},clamp(){return new Ho(Ao(this.h),Mo(this.s),Mo(this.l),Oo(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Oo(this.opacity);return`${1===t?"hsl(":"hsla("}${Ao(this.h)}, ${100*Mo(this.s)}%, ${100*Mo(this.l)}%${1===t?")":`, ${t})`}`}}));const Uo=t=>()=>t;function Bo(t,e){return function(n){return t+n*e}}function Zo(t){return 1==(t=+t)?Vo:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(o){return Math.pow(t+o*e,n)}}(e,n,t):Uo(isNaN(e)?n:e)}}function Vo(t,e){const n=e-t;return n?Bo(t,n):Uo(isNaN(t)?e:t)}const qo=function t(e){const n=Zo(e);function o(t,e){const o=n((t=Eo(t)).r,(e=Eo(e)).r),r=n(t.g,e.g),i=n(t.b,e.b),s=Vo(t.opacity,e.opacity);return function(e){return t.r=o(e),t.g=r(e),t.b=i(e),t.opacity=s(e),t+""}}return o.gamma=t,o}(1);function Go(t){return function(e){let n,o,r=e.length,i=new Array(r),s=new Array(r),a=new Array(r);for(n=0;n<r;++n)o=Eo(e[n]),i[n]=o.r||0,s[n]=o.g||0,a[n]=o.b||0;return i=t(i),s=t(s),a=t(a),o.opacity=1,function(t){return o.r=i(t),o.g=s(t),o.b=a(t),o+""}}}Go((function(t){const e=t.length-1;return function(n){let o=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),r=t[o],i=t[o+1],s=o>0?t[o-1]:2*r-i,a=o<e-1?t[o+2]:2*i-r;return Yo((n-o/e)*e,s,r,i,a)}})),Go((function(t){const e=t.length;return function(n){let o=Math.floor(((n%=1)<0?++n:n)*e),r=t[(o+e-1)%e],i=t[o%e],s=t[(o+1)%e],a=t[(o+2)%e];return Yo((n-o/e)*e,r,i,s,a)}}));function Ko(t,e){let n,o=e?e.length:0,r=t?Math.min(o,t.length):0,i=new Array(r),s=new Array(o);for(n=0;n<r;++n)i[n]=ir(t[n],e[n]);for(;n<o;++n)s[n]=e[n];return function(t){for(n=0;n<r;++n)s[n]=i[n](t);return s}}function Jo(t,e){const n=new Date;return t=+t,e=+e,function(o){return n.setTime(t*(1-o)+e*o),n}}function Qo(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function tr(t,e){let n,o={},r={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?o[n]=ir(t[n],e[n]):r[n]=e[n];return function(t){for(n in o)r[n]=o[n](t);return r}}const er=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,nr=new RegExp(er.source,"g");function or(t,e){let n,o,r,i=er.lastIndex=nr.lastIndex=0,s=-1,a=[],l=[];for(t+="",e+="";(n=er.exec(t))&&(o=nr.exec(e));)(r=o.index)>i&&(r=e.slice(i,r),a[s]?a[s]+=r:a[++s]=r),(n=n[0])===(o=o[0])?a[s]?a[s]+=o:a[++s]=o:(a[++s]=null,l.push({i:s,x:Qo(n,o)})),i=nr.lastIndex;return i<e.length&&(r=e.slice(i),a[s]?a[s]+=r:a[++s]=r),a.length<2?l[0]?function(t){return function(e){return t(e)+""}}(l[0].x):function(t){return function(){return t}}(e):(e=l.length,function(t){for(var n,o=0;o<e;++o)a[(n=l[o]).i]=n.x(t);return a.join("")})}function rr(t,e){e||(e=[]);let n,o=t?Math.min(e.length,t.length):0,r=e.slice();return function(i){for(n=0;n<o;++n)r[n]=t[n]*(1-i)+e[n]*i;return r}}function ir(t,e){let n,o=typeof e;return null==e||"boolean"===o?Uo(e):("number"===o?Qo:"string"===o?(n=No(e))?(e=n,qo):or:e instanceof No?qo:e instanceof Date?Jo:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}(e)?rr:Array.isArray(e)?Ko:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?tr:Qo)(t,e)}function sr(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}const ar=t=>void 0===t,lr=Array.from,cr=Math.min,hr=Math.max;let ur=[0,1];const dr=t=>+t,pr=t=>t,fr=(t,e)=>(e-=t=+t)?n=>(n-t)/e:(t=>()=>t)(isNaN(e)?NaN:.5),gr=(t,e)=>{const[n,o]=t>e?[e,t]:[t,e];return t=>hr(n,cr(o,t))};function mr(t,e,n){let[o,r]=t,[i,s]=e;return r<o?(o=fr(r,o),i=n(s,i)):(o=fr(o,r),i=n(i,s)),t=>i(o(t))}function yr(t,e,n){let o=cr(t.length,e.length)-1,r=new Array(o),i=new Array(o),s=-1;for(t[o]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<o;)r[s]=fr(t[s],t[s+1]),i[s]=n(e[s],e[s+1]);return function(e){let n=On(t,e,1,o)-1;return i[n](r[n](e))}}const xr=(t,e)=>e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown());function vr(){return function(){let t,e,n,o,r,i,s=ur,a=ur,l=ir,c=pr;function h(){let t=cr(s.length,a.length);return c!==pr&&(c=gr(s[0],s[t-1])),o=t>2?yr:mr,r=i=null,u}function u(e){return null==e||isNaN(e=+e)?n:(r||(r=o(s.map(t),a,l)))(t(c(e)))}return u.invert=n=>c(e((i||(i=o(a,s.map(t),Qo)))(n))),u.domain=t=>ar(t)?s.slice():(s=lr(t,dr),h()),u.range=t=>ar(t)?a.slice():(a=lr(t),h()),u.rangeRound=t=>(a=lr(t),l=sr,h()),u.clamp=t=>ar(t)?c!==pr:(c=!!t||pr,h()),u.interpolate=t=>ar(t)?l:(l=t,h()),u.unknown=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],u):n},function(n,o){return t=n,e=o,h()}}()(pr,pr)}function wr(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const[o,r]=e;switch(e.length){case 0:break;case 1:this.range(o);break;default:this.range(r).domain(o)}return this}function br(t,e){let n,o;return(n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0?null:(o=t.slice(0,n),[o.length>1?o[0]+o.slice(2):o,+t.slice(n+1)])}function kr(t){return(t=br(Math.abs(t)))?t[1]:NaN}const Sr=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Cr(t){let e;if(!(e=Sr.exec(t)))throw new Error("invalid format: "+t);return new Dr({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function Dr(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}let Ar;function Mr(t,e){let n=br(t,e);if(!n)return t+"";let o=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+o:o.length>r+1?o.slice(0,r+1)+"."+o.slice(r+1):o+new Array(r-o.length+2).join("0")}Cr.prototype=Dr.prototype,Dr.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const Tr={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Mr(100*t,e),r:Mr,s:function(t,e){let n=br(t,e);if(!n)return t+"";let o=n[0],r=n[1],i=r-(Ar=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,s=o.length;return i===s?o:i>s?o+new Array(i-s+1).join("0"):i>0?o.slice(0,i)+"."+o.slice(i):"0."+new Array(1-i).join("0")+br(t,Math.max(0,e+i-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function _r(t){return t}const Pr=Array.prototype.map,Nr=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function jr(t){let e=void 0===t.grouping||void 0===t.thousands?_r:(c=Pr.call(t.grouping,Number),h=t.thousands+"",function(t,e){let n=t.length,o=[],r=0,i=c[0],s=0;for(;n>0&&i>0&&(s+i+1>e&&(i=Math.max(1,e-s)),o.push(t.substring(n-=i,n+i)),!((s+=i+1)>e));)i=c[r=(r+1)%c.length];return o.reverse().join(h)}),n=void 0===t.currency?"":t.currency[0]+"",o=void 0===t.currency?"":t.currency[1]+"",r=void 0===t.decimal?".":t.decimal+"",i=void 0===t.numerals?_r:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(Pr.call(t.numerals,String)),s=void 0===t.percent?"%":t.percent+"",a=void 0===t.minus?"−":t.minus+"",l=void 0===t.nan?"NaN":t.nan+"";var c,h;function u(t){let c=(t=Cr(t)).fill,h=t.align,u=t.sign,d=t.symbol,p=t.zero,f=t.width,g=t.comma,m=t.precision,y=t.trim,x=t.type;"n"===x?(g=!0,x="g"):Tr[x]||(void 0===m&&(m=12),y=!0,x="g"),(p||"0"===c&&"="===h)&&(p=!0,c="0",h="=");let v="$"===d?n:"#"===d&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",w="$"===d?o:/[%p]/.test(x)?s:"",b=Tr[x],k=/[defgprs%]/.test(x);function S(t){let n,o,s,d=v,S=w;if("c"===x)S=b(t)+S,t="";else{let e=(t=+t)<0||1/t<0;if(t=isNaN(t)?l:b(Math.abs(t),m),y&&(t=function(t){let e,n=t.length,o=1,r=-1;t:for(;o<n;++o)switch(t[o]){case".":r=e=o;break;case"0":0===r&&(r=o),e=o;break;default:if(!+t[o])break t;r>0&&(r=0)}return r>0?t.slice(0,r)+t.slice(e+1):t}(t)),e&&0==+t&&"+"!==u&&(e=!1),d=(e?"("===u?u:a:"-"===u||"("===u?"":u)+d,S=("s"===x?Nr[8+Ar/3]:"")+S+(e&&"("===u?")":""),k)for(n=-1,o=t.length;++n<o;)if(s=t.charCodeAt(n),48>s||s>57){S=(46===s?r+t.slice(n+1):t.slice(n))+S,t=t.slice(0,n);break}}g&&!p&&(t=e(t,1/0));let C=d.length+t.length+S.length,D=C<f?new Array(f-C+1).join(c):"";switch(g&&p&&(t=e(D+t,D.length?f-S.length:1/0),D=""),h){case"<":t=d+t+S+D;break;case"=":t=d+D+t+S;break;case"^":t=D.slice(0,C=D.length>>1)+d+t+S+D.slice(C);break;default:t=D+d+t+S}return i(t)}return m=void 0===m?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),S.toString=function(){return t+""},S}return{format:u,formatPrefix:function(t,e){let n=u(((t=Cr(t)).type="f",t)),o=3*Math.max(-8,Math.min(8,Math.floor(kr(e)/3))),r=Math.pow(10,-o),i=Nr[8+o/3];return function(t){return n(r*t)+i}}}}let $r,Er,Fr;$r=jr({thousands:",",grouping:[3],currency:["$",""]}),Er=$r.format,Fr=$r.formatPrefix;const Ir=Math.max,Lr=Math.min,Or=Math.abs,Rr=Math.floor,zr=t=>Ir(0,-kr(Or(t))),Wr=(t,e)=>Ir(0,3*Ir(-8,Lr(8,Rr(kr(e)/3)))-kr(Or(t))),Xr=(t,e)=>(t=Or(t),e=Or(e)-t,Ir(0,kr(e)-kr(t))+1);const Hr=Math.floor,Yr=Math.ceil;function Ur(t){let e=t.domain;return t.ticks=t=>{let n=e();return function(t,e,n){if(!((n=+n)>0))return[];if((t=+t)==(e=+e))return[t];const o=e<t,[r,i,s]=o?Vn(e,t,n):Vn(t,e,n);if(!(i>=r))return[];const a=i-r+1,l=new Array(a);let c=0;if(o)if(s<0)for(;c<a;++c)l[c]=(i-c)/-s;else for(;c<a;++c)l[c]=(i-c)*s;else if(s<0)for(;c<a;++c)l[c]=(r+c)/-s;else for(;c<a;++c)l[c]=(r+c)*s;return l}(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=(t,n)=>{let o=e();return function(t,e,n,o){let r,i=Gn(t,e,n);switch((o=Cr(null==o?",f":o)).type){case"s":{const n=Math.max(Math.abs(t),Math.abs(e));return null!=o.precision||isNaN(r=Wr(i,n))||(o.precision=r),Fr(o,n)}case"":case"e":case"g":case"p":case"r":null!=o.precision||isNaN(r=Xr(i,Math.max(Math.abs(t),Math.abs(e))))||(o.precision=r-("e"===o.type));break;case"f":case"%":null!=o.precision||isNaN(r=zr(i))||(o.precision=r-2*("%"===o.type))}return Er(o)}(o[0],o[o.length-1],null==t?10:t,n)},t.nice=n=>{null==n&&(n=10);let o,r,i=e(),s=0,a=i.length-1,l=i[s],c=i[a],h=10;for(c<l&&(r=l,l=c,c=r,r=s,s=a,a=r);h-- >0;){if(r=qn(l,c,n),r===o)return i[s]=l,i[a]=c,e(i);if(r>0)l=Hr(l/r)*r,c=Yr(c/r)*r;else{if(!(r<0))break;l=Yr(l*r)/r,c=Hr(c*r)/r}o=r}return t},t}function Br(t){return null!==t&&"object"==typeof t?t.valueOf():t}function Zr(t,e){let{_intern:n,_key:o}=t;const r=o(e);return n.has(r)?n.get(r):e}class Vr extends Map{constructor(t,e){if(void 0===e&&(e=Br),super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const[e,n]of t)this.set(e,n)}get(t){return super.get(Zr(this,t))}has(t){return super.has(Zr(this,t))}set(t,e){return super.set(function(t,e){let{_intern:n,_key:o}=t;const r=o(e);return n.has(r)?n.get(r):(n.set(r,e),e)}(this,t),e)}delete(t){return super.delete(function(t,e){let{_intern:n,_key:o}=t;const r=o(e);return n.has(r)&&(e=n.get(r),n.delete(r)),e}(this,t))}}const qr=Array.from,Gr=Symbol("implicit");const Kr=new Date,Jr=new Date,Qr=Math.floor,ti=(t,e,n,o)=>{const r=e=>(t(e=void 0===e?new Date:new Date(+e)),e);return r.floor=e=>(t(e=new Date(+e)),e),r.ceil=n=>(t(n=new Date(n-1)),e(n,1),t(n),n),r.round=t=>{const e=r(t),n=r.ceil(t);return t-e<n-t?e:n},r.offset=(t,n)=>(e(t=new Date(+t),null==n?1:Qr(n)),t),r.range=(n,o,i)=>{const s=[];if(n=r.ceil(n),i=null==i?1:Qr(i),!(n<o&&i>0))return s;let a;do{s.push(a=new Date(+n)),e(n,i),t(n)}while(a<n&&n<o);return s},r.filter=n=>ti((e=>{if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),((t,o)=>{if(t>=t)if(o<0)for(;++o<=0;)for(;e(t,-1),!n(t););else for(;--o>=0;)for(;e(t,1),!n(t););})),n&&(r.count=(e,o)=>(Kr.setTime(+e),Jr.setTime(+o),t(Kr),t(Jr),Qr(n(Kr,Jr))),r.every=t=>(t=Qr(t),isFinite(t)&&t>0?t>1?r.filter(o?e=>o(e)%t==0:e=>r.count(0,e)%t==0):r:null)),r},ei=1e3,ni=6e4,oi=36e5,ri=864e5,ii=6048e5,si=2592e6,ai=31536e6,li=ti((t=>{t.setTime(t-t.getMilliseconds())}),((t,e)=>{t.setTime(+t+e*ei)}),((t,e)=>(e-t)/ei),(t=>t.getUTCSeconds())),ci=ti((t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*ei)}),((t,e)=>{t.setTime(+t+e*ni)}),((t,e)=>(e-t)/ni),(t=>t.getMinutes())),hi=ti((t=>{t.setUTCSeconds(0,0)}),((t,e)=>{t.setTime(+t+e*ni)}),((t,e)=>(e-t)/ni),(t=>t.getUTCMinutes())),ui=ti((t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*ei-t.getMinutes()*ni)}),((t,e)=>{t.setTime(+t+e*oi)}),((t,e)=>(e-t)/oi),(t=>t.getHours())),di=ti((t=>{t.setUTCMinutes(0,0,0)}),((t,e)=>{t.setTime(+t+e*oi)}),((t,e)=>(e-t)/oi),(t=>t.getUTCHours())),pi=ti((t=>t.setHours(0,0,0,0)),((t,e)=>t.setDate(t.getDate()+e)),((t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*ni)/ri),(t=>t.getDate()-1)),fi=ti((t=>{t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCDate(t.getUTCDate()+e)}),((t,e)=>(e-t)/ri),(t=>t.getUTCDate()-1)),gi=t=>ti((e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),((t,e)=>{t.setDate(t.getDate()+7*e)}),((t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*ni)/ii)),mi=gi(0),yi=gi(1),xi=gi(4),vi=(t=>ti((e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCDate(t.getUTCDate()+7*e)}),((t,e)=>(e-t)/ii)))(0),wi=ti((t=>{t.setDate(1),t.setHours(0,0,0,0)}),((t,e)=>{t.setMonth(t.getMonth()+e)}),((t,e)=>e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())),(t=>t.getMonth())),bi=ti((t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)}),((t,e)=>e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())),(t=>t.getUTCMonth())),ki=Math.floor,Si=ti((t=>{t.setMonth(0,1),t.setHours(0,0,0,0)}),((t,e)=>{t.setFullYear(t.getFullYear()+e)}),((t,e)=>e.getFullYear()-t.getFullYear()),(t=>t.getFullYear()));Si.every=t=>isFinite(t=ki(t))&&t>0?ti((e=>{e.setFullYear(ki(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),((e,n)=>{e.setFullYear(e.getFullYear()+n*t)})):null;const Ci=ti((t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)}),((t,e)=>e.getUTCFullYear()-t.getUTCFullYear()),(t=>t.getUTCFullYear()));Ci.every=t=>isFinite(t=ki(t))&&t>0?ti((e=>{e.setUTCFullYear(ki(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),((e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null;const Di=Math.floor,Ai=ti((()=>{}),((t,e)=>{t.setTime(+t+e)}),((t,e)=>e-t));Ai.every=t=>(t=Di(t),isFinite(t)&&t>0?t>1?ti((e=>{e.setTime(Di(e/t)*t)}),((e,n)=>{e.setTime(+e+n*t)}),((e,n)=>(n-e)/t)):Ai:null);const Mi=Math.abs,Ti=Math.max,[_i,Pi]=((t,e,n,o,r,i)=>{const s=[[li,1,ei],[li,5,5e3],[li,15,15e3],[li,30,3e4],[i,1,ni],[i,5,3e5],[i,15,9e5],[i,30,18e5],[r,1,oi],[r,3,108e5],[r,6,216e5],[r,12,432e5],[o,1,ri],[o,2,1728e5],[n,1,ii],[e,1,si],[e,3,7776e6],[t,1,ai]],a=(e,n,o)=>{const r=Mi(n-e)/o,i=Ln((t=>{let[,,e]=t;return e})).right(s,r);if(i===s.length)return t.every(Gn(e/ai,n/ai,o));if(0===i)return Ai.every(Ti(Gn(e,n,o),1));const[a,l]=s[r/s[i-1][2]<s[i][2]/r?i-1:i];return a.every(l)};return[(t,e,n)=>{const o=e<t;o&&([t,e]=[e,t]);const r=n&&"function"==typeof n.range?n:a(t,e,n),i=r?r.range(t,+e+1):[];return o?i.reverse():i},a]})(Si,wi,mi,pi,ui,ci),Ni=Math.floor,ji={"-":"",_:" ",0:"0"},$i=(t,e,n)=>{const o=t<0?"-":"",r=(o?-t:t)+"",i=r.length;return o+(i<n?new Array(n-i+1).join(e)+r:r)},Ei=(t,e)=>$i(t.getDate(),e,2),Fi=(t,e)=>$i(t.getHours(),e,2),Ii=(t,e)=>$i(t.getHours()%12||12,e,2),Li=(t,e)=>$i(1+pi.count(Si(t),t),e,3),Oi=(t,e)=>$i(t.getMilliseconds(),e,3),Ri=(t,e)=>Oi(t,e)+"000",zi=(t,e)=>$i(t.getMonth()+1,e,2),Wi=(t,e)=>$i(t.getMinutes(),e,2),Xi=(t,e)=>$i(t.getSeconds(),e,2),Hi=t=>{const e=t.getDay();return 0===e?7:e},Yi=(t,e)=>$i(mi.count(Si(t)-1,t),e,2),Ui=t=>{const e=t.getDay();return e>=4||0===e?xi(t):xi.ceil(t)},Bi=(t,e)=>(t=Ui(t),$i(xi.count(Si(t),t)+(4===Si(t).getDay()),e,2)),Zi=t=>t.getDay(),Vi=(t,e)=>$i(yi.count(Si(t)-1,t),e,2),qi=(t,e)=>$i(t.getFullYear()%100,e,2),Gi=(t,e)=>(t=Ui(t),$i(t.getFullYear()%100,e,2)),Ki=(t,e)=>$i(t.getFullYear()%1e4,e,4),Ji=(t,e)=>{let n=t.getDay();return t=n>=4||0===n?xi(t):xi.ceil(t),$i(t.getFullYear()%1e4,e,4)},Qi=t=>{let e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+$i(e/60|0,"0",2)+$i(e%60,"0",2)},ts=()=>"%",es=t=>+t,ns=t=>Ni(+t/1e3);let os=function(t){const e=t.dateTime,n=t.date,o=t.time,r=t.periods,i=t.days,s=t.shortDays,a=t.months,l=t.shortMonths,c={a:t=>s[t.getDay()],A:t=>i[t.getDay()],b:t=>l[t.getMonth()],B:t=>a[t.getMonth()],c:null,d:Ei,e:Ei,f:Ri,g:Gi,G:Ji,H:Fi,I:Ii,j:Li,L:Oi,m:zi,M:Wi,p:t=>r[+(t.getHours()>=12)],q:t=>1+~~(t.getMonth()/3),Q:es,s:ns,S:Xi,u:Hi,U:Yi,V:Bi,w:Zi,W:Vi,x:null,X:null,y:qi,Y:Ki,Z:Qi,"%":ts},h=(t,e)=>n=>{let o,r,i,s=[],a=-1,l=0,c=t.length;for(n instanceof Date||(n=new Date(+n));++a<c;)37===t.charCodeAt(a)&&(s.push(t.slice(l,a)),null!=(r=ji[o=t.charAt(++a)])?o=t.charAt(++a):r="e"===o?" ":"0",(i=e[o])&&(o=i(n,r)),s.push(o),l=a+1);return s.push(t.slice(l,a)),s.join("")};return c.x=h(n,c),c.X=h(o,c),c.c=h(e,c),{format:t=>{const e=h(t+="",c);return e.toString=()=>t,e}}}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}).format;const rs=Array.from,is=t=>new Date(t),ss=t=>t instanceof Date?+t:+new Date(+t);function as(t,e,n,o,r,i,s,a,l,c){let h=vr(),u=h.invert,d=h.domain;const p=c(".%L"),f=c(":%S"),g=c("%I:%M"),m=c("%I %p"),y=c("%a %d"),x=c("%b %d"),v=c("%B"),w=c("%Y"),b=t=>(l(t)<t?p:a(t)<t?f:s(t)<t?g:i(t)<t?m:o(t)<t?r(t)<t?y:x:n(t)<t?v:w)(t);return h.invert=t=>new Date(u(t)),h.domain=function(){return arguments.length?d(rs(arguments.length<=0?void 0:arguments[0],ss)):d().map(is)},h.ticks=e=>{let n=d();return t(n[0],n[n.length-1],null==e?10:e)},h.tickFormat=(t,e)=>null==e?b:c(e),h.nice=t=>{let n=d();return t&&"function"==typeof t.range||(t=e(n[0],n[n.length-1],null==t?10:t)),t?d(function(t,e){let n,o=0,r=(t=t.slice()).length-1,i=t[o],s=t[r];return s<i&&(n=o,o=r,r=n,n=i,i=s,s=n),t[o]=e.floor(i),t[r]=e.ceil(s),t}(n,t)):h},h.copy=()=>xr(h,as(t,e,n,o,r,i,s,a,l,c)),h}const ls=(t,e,n)=>{const o=e[n];if("function"!=typeof o)throw new Error(`Attempt to rebind ${n} which isn't a function on the source object`);return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];const s=o.apply(e,r);return s===e?t:s}},cs=function(t,e){for(var n=arguments.length,o=new Array(n>2?n-2:0),r=2;r<n;r++)o[r-2]=arguments[r];for(const n of o)t[n]=ls(t,e,n);return t};function hs(){let t=Kn,e=!0,n=()=>{};function o(o){return Jn().combine(((t,o)=>{const r=e&&void 0===o?t:n(t,o);return void 0===r?t:r}))(o,t(o))}return o.algorithm=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],o):t},o.merge=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],o):n},o.skipUndefined=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],o):e},o}const us=t=>`translate(${t[0]}, ${t[1]})`,ds=function t(){let e=new Vr,n=[],o=[],r=Gr;function i(t){let i=e.get(t);if(ar(i)){if(r!==Gr)return r;e.set(t,i=n.push(t)-1)}return o[i%o.length]}i.domain=function(t){if(ar(t))return n.slice();n=[],e=new Vr;for(const o of t)e.has(o)||e.set(o,n.push(o)-1);return i},i.range=t=>ar(t)?o.slice():(o=qr(t),i),i.unknown=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],i):r},i.copy=()=>t(n,o).unknown(r);for(var s=arguments.length,a=new Array(s),l=0;l<s;l++)a[l]=arguments[l];return wr.apply(i,a),i}(["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"]);const ps=(t,e)=>{const n=t.replace("#","");if(t.indexOf("#")>-1&&(3===n.length||6===n.length)){const t=3===n.length?1:2;return`rgba(${parseInt(n.substring(0,1*t),16)}, ${parseInt(n.substring(1*t,2*t),16)}, ${parseInt(n.substring(2*t,3*t),16)}, ${e})`}return t},fs=(t,e)=>{if(e&&t){let n;for(let o=t.length-1;o>=0;o--)if(n=t[o],null!=e(n))return n;return}const n=t?t.length:0;return n?t[n-1]:void 0},gs=(t,e)=>{if(!e||!t)return t?t[0]:void 0;{let n;for(let o=0;o<t.length;o++)if(n=t[o],null!=e(n))return n}},ms=gs,ys=(t,e)=>{const{widthRatio:n}=t,{xScale:o}=e,[r,i]=o.range(),s=Math.abs(i-r);let a;if(null!=o.invert){const[t,e]=o.domain();a=s/Math.abs(t-e)}else a=s/o.domain().length;return a*n},xs=(t,e,n)=>{let o=0,r=t.length-1;for(;r-o>1;){const i=Math.round((o+r)/2);n(t[i])<=e?o=i:r=i}const i=n(t[o]),s=n(t[r]);return i?.valueOf()===e?.valueOf()&&(r=o),s?.valueOf()===e?.valueOf()&&(o=r),i<e&&s<e&&(o=r),i>e&&s>e&&(r=o),{left:o,right:r}},vs=(t,e)=>{if(t===e)return!0;if(!(t instanceof Object&&e instanceof Object))return!1;const n=Object.keys(t),o=n.length;for(let t=0;t<o;t++)if(!(n[t]in e))return!1;for(let r=0;r<o;r++)if(t[n[r]]!==e[n[r]])return!1;return o===Object.keys(e).length};const ws=Array.isArray,bs=Object.keys,ks=Math.round,Ss=(Math.abs,t=>(t>0)-(t<0)),Cs=t=>t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView),Ds="mouseenter.interaction",As="mouseleave.interaction",Ms="mousemove.pan",Ts="mouseup.pan",_s="touchmove.pan",Ps="touchend.pan touchcancel.pan",Ns="wheel",js=t=>({pageX:t.pageX,pageY:t.pageY,clientX:t.clientX,clientY:t.clientY}),$s=(t,e,n)=>[ks(t.clientX-e.left-n.clientLeft),ks(t.clientY-e.top-n.clientTop)],Es=(t,e)=>{const n=e.currentTarget,o=n.getBoundingClientRect();return $s(t,o,n)},Fs=(t,e)=>{const n=t.currentTarget,o=e??n.getBoundingClientRect();return $s(t,o,n)},Is=(t,e)=>{t.forEach((t=>{t.setTransform(1,0,0,1,0,0),t.clearRect(-1,-1,t.canvas.width+2,t.canvas.height+2),t.scale(e,e)}))},Ls=t=>`chart_${t}`,Os=(t,e)=>(t||[]).find((t=>{let{id:n}=t;return n===e})),Rs=()=>{},zs={amIOnTop:()=>!1,chartConfigs:[],chartId:0,displayXAccessor:()=>0,fullData:[],getMutableState:()=>({}),height:0,margin:{},plotData:[],setCursorClass:Rs,subscribe:Rs,unsubscribe:Rs,width:0,xAccessor:()=>0,xScale:Rs},Ws=(0,r.createContext)({...zs,chartConfig:{},chartId:0}),Xs=(0,r.memo)((t=>{let{id:e=0,onContextMenu:n,onDoubleClick:o,children:i}=t;const s=(0,r.useContext)(Ml),{subscribe:a,unsubscribe:l,chartConfigs:c}=s,h=(0,r.useCallback)(((t,r,i,s)=>{switch(t){case"contextmenu":{if(void 0===n)return;const{currentCharts:t}=r;t.indexOf(e)>-1&&n(s,r);break}case"dblclick":{if(void 0===o)return;const{currentCharts:t}=r;t.indexOf(e)>-1&&o(s,r);break}default:return}}),[n,o,e]),u=Os(c,e),d=(0,r.useMemo)((()=>({...s,chartId:e,chartConfig:u})),[s,e,u]),p=us(u.origin);return(0,r.useEffect)((()=>(a(Ls(e),{listener:h}),()=>{l(Ls(e))})),[]),(0,D.jsx)(Ws.Provider,{value:d,children:(0,D.jsx)("g",{transform:p,children:i})})})),Hs={id:0,flipYScale:!1,origin:[0,0],padding:0,yPan:!0,yPanEnabled:!1,yScale:function t(){let e=vr();e.copy=()=>xr(e,t());for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return wr.apply(e,o),Ur(e)}()},Ys=Array.isArray,Us=Math.abs,Bs=t=>e=>{const n=t(e);return(t=>t&&"object"==typeof t&&!ws(t))(n)?function(t,e){void 0===t&&(t={}),void 0===e&&(e=t=>t);const n=bs(t),o=new Array(n.length);return n.forEach(((n,r)=>{o[r]=e(t[n],n,t)})),o}(n):n},Zs=t=>"number"==typeof t,Vs=t=>{if(Ys(t)&&2===t.length){const[e,n]=t;return Zs(e)&&Zs(n)}return!1},qs=function(t,e,n){return void 0===n&&(n=[]),r.Children.map(e,(e=>{if(null!=e&&(void 0!==(o=e.props)&&void 0!==o.id)){const o={...Hs,...e.props},{id:r,origin:i,padding:s,yExtents:a,yScale:l=Hs.yScale,flipYScale:c,yExtentsCalculator:h}=o,u=l.copy(),{width:d,height:p,availableHeight:f}=((t,e)=>{let{width:n,height:o}=t;return{availableHeight:o,width:n,height:e.height||o}})(t,o),{yPan:g}=o,m=a?(Ys(a)?a:[a]).map(eo):void 0,y=n.find((t=>t.id===r));let{yPanEnabled:x}=o;if(Vs(a))if(y&&y.yPan&&y.yPanEnabled&&g&&x&&vs(y.originalYExtentsProp,a))u.domain(y.yScale.domain());else{const[t,e]=a;u.domain([t,e])}else y&&y.yPanEnabled&&(Vs(y.originalYExtentsProp)||(u.domain(y.yScale.domain()),x=!0));return{id:r,origin:eo(i)(d,f),padding:s,originalYExtentsProp:a,yExtents:m,yExtentsCalculator:h,flipYScale:c,yScale:u,yPan:g,yPanEnabled:x,width:d,height:p}}var o})).filter((t=>void 0!==t))},Gs=(t,e)=>t.filter((t=>{const n=t.origin[1],o=n+t.height;return e[1]>n&&e[1]<o})).map((t=>t.id)),Ks=(t,e,n)=>{const o=(t=>t.reduce(((t,e)=>(Ys(e[0])?e.forEach((e=>{t.push(...e)})):t.push(...e),t)),[]))(t.map((t=>n.map(Bs(t)))));return e.invert?Mn(o):[...new Set(o).values()]},Js=(t,e,n,o,r)=>{let{plotData:i,xAccessor:s,displayXAccessor:a,fullData:l}=e;const c=t.map((t=>{let{yExtentsCalculator:e,yExtents:r,yScale:c}=t;const h=e?e({plotData:i,xDomain:n,xAccessor:s,displayXAccessor:a,fullData:l}):Ks(r,c,i),u=void 0!==o?c.range().map((t=>t-o)).map(c.invert):c.domain();return{realYDomain:h,yDomainDY:u,prevYDomain:c.domain()}})),h=Jn().combine(((t,e)=>{let{realYDomain:n,yDomainDY:o,prevYDomain:i}=e;const{id:s,padding:a,height:l,yScale:c,yPan:h,flipYScale:u,yPanEnabled:d=!1}=t,p=void 0===r||r.indexOf(s)>-1,f=h&&d?p?o:i:n,g=((t,e,n,o)=>{if(t.rangeRoundPoints||null==t.invert){if(isNaN(n))throw new Error("padding has to be a number for ordinal scale");t.rangeRoundPoints&&t.rangeRoundPoints(o?[0,e]:[e,0],n),t.rangeRound&&t.range(o?[0,e]:[e,0]).padding(n)}else{const{top:r,bottom:i}=isNaN(n)?n:{top:n,bottom:n};t.range(o?[r,e-i]:[e-i,r])}return t})(c.copy().domain(f),l,a,u);return{...t,yScale:g,realYDomain:n}}));return h(t,c)},Qs=(t,e,n,o)=>{let r;if(t.invert){r=((t,e,n)=>{const{left:o,right:r}=xs(t,e,n);if(o===r)return t[o];const i=n(t[o]),s=n(t[r]);return Math.abs(i.valueOf()-e.valueOf())<Math.abs(s.valueOf()-e.valueOf())?t[o]:t[r]})(o,t.invert(n[0]),e)}else{const e=t.range().map(((t,e)=>({x:Us(t-n[0]),idx:e}))).reduce(((t,e)=>t.x<e.x?t:e));r=void 0!==e?o[e.idx]:o[0]}return r},ta=t=>{let{xScale:e,xAccessor:n,mouseXY:o,plotData:r}=t;return n(Qs(e,n,o,r))};function ea(t){let e;for(;e=t.sourceEvent;)t=e;return t}function na(t,e){if(t=ea(t),void 0===e&&(e=t.currentTarget),e){const n=e.ownerSVGElement||e;if(n.createSVGPoint){let o=n.createSVGPoint();return o.x=t.clientX,o.y=t.clientY,o=o.matrixTransform(e.getScreenCTM().inverse()),[o.x,o.y]}if(e.getBoundingClientRect){const t=e.getBoundingClientRect();return[event.clientX-t.left-e.clientLeft,event.clientY-t.top-e.clientTop]}}return[event.pageX,event.pageY]}const oa=Array.from;function ra(t,e){return t.target&&(t=ea(t),void 0===e&&(e=t.currentTarget),t=t.touches||[t]),oa(t,(t=>na(t,e)))}const ia=t=>function(e){t.call(this,e,this.__data__)},sa=t=>function(){let e=this.__on;if(!e)return;let n,o=0,r=-1,i=e.length;for(;o<i;++o)n=e[o],t.type&&n.type!==t.type||n.name!==t.name?e[++r]=n:this.removeEventListener(n.type,n.listener,n.options);++r?e.length=r:delete this.__on},aa=(t,e,n)=>function(){let o,r,i=this.__on,s=ia(e),a=0;if(i)for(r=i.length;a<r;++a)if((o=i[a]).type===t.type&&o.name===t.name)return this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=s,o.options=n),void(o.value=e);this.addEventListener(t.type,s,n),o={type:t.type,name:t.name,value:e,listener:s,options:n},i?i.push(o):this.__on=[o]};let la=[null];function ca(t,e){this._groups=t,this._parents=e}function ha(){return new ca([[document.documentElement]],la)}ca.prototype=ha.prototype={constructor:ca,each:function(t){let e,n,o,r,i=this._groups,s=0,a=i.length;for(;s<a;++s)for(e=i[s],n=0,o=e.length;n<o;++n)(r=e[n])&&t.call(r,r.__data__,n,e);return this},on:function(){let t,e,n,o,r,i=(t=>t.trim().split(/^|\s+/).map((t=>{let e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}})))((arguments.length<=0?void 0:arguments[0])+""),s=arguments.length<=1?void 0:arguments[1],a=arguments.length<=2?void 0:arguments[2],l=i.length,c=0;if(!(arguments.length<2)){for(n=s?aa:sa,t=0;t<l;++t)this.each(n(i[t],s,a));return this}if(n=this.node().__on,n)for(o=n.length;c<o;++c)for(t=0,r=n[c];t<l;++t)if((e=i[t]).type===r.type&&e.name===r.name)return r.value}};function ua(t){return"string"==typeof t?new ca([[document.querySelector(t)]],[document.documentElement]):new ca([[t]],la)}const da="zhn-charts",pa="tooltip",fa=`${da}-${pa}`,ga=`${da}-${pa}-label`,ma=`${da}-${pa}-hover`,ya=`${da}-bb-${pa}`,xa=`${da}-ma-${pa}`,va=`${da}-ohlc-${pa}`,wa="cursor",ba=`${da}-grabbing-${wa}`,ka=`${da}-crosshair-${wa}`,Sa=`${da}-default-${wa}`,Ca=`${da}-move-${wa}`,Da=`${da}-pointer-${wa}`,Aa=`${da}-ns-resize-${wa}`,Ma=`${da}-ew-resize-${wa}`,Ta="interaction",_a=`${da}-avoid-${Ta}`,Pa=`${da}-enable-${Ta}`,Na="axis",ja=`${da}-x-${Na}`,$a=`${da}-y-${Na}`,Ea=`${da}-${Na}-domain`,Fa="series",Ia=`${da}-bb-${Fa}`,La=`${da}-bb-${Fa}-area`,Oa=`${da}-rsi-${Fa}`,Ra="candlestick",za=`${da}-${Ra}`,Wa=`${da}-${Ra}-wick`,Xa=`${da}-${Ra}-candle`,Ha=`${da}-up`,Ya=`${da}-down`,Ua=`${da}-crosshair`,Ba=`${da}-cross_hair`,Za=`${da}-text-background`,Va="line",qa=`${da}-${Va}`,Ga=`${da}-${Va}-stroke`,Ka=`${da}-bar`,Ja="-apple-system, system-ui, Roboto, 'Helvetica Neue', Ubuntu, sans-serif",Qa=function(t,e,n){void 0===n&&(n=null),t.panInProgress||t.dragInProgress||ua(Cs(e.current)).on(Ms,n)};class tl extends r.Component{static defaultProps={mouseMove:!1,zoom:!1,pan:!1,panSpeedMultiplier:1,focus:!1,disableInteraction:!1};clicked;dx=0;dy=0;dragHappened;focus;lastNewPos;mouseInside=!1;mouseInteraction=!0;panEndTimeout;panHappened;ref=(0,r.createRef)();constructor(t){super(t),this.focus=t.focus,this.state={panInProgress:!1}}componentDidMount(){const{disableInteraction:t}=this.props,{current:e}=this.ref;null!==e&&(t||ua(e).on(Ds,this.handleEnter).on(As,this.handleLeave).on(Ns,this.handleWheel,{passive:!1}))}componentDidUpdate(){this.componentDidMount()}componentWillUnmount(){const{disableInteraction:t}=this.props,{current:e}=this.ref;null!==e&&(t||(ua(e).on(Ds,null).on(As,null).on(Ns,null,{passive:!1}),ua(Cs(e)).on(Ms,null)))}handleEnter=t=>{const{onMouseEnter:e}=this.props;void 0!==e&&(this.mouseInside=!0,Qa(this.state,this.ref,this.handleMouseMove),e(t))};handleLeave=t=>{const{onMouseLeave:e}=this.props;void 0!==e&&(this.mouseInside=!1,Qa(this.state,this.ref),e(t))};handleWheel=t=>{const{pan:e,onPan:n,zoom:o,onZoom:r}=this.props;if(!e&&!o)return;const{panInProgress:i}=this.state,s=Math.abs(t.deltaY)>Math.abs(t.deltaX)&&Math.abs(t.deltaY)>0,a=Fs(t);if(t.preventDefault(),o&&this.focus&&s&&!i){const e=t.deltaY>0?1:-1;void 0!==r&&r(e,a,t)}else if(this.focus){if(this.shouldPan()&&void 0!==this.state.panStart){const{panStartXScale:e,chartsToPan:o}=this.state.panStart;this.lastNewPos=a,this.panHappened=!0,void 0===this.dx&&(this.dx=0),void 0===this.dy&&(this.dy=0),this.dx-=t.deltaX,this.dy+=t.deltaY;const r={dx:this.dx,dy:this.dy};void 0!==n&&n(a,e,r,o,t)}else{const{xScale:t,chartConfig:e}=this.props,n=Gs(e,a);this.dx=0,this.dy=0,this.setState({panInProgress:!0,panStart:{panStartXScale:t,panOrigin:a,chartsToPan:n}})}this.queuePanEnd(t)}};queuePanEnd(t){void 0!==this.panEndTimeout&&window.clearTimeout(this.panEndTimeout),this.panEndTimeout=window.setTimeout((()=>{this.handlePanEnd(t)}),100)}handleMouseMove=t=>{const{onMouseMove:e,mouseMove:n}=this.props;if(void 0!==e&&this.mouseInteraction&&n&&!this.state.panInProgress){e(na(t,this.ref.current),"mouse",t)}};handleClick=t=>{const e=Fs(t),{onClick:n,onDoubleClick:o}=this.props;this.panHappened||this.dragHappened||(this.clicked&&void 0!==o?(o(e,t),this.clicked=!1):void 0!==n&&(n(e,t),this.clicked=!0,setTimeout((()=>{this.clicked&&(this.clicked=!1)}),400)))};handleRightClick=t=>{t.stopPropagation(),t.preventDefault();const{onContextMenu:e,onPanEnd:n}=this.props,o=Fs(t,this.ref.current.getBoundingClientRect());if(void 0!==this.state.panStart){const{panStartXScale:e,panOrigin:[r,i],chartsToPan:s}=this.state.panStart;this.panHappened&&void 0!==n&&n(o,e,{dx:r,dy:i},s,t);ua(Cs(this.ref.current)).on(Ms,null).on(Ts,null),this.setState({panInProgress:!1,panStart:void 0})}void 0!==e&&e(o,t)};handleDrag=t=>{const{onDrag:e}=this.props;if(void 0===e)return;this.dragHappened=!0;const{dragStartPosition:n}=this.state;if(void 0===n)return;e({startPos:n,mouseXY:na(t,this.ref.current)},t)};cancelDrag(){ua(Cs(this.ref.current)).on(Ms,this.mouseInside?this.handleMouseMove:null).on(Ts,null),this.mouseInteraction=!0,this.setState({dragInProgress:!1})}handleDragEnd=t=>{const e=na(t,this.ref.current);if(ua(Cs(this.ref.current)).on(Ms,this.mouseInside?this.handleMouseMove:null).on(Ts,null),this.dragHappened){const{onDragComplete:n}=this.props;void 0!==n&&n({mouseXY:e},t)}this.mouseInteraction=!0,this.setState({dragInProgress:!1})};canPan=()=>{const{getAllPanConditions:t}=this.props,{pan:e}=this.props,{panEnabled:n,draggable:o}=t().reduce(((t,e)=>({draggable:t.draggable||e.draggable,panEnabled:t.panEnabled&&e.panEnabled})),{draggable:!1,panEnabled:e});return{panEnabled:n,somethingSelected:o}};handleMouseDown=t=>{if(0!==t.button)return;const{xScale:e,chartConfig:n,onMouseDown:o}=this.props;if(this.panHappened=!1,this.dragHappened=!1,this.focus=!0,!this.state.panInProgress&&this.mouseInteraction){const r=Fs(t),i=Gs(n,r),{panEnabled:s,somethingSelected:a}=this.canPan(),l=s&&!a;if(l)this.setState({panInProgress:l,panStart:{panStartXScale:e,panOrigin:r,chartsToPan:i}}),ua(Cs(this.ref.current)).on(Ms,this.handlePan).on(Ts,this.handlePanEnd);else if(a){this.setState({panInProgress:!1,dragInProgress:!0,panStart:void 0,dragStartPosition:r});const{onDragStart:e}=this.props;void 0!==e&&e({startPos:r},t),ua(Cs(this.ref.current)).on(Ms,this.handleDrag).on(Ts,this.handleDragEnd)}void 0!==o&&o(r,i,t)}t.preventDefault()};shouldPan=()=>{const{pan:t,onPan:e}=this.props;return t&&e&&void 0!==this.state.panStart};handlePan=t=>{if(this.shouldPan()&&void 0!==this.state.panStart){this.panHappened=!0;const{panStartXScale:e,panOrigin:n,chartsToPan:o}=this.state.panStart;let r,i,s;this.mouseInteraction?(s=na(t,this.ref.current),this.lastNewPos=s,r=s[0]-n[0],i=s[1]-n[1]):(s=ra(t,this.ref.current)[0],this.lastNewPos=s,r=n[0]-s[0],i=n[1]-s[1]),this.dx=r,this.dy=i;const{onPan:a}=this.props;void 0!==a&&a(s,e,{dx:r,dy:i},o,t)}};handlePanEnd=t=>{const{pan:e,onPanEnd:n}=this.props;if(void 0!==this.state.panStart){const{panStartXScale:o,chartsToPan:r}=this.state.panStart;if(ua(Cs(this.ref.current)).on(Ms,this.mouseInside?this.handleMouseMove:null).on(Ts,null).on(_s,null).on(Ps,null),this.panHappened&&e&&n){const{dx:e=0,dy:i=0}=this;delete this.dx,delete this.dy,void 0!==this.lastNewPos&&n(this.lastNewPos,o,{dx:e,dy:i},r,t)}this.setState({panInProgress:!1,panStart:void 0})}};handleTouchMove=t=>{const{onMouseMove:e}=this.props;if(void 0===e)return;const n=js(t.touches[0]);e(Es(n,t),"touch",t)};handleTouchStart=t=>{this.mouseInteraction=!1;const{pan:e,chartConfig:n,onMouseMove:o,xScale:r,onPanEnd:i}=this.props;if(1===t.touches.length){this.panHappened=!1;const i=Es(js(t.touches[0]),t);if(void 0!==o&&o(i,"touch",t),e){const t=Gs(n,i);this.setState({panInProgress:!0,panStart:{panStartXScale:r,panOrigin:i,chartsToPan:t}}),ua(Cs(this.ref.current)).on(_s,this.handlePan,!1).on(Ps,this.handlePanEnd,!1)}}else if(2===t.touches.length){const{panInProgress:n,panStart:o}=this.state;if(n&&e&&i&&void 0!==o){const{panStartXScale:n,panOrigin:[s,a],chartsToPan:l}=o;ua(Cs(this.ref.current)).on(Ms,this.mouseInside?this.handleMouseMove:null).on(Ts,null).on(_s,this.handlePinchZoom,!1).on(Ps,this.handlePinchZoomEnd,!1);const c=Es(js(t.touches[0]),t),h=Es(js(t.touches[1]),t);this.panHappened&&e&&i&&void 0!==this.lastNewPos&&i(this.lastNewPos,n,{dx:s,dy:a},l,t),this.setState({panInProgress:!1,pinchZoomStart:{xScale:r,touch1Pos:c,touch2Pos:h,range:r.range(),chartsToPan:l}})}}};handlePinchZoom=t=>{const{pinchZoomStart:e}=this.state;if(void 0===e)return;const{xScale:n,zoom:o,onPinchZoom:r}=this.props;if(!o||void 0===r)return;const[i,s]=ra(this.ref.current),{chartsToPan:a,...l}=e;r(l,{touch1Pos:i,touch2Pos:s,xScale:n},t)};handlePinchZoomEnd=t=>{ua(Cs(this.ref.current)).on(_s,null).on(Ps,null);const{pinchZoomStart:e}=this.state;if(void 0===e)return;const{chartsToPan:n,...o}=e,{zoom:r,onPinchZoomEnd:i}=this.props;r&&i&&i(o,t),this.setState({pinchZoomStart:void 0})};setCursorClass=t=>{t!==this.state.cursorOverrideClass&&this.setState({cursorOverrideClass:t})};render(){const{height:t,width:e,disableInteraction:n,useCrossHairStyleCursor:o}=this.props,{cursorOverrideClass:r,panInProgress:i}=this.state,s=n?void 0:void 0!==r?r:o?i?ba:ka:void 0,a=n||{onMouseDown:this.handleMouseDown,onClick:this.handleClick,onContextMenu:this.handleRightClick,onTouchStart:this.handleTouchStart,onTouchMove:this.handleTouchMove};return(0,D.jsx)("rect",{ref:this.ref,className:s,width:e,height:t,style:{opacity:0},...a})}}const el=t=>i(t)?.getContext("2d")??void 0,nl=(0,r.memo)((0,r.forwardRef)(((t,e)=>{let{style:n,width:o,height:i,ratio:s}=t;const a=(0,r.useRef)(),l=(0,r.useRef)(),c=(0,r.useRef)();(0,r.useImperativeHandle)(e,(()=>({getCanvasContexts:()=>({bg:el(a),axes:el(l),mouseCoord:el(c)})})));const h=o*s,u=i*s,d={position:"absolute",width:o,height:i};return(0,D.jsxs)("div",{style:{...n,position:"absolute"},children:[(0,D.jsx)("canvas",{ref:a,width:h,height:u,style:d}),(0,D.jsx)("canvas",{ref:l,width:h,height:u,style:d}),(0,D.jsx)("canvas",{ref:c,width:h,height:u,style:d})]})}))),ol="chart-area-clip",rl=t=>{let{configs:e}=t;return e.map(((t,e)=>(0,D.jsx)("clipPath",{id:`${ol}-${t.id}`,children:(0,D.jsx)("rect",{x:"0",y:"0",width:t.width,height:t.height})},e)))},il=t=>{let{dimensions:e,chartConfig:n}=t;return(0,D.jsxs)("defs",{children:[(0,D.jsx)("clipPath",{id:ol,children:(0,D.jsx)("rect",{x:"0",y:"0",width:e.width,height:e.height})}),(0,D.jsx)(rl,{configs:n})]})},sl=Math.floor,al=Math.max,ll=Math.ceil,cl=(t,e,n,o)=>{const{lastItem:r,lastItemX:i}=t,s=e(r),[a,l]=n.range();return(l-a)/(i.valueOf()-a)*(s.valueOf()-o.valueOf())+o.valueOf()},hl=(t,e,n,o)=>{const r=ul(t,o),i=dl(t,n);return e>=r&&e<i},ul=(t,e)=>al(1,ll(t*e)),dl=(t,e)=>sl(t*e),pl=(t,e)=>sl(.97*dl(t,e)),fl=(t,e,n,o)=>t.slice(xs(t,e,o).left,xs(t,n,o).right+1);function gl(t){let{xScale:e,useWholeData:n,clamp:o,pointsPerPxThreshold:r,minPointsPerPxThreshold:i,flipXScale:s}=t;return((t,e,n,o,r)=>({filterData:function(i,s,a,l,c){let{currentPlotData:h,currentDomain:u,fallbackStart:d,fallbackEnd:p,ignoreThresholds:f=!1}=void 0===c?{}:c;if(t)return{plotData:i,domain:s};let g=gs(s),m=fs(s),y=s,x=fl(i,g,m,a);1===x.length&&void 0!==d&&(g=d,m=cl(p,a,l,g),y=[g,m],x=fl(i,g,m,a)),"function"==typeof e?y=e(y,[a(gs(i)),a(fs(i))]):("left"!==e&&"both"!==e&&!0!==e||(y=[Tn([g,a(gs(i))]),y[1]]),"right"!==e&&"both"!==e&&!0!==e||(y=[y[0],_n([m,a(fs(i))])])),y!==s&&(x=fl(i,y[0],y[1],a));const v=y,w=l.copy().domain(v);let b,k,S=sl(w(a(fs(x)))-w(a(gs(x))));r&&S<0&&(S*=-1);const C=fs(w.range())-gs(w.range());if(f&&x.length>1||hl(S,x.length,n,o))b=x,k=v;else if(C>dl(S,n)&&null!=p){b=x;const t=cl(p,a,l,gs(v));k=[gs(v),t]}else b=h??x.slice(x.length-pl(S,n)),k=u??[a(gs(b)),a(fs(b))];return{plotData:b,domain:k}}}))(n||null==e.invert,o,r,i,s)}const ml=["seriesName"],yl=()=>{const t=`\n\t.${ba} {\n\t\tpointer-events: all;\n\t\tcursor: -moz-grabbing;\n\t\tcursor: -webkit-grabbing;\n\t\tcursor: grabbing;\n\t}\n\t.${ka} {\n\t\tpointer-events: all;\n\t\tcursor: arrow;\n\t}\n\t.${ma} {\n\t\tpointer-events: all;\n\t\tcursor: pointer;\n\t}\n\t.${_a} {\n\t\tpointer-events: none;\n\t}\n\t.${Pa} {\n\t\tpointer-events: all;\n\t}\n\t.${fa} {\n\t\tpointer-events: all;\n\t\tcursor: pointer;\n\t}\n\t.${Sa} {\n\t\tcursor: default;\n\t}\n\t.${Ca} {\n\t\tcursor: move;\n\t}\n\t.${Da} {\n\t\tcursor: pointer;\n\t}\n\t.${Aa} {\n\t\tcursor: ns-resize;\n\t}\n\t.${Ma} {\n\t\tcursor: ew-resize;\n\t}`;return(0,D.jsx)("style",{type:"text/css",children:t})},xl=t=>{let{margin:{top:e,bottom:n,left:o,right:r},height:i,width:s}=t;return{height:i-e-n,width:s-o-r}},vl=t=>{const{data:e,plotFull:n,xScale:o,clamp:r,pointsPerPxThreshold:i,flipXScale:s,xAccessor:a,displayXAccessor:l,minPointsPerPxThreshold:c}=t,h=void 0!==n?n:a===Kn,{filterData:u}=gl({xScale:o,useWholeData:h,clamp:r,pointsPerPxThreshold:i,minPointsPerPxThreshold:c,flipXScale:s});return{xAccessor:a,displayXAccessor:l??a,xScale:o.copy(),fullData:e,filterData:u}},wl=function(t,e,n,o){if(void 0===o&&(o=1),t.rangeRoundPoints){if(isNaN(n))throw new Error("padding has to be a number for ordinal scale");t.rangeRoundPoints([0,e.width],n)}else if(t.padding){if(isNaN(n))throw new Error("padding has to be a number for ordinal scale");t.range([0,e.width]),t.padding(n/2)}else{const{left:r,right:i}=isNaN(n)?n:{left:n,right:n};o>0?t.range([r,e.width-i]):t.range([e.width-i,r])}return t},bl=t=>t?-1:1,kl=t=>{const e=(t=>{const{xAccessor:e,xExtents:n,data:o,padding:r,flipXScale:i}=t,s=bl(i),a=xl(t),l="function"==typeof n?n(o):Mn(n.map((t=>eo(t))).map((t=>t(o,e)))),{xAccessor:c,displayXAccessor:h,xScale:u,fullData:d,filterData:p}=vl(t),f=wl(u,a,r,s),{plotData:g,domain:m}=p(d,l,e,f);return{plotData:g,xScale:f.domain(m),xAccessor:c,displayXAccessor:h,fullData:d,filterData:p}})(t),{xAccessor:n,displayXAccessor:o,fullData:r,plotData:i,xScale:s}=e,{postCalculator:a,children:l}=t,c=void 0!==a?a(i):i,h=xl(t),u=Js(qs(h,l),{plotData:c,xAccessor:n,displayXAccessor:o,fullData:r},s.domain());return{...e,xScale:s,plotData:c,chartConfigs:u}},Sl=t=>{let{touch1Pos:e,touch2Pos:n}=t;return{topLeft:[Math.min(e[0],n[0]),Math.min(e[1],n[1])],bottomRight:[Math.max(e[0],n[0]),Math.max(e[1],n[1])]}},Cl=(t,e,n)=>!isNaN(t(e(gs(n))))&&null!=t.invert,Dl=(t,e,n,o,r)=>{const i=gs(t),s=gs(e.domain()),a=n(i),l=fs(t),c=fs(e.domain()),h=n(l);s<a&&void 0!==r&&r(s,a),h<c&&void 0!==o&&o(h,c)},Al=()=>{},Ml=(0,r.createContext)(zs),Tl=(t,e,n)=>t.map((t=>t.id===e?{...t,yScale:t.yScale.copy().domain(n),yPanEnabled:!0}:t));class _l extends r.Component{static defaultProps={clamp:!1,className:da,defaultFocus:!0,disablePan:!1,disableInteraction:!1,disableZoom:!1,flipXScale:!1,maintainPointsPerPixelOnResize:!0,margin:{top:0,right:40,bottom:40,left:0},minPointsPerPxThreshold:.01,mouseMoveEvent:!0,postCalculator:Kn,padding:0,pointsPerPxThreshold:2,useCrossHairStyleCursor:!0,xAccessor:Kn,xExtents:[_n,Tn],zIndex:1,zoomAnchor:ta,zoomMultiplier:1.1,onZoom:Al};canvasContainerRef=(0,r.createRef)();eventCaptureRef=(0,r.createRef)();finalPinch;lastSubscriptionId=0;mutableState={};panInProgress=!1;prevMouseXY;_isDidUpdateRedraw=!1;_asyncRedrawId;subscriptions=[];waitingForPinchZoomAnimationFrame;waitingForPanAnimationFrame;waitingForMouseMoveAnimationFrame;hackyWayToStopPanBeyondBounds__plotData;hackyWayToStopPanBeyondBounds__domain;constructor(t){super(t),this.state=kl(t)}getMutableState=()=>this.mutableState;getCanvasContexts=()=>this.canvasContainerRef.current?.getCanvasContexts();generateSubscriptionId=()=>(this.lastSubscriptionId++,this.lastSubscriptionId);clearBothCanvas(){const{axes:t,mouseCoord:e}=this.getCanvasContexts()||{};t&&e&&Is([t,e],this.props.ratio)}clearMouseCanvas(){const{mouseCoord:t}=this.getCanvasContexts()||{};t&&Is([t],this.props.ratio)}clearThreeCanvas(){const{axes:t,mouseCoord:e,bg:n}=this.getCanvasContexts()||{};t&&e&&n&&Is([t,e,n],this.props.ratio)}subscribe=(t,e)=>{const{getPanConditions:n=eo({draggable:!1,panEnabled:!0})}=e;this.subscriptions=this.subscriptions.concat({id:t,...e,getPanConditions:n})};unsubscribe=t=>{this.subscriptions=this.subscriptions.filter((e=>e.id!==t))};getAllPanConditions=()=>this.subscriptions.map((t=>t.getPanConditions()));setCursorClass=t=>{this.eventCaptureRef.current?.setCursorClass(t)};amIOnTop=t=>{const e=this.subscriptions.filter((t=>t.getPanConditions().draggable));return e.length>0&&fs(e).id===t};handleContextMenu=(t,e)=>{const{xAccessor:n,chartConfigs:o,plotData:r,xScale:i}=this.state,s=Gs(o,t),a=Qs(i,n,t,r);this.triggerEvent("contextmenu",{mouseXY:t,currentItem:a,currentCharts:s},e)};calculateStateForDomain=t=>{const{fullData:e,xAccessor:n,displayXAccessor:o,xScale:r,chartConfigs:i,plotData:s,filterData:a}=this.state,{postCalculator:l}=this.props,{plotData:c,domain:h}=a(e,t,n,r,{currentPlotData:s,currentDomain:r.domain()}),u=l(c),d=r.copy().domain(h),p=Js(i,{plotData:u,xAccessor:n,displayXAccessor:o,fullData:e},d.domain());return{xScale:d,plotData:u,chartConfigs:p}};pinchZoomHelper=(t,e)=>{const{xScale:n}=t,{fullData:o,xScale:r,chartConfigs:i,plotData:s,xAccessor:a,displayXAccessor:l,filterData:c}=this.state,{postCalculator:h}=this.props,u=((t,e,n)=>{const{topLeft:o,bottomRight:r}=Sl(t),{topLeft:i,bottomRight:s}=Sl(e),a=n.range()[1],l=Math.round(-(r[0]*i[0]-o[0]*s[0])/(o[0]-r[0])),c=Math.round(a+((a-r[0])*(a-i[0])-(a-o[0])*(a-s[0]))/(a-o[0]-(a-r[0])));return[Math.round(-l*o[0]/(-l+i[0])),Math.round(a-(c-a)*(a-o[0])/(c+(a-i[0])))].map(n.invert)})(t,e,n),{plotData:d,domain:p}=c(o,u,a,n,{currentPlotData:s,currentDomain:r.domain()}),f=h(d),g=r.copy().domain(p),m=e.touch1Pos;return{chartConfigs:Js(i,{plotData:f,xAccessor:a,displayXAccessor:l,fullData:o},g.domain()),xScale:g,plotData:f,mouseXY:m,currentItem:Qs(g,a,m,f)}};cancelDrag(){this.eventCaptureRef.current?.cancelDrag(),this.triggerEvent("dragcancel")}handlePinchZoom=(t,e,n)=>{if(!this.waitingForPinchZoomAnimationFrame){this.waitingForPinchZoomAnimationFrame=!0;const o=this.pinchZoomHelper(t,e);this.triggerEvent("pinchzoom",o,n),this.finalPinch=e,requestAnimationFrame((()=>{this.clearBothCanvas(),this.draw({trigger:"pinchzoom"}),this.waitingForPinchZoomAnimationFrame=!1}))}};handlePinchZoomEnd=(t,e)=>{const{fullData:n,xAccessor:o=_l.defaultProps.xAccessor}=this.state;if(this.finalPinch){const r=this.pinchZoomHelper(t,this.finalPinch),{xScale:i}=r,{onLoadAfter:s,onLoadBefore:a}=this.props;this.triggerEvent("pinchzoom",r,e),this.finalPinch=void 0,this.clearThreeCanvas(),this.setState(r,(()=>Dl(n,i,o,s,a)))}};_zoomXImpl=(t,e,n,o,r)=>{this.triggerEvent("zoom",{xScale:n,plotData:t,chartConfigs:e,...o,show:!0},r);const{fullData:i,xAccessor:s}=this.state,{onZoom:a,onLoadAfter:l,onLoadBefore:c}=this.props;a((t||[]).length),this._isDidUpdateRedraw=!0,this.setState({xScale:n,plotData:t,chartConfigs:e},(()=>Dl(i,n,s,l,c)))};handleZoom=(t,e,n)=>{if(this.panInProgress)return;const{xAccessor:o,xScale:r,plotData:i}=this.state,{zoomMultiplier:s,zoomAnchor:a}=this.props,l=a({xScale:r,xAccessor:o,mouseXY:e,plotData:i}),c=((t,e)=>t>0?1*e:1/e)(t,s),h=((t,e,n)=>{const o=t(e);return t.range().map((t=>o+(t-o)*n)).map((e=>t.invert(e)))})(r,l,c),{xScale:u,plotData:d,chartConfigs:p}=this.calculateStateForDomain(h);this.mutableState={mouseXY:e,currentItem:Qs(u,o,e,d),currentCharts:Gs(p,e)},this._zoomXImpl(d,p,u,this.mutableState,n)};xAxisZoom=t=>{const{xScale:e,plotData:n,chartConfigs:o}=this.calculateStateForDomain(t);this._zoomXImpl(n,o,e)};yAxisZoom=(t,e)=>{this._isDidUpdateRedraw=!0,this.setState({chartConfigs:Tl(this.state.chartConfigs,t,e)})};triggerEvent(t,e,n){this.subscriptions.forEach((o=>{const r={...this.state,subscriptions:this.subscriptions};o.listener(t,e,r,n)}))}draw=t=>{this.subscriptions.forEach((e=>{e.draw&&e.draw(t)}))};redraw=()=>{this.clearThreeCanvas(),this.draw({force:!0})};panHelper=(t,e,n,o)=>{let{dx:r,dy:i}=n;const{fullData:s,xAccessor:a,displayXAccessor:l,chartConfigs:c,filterData:h}=this.state,{postCalculator:u}=this.props,d=e.range().map((t=>t-r)).map((t=>e.invert(t))),{plotData:p,domain:f}=h(s,d,a,e,{currentPlotData:this.hackyWayToStopPanBeyondBounds__plotData,currentDomain:this.hackyWayToStopPanBeyondBounds__domain,ignoreThresholds:!0}),g=e.copy().domain(f),m=u(p),y=Qs(g,a,t,m),x=Js(c,{plotData:m,xAccessor:a,displayXAccessor:l,fullData:s},g.domain(),i,o);return{xScale:g,plotData:m,chartConfigs:x,mouseXY:t,currentCharts:Gs(x,t),currentItem:y}};handlePan=(t,e,n,o,r)=>{if(!this.waitingForPanAnimationFrame){this.waitingForPanAnimationFrame=!0,this.hackyWayToStopPanBeyondBounds__plotData=this.hackyWayToStopPanBeyondBounds__plotData??this.state.plotData,this.hackyWayToStopPanBeyondBounds__domain=this.hackyWayToStopPanBeyondBounds__domain??this.state.xScale.domain();const i=this.panHelper(t,e,n,o);this.hackyWayToStopPanBeyondBounds__plotData=i.plotData,this.hackyWayToStopPanBeyondBounds__domain=i.xScale.domain(),this.panInProgress=!0,this.triggerEvent("pan",i,r),this.mutableState={mouseXY:i.mouseXY,currentItem:i.currentItem,currentCharts:i.currentCharts},requestAnimationFrame((()=>{this.waitingForPanAnimationFrame=!1,this.clearBothCanvas(),this.draw({trigger:"pan"})}))}};handlePanEnd=(t,e,n,o,r)=>{const i=this.panHelper(t,e,n,o),{xScale:s,plotData:a,chartConfigs:l}=i;this.hackyWayToStopPanBeyondBounds__plotData=null,this.hackyWayToStopPanBeyondBounds__domain=null,this.panInProgress=!1,this.triggerEvent("panend",i,r),requestAnimationFrame((()=>{const{fullData:t,xAccessor:e}=this.state,{onLoadAfter:n,onLoadBefore:o}=this.props;this._isDidUpdateRedraw=!0,this.setState({xScale:s,plotData:a,chartConfigs:l},(()=>Dl(t,s,e,n,o)))}))};handleMouseDown=(t,e,n)=>{this.triggerEvent("mousedown",this.mutableState,n)};handleMouseEnter=t=>{this.triggerEvent("mouseenter",{show:!0},t)};handleMouseMove=(t,e,n)=>{if(!this.waitingForMouseMoveAnimationFrame){this.waitingForMouseMoveAnimationFrame=!0;const{chartConfigs:e,plotData:o,xScale:r,xAccessor:i}=this.state,s=Gs(e,t),a=Qs(r,i,t,o);this.triggerEvent("mousemove",{show:!0,mouseXY:t,prevMouseXY:this.prevMouseXY,currentItem:a,currentCharts:s},n),this.prevMouseXY=t,this.mutableState={mouseXY:t,currentItem:a,currentCharts:s},requestAnimationFrame((()=>{this.clearMouseCanvas(),this.draw({trigger:"mousemove"}),this.waitingForMouseMoveAnimationFrame=!1}))}};handleMouseLeave=t=>{this.triggerEvent("mouseleave",{show:!1},t),this.clearMouseCanvas(),this.draw({trigger:"mouseleave"})};handleDragStart=(t,e)=>{let{startPos:n}=t;this.triggerEvent("dragstart",{startPos:n},e)};handleDrag=(t,e)=>{let{startPos:n,mouseXY:o}=t;const{chartConfigs:r,plotData:i,xScale:s,xAccessor:a}=this.state,l=Gs(r,o),c=Qs(s,a,o,i);this.triggerEvent("drag",{startPos:n,mouseXY:o,currentItem:c,currentCharts:l},e),this.mutableState={mouseXY:o,currentItem:c,currentCharts:l},requestAnimationFrame((()=>{this.clearMouseCanvas(),this.draw({trigger:"drag"})}))};handleDragEnd=(t,e)=>{let{mouseXY:n}=t;this.triggerEvent("dragend",{mouseXY:n},e),requestAnimationFrame((()=>{this.clearMouseCanvas(),this.draw({trigger:"dragend"})}))};handleClick=(t,e)=>{this.triggerEvent("click",this.mutableState,e),requestAnimationFrame((()=>{this.clearMouseCanvas(),this.draw({trigger:"click"})}))};handleDoubleClick=(t,e)=>{this.triggerEvent("dblclick",{},e)};getContextValues(){const{margin:t,ratio:e}=this.props,{fullData:n,plotData:o,chartConfigs:r,xScale:i,xAccessor:s,displayXAccessor:a}=this.state,{width:l,height:c}=xl(this.props);return{chartId:-1,margin:t,ratio:e,plotData:o,chartConfigs:r,xScale:i,xAccessor:s,displayXAccessor:a,width:l,height:c,fullData:n||[],xAxisZoom:this.xAxisZoom,yAxisZoom:this.yAxisZoom,getCanvasContexts:this.getCanvasContexts,redraw:this.redraw,subscribe:this.subscribe,unsubscribe:this.unsubscribe,generateSubscriptionId:this.generateSubscriptionId,getMutableState:this.getMutableState,amIOnTop:this.amIOnTop,setCursorClass:this.setCursorClass}}static getDerivedStateFromProps(t,e){const{recentProps:n={},chartConfigs:o,plotData:r,xAccessor:i,xScale:s}=e,a=((t,e)=>!ml.every((n=>vs(t[n],e[n]))))(n,t);let l;if(Cl(s,i,r)&&!a&&vs(n.xExtents,t.xExtents)){const[n,r]=s.domain(),i=fs(e.fullData),a=vl(t),{xAccessor:c}=a,h=c(i);l=((t,e,n,o,r)=>{const{fullData:i,xScale:s,xAccessor:a,displayXAccessor:l,filterData:c}=t,h=fs(i),u=a(h),[d,p]=e.domain(),{postCalculator:f,children:g,padding:m,flipXScale:y,maintainPointsPerPixelOnResize:x}=n,v=bl(y),w=xl(n),b=wl(s,w,m,v);let k;if(!o||p>=u){const[t,n]=e.range(),[o,r]=b.range(),s=(r-o)/(n-t)*(p.valueOf()-d.valueOf()),l=c(i,[x?p.valueOf()-s:d,p],a,b,{fallbackStart:d,fallbackEnd:{lastItem:h,lastItemX:e(u)}});k=l.plotData,b.domain(l.domain)}else if(o&&p<u){const t=e(u)-e.range()[1],[n,o]=e.range().map((e=>e+t)).map((t=>e.invert(t))),r=c(i,[n,o],a,b);k=r.plotData,b.domain(r.domain)}const S=f(k),C=qs(w,g,r),D=Js(C,{plotData:S,xAccessor:a,displayXAccessor:l,fullData:i},b.domain());return{xScale:b,xAccessor:a,chartConfigs:D,plotData:S,fullData:i,filterData:c}})(a,s,t,h<=r&&h>=n,o)}else l=kl(t);return{...l,recentProps:t}}componentDidUpdate(t){this._isDidUpdateRedraw?(this._isDidUpdateRedraw=!1,this.redraw()):t===this.props||this.panInProgress||(clearTimeout(this._asyncRedrawId),this._asyncRedrawId=setTimeout((()=>{this.redraw()}),0)),t.data!==this.props.data&&this.triggerEvent("dataupdated",{chartConfigs:this.state.chartConfigs,xScale:this.state.xScale,plotData:this.state.plotData})}resetYDomain=t=>{const{chartConfigs:e}=this.state;let n=!1;const o=e.map((e=>null!=t&&e.id!==t||vs(e.yScale.domain(),e.realYDomain)?e:(n=!0,{...e,yScale:e.yScale.domain(e.realYDomain),yPanEnabled:!1})));n&&(this.clearThreeCanvas(),this.setState({chartConfigs:o}))};shouldComponentUpdate(){return!this.panInProgress}render(){const{disableInteraction:t,disablePan:e,disableZoom:n,useCrossHairStyleCursor:o,height:r,width:i,margin:s,className:a,zIndex:l,defaultFocus:c,ratio:h,mouseMoveEvent:u,onClick:d,onDoubleClick:p,children:f}=this.props,{plotData:g,xScale:m,xAccessor:y,chartConfigs:x}=this.state,v=xl(this.props),w=Cl(m,y,g),b=o&&w;return(0,D.jsx)(Ml.Provider,{value:this.getContextValues(),children:(0,D.jsxs)("div",{className:a,style:{position:"relative",width:i,height:r},onClick:d,onDoubleClick:p,children:[(0,D.jsx)(nl,{ref:this.canvasContainerRef,ratio:h,width:i,height:r,style:{height:r,zIndex:l,width:i}}),(0,D.jsxs)("svg",{className:a,width:i,height:r,style:{position:"absolute",zIndex:l+5},children:[yl(),(0,D.jsx)(il,{dimensions:v,chartConfig:x}),(0,D.jsxs)("g",{transform:`translate(${s.left+.5}, ${s.top+.5})`,children:[(0,D.jsx)(tl,{ref:this.eventCaptureRef,useCrossHairStyleCursor:b,mouseMove:u&&w,zoom:!n&&w,pan:!e&&w,width:v.width,height:v.height,chartConfig:x,xScale:m,xAccessor:y,focus:c,disableInteraction:t,getAllPanConditions:this.getAllPanConditions,onContextMenu:this.handleContextMenu,onClick:this.handleClick,onDoubleClick:this.handleDoubleClick,onMouseDown:this.handleMouseDown,onMouseMove:this.handleMouseMove,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onDragStart:this.handleDragStart,onDrag:this.handleDrag,onDragComplete:this.handleDragEnd,onZoom:this.handleZoom,onPinchZoom:this.handlePinchZoom,onPinchZoomEnd:this.handlePinchZoomEnd,onPan:this.handlePan,onPanEnd:this.handlePanEnd}),(0,D.jsx)("g",{className:_a,children:f})]})]})]})})}}const Pl=t=>{const e=(0,r.useRef)(null);return(0,r.useLayoutEffect)((()=>{e.current=t})),(0,r.useCallback)((function(){const t=e.current;return t?t(...arguments):void 0}),[])},Nl=Object.assign,jl={mouseleave:"mousemove",panend:"pan",pinchzoom:"pan",mousedown:"mousemove",click:"mousemove",contextmenu:"mousemove",dblclick:"mousemove",dragstart:"drag",dragend:"drag",dragcancel:"drag",zoom:"zoom"},$l=t=>t.mouseCoord,El=(t,e)=>e?{clipPath:`url(#chart-area-clip${void 0!==t?"-"+t:""})`}:void 0,Fl=(0,r.memo)((0,r.forwardRef)(((t,e)=>{const{isHover:n,clip:o=!0,edgeClip:i=!1,canvasToDraw:s=$l,canvasDraw:a,svgDraw:l,preCanvasDraw:c,postCanvasDraw:h,updateMoreProps:u,getMoreProps:d}=t,p=(0,r.useContext)(Ml),{chartId:f}=(0,r.useContext)(Ws),g=(0,r.useMemo)((()=>p.generateSubscriptionId?.()||0),[]),m=P(),{getCanvasContexts:y,subscribe:x,unsubscribe:v}=p,w=(0,r.useRef)({chartId:p.chartId,hovering:!1,currentCharts:[],chartConfigs:p.chartConfigs,fullData:p.fullData,plotData:p.plotData,xScale:p.xScale,xAccessor:p.xAccessor}),b=(0,r.useRef)(!1),k=(0,r.useRef)(!1),S=(0,r.useRef)(!1),C=(0,r.useCallback)(((t,e)=>{Nl(e,t||{}),u?.(t,e)}),[u]),A=(0,r.useCallback)((()=>{const{chartConfigs:t,xAccessor:e,displayXAccessor:n,width:o,height:r,fullData:i}=p,s=d?.(w.current);return{displayXAccessor:n,width:o,height:r,...w.current,fullData:i,chartConfigs:t,xAccessor:e,...s,chartConfig:Os(t,f)}}),[p,d,f]);(0,r.useImperativeHandle)(e,(()=>({getMoreProps:A})),[A]);const M=(0,r.useCallback)((t=>void 0!==n&&n(A(),t)),[n,A]),T=(0,r.useCallback)(((t,e)=>{c?.(t,e)}),[c]),_=(0,r.useCallback)(((t,e)=>{h?.(t,e)}),[h]),N=Pl(((e,n)=>{const o=jl[e]||e;if(t.drawOn.includes(o)&&(!t.shouldTypeProceed||t.shouldTypeProceed(e,w.current)))switch(e){case"zoom":case"mouseenter":break;case"mouseleave":w.current.hovering=!1,t.onUnHover&&t.onUnHover(n,A());break;case"contextmenu":t.onContextMenu&&t.onContextMenu(n,A()),w.current.hovering&&t.onContextMenuWhenHover&&t.onContextMenuWhenHover(n,A());break;case"mousedown":t.onMouseDown&&t.onMouseDown(n,A());break;case"click":{const{onClick:e,onClickOutside:o,onClickWhenHover:r}=t,i=A();i.hovering&&void 0!==r?r(n,i):void 0!==o&&o(n,i),void 0!==e&&e(n,i);break}case"mousemove":{const e=w.current.hovering;w.current.hovering=M(n);const{amIOnTop:o,setCursorClass:r}=p;w.current.hovering&&!t.selected&&o(g)&&void 0!==t.onHover?(r("react-financial-charts-pointer-cursor"),S.current=!0):w.current.hovering&&t.selected&&o(g)?(r(t.interactiveCursorClass),S.current=!0):e&&!w.current.hovering&&S.current&&(S.current=!1,r(null));const i=A();w.current.hovering&&!e&&t.onHover&&t.onHover(n,i),e&&!w.current.hovering&&t.onUnHover&&t.onUnHover(n,i),t.onMouseMove&&t.onMouseMove(n,i);break}case"dblclick":{const e=A();t.onDoubleClick&&t.onDoubleClick(n,e),w.current.hovering&&t.onDoubleClickWhenHover&&t.onDoubleClickWhenHover(n,e);break}case"pan":w.current.hovering=!1,t.onPan&&t.onPan(n,A());break;case"panend":t.onPanEnd&&t.onPanEnd(n,A());break;case"dragstart":if(F().draggable){const{amIOnTop:e}=p;e(g)&&(b.current=!0,void 0!==t.onDragStart&&t.onDragStart(n,A()))}break;case"drag":b.current&&t.onDrag&&t.onDrag(n,A());break;case"dragend":b.current&&t.onDragComplete&&t.onDragComplete(n,A()),b.current=!1;break;case"dragcancel":if(b.current||S.current){const{setCursorClass:t}=p;t(null)}break;default:return}})),j=Pl(((t,e,n,o)=>{e&&C(e,w.current),k.current=!0,N(t,o),k.current=!1})),$=(0,r.useCallback)((()=>{if(void 0===a||void 0===s)return;const t=A(),e=y?.();if(void 0===e)return;const n=s(e);void 0!==n&&(T(n,t),a(n,t),_(n,t))}),[s,a,y,T,_,A]),E=Pl((e=>{let{trigger:n,force:o=!1}=e;const r=jl[n]||n;(t.drawOn.indexOf(r)>-1||t.selected||o)&&(void 0===a?m():$())})),F=Pl((()=>({draggable:!!(w.current.hovering&&(t.selected||t.enableDragOnHover)),panEnabled:!t.disablePan})));return(0,r.useEffect)((()=>{const{setCursorClass:e}=p;t.selected&&w.current.hovering?(S.current=!0,e(t.interactiveCursorClass)):(S.current=!1,e(null))}),[t.selected]),(0,r.useEffect)((()=>{void 0===a||k.current||(C(void 0,w.current),$())})),(0,r.useEffect)((()=>(x(g,{chartId:f,clip:o,edgeClip:i,listener:j,draw:E,getPanConditions:F}),()=>{v(g),S.current&&p.setCursorClass(null)})),[f,g,i,o]),void 0!==a||void 0===l?null:(0,D.jsx)("g",{style:El(f,o),children:l(A())})}))),Il=Array.isArray,Ll=["drag","dragend"],Ol=(t,e,n,o,r)=>{t.beginPath(),t.rect(e,n,o,r),t.clip()},Rl=[],zl=t=>{let{refComp:e,drawOn:n=Rl,...o}=t;const i=(0,r.useContext)(Ws),{clip:s,edgeClip:a,disablePan:l}=o,{chartId:c,ratio:h,margin:{left:u,right:d,top:p}}=i,f=(0,r.useCallback)(((t,e)=>{const n=Os(e.chartConfigs,c);if(!n)return;t.save();const{width:o,height:r,origin:i}=n,l=.5*h,f=l+i[0]+u,g=l+i[1]+p;t.setTransform(1,0,0,1,0,0),t.scale(h,h),a&&Ol(t,-1,g-10,o+u+d+1,r+20),t.translate(f,g),s&&Ol(t,-1,-1,o+1,r+1)}),[u,d,p,h,s,a,c]),g=(0,r.useCallback)(((t,e)=>{t.restore()}),[]),m=(0,r.useCallback)(((t,e)=>{const{chartConfig:n}=t||e;if(n&&Il(n)&&(e.chartConfig=n.find((t=>t.id===c))),e.chartConfig){const{origin:[n,o]}=e.chartConfig,{mouseXY:r,startPos:i}=t;if(r){const[t,i]=r;e.mouseXY=[t-n,i-o]}if(i){const[t,r]=i;e.startPos=[t-n,r-o]}}}),[c]),y=(0,r.useCallback)(((t,e)=>{if(l&&("mousemove"===t||"click"===t))return!0;const{currentCharts:n}=e||{};return!n||-1!==Ll.indexOf(t)||n.indexOf(c)>-1}),[l,c]);return(0,D.jsx)(Fl,{...o,ref:e,drawOn:n,preCanvasDraw:f,postCanvasDraw:g,updateMoreProps:m,shouldTypeProceed:y})};class Wl extends r.Component{ref=(0,r.createRef)();clicked=!1;dragHappened=!1;state={startPosition:null};handleDragEnd=t=>{const e=i(this.ref);if(e){if(!this.dragHappened)if(this.clicked){const n=na(t,e),{onDoubleClick:o}=this.props;void 0!==o&&o(t,n)}else this.clicked=!0,setTimeout((()=>{this.clicked=!1}),300);ua(Cs(e)).on(Ms,null).on(Ts,null).on(_s,null).on(Ps,null),this.setState({startPosition:null})}};handleDrag=t=>{const e=i(this.ref);if(!e)return;this.dragHappened=!0;const{getMouseDelta:n,inverted:o}=this.props,{startPosition:r}=this.state;if(null!==r){const{startScale:i,startXY:s}=r,a=n(s,na(t,e)),l=Pn(i.range());if(void 0===l)return;const c=i.range().map((t=>o?t-Ss(t-l)*a:t+Ss(t-l)*a)),h=c.map(i.invert);if(Ss(fs(i.range())-ms(i.range()))===Ss(fs(c)-ms(c))){const{axisZoomCallback:t}=this.props;void 0!==t&&t(h)}}};handleDragStartTouch=t=>{const e=i(this.ref);if(!e)return;this.dragHappened=!1;const n=this.props.getScale();if(1===t.touches.length&&void 0!==n.invert){ua(Cs(e)).on(_s,this.handleDrag).on(Ps,this.handleDragEnd);const o=Es(js(t.touches[0]),t);this.setState({startPosition:{startScale:n,startXY:o}})}};handleDragStartMouse=t=>{t.preventDefault();const e=i(this.ref);if(!e)return;this.dragHappened=!1;const n=this.props.getScale();if(void 0!==n.invert){ua(Cs(e)).on(Ms,this.handleDrag,!1).on(Ts,this.handleDragEnd,!1);const o=Fs(t);this.setState({startPosition:{startXY:o,startScale:n}})}};handleRightClick=t=>{t.stopPropagation(),t.preventDefault();const e=i(this.ref),{onContextMenu:n}=this.props;if(!e||!n)return;const o=e.getBoundingClientRect(),r=Fs(t,o);ua(Cs(e)).on(Ms,null).on(Ts,null),this.setState({startPosition:null}),n(t,r)};render(){const{bg:t,className:e,zoomCursorClassName:n}=this.props,o=null===this.state.startPosition?Sa:n||"";return(0,D.jsx)("rect",{ref:this.ref,className:`${Pa} ${o} ${e}`,x:t.x,y:t.y,height:t.h,width:t.w,opacity:0,onContextMenu:this.handleRightClick,onMouseDown:this.handleDragStartMouse,onTouchStart:this.handleDragStartTouch})}}Wl.defaultProps={inverted:!0,className:""};const Xl=Wl,Hl=t=>t.axes,Yl=t=>t.mouseCoord;function Ul(t,e,n,o){if(isNaN(e)||isNaN(n))return t;var r,i,s,a,l,c,h,u,d,p=t._root,f={data:o},g=t._x0,m=t._y0,y=t._x1,x=t._y1;if(!p)return t._root=f,t;for(;p.length;)if((c=e>=(i=(g+y)/2))?g=i:y=i,(h=n>=(s=(m+x)/2))?m=s:x=s,r=p,!(p=p[u=h<<1|c]))return r[u]=f,t;if(a=+t._x.call(null,p.data),l=+t._y.call(null,p.data),e===a&&n===l)return f.next=p,r?r[u]=f:t._root=f,t;do{r=r?r[u]=new Array(4):t._root=new Array(4),(c=e>=(i=(g+y)/2))?g=i:y=i,(h=n>=(s=(m+x)/2))?m=s:x=s}while((u=h<<1|c)==(d=(l>=s)<<1|a>=i));return r[d]=p,r[u]=f,t}function Bl(t,e,n,o,r){this.node=t,this.x0=e,this.y0=n,this.x1=o,this.y1=r}function Zl(t){return t[0]}function Vl(t){return t[1]}function ql(t,e,n){var o=new Gl(null==e?Zl:e,null==n?Vl:n,NaN,NaN,NaN,NaN);return null==t?o:o.addAll(t)}function Gl(t,e,n,o,r,i){this._x=t,this._y=e,this._x0=n,this._y0=o,this._x1=r,this._y1=i,this._root=void 0}function Kl(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var Jl=ql.prototype=Gl.prototype;function Ql(t){return()=>t}Jl.copy=function(){var t,e,n=new Gl(this._x,this._y,this._x0,this._y0,this._x1,this._y1),o=this._root;if(!o)return n;if(!o.length)return n._root=Kl(o),n;for(t=[{source:o,target:n._root=new Array(4)}];o=t.pop();)for(var r=0;r<4;++r)(e=o.source[r])&&(e.length?t.push({source:e,target:o.target[r]=new Array(4)}):o.target[r]=Kl(e));return n},Jl.add=function(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return Ul(this.cover(e,n),e,n,t)},Jl.addAll=function(t){var e,n,o,r,i=t.length,s=new Array(i),a=new Array(i),l=1/0,c=1/0,h=-1/0,u=-1/0;for(n=0;n<i;++n)isNaN(o=+this._x.call(null,e=t[n]))||isNaN(r=+this._y.call(null,e))||(s[n]=o,a[n]=r,o<l&&(l=o),o>h&&(h=o),r<c&&(c=r),r>u&&(u=r));if(l>h||c>u)return this;for(this.cover(l,c).cover(h,u),n=0;n<i;++n)Ul(this,s[n],a[n],t[n]);return this},Jl.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,o=this._y0,r=this._x1,i=this._y1;if(isNaN(n))r=(n=Math.floor(t))+1,i=(o=Math.floor(e))+1;else{for(var s,a,l=r-n||1,c=this._root;n>t||t>=r||o>e||e>=i;)switch(a=(e<o)<<1|t<n,(s=new Array(4))[a]=c,c=s,l*=2,a){case 0:r=n+l,i=o+l;break;case 1:n=r-l,i=o+l;break;case 2:r=n+l,o=i-l;break;case 3:n=r-l,o=i-l}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=o,this._x1=r,this._y1=i,this},Jl.data=function(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t},Jl.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Jl.find=function(t,e,n){var o,r,i,s,a,l,c,h=this._x0,u=this._y0,d=this._x1,p=this._y1,f=[],g=this._root;for(g&&f.push(new Bl(g,h,u,d,p)),null==n?n=1/0:(h=t-n,u=e-n,d=t+n,p=e+n,n*=n);l=f.pop();)if(!(!(g=l.node)||(r=l.x0)>d||(i=l.y0)>p||(s=l.x1)<h||(a=l.y1)<u))if(g.length){var m=(r+s)/2,y=(i+a)/2;f.push(new Bl(g[3],m,y,s,a),new Bl(g[2],r,y,m,a),new Bl(g[1],m,i,s,y),new Bl(g[0],r,i,m,y)),(c=(e>=y)<<1|t>=m)&&(l=f[f.length-1],f[f.length-1]=f[f.length-1-c],f[f.length-1-c]=l)}else{var x=t-+this._x.call(null,g.data),v=e-+this._y.call(null,g.data),w=x*x+v*v;if(w<n){var b=Math.sqrt(n=w);h=t-b,u=e-b,d=t+b,p=e+b,o=g.data}}return o},Jl.remove=function(t){if(isNaN(i=+this._x.call(null,t))||isNaN(s=+this._y.call(null,t)))return this;var e,n,o,r,i,s,a,l,c,h,u,d,p=this._root,f=this._x0,g=this._y0,m=this._x1,y=this._y1;if(!p)return this;if(p.length)for(;;){if((c=i>=(a=(f+m)/2))?f=a:m=a,(h=s>=(l=(g+y)/2))?g=l:y=l,e=p,!(p=p[u=h<<1|c]))return this;if(!p.length)break;(e[u+1&3]||e[u+2&3]||e[u+3&3])&&(n=e,d=u)}for(;p.data!==t;)if(o=p,!(p=p.next))return this;return(r=p.next)&&delete p.next,o?(r?o.next=r:delete o.next,this):e?(r?e[u]=r:delete e[u],(p=e[0]||e[1]||e[2]||e[3])&&p===(e[3]||e[2]||e[1]||e[0])&&!p.length&&(n?n[d]=p:this._root=p),this):(this._root=r,this)},Jl.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},Jl.root=function(){return this._root},Jl.size=function(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t},Jl.visit=function(t){var e,n,o,r,i,s,a=[],l=this._root;for(l&&a.push(new Bl(l,this._x0,this._y0,this._x1,this._y1));e=a.pop();)if(!t(l=e.node,o=e.x0,r=e.y0,i=e.x1,s=e.y1)&&l.length){var c=(o+i)/2,h=(r+s)/2;(n=l[3])&&a.push(new Bl(n,c,h,i,s)),(n=l[2])&&a.push(new Bl(n,o,h,c,s)),(n=l[1])&&a.push(new Bl(n,c,r,i,h)),(n=l[0])&&a.push(new Bl(n,o,r,c,h))}return this},Jl.visitAfter=function(t){var e,n=[],o=[];for(this._root&&n.push(new Bl(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var r=e.node;if(r.length){var i,s=e.x0,a=e.y0,l=e.x1,c=e.y1,h=(s+l)/2,u=(a+c)/2;(i=r[0])&&n.push(new Bl(i,s,a,h,u)),(i=r[1])&&n.push(new Bl(i,h,a,l,u)),(i=r[2])&&n.push(new Bl(i,s,u,h,c)),(i=r[3])&&n.push(new Bl(i,h,u,l,c))}o.push(e)}for(;e=o.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},Jl.x=function(t){return arguments.length?(this._x=t,this):this._x},Jl.y=function(t){return arguments.length?(this._y=t,this):this._y};const tc=Math.random;function ec(){return 1e-6*(tc()-.5)}const nc=t=>"function"==typeof t,oc=Math.sqrt,rc=t=>t.x+t.vx,ic=t=>t.y+t.vy;const sc={value:()=>{}},ac=Object.prototype.hasOwnProperty;function lc(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];let o,r,i=e.length,s={};for(o=0;o<i;++o){if(!(r=e[o]+"")||r in s||/[\s.]/.test(r))throw new Error("illegal type: "+r);s[r]=[]}return new cc(s)}function cc(t){this._=t}function hc(t,e){let n,o=0,r=t.length;for(;o<r;++o)if((n=t[o]).name===e)return n.value}function uc(t,e,n){let o=0,r=t.length;for(;o<r;++o)if(t[o].name===e){t[o]=sc,t=t.slice(0,o).concat(t.slice(o+1));break}return null!=n&&t.push({name:e,value:n}),t}cc.prototype=lc.prototype={constructor:cc,on:function(t,e){let n,o=this._,r=(a=o,(t+"").trim().split(/^|\s+/).map((function(t){let e="",n=t.indexOf(".");if(n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!ac.call(a,t))throw new Error("unknown type: "+t);return{type:t,name:e}}))),i=-1,s=r.length;var a;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++i<s;)if(n=(t=r[i]).type)o[n]=uc(o[n],t.name,e);else if(null==e)for(n in o)o[n]=uc(o[n],t.name,null);return this}for(;++i<s;)if((n=(t=r[i]).type)&&(n=hc(o[n],t.name)))return n},copy:function(){let t={},e=this._;for(let n in e)t[n]=e[n].slice();return new cc(t)},call:function(t,e){let n,o,r,i;if((n=arguments.length-2)>0)for(r=new Array(n),i=0;i<n;++i)r[i]=arguments[i+2];if(!ac.call(this._,t))throw new Error("unknown type: "+t);for(o=this._[t],i=0,n=o.length;i<n;++i)o[i].value.apply(e,r)},apply:function(t,e,n){if(!ac.call(this._,t))throw new Error("unknown type: "+t);let o=this._[t],r=0,i=o.length;for(;r<i;++r)o[r].value.apply(e,n)}};const dc=lc;let pc,fc,gc=0,mc=0,yc=0,xc=1e3,vc=0,wc=0,bc=0,kc=t=>"object"==typeof t,Sc=kc(performance)&&performance.now?performance:Date,Cc=kc(window)&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Dc(){return wc||(Cc(Ac),wc=Sc.now()+bc)}function Ac(){wc=0}function Mc(){this._call=this._time=this._next=null}function Tc(t,e,n){const o=new Mc;return o.restart(t,e,n),o}function _c(){wc=(vc=Sc.now())+bc,gc=mc=0;try{!function(){Dc(),++gc;let t,e=pc;for(;e;)(t=wc-e._time)>=0&&e._call.call(void 0,t),e=e._next;--gc}()}finally{gc=0,function(){let t,e,n=pc,o=1/0;for(;n;)n._call?(o>n._time&&(o=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:pc=e);fc=t,Nc(o)}(),wc=0}}function Pc(){let t=Sc.now(),e=t-vc;e>xc&&(bc-=e,vc=t)}function Nc(t){if(gc)return;mc&&(mc=clearTimeout(mc)),t-wc>24?(t<1/0&&(mc=setTimeout(_c,t-Sc.now()-bc)),yc&&(yc=clearInterval(yc))):(yc||(vc=Sc.now(),yc=setInterval(Pc,xc)),gc=1,Cc(_c))}Mc.prototype=Tc.prototype={constructor:Mc,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?Dc():+n)+(null==e?0:+e),this._next||fc===this||(fc?fc._next=this:pc=this,fc=this),this._call=t,this._time=n,Nc()},stop:function(){this._call&&(this._call=null,this._time=1/0,Nc())}};let jc=Math.PI*(3-Math.sqrt(5));const $c=t=>"function"==typeof t;const Ec=t=>"top"===t||"left"===t?-1:1,Fc=t=>"bottom"===t||"top"===t,Ic=(t,e)=>{const{orient:n,innerTickSize:o=4,tickFormat:r,tickPadding:i=4,tickLabelFill:s,tickStrokeWidth:a,tickStrokeDasharray:l,fontSize:c=12,fontFamily:h,fontWeight:u,showTicks:d,showTickLabel:p,ticks:f,tickValues:g,tickStrokeStyle:m,tickInterval:y,tickIntervalFunction:x,...v}=t;let w;if(void 0!==g)w="function"==typeof g?g(e.domain()):g;else if(void 0!==y){const[t,n]=e.domain(),o=function(){let t=+(arguments.length<=0?void 0:arguments[0]),e=+(arguments.length<=1?void 0:arguments[1]),n=arguments.length,o=n<2?(e=t,t=0,1):n<3?1:+(arguments.length<=2?void 0:arguments[2]),r=new Array(n),i=-1;for(n=0|Nn(0,jn((e-t)/o));++i<n;)r[i]=t+i*o;return r}(t,n,(n-t)/y);w=x?x(t,n,y):o}else w=void 0!==e.ticks?e.ticks(f):e.domain();const b=void 0===r?e.tickFormat(f):t=>r(t)||"",k=Ec(n),S=Math.max(o,0)+i;let C,D,A,M;if(Fc(n)){const t=k*o,n=k*S;if(D=k<0?"0em":".71em",A=k<0?0:.71*c,M="middle",C=w.map((o=>{const r=Math.round(e(o));return{value:o,x1:r,y1:0,x2:r,y2:t,labelX:r,labelY:n}})),d){const t=C.map((t=>({id:t.value,value:t.value,fy:t.y2,origX:t.x1}))),e=function(t){let e,n=1,o=.001,r=1-Math.pow(o,1/300),i=0,s=.6,a=new Map,l=Tc(h),c=dc("tick","end");function h(){u(),c.call("tick",e),n<o&&(l.stop(),c.call("end",e))}function u(o){let l,c,h,u=t.length;for(void 0===o&&(o=1),h=0;h<o;++h)for(n+=(i-n)*r,a.forEach((function(t){t(n)})),l=0;l<u;++l)c=t[l],null==c.fx?c.x+=c.vx*=s:(c.x=c.fx,c.vx=0),null==c.fy?c.y+=c.vy*=s:(c.y=c.fy,c.vy=0);return e}function d(){let e,n=0,o=t.length;for(;n<o;++n){if(e=t[n],e.index=n,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){const t=10*Math.sqrt(n),o=n*jc;e.x=t*Math.cos(o),e.y=t*Math.sin(o)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function p(e){return e.initialize&&e.initialize(t),e}return null==t&&(t=[]),d(),e={tick:u,restart:function(){return l.restart(h),e},stop:function(){return l.stop(),e},nodes:function(n){return arguments.length?(t=n,d(),a.forEach(p),e):t},alpha:function(t){return arguments.length?(n=+t,e):n},alphaMin:function(t){return arguments.length?(o=+t,e):o},alphaDecay:function(t){return arguments.length?(r=+t,e):+r},alphaTarget:function(t){return arguments.length?(i=+t,e):i},velocityDecay:function(t){return arguments.length?(s=1-t,e):1-s},force:function(t,n){return arguments.length>1?(null==n?a.delete(t):a.set(t,p(n)),e):a.get(t)},find:function(e,n,o){let r,i,s,a,l,c=0,h=t.length;for(null==o?o=1/0:o*=o,c=0;c<h;++c)a=t[c],r=e-a.x,i=n-a.y,s=r*r+i*i,s<o&&(l=a,o=s);return l},on:function(t,n){return arguments.length>1?(c.on(t,n),e):c.on(t)}}}(t).force("x",function(t){let e,n,o,r=Ql(.1);$c(t)||(t=Ql(null==t?0:+t));const i=t=>{let r,i=0,s=e.length;for(;i<s;++i)r=e[i],r.vx+=(o[i]-r.x)*n[i]*t},s=()=>{if(!e)return;let i,s=e.length;for(n=new Array(s),o=new Array(s),i=0;i<s;++i)n[i]=isNaN(o[i]=+t(e[i],i,e))?0:+r(e[i],i,e)};return i.initialize=t=>{e=t,s()},i.strength=function(){return arguments.length?(r=$c(arguments.length<=0?void 0:arguments[0])?arguments.length<=0?void 0:arguments[0]:Ql(+(arguments.length<=0?void 0:arguments[0])),s(),i):r},i.x=function(){return arguments.length?(t=$c(arguments.length<=0?void 0:arguments[0])?arguments.length<=0?void 0:arguments[0]:Ql(+(arguments.length<=0?void 0:arguments[0])),s(),i):t},i}((t=>t.origX)).strength(1)).force("collide",function(t){let e,n,o=1,r=1;nc(t)||(t=Ql(null==t?1:+t));const i=t=>{if(t.data)return t.r=n[t.data.index];let e;for(e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)},s=()=>{let t,s,a,l,c,h,u,d,p=e.length,f=(t,e,n,r,i)=>{let s=t.data,d=t.r,p=h+d;if(!s)return e>l+p||r<l-p||n>c+p||i<c-p;if(s.index>a.index){let t=l-s.x-s.vx,e=c-s.y-s.vy,n=t*t+e*e;n<p*p&&(0===t&&(t=ec(),n+=t*t),0===e&&(e=ec(),n+=e*e),n=(p-(n=oc(n)))/n*o,a.vx+=(t*=n)*(p=(d*=d)/(u+d)),a.vy+=(e*=n)*p,s.vx-=t*(p=1-p),s.vy-=e*p)}};for(d=0;d<r;++d)for(s=ql(e,rc,ic).visitAfter(i),t=0;t<p;++t)a=e[t],h=n[a.index],u=h*h,l=a.x+a.vx,c=a.y+a.vy,s.visit(f)},a=()=>{if(!e)return;let o,r,i=e.length;for(n=new Array(i),o=0;o<i;++o)r=e[o],n[r.index]=+t(r,o,e)};return s.initialize=t=>{e=t,a()},s.iterations=t=>t.length?(r=+t[0],s):r,s.strength=t=>t.length?(o=+t[0],s):o,s.radius=e=>e.length?(t=nc(e[0])?e[0]:Ql(+e[0]),a(),s):t,s}(22)).stop();for(let t=0;t<100;++t)e.tick();C=En(C,t).map((t=>{const[e,n]=t;return Math.abs(n.x-n.origX)>.01?{...e,x2:n.x,labelX:n.x}:e}))}}else C=w.map((t=>{const n=Math.round(e(t));return{value:t,x1:0,y1:n,x2:k*o,y2:n,labelX:k*S,labelY:n}})),D=".32em",A=.32*c,M=k<0?"end":"start";return{orient:n,ticks:C,scale:e,tickStrokeStyle:m,tickLabelFill:s||m,tickStrokeWidth:a,tickStrokeDasharray:l,dy:D,canvas_dy:A,textAnchor:M,fontSize:c,fontFamily:h,fontWeight:u,format:b,showTickLabel:p,...v}},Lc=(t,e)=>{const{ticks:n,tickStrokeStyle:o}=e;void 0!==o&&(t.strokeStyle=o,t.fillStyle=o),n.forEach((n=>{((t,e,n)=>{const{tickStrokeWidth:o,tickStrokeDasharray:r}=n;t.beginPath(),t.moveTo(e.x1,e.y1),t.lineTo(e.x2,e.y2),t.lineWidth=o;const i=ro(r);t.setLineDash(i),t.stroke()})(t,n,e)}))},Oc=(t,e,n)=>{e.ticks.forEach((o=>{((t,e,n,o)=>{const{orient:r,gridLinesStrokeWidth:i,gridLinesStrokeStyle:s,gridLinesStrokeDasharray:a}=n,{chartConfig:l}=o,{height:c,width:h}=l;void 0!==s&&(t.strokeStyle=s),t.beginPath();const u=Ec(r);Fc(r)?(t.moveTo(e.x1,0),t.lineTo(e.x2,u*c)):(t.moveTo(0,e.y1),t.lineTo(u*h,e.y2)),t.lineWidth=i;const d=ro(a);t.setLineDash(d),t.stroke()})(t,o,e,n)}))},Rc=["pan"],zc=t=>{const{getScale:e,edgeClip:n,zoomEnabled:o,zoomCursorClassName:s,bg:a,className:l,inverted:c,transform:h,getMouseDelta:u,axisZoomCallback:d,onContextMenu:p,onDoubleClick:f}=t,g=(0,r.useRef)(),m=(0,r.useCallback)((()=>e(i(g).getMoreProps())),[e]);return(0,D.jsxs)("g",{transform:us(h),children:[o?(0,D.jsx)(Xl,{className:l,zoomCursorClassName:s,inverted:c,bg:a,axisZoomCallback:d,getScale:m,getMouseDelta:u,onContextMenu:p,onDoubleClick:f}):null,(0,D.jsx)(zl,{refComp:g,clip:!1,edgeClip:n,canvasToDraw:Hl,canvasDraw:(n,o)=>{((t,e)=>{t.save(),t.translate(e[0],e[1])})(n,h);const r=Ic(t,e(o));t.showTicks&&Lc(n,r),t.showGridLines&&Oc(n,r,o),t.showTickLabel&&((t,e)=>{const{textAnchor:n,tickLabelFill:o}=e;t.font=(t=>{let{fontWeight:e,fontSize:n,fontFamily:o}=t;return`${e} ${n}px ${o}`})(e),void 0!==o&&(t.fillStyle=o),t.textAlign="middle"===n?"center":n,e.ticks.forEach((n=>{((t,e,n)=>{const{canvas_dy:o,format:r}=n,i=r(e.value);t.beginPath(),t.fillText(i,e.labelX,e.labelY+o)})(t,n,e)}))})(n,r),t.showDomain&&((t,e)=>{const{orient:n,outerTickSize:o,strokeStyle:r,strokeWidth:i,range:s}=e,a=Ec(n);t.lineWidth=i,t.strokeStyle=r,t.beginPath();const l=ms(s),c=fs(s),h=a*o;Fc(n)?(t.moveTo(l,h),t.lineTo(l,0),t.lineTo(c,0),t.lineTo(c,h)):(t.moveTo(h,l),t.lineTo(0,l),t.lineTo(0,c),t.lineTo(h,c)),t.stroke()})(n,t),n.restore()},drawOn:Rc})]})},Wc=t=>t<400?2:t<500?6:8,Xc=t=>{let{xScale:e,width:n}=t;return e.invert?((t,e)=>{const n=e.map(t.invert);return t.copy().domain(n).range(e)})(e,[0,n]):e},Hc=t=>{const{xAxisZoom:e,chartConfig:{width:n,height:o}}=(0,r.useContext)(Ws),{getMouseDelta:i,outerTickSize:s,showTicks:a,strokeStyle:l,strokeWidth:c,zoomEnabled:h,...u}=t,d=((t,e,n)=>{const{axisAt:o,xZoomHeight:r,orient:i,ticks:s}=t,a="top"===i?-r:0,l=r,c=e,h=((t,e)=>"top"===t?0:"bottom"===t?e:"middle"===t?e/2:t)(o,n);return{bg:{x:0,y:a,h:l,w:c},transform:[0,h],range:[0,e],getScale:Xc,ticks:s??Wc(e)}})(t,n,o);return(0,D.jsx)(zc,{...u,...d,getMouseDelta:i,outerTickSize:s,showTicks:a,strokeStyle:l,strokeWidth:c,zoomEnabled:h&&a,axisZoomCallback:e})},Yc="#000000";Hc.defaultProps={axisAt:"bottom",className:ja,domainClassName:Ea,fontFamily:Ja,fontSize:12,fontWeight:400,getMouseDelta:(t,e)=>t[0]-e[0],gridLinesStrokeStyle:"#e2e4ec",gridLinesStrokeWidth:1,orient:"bottom",outerTickSize:0,innerTickSize:4,showDomain:!0,showGridLines:!1,showTicks:!0,showTickLabel:!0,strokeStyle:Yc,strokeWidth:1,tickPadding:4,tickLabelFill:Yc,tickStrokeStyle:Yc,xZoomHeight:25,zoomEnabled:!0,zoomCursorClassName:Ma};const Uc=t=>t<300?2:t<500?6:8,Bc=t=>{const{yScale:e,flipYScale:n,height:o}=t.chartConfig;if(e.invert){const t=n?[0,o]:[o,0],r=t.map(e.invert);return e.copy().domain(r).range(t)}return e},Zc=t=>{const e=(0,r.useContext)(Ws),{chartId:n,chartConfig:{width:o,height:i,yPan:s},yAxisZoom:a}=e,l=(0,r.useCallback)((t=>{a(n,t)}),[n,a]),{getMouseDelta:c,outerTickSize:h,strokeStyle:u,strokeWidth:d,...p}=t,{zoomEnabled:f,...g}=((t,e,n,o)=>{const{axisAt:r,ticks:i,yZoomWidth:s,orient:a}=t,l=((t,e)=>"left"===t?0:"right"===t?e:"middle"===t?e/2:t)(r,e);return{transform:[l,0],range:[0,n],bg:{x:"left"===a?-s:0,y:0,h:n,w:s},getScale:Bc,ticks:i??Uc(n),zoomEnabled:o}})(t,o,i,s);return(0,D.jsx)(zc,{...p,...g,edgeClip:!0,outerTickSize:h,strokeStyle:u,strokeWidth:d,zoomEnabled:t.zoomEnabled&&f,getMouseDelta:c,axisZoomCallback:l})},Vc="#000000";function qc(t){this._context=t}function Gc(t){return new qc(t)}Zc.defaultProps={axisAt:"right",className:$a,domainClassName:Ea,fontFamily:Ja,fontSize:12,fontWeight:400,getMouseDelta:(t,e)=>t[1]-e[1],gridLinesStrokeStyle:"#e2e4ec",gridLinesStrokeWidth:1,innerTickSize:4,outerTickSize:0,orient:"right",showDomain:!0,showGridLines:!1,showTicks:!0,showTickLabel:!0,strokeStyle:Vc,strokeWidth:1,tickPadding:4,tickLabelFill:Vc,tickStrokeStyle:Vc,yZoomWidth:40,zoomEnabled:!0,zoomCursorClassName:Aa},qc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};const Kc=Math.PI,Jc=2*Kc,Qc=1e-6,th=Jc-Qc;function eh(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}class nh{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==t?eh:function(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return eh;const n=10**e;return function(t){this._+=t[0];for(let e=1,o=t.length;e<o;++e)this._+=Math.round(arguments[e]*n)/n+t[e]}}(t)}moveTo(t,e){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,e){this._append`L${this._x1=+t},${this._y1=+e}`}quadraticCurveTo(t,e,n,o){this._append`Q${+t},${+e},${this._x1=+n},${this._y1=+o}`}bezierCurveTo(t,e,n,o,r,i){this._append`C${+t},${+e},${+n},${+o},${this._x1=+r},${this._y1=+i}`}arcTo(t,e,n,o,r){if(t=+t,e=+e,n=+n,o=+o,(r=+r)<0)throw new Error(`negative radius: ${r}`);let i=this._x1,s=this._y1,a=n-t,l=o-e,c=i-t,h=s-e,u=c*c+h*h;if(null===this._x1)this._append`M${this._x1=t},${this._y1=e}`;else if(u>Qc)if(Math.abs(h*a-l*c)>Qc&&r){let d=n-i,p=o-s,f=a*a+l*l,g=d*d+p*p,m=Math.sqrt(f),y=Math.sqrt(u),x=r*Math.tan((Kc-Math.acos((f+u-g)/(2*m*y)))/2),v=x/y,w=x/m;Math.abs(v-1)>Qc&&this._append`L${t+v*c},${e+v*h}`,this._append`A${r},${r},0,0,${+(h*d>c*p)},${this._x1=t+w*a},${this._y1=e+w*l}`}else this._append`L${this._x1=t},${this._y1=e}`;else;}arc(t,e,n,o,r,i){if(t=+t,e=+e,i=!!i,(n=+n)<0)throw new Error(`negative radius: ${n}`);let s=n*Math.cos(o),a=n*Math.sin(o),l=t+s,c=e+a,h=1^i,u=i?o-r:r-o;null===this._x1?this._append`M${l},${c}`:(Math.abs(this._x1-l)>Qc||Math.abs(this._y1-c)>Qc)&&this._append`L${l},${c}`,n&&(u<0&&(u=u%Jc+Jc),u>th?this._append`A${n},${n},0,1,${h},${t-s},${e-a}A${n},${n},0,1,${h},${this._x1=l},${this._y1=c}`:u>Qc&&this._append`A${n},${n},0,${+(u>=Kc)},${h},${this._x1=t+n*Math.cos(r)},${this._y1=e+n*Math.sin(r)}`)}rect(t,e,n,o){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${n=+n}v${+o}h${-n}Z`}toString(){return this._}}nh.prototype;const oh=t=>"function"==typeof t,rh=t=>void 0===t;function ih(t){return function(){return t}}const sh=Array.from;function ah(t){return"object"==typeof t&&"length"in t?t:sh(t)}const lh=Math.floor;function ch(t){let e=3;return t.digits=function(n){if(rh(n))return e;if(null==n)e=null;else{const t=lh(n);if(!(t>=0))throw new RangeError(`invalid digits: ${n}`);e=t}return t},()=>new nh(e)}function hh(t){return t[0]}function uh(t){return t[1]}const dh=(t,e)=>oh(t)?t:void 0===t?e:ih(t);function ph(t,e){let n=ih(!0),o=null,r=Gc,i=null,s=ch(a);function a(a){let l,c,h,u=(a=ah(a)).length,d=!1;for(null==o&&(i=r(h=s())),l=0;l<=u;++l)!(l<u&&n(c=a[l],l,a))===d&&((d=!d)?i.lineStart():i.lineEnd()),d&&i.point(+t(c,l,a),+e(c,l,a));if(h)return i=null,h+""||null}return t=dh(t,hh),e=dh(e,uh),a.x=e=>rh(e)?t:(t=oh(e)?e:ih(+e),a),a.y=t=>rh(t)?e:(e=oh(t)?t:ih(+t),a),a.defined=t=>rh(t)?n:(n=oh(t)?t:ih(!!t),a),a.curve=t=>rh(t)?r:(r=t,null!=o&&(i=r(o)),a),a.context=t=>rh(t)?o:(null==t?o=i=null:i=r(o=t),a),a}const fh=(t,e)=>oh(t)?t:rh(t)?e:ih(+t);function gh(t,e){if(!((i=t.length)>1))return;let n,o,r,i,s=t[e[0]],a=s.length;for(n=1;n<i;++n)for(r=s,s=t[e[n]],o=0;o<a;++o)s[o][1]+=s[o][0]=isNaN(r[o][1])?r[o][0]:r[o][1]}function mh(t){let e=t.length,n=new Array(e);for(;--e>=0;)n[e]=e;return n}function yh(t,e){return t[e]}function xh(t){const e=[];return e.key=t,e}function vh(){let t=ih([]),e=mh,n=gh,o=yh;function r(r){let i,s,a=sh(t.apply(this,arguments),xh),l=a.length,c=-1;for(const t of r)for(i=0,++c;i<l;++i)(a[i][c]=[0,+o(t,a[i].key,c,r)]).data=t;for(i=0,s=ah(e(a));i<l;++i)a[s[i]].index=i;return n(a,s),a}return r.keys=e=>rh(e)?t:(t=oh(e)?e:ih(sh(e)),r),r.value=t=>rh(t)?o:(o=oh(t)?t:ih(+t),r),r.order=t=>rh(t)?e:(e=null==t?mh:oh(t)?t:ih(sh(t)),r),r.offset=t=>rh(t)?n:(n=null==t?gh:t,r),r}const wh=()=>{},bh=Math.round,kh=Math.pow,Sh=(t,e,n,o)=>ph().x((e=>bh(t(n(e))))).y((t=>bh(e(o(t))))),Ch=t=>{const{yAccessor:e,hoverTolerance:n,highlightOnHover:o,stroke:r,strokeOpacity:i,strokeWidth:s,strokeDasharray:a,hoverStrokeWidth:l,defined:c,connectNulls:h,interpolation:u,style:d,fill:p,className:f,canvasClip:g,onClick:m,onDoubleClick:y,onContextMenu:x,onHover:v,onUnHover:w}=t,b=o||v||w?{isHover:t=>{if(!o)return!1;const{mouseXY:r,currentItem:i,xScale:s,xAccessor:a,plotData:l,chartConfig:{yScale:c,origin:h}}=t,[u,d]=h,p=t=>[s(a(t))+u,c(e(t))+d],[f,g]=r,m=n,{left:y,right:x}=xs(l,s.invert(f),a);if(y===x){const[t,e]=p(i);return kh(f-t,2)+kh(g-e,2)<kh(m,2)}{const t=l[y],e=l[x],[n,o]=p(t),[r,i]=p(e),s=(i-o)/(r-n),a=bh(s*f+(-1*s*n+o));return g>=a-m&&g<=a+m}},drawOn:["mousemove","pan"],canvasToDraw:Yl}:{drawOn:["pan"],canvasToDraw:Hl};return(0,D.jsx)(zl,{svgDraw:t=>{const{xAccessor:n,xScale:o,plotData:g,hovering:m,chartConfig:y}=t,{yScale:x}=y,v=Sh(o,x,n,e);return u&&v.curve(u),h||v.defined((t=>c(e(t)))),(0,D.jsx)("path",{style:d,className:`${f} ${r?"":Ga}`,d:v(g),stroke:r,strokeOpacity:i,strokeWidth:m?l:s,strokeDasharray:oo(a),fill:p})},canvasDraw:(t,n)=>{const{hovering:o,xScale:d,xAccessor:p,plotData:f,chartConfig:{yScale:m}}=n;g&&(t.save(),g(t,n)),t.lineWidth=o?l:s,t.strokeStyle=ps(r,i),t.setLineDash(oo(a).split(","));const y=Sh(d,m,p,e);u&&y.curve(u),h||y.defined((t=>c(e(t)))),t.beginPath(),y.context(t)(f),t.stroke(),g&&t.restore()},onClickWhenHover:m,onDoubleClickWhenHover:y,onContextMenuWhenHover:x,onHover:v,onUnHover:w,...b})};Ch.defaultProps={className:qa,strokeWidth:1,strokeOpacity:1,hoverStrokeWidth:4,fill:"none",stroke:"#4682b4",strokeDasharray:"Solid",defined:t=>!isNaN(t),hoverTolerance:6,highlightOnHover:!1,connectNulls:!1,onClick:wh,onDoubleClick:wh,onContextMenu:wh};const Dh=Math.round,Ah=(t,e)=>Dh(t(e)),Mh=(t,e,n,o,r,i,s)=>"horizontal"===t?{x1:0,y1:Ah(n,r),x2:i,y2:Ah(n,r)}:{x1:Ah(e,o),y1:0,x2:Ah(e,o),y2:s},Th=["pan"],_h=t=>{const{type:e,className:n,opacity:o,stroke:r,strokeWidth:i,strokeDasharray:s,yValue:a,xValue:l}=t;return(0,D.jsx)(zl,{svgDraw:t=>{const{width:c,height:h,xScale:u,chartConfig:{yScale:d}}=t,p=Mh(e,u,d,l,a,c,h);return(0,D.jsx)("line",{className:n,strokeDasharray:oo(s),stroke:r,strokeWidth:i,strokeOpacity:o,...p})},canvasDraw:(t,n)=>{const{xScale:c}=n,{chartConfig:{yScale:h,width:u,height:d}}=n,{x1:p,y1:f,x2:g,y2:m}=Mh(e,c,h,l,a,u,d);t.beginPath(),t.strokeStyle=ps(r,o),t.lineWidth=i,t.setLineDash((t=>oo(t).split(","))(s)),t.moveTo(p,f),t.lineTo(g,m),t.stroke()},canvasToDraw:Hl,drawOn:Th})};_h.defaultProps={type:"horizontal",className:qa,opacity:.5,stroke:"#000000",strokeWidth:1,strokeDasharray:"Solid"};const Ph=_h,Nh=t=>{let{children:e}=t;return(0,D.jsx)(zl,{svgDraw:e})},jh=Math.round,$h=Math.random,Eh=()=>`rsi-clip-${String(jh(1e4*$h()*1e4))}`,Fh=t=>({clipPath:`url(#${t})`});class Ih extends r.Component{constructor(t){super(t),this.clipPathId1=Eh(),this.clipPathId2=Eh()}topAndBottomClip=(t,e)=>{const{overSold:n,overBought:o}=this.props,{chartConfig:{yScale:r,width:i}}=e;t.beginPath(),t.rect(0,r(n),i,r(o)-r(n)),t.clip()};mainClip=(t,e)=>{const{overSold:n,overBought:o}=this.props,{chartConfig:{yScale:r,width:i,height:s}}=e;t.beginPath(),t.rect(0,0,i,r(n)),t.rect(0,r(o),i,s-r(o)),t.clip()};renderClip=t=>{const{overSold:e,overBought:n}=this.props,{chartConfig:{yScale:o,width:r,height:i}}=t;return(0,D.jsxs)("defs",{children:[(0,D.jsx)("clipPath",{id:this.clipPathId1,children:(0,D.jsx)("rect",{x:0,y:o(e),width:r,height:o(n)-o(e)})}),(0,D.jsxs)("clipPath",{id:this.clipPathId2,children:[(0,D.jsx)("rect",{x:0,y:0,width:r,height:o(e)}),(0,D.jsx)("rect",{x:0,y:o(n),width:r,height:i-o(n)})]})]})};render(){const{className:t,opacity:e,stroke:n,strokeDasharray:o,strokeWidth:r,yAccessor:i,overSold:s,middle:a,overBought:l}=this.props,c=Fh(this.clipPathId1),h=Fh(this.clipPathId2);return(0,D.jsxs)("g",{className:t,children:[(0,D.jsx)(Nh,{children:this.renderClip}),(0,D.jsx)(Ph,{opacity:e.top,stroke:n.top,strokeWidth:r.top,strokeDasharray:o.top,yValue:s}),(0,D.jsx)(Ph,{opacity:e.middle,stroke:n.middle,strokeWidth:r.middle,strokeDasharray:o.middle,yValue:a}),(0,D.jsx)(Ph,{opacity:e.bottom,stroke:n.bottom,strokeWidth:r.bottom,strokeDasharray:o.bottom,yValue:l}),(0,D.jsx)(Ch,{style:c,canvasClip:this.topAndBottomClip,className:t,yAccessor:i,stroke:n.insideThreshold||n.line,strokeWidth:r.insideThreshold,strokeDasharray:o.line}),(0,D.jsx)(Ch,{style:h,canvasClip:this.mainClip,className:t,yAccessor:i,stroke:n.outsideThreshold||n.line,strokeWidth:r.outsideThreshold,strokeDasharray:o.line})]})}}const Lh="ShortDash";Ih.defaultProps={className:Oa,stroke:{line:"#000000",top:"#b8b2bb",middle:"#8795a1",bottom:"#b8c2cc",outsideThreshold:"#b300b3",insideThreshold:"#ffccff"},opacity:{top:1,middle:1,bottom:1},strokeDasharray:{line:"Solid",top:Lh,middle:Lh,bottom:Lh},strokeWidth:{outsideThreshold:1,insideThreshold:1,top:1,middle:1,bottom:1},overSold:70,middle:50,overBought:30};const Oh=()=>new Map,Rh=(t,e,n)=>{t.set(e,n)};function zh(){let t,e,n=[],o=[];const r=(e,o,i,s)=>{if(o>=n.length)return null==t?e:e.sort(t);let a,l,c,h=-1,u=e.length,d=n[o++],p=new Map,f=i();for(;++h<u;)c=p.get(a=d(l=e[h])+""),c?c.push(l):p.set(a,[l]);return p.forEach(((t,e)=>{s(f,e,r(t,o,i,s))})),f},i=(t,e)=>{if(++e>n.length)return t;let r,s=o[e-1];return r=[],t.forEach(((t,n)=>{r.push({key:n,values:i(t,e)})})),null==s?r:r.sort(((t,e)=>s(t.key,e.key)))};return e={entries:t=>i(r(t,0,Oh,Rh),0),key:t=>(n.push(t),e),sortKeys:t=>(o[n.length-1]=t,e),sortValues:n=>(t=n,e)}}const Wh=Math.round,Xh=Math.floor,Hh=Math.max,Yh=Math.abs,Uh=t=>t.map(((t,e)=>{const{className:n,wick:o}=t,{stroke:r,x:i,y1:s,y2:a,y3:l,y4:c}=o;return(0,D.jsx)("path",{className:n,stroke:r,d:`M${i},${s} L${i},${a} M${i},${l} L${i},${c}`},e)})),Bh=(t,e)=>{const{opacity:n,candleStrokeWidth:o}=t;return e.map(((t,e)=>{const{className:r,fill:i,stroke:s,x:a,y:l,width:c,height:h}=t;return t.width<=1?(0,D.jsx)("line",{className:r,stroke:i,x1:a,y1:l,x2:a,y2:l+h},e):0===t.height?(0,D.jsx)("line",{stroke:i,x1:a,y1:l,x2:a+c,y2:l+h},e):(0,D.jsx)("rect",{className:r,fillOpacity:n,fill:i,stroke:s,strokeWidth:o,x:a,y:l,width:c,height:h},e)}))},Zh=(t,e,n,o,r)=>{const{classNames:i,yAccessor:s,fill:a,stroke:l,wickStroke:c,width:h}=t,u=eo(c),d=eo(i),p=eo(a),f=eo(l),g=.5*eo(h)(t,{xScale:n,xAccessor:e,plotData:r}),m=g>.7?Wh(g):Xh(g);let y=[];for(let t=0;t<r.length;t++){const i=r[t],a=t>0?r[t-1]:{};if(null!=s(i).close){const t=Wh(n(e(i))),r=s(i),l=s(a),c=Wh(o(Hh(r.open,r.close))),h=Wh(Yh(o(r.open)-o(r.close)));y.push({x:t-m,y:c,wick:{stroke:u(r,l),x:t,y1:Wh(o(r.high)),y2:c,y3:c+h,y4:Wh(o(r.low))},height:h,width:2*m,className:d(r),fill:p(r,l),stroke:f(r,l),direction:r.close-r.open})}}return y},Vh=["pan"],qh=t=>{const{className:e,wickClassName:n,candleClassName:o,clip:r}=t;return(0,D.jsx)(zl,{clip:r,svgDraw:r=>{const{xAccessor:i,xScale:s,plotData:a,chartConfig:{yScale:l}}=r,c=Zh(t,i,s,l,a);return(0,D.jsxs)("g",{className:e,children:[(0,D.jsx)("g",{className:n,children:Uh(c)},"wicks"),(0,D.jsx)("g",{className:o,children:Bh(t,c)},"candles")]})},canvasDraw:(e,n)=>{((t,e,n)=>{const{opacity:o,candleStrokeWidth:r}=e,{xAccessor:i,xScale:s,plotData:a,chartConfig:{yScale:l}}=n,c=Zh(e,i,s,l,a);zh().key((t=>t.wick.stroke)).entries(c).forEach((e=>{const{key:n,values:o}=e;t.strokeStyle=n,t.fillStyle=n,o.forEach((e=>{const n=e.wick;t.fillRect(n.x-.5,n.y1,1,n.y2-n.y1),t.fillRect(n.x-.5,n.y3,1,n.y4-n.y3)}))})),zh().key((t=>t.stroke)).key((t=>t.fill)).entries(c).forEach((e=>{const{key:n,values:i}=e;"none"!==n&&(t.strokeStyle=n,t.lineWidth=r),i.forEach((e=>{const{key:r,values:i}=e,s=gs(i).width<=1?r:ps(r,o);t.fillStyle=s,i.forEach((e=>{e.width<=1?t.fillRect(e.x-.5,e.y,1,e.height):0===e.height?t.fillRect(e.x,e.y-.5,e.width,1):(t.fillRect(e.x,e.y,e.width,e.height),"none"!==n&&t.strokeRect(e.x,e.y,e.width,e.height))}))}))}))})(e,t,n)},canvasToDraw:Hl,drawOn:Vh})};qh.defaultProps={className:za,wickClassName:Wa,candleClassName:Xa,yAccessor:t=>({open:t.open,high:t.high,low:t.low,close:t.close}),classNames:t=>t.close>t.open?Ha:Ya,width:ys,wickStroke:"#000000",fill:t=>t.close>t.open?"#6ba583":"#ff0000",stroke:"#000000",candleStrokeWidth:.5,widthRatio:.8,opacity:.5,clip:!0};const Gh=Math.round,Kh=(t,e,n,o,r,i,s)=>function(t,e,n){let o=null,r=ih(!0),i=null,s=Gc,a=null,l=ch(c);function c(c){let h,u,d,p,f,g=(c=ah(c)).length,m=!1,y=new Array(g),x=new Array(g);for(null==i&&(a=s(f=l())),h=0;h<=g;++h){if(!(h<g&&r(p=c[h],h,c))===m)if(m=!m)u=h,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),d=h-1;d>=u;--d)a.point(y[d],x[d]);a.lineEnd(),a.areaEnd()}m&&(y[h]=+t(p,h,c),x[h]=+e(p,h,c),a.point(o?+o(p,h,c):y[h],n?+n(p,h,c):x[h]))}if(f)return a=null,f+""||null}function h(){return ph().defined(r).curve(s).context(i)}return t=fh(t,hh),e=fh(e,ih(0)),n=fh(n,uh),c.x=e=>rh(e)?t:(t=oh(e)?e:ih(+e),o=null,c),c.x0=e=>rh(e)?t:(t=oh(e)?e:ih(+e),c),c.x1=t=>rh(t)?o:(o=null==t?null:oh(t)?t:ih(+t),c),c.y=t=>rh(t)?e:(e=oh(t)?t:ih(+t),n=null,c),c.y0=t=>rh(t)?e:(e=oh(t)?t:ih(+t),c),c.y1=t=>rh(t)?n:(n=null==t?null:oh(t)?t:ih(+t),c),c.lineX0=c.lineY0=()=>h().x(t).y(e),c.lineY1=()=>h().x(t).y(n),c.lineX1=()=>h().x(o).y(e),c.defined=t=>rh(t)?r:(r=oh(t)?t:ih(!!t),c),c.curve=t=>rh(t)?s:(s=t,null!=i&&(a=s(i)),c),c.context=t=>rh(t)?i:(null==t?i=a=null:a=s(i=t),c),c}().defined((t=>e(o(t)))).x((t=>Gh(r(n(t))))).y0((e=>eo(t)(i,e,s))).y1((t=>Gh(i(o(t))))),Jh=["pan"],Qh=t=>{const{yAccessor:e,defined:n,base:o,style:r,className:i,stroke:s,fill:a,opacity:l,interpolation:c,canvasGradient:h,canvasClip:u}=t;return(0,D.jsx)(zl,{svgDraw:t=>{const{plotData:h,xScale:u,xAccessor:d,chartConfig:{yScale:p}}=t,f=Kh(o,n,d,e,u,p,t);null!=c&&f.curve(c);const g=f(h),m=xt(i,null==s&&Ga);return(0,D.jsx)("path",{className:m,style:r,stroke:s,fill:ps(a,l),d:g})},canvasDraw:(t,r)=>{const{xScale:i,plotData:d,xAccessor:p,chartConfig:{yScale:f}}=r;u&&(t.save(),u(t,r)),t.fillStyle=null==h?ps(a,l):h(r,t),t.strokeStyle=s,t.beginPath();const g=Kh(o,n,p,e,i,f,r).context(t);null!=c&&g.curve(c),g(d),t.fill(),u&&t.restore()},canvasToDraw:Hl,drawOn:Jh})};Qh.defaultProps={className:qa,fill:"none",opacity:1,defined:t=>!isNaN(t),base:t=>ms(t.range())};const tu=Qh;class eu extends r.Component{yAccessorForTop=t=>{const{yAccessor:e}=this.props,n=e(t);return n&&n.top};yAccessorForMiddle=t=>{const{yAccessor:e}=this.props,n=e(t);return n&&n.middle};yAccessorForBottom=t=>{const{yAccessor:e}=this.props,n=e(t);return n&&n.bottom};yAccessorForScalledBottom=(t,e)=>{const{yAccessor:n}=this.props,o=n(e);return t(o&&o.bottom)};render(){const{className:t,areaClassName:e,opacity:n,stroke:o,fill:r}=this.props;return(0,D.jsxs)("g",{className:t,children:[(0,D.jsx)(Ch,{yAccessor:this.yAccessorForTop,stroke:o.top,fill:"none"}),(0,D.jsx)(Ch,{yAccessor:this.yAccessorForMiddle,stroke:o.middle,fill:"none"}),(0,D.jsx)(Ch,{yAccessor:this.yAccessorForBottom,stroke:o.bottom,fill:"none"}),(0,D.jsx)(tu,{className:e,yAccessor:this.yAccessorForTop,base:this.yAccessorForScalledBottom,opacity:n,stroke:"none",fill:r})]})}}eu.defaultProps={className:Ia,areaClassName:La,opacity:.2};const nu=Array.isArray,ou=Math.round,ru=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];let o=[];const r=t=>o.map(((e,n)=>{const o=t.map((t=>{const n=[0,t[e]];return n.data=t,n}));return o.key=e,o.index=n,o}));return r.keys=t=>e.length?(o=t,r):o,r},iu=t=>`y${t}`,su=function(t,e,n,o,r,i,s,a){void 0===s&&(s=ru),void 0===a&&(a=Kn);const{baseAt:l,className:c,fill:h,stroke:u,spaceBetweenBar:d=0,width:p}=t,f=eo(c),g=eo(h),m=eo(l),y=eo(p)(t,{xScale:o,xAccessor:e,plotData:i}),x=ou(y),v=(x-d*(n.length-1))/n.length,w=1===x?0:.5*y,b=i.map((t=>{const o={appearance:{},x:e(t)};return n.forEach(((e,n)=>{const r=iu(n),i={className:f(t,n),stroke:u?g(t,n):"none",fill:g(t,n)};o[r]=e(t),o.appearance[r]=i})),o})),k=n.map(((t,e)=>iu(e))),S=s().keys(k)(b).map(((t,e)=>{const n=t.key;return t.map((t=>{const o=[t[0],t[1]];return o.data={i:e,x:t.data.x,appearance:t.data.appearance[n]},o}))})),C=(t=>{let e,n,o,r=t.length,i=-1,s=0;for(;++i<r;)s+=t[i].length;for(n=new Array(s);--r>=0;)for(o=t[r],e=o.length;--e>=0;)n[--s]=o[e];return n})(S).map((t=>{let e=r(t[1]),n=m(o,r,t.data)-r(t[1]-t[0]);return n<0&&(e+=n,n=-n),{...t.data.appearance,x:ou(o(t.data.x)-y/2),y:e,groupOffset:ou(w-(t.data.i>0?(v+d)*t.data.i:0)),groupWidth:ou(v),offset:ou(w),height:n,width:x}})).filter((t=>!isNaN(t.y)));return a(C)},au=t=>nu(t)?t:[t],lu=(t,e,n,o,r,i,s,a)=>{const{xAccessor:l,yAccessor:c,swapScales:h}=t,[u,d,p,f,g]=h?[au(l),c,r,o,s]:[au(c),e,o,r,a];return su(t,d,u,p,f,n,i,g)},cu=t=>t.map((t=>({...t,x:t.y,y:t.x,height:t.width,width:t.height}))),hu=(t,e,n)=>{const{stroke:o,opacity:r}=e;zh().key((t=>t.fill)).entries(n).forEach((e=>{const{key:n,values:i}=e;gs(i).width>1&&(t.strokeStyle=n),t.fillStyle=gs(i).width<=1?n:ps(n,r),i.forEach((e=>{let{x:n,y:r,width:i,height:s}=e;i<=1?t.fillRect(n-.5,r,1,s):(t.fillRect(n,r,i,s),o&&t.strokeRect(n,r,i,s))}))}))},uu=function(t,e,n,o,r,i){void 0===r&&(r=Kn),void 0===i&&(i=cu);const{xAccessor:s,plotData:a,xScale:l,chartConfig:{yScale:c}}=n,h=lu(e,s,a,l,c,o,i,r);hu(t,e,h)},du=function(t,e,n,o,r){void 0===o&&(o=Kn),void 0===r&&(r=cu);const{xAccessor:i,plotData:s,xScale:a,chartConfig:{yScale:l}}=e,c=lu(t,i,s,a,l,n,r,o);return pu(t,c)},pu=(t,e)=>{let{opacity:n}=t;return e.map(((t,e)=>{const{className:o,fill:r,stroke:i,x:s,y:a,width:l,height:c}=t;return l<=1?(0,D.jsx)("line",{className:o,stroke:r,x1:s,y1:a,x2:s,y2:a+c},e):(0,D.jsx)("rect",{className:o,fill:r,fillOpacity:n,stroke:i,x:s,y:a,width:l,height:c},e)}))},fu=["pan"],gu=t=>(0,D.jsx)(zl,{clip:t.clip,svgDraw:e=>(0,D.jsx)("g",{children:du(t,e,vh)}),canvasDraw:(e,n)=>{uu(e,t,n,vh)},canvasToDraw:Hl,drawOn:fu});gu.defaultProps={baseAt:(t,e)=>gs(e.range()),direction:"up",className:Ka,stroke:!0,fill:"#4682b4",opacity:.5,width:ys,widthRatio:.8,clip:!0,swapScales:!1};const mu=gu,yu=Math.round,xu=Math.floor,vu=(t,e)=>{const{baseAt:n,fill:o,stroke:r,yAccessor:i}=t,{xScale:s,xAccessor:a,plotData:l,chartConfig:{yScale:c}}=e,h=eo(n),u=eo(t.width)(t,{xScale:s,xAccessor:a,plotData:l}),d=xu(.5*u),p=l.filter((t=>null!=i(t))).map(((t,e,n)=>{const l=n[e-1]||t,u=i(t),p=yu(s(a(t)))-d;let f=c(u),g=h(s,c,t)-c(u);return g<0&&(f+=g,g=-g),{x:p,y:yu(f),height:yu(g),width:2*d,fill:o(t,l),stroke:r(t,l)}}));return p},wu=["pan"],bu=t=>{const{swapScales:e,clip:n}=t;return(0,D.jsx)(zl,{clip:n,svgDraw:n=>(0,D.jsx)("g",{children:e?du(t,n,ru):pu(t,vu(t,n))}),canvasToDraw:Hl,canvasDraw:(n,o)=>{e?uu(n,t,o,ru):hu(n,t,vu(t,o))},drawOn:wu})};bu.defaultProps=mu.defaultProps;const ku=Array.isArray,Su=Math.round,Cu=(t,e)=>{const{mouseXY:n,currentItem:o,show:r,height:i,width:s}=e,{customX:a,stroke:l,opacity:c,strokeDasharray:h}=t;if(!r||null==o)return null;const u={x1:0,x2:s,y1:n[1],y2:n[1],stroke:l,strokeDasharray:h,opacity:c},d=a(t,e);return[u,{x1:d,x2:d,y1:0,y2:i,stroke:l,strokeDasharray:h,opacity:c}]},Du=t=>{const e=(0,r.useContext)(Ml);return(0,D.jsx)(Fl,{clip:!1,canvasDraw:(n,o)=>{const r=Cu(t,o);if(ku(r)){const{margin:t,ratio:o}=e,i=.5*o+t.left,s=.5*o+t.top;n.save(),n.setTransform(1,0,0,1,0,0),n.scale(o,o),n.translate(i,s),r.forEach((t=>{const e=oo(t.strokeDasharray).split(",").map((t=>+t));n.strokeStyle=ps(t.stroke,t.opacity),n.setLineDash(e),n.beginPath(),n.moveTo(t.x1,t.y1),n.lineTo(t.x2,t.y2),n.stroke()})),n.restore()}},canvasToDraw:Yl,drawOn:["mousemove","pan","drag"],svgDraw:e=>{const n=Cu(t,e);return ku(n)?(0,D.jsx)("g",{className:xt(Ua,t.className),children:n.map(((t,e)=>{let{strokeDasharray:n,...o}=t;return(0,D.jsx)("line",{strokeDasharray:oo(n),...o},e)}))}):null}})};Du.defaultProps={customX:(t,e)=>{let{xScale:n,xAccessor:o,currentItem:r,mouseXY:i}=e;return t.snapX?Su(n(o(r))):i[0]},opacity:.3,snapX:!0,stroke:"#000000",strokeDasharray:"ShortDash"};function Au(t){const{coordinate:e,show:n,type:o,orient:r,edgeAt:i,hideLine:s,lineStrokeDasharray:a}=t,{fill:l,opacity:c,fontFamily:h,fontSize:u,textFill:d,lineStroke:p,lineOpacity:f}=t,{stroke:g,strokeOpacity:m,strokeWidth:y}=t,{arrowWidth:x,rectWidth:v,rectHeight:w,rectRadius:b}=t,{x1:k,y1:S,x2:C,y2:D,dx:A}=t;if(!n)return null;let M,T;if(null!=e){let t,n,s,a;if("horizontal"===o)t=A+("right"===r?i+1:i-v-1),n=S-w/2-y,s=A+("right"===r?i+v/2:i-v/2),a=S;else{const e="bottom"===r?y-1:1-y;t=k-v/2,n=("bottom"===r?i:i-w)+e,s=k,a=("bottom"===r?i+w/2:i-w/2)+e}M={edgeXRect:t,edgeYRect:n,rectHeight:w+y,rectWidth:v,rectRadius:b,fill:l,opacity:c,arrowWidth:x,stroke:g,strokeOpacity:m,strokeWidth:y},T={edgeXText:s,edgeYText:a,textAnchor:"middle",fontFamily:h,fontSize:u,textFill:d,displayCoordinate:e}}return{coordinateBase:M,coordinate:T,orient:r,line:s?void 0:{opacity:f,stroke:p,strokeDasharray:a,x1:k,y1:S,x2:C,y2:D}}}const Mu=["mousemove","pan","drag"],Tu=t=>e=>(0,D.jsx)(zl,{clip:!1,svgDraw:n=>{const o=t(e,n);return null==o?null:function(t){const{className:e}=t,n=Au(t);if(null===n)return null;let o,r,i;if(n.line&&(o=(0,D.jsx)("line",{className:Ba,strokeOpacity:n.line.opacity,stroke:n.line.stroke,strokeDasharray:oo(n.line.strokeDasharray),x1:n.line.x1,y1:n.line.y1,x2:n.line.x2,y2:n.line.y2})),n.coordinateBase){const{rectWidth:t,rectHeight:e,arrowWidth:o}=n.coordinateBase,s="left"===n.orient?`M0,0L0,${e}L${t},${e}L${t+o},10L${t},0L0,0L0,0`:`M0,${o}L${o},${e}L${t+o},${e}L${t+o},0L${o},0L0,${o}`;r="left"===n.orient||"right"===n.orient?(0,D.jsx)("g",{transform:`translate(${n.coordinateBase.edgeXRect},${n.coordinateBase.edgeYRect})`,children:(0,D.jsx)("path",{d:s,className:Za,height:e,width:t,stroke:n.coordinateBase.stroke,strokeLinejoin:"miter",strokeOpacity:n.coordinateBase.strokeOpacity,strokeWidth:n.coordinateBase.strokeWidth,fill:n.coordinateBase.fill,fillOpacity:n.coordinateBase.opacity})},1):(0,D.jsx)("rect",{className:Za,x:n.coordinateBase.edgeXRect,y:n.coordinateBase.edgeYRect,height:e,width:t,fill:n.coordinateBase.fill,opacity:n.coordinateBase.opacity},1);const{edgeXText:a,edgeYText:l,textAnchor:c,fontFamily:h,fontSize:u,textFill:d,displayCoordinate:p}=n.coordinate;i=(0,D.jsx)("text",{x:a,y:l,textAnchor:c,fontFamily:h,fontSize:u,dy:".32em",fill:d,children:null!=p?p:""},2)}return(0,D.jsxs)("g",{className:e,children:[o,r,i]})}(o)},canvasDraw:(n,o)=>{const r=t(e,o);if(null==r)return null;!function(t,e){const{fontSize:n,fontFamily:o}=e;t.font=`${n}px ${o}`,t.textBaseline="middle";const r=Math.round(t.measureText(e.coordinate).width+10),i=Au({...e,rectWidth:r});if(null!==i){if(i.line){const e=oo(i.line.strokeDasharray).split(",").map((t=>+t));t.setLineDash(e),t.strokeStyle=ps(i.line.stroke,i.line.opacity),t.lineWidth=1,t.beginPath(),t.moveTo(i.line.x1,i.line.y1),t.lineTo(i.line.x2,i.line.y2),t.stroke()}if(t.setLineDash([]),i.coordinateBase){const{rectWidth:e,rectHeight:n,rectRadius:o,arrowWidth:r}=i.coordinateBase;t.fillStyle=ps(i.coordinateBase.fill,i.coordinateBase.opacity),i.coordinateBase.stroke&&(t.strokeStyle=ps(i.coordinateBase.stroke,i.coordinateBase.strokeOpacity),t.lineWidth=i.coordinateBase.strokeWidth);let s=i.coordinateBase.edgeXRect;const a=i.coordinateBase.edgeYRect,l=n/2;t.beginPath(),"right"===i.orient?(s-=r,t.moveTo(s,a+l),t.lineTo(s+r,a),t.lineTo(s+e+r,a),t.lineTo(s+e+r,a+n),t.lineTo(s+r,a+n),t.closePath()):"left"===i.orient?(t.moveTo(s,a),t.lineTo(s+e,a),t.lineTo(s+e+r,a+l),t.lineTo(s+e,a+n),t.lineTo(s,a+n),t.closePath()):o?function(t,e,n,o,r,i){t.beginPath(),t.moveTo(e+i,n),t.lineTo(e+o-i,n),t.quadraticCurveTo(e+o,n,e+o,n+i),t.lineTo(e+o,n+r-i),t.quadraticCurveTo(e+o,n+r,e+o-i,n+r),t.lineTo(e+i,n+r),t.quadraticCurveTo(e,n+r,e,n+r-i),t.lineTo(e,n+i),t.quadraticCurveTo(e,n,e+i,n),t.closePath()}(t,s,a,e,n,3):t.rect(s,a,e,n),t.fill(),i.coordinateBase.stroke&&t.stroke(),t.fillStyle=i.coordinate.textFill,t.textAlign="middle"===i.coordinate.textAnchor?"center":i.coordinate.textAnchor,t.fillText(i.coordinate.displayCoordinate,i.coordinate.edgeXText,i.coordinate.edgeYText)}}}(n,r)},canvasToDraw:Yl,drawOn:Mu}),_u="#525252",Pu="#ffffff",Nu="Helvetica Neue, Helvetica, Arial, sans-serif",ju=Tu(((t,e)=>{const{show:n,currentItem:o,chartConfig:{height:r}}=e;if(null==o)return null;const{orient:i,at:s,stroke:a,strokeOpacity:l,strokeWidth:c,rectRadius:h,rectWidth:u,rectHeight:d,fill:p,opacity:f,fontFamily:g,fontSize:m,textFill:y,customX:x}=t,{x:v,coordinate:w}=x(t,e);return{type:"vertical",hideLine:!0,edgeAt:"bottom"===s?r:0,coordinate:w,show:n,orient:i,fill:p,opacity:f,fontFamily:g,fontSize:m,textFill:y,stroke:a,strokeOpacity:l,strokeWidth:c,rectWidth:u,rectHeight:d,rectRadius:h,arrowWidth:0,x1:v,x2:v,y1:0,y2:r}}));ju.defaultProps={fill:_u,textFill:Pu,fontFamily:Nu,fontSize:13,yAxisPad:0,rectWidth:80,rectHeight:20,strokeOpacity:1,strokeWidth:1,orient:"bottom",at:"bottom",opacity:1,snapX:!0,customX:(t,e)=>{const{snapX:n,displayFormat:o}=t,{xScale:r,xAccessor:i,currentItem:s,mouseXY:a,displayXAccessor:l}=e,[c,h]=n?[r(i(s)),l(s)]:[a[0],r.invert(c)];return{x:c,coordinate:o(h)}}};const $u=Tu(((t,e)=>{const{displayFormat:n,yAccessor:o}=t,{chartConfig:r,currentCharts:i,currentItem:s,mouseXY:a,show:l}=e,{id:c,yScale:h}=r||{};if(null==a||i.indexOf(c)<0||!l||o&&!s)return null;const u=o?h(o(s)):a[1]-r.origin[1];return((t,e,n,o)=>{const{width:r}=o,{orient:i,at:s,rectWidth:a,rectHeight:l,dx:c,fill:h,opacity:u,fontFamily:d,fontSize:p,textFill:f,arrowWidth:g,stroke:m,strokeOpacity:y,strokeWidth:x}=n;return{coordinate:"NaNundefined"===e?"no data":e,show:!0,type:"horizontal",hideLine:!0,edgeAt:"right"===s?r:0,orient:i,fill:h,opacity:u,fontFamily:d,fontSize:p,textFill:f,stroke:m,strokeOpacity:y,strokeWidth:x,rectWidth:a,rectHeight:l,arrowWidth:g,dx:c,x1:0,x2:r,y1:t,y2:t}})(u,n(h.invert(u)),t,e)}));$u.defaultProps={fill:_u,textFill:Pu,fontFamily:Nu,fontSize:13,yAxisPad:0,rectWidth:50,rectHeight:20,orient:"left",at:"left",dx:0,arrowWidth:10,opacity:1,strokeOpacity:1,strokeWidth:1};const Eu=11,Fu="-apple-system, system-ui, 'Helvetica Neue', Ubuntu, sans-serif",Iu=t=>{let{className:e=fa,fontFamily:n=Fu,fontSize:o=Eu,children:r,...i}=t;return(0,D.jsx)("text",{className:e,fontFamily:n,fontSize:o,...i,children:r})},Lu="#4682b4",Ou=t=>{let{className:e=ga,fill:n=Lu,children:o,...r}=t;return(0,D.jsx)("tspan",{className:e,fill:n,...r,children:o})},Ru=["mousemove"],zu=t=>(0,D.jsx)(zl,{clip:!1,svgDraw:e=>{const{onClick:n,displayFormat:o,yAccessor:r,options:i,origin:s,textFill:a,labelFill:l,labelFontWeight:c,className:h,displayValuesFor:u,displayInit:d,fontFamily:p,fontSize:f,fontWeight:g}=t,{chartConfig:{width:m,height:y},fullData:x}=e,v=u(t,e)??fs(x);let w=d,b=d,k=d;if(void 0!==v){const t=r(v);void 0!==t&&(w=o(t.top),b=o(t.middle),k=o(t.bottom))}const S=eo(s),[C,A]=S(m,y),{sourcePath:M,windowSize:T,multiplier:_,movingAverageType:P}=i,N=`BB(${M}, ${T}, ${_}, ${P})`,j=`${w}, ${b}, ${k}`,$=us([C,A]);return(0,D.jsx)("g",{transform:$,className:h,onClick:n,children:(0,D.jsxs)(Iu,{x:0,y:0,fontFamily:p,fontSize:f,fontWeight:g,children:[(0,D.jsx)(Ou,{fill:l,fontWeight:c,children:N}),(0,D.jsx)("tspan",{x:0,dy:15,fill:a,children:j})]})})},drawOn:Ru});zu.defaultProps={className:ya,displayFormat:Er(".2f"),displayValuesFor:(t,e)=>e.currentItem,displayInit:"n/a",origin:[8,8],yAccessor:t=>t.bb};const Wu=t=>{let{color:e,displayName:n,fontSize:o,fontFamily:i,fontWeight:s,textFill:a,labelFill:l,labelFontWeight:c,value:h,origin:u,onClick:d,forChart:p,options:f}=t;const g=(0,r.useCallback)((t=>{void 0!==d&&d(t,{chartId:p,...f})}),[d,p,f]),m=us(u);return(0,D.jsxs)("g",{transform:m,children:[(0,D.jsx)("line",{x1:0,y1:2,x2:0,y2:28,stroke:e,strokeWidth:4}),(0,D.jsxs)(Iu,{x:5,y:11,fontFamily:i,fontSize:o,fontWeight:s,children:[(0,D.jsx)(Ou,{fill:l,fontWeight:c,children:n}),(0,D.jsx)("tspan",{x:5,dy:15,fill:a,children:h})]}),(0,D.jsx)("rect",{x:0,y:0,width:55,height:30,fill:"none",stroke:"none",onClick:g})]})},Xu=["mousemove"],Hu=t=>(0,D.jsx)(zl,{clip:!1,svgDraw:e=>{const{chartId:n,chartConfig:o,chartConfig:{height:r},fullData:i}=e,{className:s,displayInit:a,onClick:l,width:c,fontFamily:h,fontSize:u,fontWeight:d,textFill:p,labelFill:f,origin:g,displayFormat:m,displayValuesFor:y,options:x}=t,v=y(t,e)??fs(i),w=eo(g),[b,k]=w(c,r),[S,C]=o.origin,A=us([S+b,C+k]);return(0,D.jsx)("g",{transform:A,className:s,children:x.map(((t,e)=>{const o=v&&t.yAccessor(v),r=`${t.type} (${t.windowSize})`,i=o?m(o):a;return(0,D.jsx)(Wu,{origin:[c*e,0],color:t.stroke,displayName:r,value:i,options:t,forChart:n,onClick:l,fontFamily:h,fontSize:u,fontWeight:d,textFill:p,labelFill:f},e)}))})},drawOn:Xu});Hu.defaultProps={className:xa,displayFormat:Er(".2f"),displayInit:"n/a",displayValuesFor:(t,e)=>e.currentItem,origin:[0,10],width:65};const Yu=t=>{let{labelFill:e,labelFontWeight:n,text:o,valueFill:r,value:i}=t;return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(Ou,{fill:e,fontWeight:n,children:o}),(0,D.jsx)("tspan",{fill:r,children:i},"value_O")]})},Uu=["mousemove"],Bu=t=>(0,D.jsx)(zl,{clip:!1,svgDraw:e=>{const{accessor:n,changeFormat:o,className:r,displayTexts:i,displayValuesFor:s,fontFamily:a,fontSize:l,fontWeight:c,labelFill:h,labelFontWeight:u,ohlcFormat:d,onClick:p,percentFormat:f,textFill:g}=t,{chartConfig:{width:m,height:y},fullData:x}=e,v=s(t,e)??fs(x),{na:w}=i;let b=w,k=w,S=w,C=w,A=w;if(void 0!==v&&void 0!==n){const t=n(v);void 0!==t&&(b=d(t.open),k=d(t.high),S=d(t.low),C=d(t.close),A=`${o(t.close-t.open)} (${f((t.close-t.open)/t.open)})`)}const{origin:M}=t,[T,_]=eo(M)(m,y),P=eo(g)(v),N=us([T,_]);return(0,D.jsx)("g",{className:r,transform:N,onClick:p,children:(0,D.jsxs)(Iu,{x:0,y:0,fontFamily:a,fontSize:l,fontWeight:c,children:[(0,D.jsx)(Yu,{fill:h,fontWeight:u,text:i.o,valueFill:P,value:b}),(0,D.jsx)(Yu,{fill:h,fontWeight:u,text:i.h,valueFill:P,value:k}),(0,D.jsx)(Yu,{fill:h,fontWeight:u,text:i.l,valueFill:P,value:S}),(0,D.jsx)(Yu,{fill:h,fontWeight:u,text:i.c,valueFill:P,value:C}),(0,D.jsx)("tspan",{fill:P,children:` ${A}`},"value_Change")]})})},drawOn:Uu});Bu.defaultProps={className:va,fontFamily:Ja,fontWeight:"bold",accessor:t=>t,changeFormat:Er("+.2f"),displayTexts:{o:"O: ",h:" H: ",l:" L: ",c:" C: ",na:"n/a"},displayValuesFor:(t,e)=>e.currentItem,ohlcFormat:Er(".2f"),origin:[0,0],percentFormat:Er("+.2%")};const Zu=Er(".2f"),Vu="n/a",qu=(t,e)=>e.currentItem,Gu=[0,0],Ku=["mousemove"],Ju=t=>{const{className:e=fa,displayInit:n=Vu,displayFormat:o=Zu,displayValuesFor:r=qu,origin:i=Gu,fontFamily:s,fontSize:a,fontWeight:l,yAccessor:c,options:h,labelFill:u,labelFontWeight:d,textFill:p,onClick:f}=t;return(0,D.jsx)(zl,{clip:!1,svgDraw:g=>{const{chartConfig:{width:m,height:y}}=g,x=r(t,g),v=x&&c(x),w=v&&o(v)||n,b=eo(i),[k,S]=b(m,y),C=`RSI (${h.windowSize}): `;return(0,D.jsx)("g",{className:e,transform:`translate(${k}, ${S})`,onClick:f,children:(0,D.jsxs)(Iu,{x:0,y:0,fontFamily:s,fontSize:a,fontWeight:l,children:[(0,D.jsx)(Ou,{fill:u,fontWeight:d,children:C}),(0,D.jsx)("tspan",{fill:p,children:w})]})})},drawOn:Ku})},Qu={sourcePath:"close",multiplier:2,movingAverageType:"sma",windowSize:20},td={sourcePath:"close",windowSize:10},ed={sourcePath:"close",windowSize:14},nd={sourcePath:"close",windowSize:10};function od(){let t=Qu;const e=e=>{const{windowSize:n,multiplier:o,movingAverageType:r,sourcePath:i}=t,s=to(i),a="ema"===r?function(){let t=td;const e=e=>{const{windowSize:n,sourcePath:o}=t,r=to(o),i=2/(n+1);let s,a=0,l=0;return e.map(((t,e)=>{const o=r(t,e);if(void 0!==s||void 0!==o){if(!(e<n+l-1)){if(e===n+l-1){a+=o;const t=a/n;return s=t,t}{const t=o*i+(1-i)*s;return s=t,t}}a+=o}else l++}))};return e.undefinedLength=()=>t.windowSize-1,e.options=function(){return arguments.length?(t={...td,...arguments.length<=0?void 0:arguments[0]},e):t},e}().options({windowSize:n,sourcePath:i}):no().windowSize(n).accumulator((t=>Pn(t))).sourcePath(i),l=no().windowSize(n).accumulator((t=>{const e=t[t.length-1].mean,n=((t,e)=>{const n=((t,e)=>{let n,o=0,r=0,i=0;if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(n=e-r,r+=n/++o,i+=n*(e-r));else{let s=-1;for(let a of t)null!=(a=e(a,++s,t))&&(a=+a)>=a&&(n=a-r,r+=n/++o,i+=n*(a-r))}if(o>1)return i/(o-1)})(t,e);return n?An(n):n})(t,(t=>s(t.datum)));return void 0===n?void 0:{top:e+o*n,middle:e,bottom:e-o*n}})),c=Jn().combine(((t,e)=>({datum:t,mean:e})));return l(c(e,a(e)))};return e.undefinedLength=()=>t.windowSize-1,e.options=function(){return arguments.length?(t={...Qu,...arguments.length<=0?void 0:arguments[0]},e):t},e}let rd=0;function id(){let t,e,n,o,r,i=rd++;function s(){}return s.id=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],s):i},s.accessor=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],s):t},s.stroke=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],s):e||(e=ds(i))},s.fill=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],s):n||(n=ds(i))},s.echo=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],s):o},s.type=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],s):r},s}const sd={merge:!0},ad=(t,e,n,o)=>{const r=function(r,i){if(void 0===i&&(i=sd),i.merge){if(!e.accessor())throw new Error(`Set an accessor to ${t} before calculating`);return o(r)}return n(r)};return cs(r,e,"id","accessor","stroke","fill","echo","type"),cs(r,n,"options","undefinedLength"),cs(r,o,"merge","skipUndefined"),r},ld=()=>{const t=id().type("SMA").accessor((t=>t.sma)),e=function(){let t=nd;function e(e){const{windowSize:n,sourcePath:o}=t,r=no().windowSize(n).sourcePath(o).accumulator((t=>Pn(t)));return r(e)}return e.undefinedLength=()=>t.windowSize-1,e.options=function(){return arguments.length?(t={...nd,...arguments.length<=0?void 0:arguments[0]},e):t},e}(),n=hs().algorithm(e).merge(((t,e)=>{t.sma=e}));return ad("SMA",t,e,n)},cd="BollingerBand",hd=Math.round,ud={pointerEvents:"all",transform:"translate(0, 50px)"},dd={transform:"translate(-40px, 0)"},pd={transform:"translate(-56px, 0)"},fd=(t,e,n)=>`translate (${t-20}, ${e-8+n/4})`,gd=t=>{let{zoomMultiplier:e,heightFromBase:n,r:o,fill:i,fillOpacity:s,stroke:a,strokeWidth:l,textFill:c}=t;const h=(0,r.useContext)(Ws),u=t=>{const{xAxisZoom:n,xScale:o,plotData:r,xAccessor:i}=h,s=o(i(fs(r))),a=t>0?1*e:1/e,[l,c]=o.domain(),[u,d]=o.range().map((t=>s+(t-s)*a)).map(o.invert),p=Qo(l,u),f=Qo(c,d);n([p(.2),f(.2)])},{chartConfig:{width:d,height:p}}=h,f=hd(d/2),g=p-n,m=f-8,y=f+16+2*o,x=fd(f-16-2*o,g,o),v=fd(m,g,o),w=g+o/2,b=m-o/2,k=y-o/2;return(0,D.jsxs)("g",{style:ud,children:[(0,D.jsx)("g",{transform:x,children:(0,D.jsx)("path",{d:"M19,13H5V11H19V13Z",fill:c})}),(0,D.jsx)("circle",{style:dd,cx:b,cy:w,fill:i,fillOpacity:s,stroke:a,strokeWidth:l,r:o,onClick:()=>u(1)}),(0,D.jsx)("g",{transform:v,children:(0,D.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z",fill:c})}),(0,D.jsx)("circle",{style:pd,cx:k,cy:w,fill:i,fillOpacity:s,stroke:a,strokeWidth:l,r:o,onClick:()=>u(-1)})]})};gd.defaultProps={fill:"#ffffff",fillOpacity:.4,heightFromBase:32,r:16,stroke:"grey",strokeWidth:1,textFill:"#000000",zoomMultiplier:1.5};const md=t=>function(e,n){const{widthRatio:o}=e,{xScale:r,xAccessor:i,plotData:s}=n,a=i(((t,e)=>{if(!e||!t)return t?t[0]:void 0;for(let n=0;n<t.length;n++){const o=t[n];if(null!=e(o))return o}})(s));return Math.abs(r(t.offset(a,1))-r(a))*o},yd={UP:"black",DOWN:"#980032",TRANSPARENT:"transparent"},xd=t=>"string"==typeof t,vd=(t,e)=>-1!==t.indexOf(e),wd=Er(".8~"),bd=Er(".4f"),kd=Er(".2f"),Sd=Er(".4s"),Cd=Er(".0s"),Dd=t=>{if(!t||!xd(t))return fi;const e=parseInt(t,10);return vd(t,"m")?hi.every(e):vd(t,"h")?di.every(e):vd(t,"d")?fi.every(e):vd(t,"w")?vi.every(e):vd(t,"M")?bi.every(e):fi},Ad=t=>xd(t)&&(vd(t,"m")||vd(t,"h"))?os("%m-%d %H:%M"):os("%Y-%m-%d");let Md,Td,_d=[];const Pd=document&&"ontouchstart"in document.documentElement,Nd=t=>(0,r.useMemo)((()=>md(t)),[t]),jd="rs-tooltip",$d=(t,e)=>(t||{}).close>(e||{}).close?yd.UP:yd.DOWN,Ed=(t,e)=>(t||{}).close>(t||{}).open?yd.TRANSPARENT:$d(t,e),Fd={top:"#964b00",middle:"#000000",bottom:"#964b00"},Id=(t,e)=>({type:"SMA",yAccessor:t,stroke:e.stroke,windowSize:e.windowSize}),Ld=[5,-90],Od=[5,320],Rd=[190,432],zd=t=>t.bb,Wd=t=>{let{id:e,height:n,timeInterval:o,timeFormat:i,sma20:s,sma50:a,bb:l,yExtents:c,origin:h}=t;const u=Nd(o),[d,p]=(0,r.useMemo)((()=>[s.accessor(),s.options()]),[s]),[f,g]=(0,r.useMemo)((()=>[a.accessor(),a.options()]),[a]),m=(0,r.useMemo)((()=>[Id(d,p),Id(f,g)]),[d,p,f,g]),y=(0,r.useMemo)((()=>l.options()),[l]);return(0,D.jsxs)(Xs,{id:e,height:n,yExtents:c,origin:h,children:[(0,D.jsx)(Zc,{axisAt:"right",orient:"right",ticks:5,stroke:"black"}),(0,D.jsx)(eu,{yAccessor:zd,stroke:Fd,fill:"#4682b4"}),(0,D.jsx)(Ch,{yAccessor:d,stroke:p.stroke}),(0,D.jsx)(Ch,{yAccessor:f,stroke:g.stroke}),(0,D.jsx)(qh,{width:u,fill:Ed,stroke:$d,wickStroke:$d,candleStrokeWidth:.8}),(0,D.jsx)($u,{at:"right",orient:"right",displayFormat:bd}),(0,D.jsx)(Bu,{fontSize:15,xDisplayFormat:i,textFill:"black",ohlcFormat:wd,forChart:3,origin:Ld}),(0,D.jsx)(Hu,{className:jd,width:100,fontSize:15,origin:Od,options:m}),(0,D.jsx)(zu,{className:jd,fontSize:15,origin:Rd,yAccessor:zd,options:y}),Pd&&(0,D.jsx)(gd,{})]})},Xd=(t,e)=>(t||{}).close>(e||{}).close?yd.UP:yd.DOWN,Hd=t=>t.volume,Yd=t=>{let{id:e,height:n,timeInterval:o,timeFormat:r,yExtents:i,origin:s}=t;const a=Nd(o);return(0,D.jsxs)(Xs,{id:e,height:n,yExtents:i,origin:s,children:[(0,D.jsx)(Zc,{axisAt:"left",orient:"left",ticks:3,tickFormat:Cd,stroke:"black"}),(0,D.jsx)($u,{at:"left",orient:"left",displayFormat:Sd}),(0,D.jsx)(bu,{width:a,yAccessor:Hd,fill:Xd,stroke:Xd}),(0,D.jsx)(Hc,{axisAt:"bottom",orient:"bottom",ticks:6}),(0,D.jsx)(ju,{at:"bottom",orient:"bottom",displayFormat:r})]})},Ud={line:"#000000",top:"#b8b2bb",middle:"transparent",bottom:"#b8c2cc",outsideThreshold:"#b300b3",insideThreshold:"#4699cb"},Bd=[30,50,70],Zd=t=>t.rsi,Vd=t=>{let{id:e,height:n,width:o,rsi:i,yExtents:s,origin:a}=t;const l=(0,r.useMemo)((()=>[o-160,10]),[o]),c=(0,r.useMemo)((()=>i.options()),[i]);return(0,D.jsxs)(Xs,{id:e,height:n,yExtents:s,origin:a,children:[(0,D.jsx)(Zc,{axisAt:"right",orient:"right",stroke:"black",tickStroke:"#4699cb",tickValues:Bd}),(0,D.jsx)($u,{at:"right",orient:"right",displayFormat:kd}),(0,D.jsx)(Ih,{yAccessor:Zd,stroke:Ud}),(0,D.jsx)(Ju,{className:"rs-tooltip",fontSize:15,yAccessor:Zd,origin:l,options:c})]})},qd=t=>t.close,Gd=t=>{let{id:e,height:n,yExtents:o,origin:r}=t;return(0,D.jsxs)(Xs,{id:e,height:n,yExtents:o,origin:r,children:[(0,D.jsx)(Zc,{axisAt:"left",orient:"left",stroke:"black",ticks:5}),(0,D.jsx)(Ch,{yAccessor:qd,stroke:"black"}),(0,D.jsx)($u,{at:"left",orient:"left",displayFormat:kd})]})},Kd={left:50,right:80,top:0,bottom:30},Jd={width:"98%"},Qd=t=>t?t.date:0,tp=function(){return wr.apply(as(_i,Pi,Si,wi,mi,pi,ui,ci,li,os).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}(),ep=(t,e)=>[0,e-510],np=[0,100],op=t=>[t.high,t.low],rp=(t,e)=>[0,e-420],ip=t=>t.volume,sp=(t,e)=>[0,e-120],ap=(t,e,n)=>ld().options({windowSize:e,stroke:n}).merge(((e,n)=>{e[t]=n})).accessor((e=>e[t])),lp=(()=>{const t=id().type(cd),e=od(),n=hs().algorithm(e).merge(((t,e)=>{t.bollingerBand=e}));return ad(cd,t,e,n)})().merge(((t,e)=>{t.bb=e})).accessor((t=>t.bb)),cp=(()=>{const t=id().type("RSI").accessor((t=>t.rsi)),e=function(){let t=ed;const e=e=>{let n,o;const{windowSize:r,sourcePath:i}=t,s=to(i),a=no().windowSize(r).accumulator((t=>{const e=void 0!==n?(n*(r-1)+t[t.length-1].gain)/r:Pn(t,(t=>t.gain));if(void 0===e)return;const i=void 0!==o?(o*(r-1)+t[t.length-1].loss)/r:Pn(t,(t=>t.loss));return void 0!==i?(n=e,o=i,100-100/(1+e/i)):void 0})),l=no().windowSize(2).undefinedValue((()=>[0,0])).accumulator((t=>{const e=t[0],n=t[1],o=s(n)-s(e);return{gain:Math.max(o,0),loss:Math.abs(Math.min(o,0))}}));return a(l(e))};return e.undefinedLength=()=>t.windowSize-1,e.options=function(){return arguments.length?(t={...ed,...arguments.length<=0?void 0:arguments[0]},e):t},e}(),n=hs().algorithm(e).merge(((t,e)=>{t.rsi=e}));return ad("RSI",t,e,n)})().options({windowSize:14}).merge(((t,e)=>{t.rsi=e})).accessor((t=>t.rsi)),hp=(0,r.memo)((t=>{let{id:e,style:n,data:o,height:s,timeframe:a}=t;const[l]=function(t){let{id:e,minWidth:n=100,initialWidth:o=1e3}=void 0===t?{}:t;const s=(0,r.useRef)(),[a,l]=(0,r.useState)(o),c=(0,r.useCallback)((()=>{const t=e?document.getElementById(e):i(s);if(t){const{width:e,paddingLeft:o,paddingRight:r}=window.getComputedStyle(t),i=parseFloat(e)-(parseFloat(o)+parseFloat(r));l(Math.round(Math.max(i,n)))}}),[]);return(0,r.useLayoutEffect)(c,[]),(0,r.useEffect)((()=>(window.addEventListener("resize",c),()=>window.removeEventListener("resize",c))),[]),[a,s]}({id:e}),c=(0,r.useRef)(150),[h]=(0,r.useState)(20),[u]=(0,r.useState)(50),d=(0,r.useMemo)((()=>ap("sma20",h,"green")),[h]),p=(0,r.useMemo)((()=>ap("sma50",u,"orange")),[u]),f=(0,r.useMemo)((()=>p(d(lp(cp(o))))),[o,d,p]),[g,m]=(0,r.useMemo)((()=>[Dd(a),Ad(a)]),[a]),y=(0,r.useMemo)((()=>((t,e,n)=>{const o=t.length-1,r=o<n?(t[0]||{}).date:(t[o-n]||{}).date,i=(t.slice(-1)[0]||{}).date,s="1m"===e?i+3e5:i;return r===Md&&s===Td||(Md=r),Td=s,_d=[r,s]})(f,a,i(c))),[f,a]),x=(0,r.useMemo)((()=>t=>{c.current=t}),[]);return(0,D.jsx)("div",{id:e,style:{...Jd,...n},children:(0,D.jsxs)(_l,{ratio:2,width:l,height:s,margin:Kd,data:f,xAccessor:Qd,displayXAccessor:Qd,xScale:tp,xExtents:y,onZoom:x,children:[(0,D.jsx)(Vd,{id:1,height:100,width:l,rsi:cp,yExtents:np,origin:ep}),(0,D.jsx)(Gd,{id:2,height:100,yExtents:op,origin:ep}),(0,D.jsx)(Wd,{id:3,height:300,timeInterval:g,timeFormat:m,sma20:d,sma50:p,bb:lp,yExtents:op,origin:rp}),(0,D.jsx)(Yd,{id:4,height:100,timeInterval:g,timeFormat:m,yExtents:ip,origin:sp}),(0,D.jsx)(Du,{})]})})})),up={providerTitle:y.INITIAL_PROVIDER_TITLE,itemTitle:y.INITIAL_ITEM_TITLE,data:y.DF_DATA,timeframe:y.DF_TIMEFRAME,fetchStatus:T.INITIAL,isLiveUpdating:!1},dp=Object.freeze({LOADING:"DATA_LOADING",LOADED:"DATA_LOADED",LOAD_FAILED:"DATA_LOAD_FAILED",UPDATE:"DATA_UPDATE"}),pp=(t,e)=>{switch(e.type){case dp.LOADING:return{...t,fetchStatus:T.LOADING};case dp.LOADED:{const{data:n}=e;return(t=>Array.isArray(t)||t.length>20)(n)?{...t,data:e.data,providerTitle:e.providerTitle,itemTitle:e.itemTitle,timeframe:e.timeframe,fetchStatus:T.SUCCESS}:t}case dp.LOAD_FAILED:return{...t,fetchStatus:T.FAILED};case dp.UPDATE:return{...t,data:[...t.data,e.point]};default:throw new TypeError("Not existed action "+e.type)}},fp="wss://stream.binance.com:9443/ws/",gp="@kline_1m";let mp;function yp(t,e,n,o,r){let i;mp=new WebSocket(`${fp}${t}${gp}`),mp.addEventListener("open",(function(){i=(new Date).getMinutes(),n()})),mp.addEventListener("message",(function(t){try{const{E:n,k:o}=JSON.parse(t.data),s=new Date(n),a=s.getMinutes();i!==a?(i=a,e(((t,e)=>({date:t,high:parseFloat(e.h),low:parseFloat(e.l),open:parseFloat(e.o),close:parseFloat(e.c),volume:parseFloat(e.v)}))(n,o)),r("")):r(s.getSeconds())}catch(t){console.log(t)}})),mp.addEventListener("error",(function(t){o()})),mp.addEventListener("close",(function(t){o()}))}const xp={startLiveUpdate:t=>{let{pair:e,onMessage:n,onOpen:o,onClose:r,onSecond:i}=t;yp((t=>(""+t).replace("/","").toLowerCase())(e),n,o,r,i)},stopLiveUpdate:()=>{try{void 0===(t=1e3)&&(t=1005),mp&&mp.close(t)}catch(t){console.log(t)}var t}},vp=t=>{let{appSettings:e,theme:n,setThemeId:o,dispatch:r,setLiveUpdating:i}=t;return{appSettings:e,theme:n,setThemeId:o,dataAction:{loading:()=>r({type:dp.LOADING}),loadData:t=>{let{timeframe:e=y.DF_TIMEFRAME,...n}=t;i({isLiveUpdating:!1}),xp.stopLiveUpdate(),r({type:dp.LOADED,timeframe:e,...n})},loadFailed:()=>r({type:dp.LOAD_FAILED})},onLiveUpdate:t=>{xp.startLiveUpdate({pair:t,onMessage:(t,e)=>r({type:dp.UPDATE,point:t}),onOpen:()=>i({isLiveUpdating:!0}),onClose:()=>i({isLiveUpdating:!1}),onSecond:t=>i({isLiveUpdating:!0,sec:t})})},onStopUpdate:()=>{xp.stopLiveUpdate()}}},wp={paddingTop:8},bp={isLiveUpdating:!1,sec:""},kp=()=>{const[t,e]=(0,r.useState)(1),[n,o]=(0,r.useReducer)(pp,up),{providerTitle:i,itemTitle:s,data:a,timeframe:d,fetchStatus:p}=n,[f,g]=(0,r.useState)(bp),m=l((()=>vp({appSettings:v,theme:S,setThemeId:e,dispatch:o,setLiveUpdating:g})));return(0,D.jsx)(c.Provider,{value:m,children:(0,D.jsx)(h.Provider,{value:t,children:(0,D.jsxs)(u.Provider,{value:f,children:[(0,D.jsx)(Dn,{fetchStatus:p,providerTitle:i,itemTitle:s,timeframe:d}),(0,D.jsx)("main",{style:wp,children:(0,D.jsx)(hp,{id:"chart_wrapper",height:550,data:a,timeframe:d})})]})})})};(0,o.s)(document.getElementById("app")).render((0,D.jsx)(kp,{}))},745:(t,e,n)=>{var o=n(935);e.s=o.createRoot,o.hydrateRoot},251:(t,e,n)=>{var o=n(294),r=Symbol.for("react.element"),i=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(t,e,n){var o,i={},c=null,h=null;for(o in void 0!==n&&(c=""+n),void 0!==e.key&&(c=""+e.key),void 0!==e.ref&&(h=e.ref),e)s.call(e,o)&&!l.hasOwnProperty(o)&&(i[o]=e[o]);if(t&&t.defaultProps)for(o in e=t.defaultProps)void 0===i[o]&&(i[o]=e[o]);return{$$typeof:r,type:t,key:c,ref:h,props:i,_owner:a.current}}e.Fragment=i,e.jsx=c,e.jsxs=c},893:(t,e,n)=>{t.exports=n(251)}},t=>{var e;e=988,t(t.s=e)}]);