/*! For license information please see app_09065877c03d9cf1f920.js.LICENSE.txt */
"use strict";(self.webpackChunkTA_Chart=self.webpackChunkTA_Chart||[]).push([[143],{34:(t,e,n)=>{var o=n(745),r=n(294);const i=t=>(t||{}).current,s=(t,e)=>{t&&(t.current=e)},a=t=>{const e=i(t);return e&&e.style||{}},l=t=>{const e=(0,r.useRef)();return e.current||(e.current=t())},c=(0,r.createContext)({}),h=(0,r.createContext)(),u=(0,r.createContext)(),d=Math.random,p=()=>d()*(d()>.5?1:-1),f=(t,e)=>t>e?t+.2:e+.2,g=(t,e)=>t>e?e-.2:t-.2,m={INITIAL_PROVIDER_TITLE:"Data Provider (Random)",INITIAL_ITEM_TITLE:"Item",PROXY:"http://127.0.0.1:3000/proxy",RATE_LIMIT:3e3,DF_DATA:(()=>{const t=new Date,e=[];let n,o;for(let r=0;r<100;r++)o=1+p(),n=1+p(),e.push({date:t.getTime()-864e5*r,open:o,close:n,high:f(o,n),low:g(o,n)});return e.reverse()})(),DF_TIMEFRAME:"1d"},y=Object.freeze(m);let x=y.PROXY;const v={proxy:t=>t?(x=t,!0):x||"",clearProxy:()=>{x=""}},w={1:"#5f5f5f",2:"#e1e1e1",3:"#e8e0cb"},b={1:{},2:{backgroundColor:"#d4d4d4"},3:{backgroundColor:"#e8dcbe"}},k={getBgColor:t=>w[""+t],getHeaderStyle:t=>b[""+t],getDrawerStyle:t=>b[""+t]},S=k;var C=n(893);const D="Logo of web app TA Chart v0.3.0",A=t=>{let{className:e,style:n,title:o=D}=t;return(0,C.jsx)("span",{className:e,style:n,title:o,children:(0,C.jsxs)("svg",{viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:"2",strokeWidth:"2",children:[(0,C.jsx)("rect",{ry:"1.8825414",rx:"194.14471",y:"1.434558",x:"19.176462",height:"12.460618",width:"10.85316",fill:"#8ecc2d",stroke:"#8ecc2d"}),(0,C.jsx)("rect",{ry:"1.87537",rx:"204.478",y:"16.639841",x:"8.8410215",height:"13.752699",width:"18.307165",fill:"#232f3b",stroke:"#232f3b"}),(0,C.jsx)("rect",{ry:"1.87537",rx:"204.478",y:"3.4229634",x:"2.5897937",height:"10.894996",width:"10.001963",fill:"#a487d4",stroke:"#a487d4"})]})})},M=Object.freeze({INITIAL:"INITIAL",LOADING:"LOADING",SUCCESS:"SUCCESS",FAILED:"FAILED"}),T=()=>({}),_=()=>(0,r.useReducer)(T)[1],P="#2f7ed8",N=(t,e,n)=>({backgroundColor:t,width:e+"%",transition:n,opacity:1}),j=(t,e,n)=>i(t)?(s(t,!1),N(e,0)):N(e,((t,e)=>t<0?0:t>=100?(s(e,!0),100):t)(n,t),"width 500ms linear"),E=t=>{let{color:e=P,completed:n}=t;const o=_(),a=(0,r.useRef)(!1),l=(0,r.useRef)(null);(0,r.useEffect)((()=>{i(a)&&s(l,setTimeout(o,800))})),(0,r.useEffect)((()=>()=>{clearTimeout(i(l))}),[]);const c=j(a,e,n);return(0,C.jsx)("div",{className:"progress-line",style:c})},I="#2f7ed8",F=(t,e)=>[t,e],L=(0,r.memo)((t=>{let{fetchStatus:e}=t;const[n,o]=(t=>t===M.LOADING?F(35,I):t===M.SUCCESS?F(100,I):t===M.FAILED?F(100,"#ed5813"):F(0,I))(e);return(0,C.jsx)(E,{color:o,completed:n})})),O=t=>{const[e,n]=(0,r.useState)((()=>!!t));return[e,(0,r.useCallback)((t=>{(t=>"boolean"==typeof t)(t)?n(t):n((t=>!t))}),[])]},R={position:"absolute",top:0,right:16},z={transform:"translateX(334px)",pointerEvents:"none"},W={transform:"translate(0px, 0px)"},X={display:"none",opacity:0,zIndex:-1,transition:"opacity 195ms cubic-bezier(0.4, 0, 0.2, 1) 0ms"},H={display:"block",opacity:1,zIndex:1e3,transition:"opacity 225ms cubic-bezier(0.4, 0, 0.2, 1) 0ms"},Y=t=>{let{btStyle:e,children:n}=t;const[o,i]=O();(0,r.useEffect)((()=>{document.body.style.overflowY=o?"hidden":"auto"}),[o]);const s=o?W:z,a=o?H:X,l=o?i:void 0;return[(0,C.jsx)("button",{className:"drawer-bt",style:{...R,...e},"aria-label":"Open Drawer",onClick:i,children:(0,C.jsx)("span",{className:"drawer-span",children:(0,C.jsxs)("svg",{className:"drawer-svg",focusable:"false",viewBox:"0 0 24 24","aria-hidden":"true",children:[(0,C.jsx)("path",{fill:"none",d:"M0 0h24v24H0z"}),(0,C.jsx)("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"})]})})},"bt-drawer"),(0,C.jsx)("div",{role:"presentation","aria-hidden":!o,className:"drawer-modal",style:a,onClick:l},"wrapper"),(0,C.jsx)("aside",{className:"drawer",style:s,children:(0,r.cloneElement)(n,{onCloseDrawer:i})},"aside")]},B={padding:3},U=t=>{let{style:e,tabIndex:n=-1,onClick:o}=t;return(0,C.jsx)("button",{className:"svg-close",style:e,tabIndex:n,onClick:o,children:(0,C.jsxs)("svg",{viewBox:"0 0 12 12",width:"100%",height:"100%",preserveAspectRatio:"none",xmlns:"http://www.w3.org/2000/svg",style:B,strokeWidth:"2",stroke:"#f44336",strokeLinecap:"round",children:[(0,C.jsx)("path",{d:"M 0,0 L 12,12"}),(0,C.jsx)("path",{d:"M 12,0 L 0,12"})]})})},Z={backgroundColor:"#1b2836"},V=(t,e)=>t===e?Z:void 0,q=t=>{let{style:e,tabIndex:n=-1,initialValue:o=1,oneC:i="One",twoC:s="Two",threeC:a="Three",onClick:l}=t;const[c,h]=(0,r.useState)(o),u=V(c,1),d=V(c,2),p=V(c,3),f=t=>{l(t),h(t)};return(0,C.jsxs)("div",{className:"bt-triple",style:e,children:[(0,C.jsx)("button",{className:"bt-triple__one",style:u,tabIndex:n,onClick:f.bind(null,1),children:i}),(0,C.jsx)("button",{className:"bt-triple__two",style:d,tabIndex:n,onClick:f.bind(null,2),children:s}),(0,C.jsx)("button",{className:"bt-triple__three",style:p,tabIndex:n,onClick:f.bind(null,3),children:a})]})},G=t=>{t&&(document.body.style.backgroundColor=t)},$="drawer__title",K={TITLE:{paddingTop:12,paddingBottom:8},BT_TRIPLE:{marginRight:8},BT_CLOSE:{position:"relative",top:4}},J=t=>{let{onClose:e,setThemeId:n}=t;const{theme:o}=(0,r.useContext)(c);return(0,C.jsxs)("div",{className:$,style:K.TITLE,children:[(0,C.jsx)(q,{style:K.BT_TRIPLE,oneC:"GREY",twoC:"LIGHT",threeC:"SAND",onClick:t=>{G(o.getBgColor(t)),n(t)}}),(0,C.jsx)(U,{style:K.BT_CLOSE,onClick:e})]})},Q=Date.now||(()=>new Date.getTime),tt=function(t,e){void 0===e&&(e=800);let n=0;return function(){const o=Q();if(o-n>e)return n=o,t(...arguments)}},et=(t,e,n)=>(0,r.useCallback)(tt(t,n),e||[]),nt=t=>{let{style:e,pages:n,pageCurrent:o,onPrevPage:i,onNextPage:s}=t;return n.map(((t,n)=>(0,r.cloneElement)(t,{style:e,pageCurrent:o,pageNumber:n+1,onPrevPage:i,onNextPage:s})))},ot={position:"absolute",overflow:"hidden"},rt={display:"flex",flexFlow:"row nowrap",alignItems:"flex-start",overflowX:"hidden",transition:"all 750ms ease-out"},it=t=>parseInt(t.style.transform.substr(11).replace("px","").replace(")",""),10),st=t=>{let{pageWidth:e=330,maxPages:n=3,initialPageId:o,pageRouter:a}=t;const l=(0,r.useRef)(),c=(0,r.useRef)(0),h=(0,r.useRef)({width:n*e+"px"}),u=(0,r.useRef)({width:e+"px"}),[d,p]=(0,r.useState)({pageCurrent:1,pages:[(0,r.createElement)(a[o],{key:o})]}),{pageCurrent:f,pages:g}=d,m=et((()=>{p((t=>(t.pageCurrent>1&&(t.pageCurrent-=1,s(c,-1)),{...t})))})),y=et((t=>{p((e=>{const{pages:n}=e,o=((t,e)=>t.findIndex((t=>t.key===e)))(n,t);var i,l;return e.pages=-1!==o?(l=o,[(i=n)[0],i.splice(l,1)[0],...i.slice(1)]):((t,e)=>[t[0],e,...t.slice(1)])(n,(0,r.createElement)(a[t],{key:t})),e.pageCurrent+=1,s(c,1),{...e}}))})),x=((t,e,n)=>{const o=i(e),r=i(n);let a=0;if(0!==r&&o){const e=it(o);a=1===r?e-t:e+t,s(n,0)}else 0===r&&o&&(a=it(o));return{transform:"translateX("+a+"px)"}})(e,l,c),v={...i(h),...rt,...x};return(0,C.jsx)("div",{style:ot,children:(0,C.jsx)("div",{ref:l,style:v,children:(0,C.jsx)(nt,{style:i(u),pages:g,pageCurrent:f,onPrevPage:m,onNextPage:y})})})},at=()=>{},lt=function(t,e){void 0===t&&(t=at),void 0===e&&(e=0);const n=(0,r.useRef)(null);return(0,r.useCallback)((o=>{if(0===e)return void t(o);const r=n.current,{timeStamp:i}=o;(null==r||i-r>e)&&(t(o),n.current=i)}),[e,t])},ct=Array.isArray,ht=t=>ct(t)?t[0]?t[1]:"":t||"",ut=(t,e)=>{const n=ht(t),o=ht(e);return n?o?n+" "+o:n:o||void 0},dt=Array.isArray,pt=t=>dt(t)?t[0]?t[1]:void 0:t||void 0,ft=(t,e)=>{const n=pt(t),o=pt(e);return n?o?{...n,...o}:n:o||void 0},gt={textDecoration:"underline"},mt=t=>{let{className:e,style:n,caption:o="",accessKey:r,children:i}=t;const s=((t,e)=>t?e.toLowerCase().indexOf(t):-1)(r,o),a=-1===s?o:((t,e)=>{const n=e.substring(0,t),o=e.substring(t,t+1),r=e.substring(t+1);return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("span",{children:n}),(0,C.jsx)("span",{style:gt,children:o}),(0,C.jsx)("span",{children:r})]})})(s,o);return(0,C.jsxs)("span",{className:e,style:n,children:[a,i]})},yt="bt-flat__div",xt={color:"#607d8b"},vt=(0,r.forwardRef)(((t,e)=>{let{className:n,style:o,clDiv:i=yt,clCaption:s,isPrimary:a,title:l="",caption:c,accessKey:h,timeout:u=500,onClick:d,children:p}=t;const f=(0,r.useRef)(),g=lt(d,u);(0,r.useImperativeHandle)(e,(()=>({focus:()=>{const t=f.current;t&&t.focus()}})),[]);const m=ut("bt-flat",n),y=ut("bt-flat__span",s),x=ft(o,[a,xt]),v=((t,e)=>e?t+" ["+e+"]":t)(l,h);return(0,C.jsx)("button",{ref:f,className:m,style:x,accessKey:h,tabIndex:0,title:v,onClick:g,children:(0,C.jsxs)("div",{className:i,children:[(0,C.jsx)(mt,{className:y,caption:c,accessKey:h}),p]})})})),wt=vt,bt="drawer__list-bt",kt={listStyleType:"none"},St=t=>{let{style:e,onNextPage:n}=t;return(0,C.jsxs)("ul",{style:{...kt,...e},children:[(0,C.jsx)("li",{children:(0,C.jsx)(wt,{className:bt,caption:"App Settings",onClick:()=>n("p1-1")})}),(0,C.jsx)("li",{children:(0,C.jsx)(wt,{className:bt,caption:"AltCoins",onClick:()=>n("p1-2")})})]})},Ct=t=>{let{onClick:e}=t;return(0,C.jsx)(wt,{className:"drawer__list-bt",caption:"< Menu",onClick:e})},Dt=t=>{let{item:e,propCaption:n}=t;return(0,C.jsx)("span",{children:e[n]})},At="zhn-select",Mt=At+"__input",Tt=At+"__spinner",_t=Tt+"--failed",Pt=At+"__input__hr",Nt=At+"__options",jt=Nt+"__div",Et=At+"__row",It=Et+"--active",Ft=At+"__footer",Lt=Ft+"__index",Ot=Ft+"__bts",Rt=Ft+"--margin",zt=(t,e)=>t?-1!==(""+t).indexOf("%")?{...e,width:t}:{...e,width:t+"px"}:null,Wt=t=>{let{className:e="",style:n,caption:o="",onClick:r,...i}=t;return(0,C.jsx)("button",{className:"zhn-bt-circle2 "+e,style:n,onClick:r,...i,children:(0,C.jsx)("div",{children:o})})},Xt={backgroundColor:"#949ab4"},Ht=(0,r.forwardRef)(((t,e)=>{let{indexActiveOption:n,nFiltered:o,nAll:r,onStepDown:i,onStepUp:s,onClear:a}=t;return(0,C.jsxs)("div",{className:Ft+" not-selected",children:[(0,C.jsxs)("span",{className:Lt,children:[(0,C.jsx)("span",{ref:e,children:n}),(0,C.jsxs)("span",{children:[": ",o,": ",r]})]}),(0,C.jsxs)("span",{className:Ot,children:[(0,C.jsx)(Wt,{className:Rt,style:Xt,caption:"Dn",onClick:i}),(0,C.jsx)(Wt,{className:Rt,style:Xt,caption:"Up",onClick:s}),(0,C.jsx)(Wt,{style:Xt,caption:"CL",onClick:a})]})]})})),Yt={display:"block"},Bt={display:"none"},Ut=t=>{let{refOptionsElement:e,refIndexElement:n,optionsStyle:o,width:r,isShowOption:i,indexActiveOption:s,nFiltered:a,nAll:l,onStepUp:c,onStepDown:h,onClear:u,children:d}=t;const p=zt(r,i?Yt:Bt);return(0,C.jsxs)("div",{className:Nt,style:p,"data-scrollable":!0,children:[(0,C.jsx)("div",{ref:e,className:jt,style:{...o,...p},children:d}),(0,C.jsx)(Ht,{ref:n,indexActiveOption:s,nAll:l,nFiltered:a,onStepUp:c,onStepDown:h,onClear:u})]})},Zt=t=>{let{options:e,indexActiveOption:n,propCaption:o,ItemOptionComp:r,onClick:i}=t;return e.map(((t,e)=>(0,C.jsx)("div",{role:"option","aria-selected":n===e,tabIndex:"-1",className:Et,"data-index":e,onClick:e=>i(t,e),children:(0,C.jsx)(r,{item:t,propCaption:o})},e)))},Vt={position:"absolute",top:10,right:0,width:35,paddingRight:5,textAlign:"center",verticalAlign:"middle",cursor:"pointer"},qt={position:"relative",top:2,display:"inline-block",height:0,width:0,borderColor:"#999 transparent transparent",borderStyle:"solid",borderWidth:"10px 8px 4px"},Gt=(0,r.forwardRef)(((t,e)=>{let{arrowStyle:n,onClick:o}=t;const i=(0,r.useRef)(),s=(0,r.useRef)();return(0,r.useImperativeHandle)(e,(()=>({startAnimation:()=>{a(i).animation="circle infinite 1.25s linear",a(s).borderColor="#1b75bb transparent transparent"},stopAnimation:()=>{a(i).animation=""}}))),(0,C.jsx)("button",{type:"button",ref:i,style:Vt,tabIndex:"-1",onClick:o,children:(0,C.jsx)("span",{ref:s,style:{...qt,...n}})})})),$t={borderColor:"#1b75bb transparent transparent"},Kt=(t,e,n,o)=>{const{isLoading:r,isLoadingFailed:i,placeholder:s,optionName:a="",onLoadOption:l}=t,{isShowOption:c,optionNames:h}=e;return r||i?r?["Loading "+h+"...",(0,C.jsx)("span",{className:Tt,"data-loader":"circle"})]:i?["Loading "+h+" Failed",(0,C.jsx)(Wt,{className:_t,"data-loader":"circle-failed",onClick:l})]:[]:[s||"Select "+a+"...",(0,C.jsx)(Gt,{ref:n,arrowStyle:c?$t:void 0,onClick:o})]},Jt="From input:",Qt=(t,e,n,o)=>{const r=((t,e,n)=>{const o=e.toLowerCase();return(t||[]).filter((t=>-1!==t[n].toLowerCase().indexOf(o)))})(e,t,n);return 0===r.length&&r.push(((t,e,n)=>{const o=String(t).replace(Jt,"").trim();return{[e]:n?Jt+" "+o:"No results found",value:"noresult",inputValue:o}})(t,n,o)),r},te=(t,e)=>{const n=(0,r.useRef)(t);return(0,r.useMemo)((()=>[t=>{n.current=t},()=>void 0===n.current?e:n.current]),[])},ee=t=>"number"==typeof t&&t-t==0,ne=t=>{const{dataset:e}=t,{index:n}=e||{};return Number(n)},oe=(t,e)=>(0,r.useMemo)((()=>[e=>{if(e){e.classList.add(It);const n=ne(e),o=i(t);o&&ee(n)&&(o.textContent=n+1)}},t=>{const n=t||e();n&&n.classList.remove(It)}]),[]),re=t=>(t.children||{}).length,ie=()=>{const t=(0,r.useRef)(),e=(0,r.useRef)(),[n,o]=te(0),s=(0,r.useMemo)((()=>()=>((i(t)||{}).childNodes||[])[o()]),[]),[a,l]=oe(e,s);return[t,e,n,o,s,a,l,...(0,r.useMemo)((()=>[()=>{const e=s();if(e){l(e);const r=i(t);n(o()+1),o()>=re(r)&&(n(0),r.scrollTop=0);const c=s();a(c);const h=c.offsetTop,u=r.scrollTop;h-u>70&&(r.scrollTop+=h-u-70)}},()=>{const e=s();if(e){l(e);const r=i(t);if(n(o()-1),o()<0){n(re(r)-1);const t=s();r.scrollTop=t.offsetTop}const c=s();a(c);const h=c.offsetTop,u=r.scrollTop;h-u<70&&(r.scrollTop-=70-(h-u))}}]),[])]},se=[],ae=t=>{let{optionName:e,optionNames:n,options:o=se}=t;return{value:"",initialOptions:o,options:o,optionNames:n||e||""}},le=()=>{},ce=t=>{const{style:e,width:n,optionsStyle:o,propCaption:i="caption",ItemOptionComp:s=Dt,isWithInput:a=!1,onSelect:l=le}=t,c=(0,r.useRef)(),h=(0,r.useRef)(),[u,d]=(0,r.useState)((()=>ae(t))),{value:p,options:f,initialOptions:g}=u,[m,y]=O(!1),[x,v,w,b,k,S,D,A,M]=ie(),T=(0,r.useCallback)((()=>{D(),d((()=>ae(t))),y(!1),w(0),l()}),[t.options,l]),_=(0,r.useCallback)(((t,e)=>{D(),w(ne(e.currentTarget)),y(!1),d((e=>({...e,value:t[i]}))),l(t)}),[]),P=(0,r.useMemo)((()=>(0,C.jsx)(Zt,{options:f,indexActiveOption:b(),propCaption:i,ItemOptionComp:s,onClick:_})),[f]);(0,r.useEffect)((()=>{if(m){const t=k();S(t),(t=>{if(t){const{offsetTop:e}=t,n=t.parentElement,{scrollTop:o}=n;e-o>70&&(n.scrollTop+=e-o-70),e-o<0&&(n.scrollTop=0)}})(t)}}),[m]),(0,r.useEffect)((()=>{t.options!==g&&T()}),[t.options]);const N=b(),j=zt(n,e),[E,I]=Kt(t,u,c,y),[F,L]=((t,e)=>[t[0]&&"noresult"!==t[0].value?t.length:0,e?e.length:0])(f,g);return(0,C.jsxs)("div",{className:At,style:j,children:[(0,C.jsx)("input",{ref:h,className:Mt,type:"text",name:"select",autoCorrect:"off",autoCapitalize:"off",spellCheck:!1,value:p,placeholder:E,onChange:t=>{const e=t.target.value,n=e.length,o=p.length;n!==o&&(0!==b()&&(D(),w(0)),d((t=>({...t,value:e,options:Qt(e,n>o?f:g,i,a)}))),y(!0))},onKeyDown:t=>{switch(t.keyCode){case 13:{const t=b();if(ee(t)){const e=f[t];e&&e[i]&&(l(((t,e,n)=>"noresult"!==t.value?t:n?{[e]:"From Input",value:t.inputValue}:void 0)(e,i,a)),y(!1),d((t=>({...t,value:e[i]}))))}else l();break}case 27:case 46:t.preventDefault(),m?y(!1):T();break;case 40:m?(t.preventDefault(),A()):y(!0);break;case 38:m&&(t.preventDefault(),M());break;default:return}}}),I,(0,C.jsx)("hr",{className:Pt}),(0,C.jsx)(Ut,{refOptionsElement:x,refIndexElement:v,optionsStyle:o,width:n,isShowOption:m,indexActiveOption:N,nFiltered:F,nAll:L,onStepUp:M,onStepDown:A,onClear:T,children:P})]})},he={display:"flex",alignItems:"center",marginRight:5,marginTop:5,marginLeft:5,marginBottom:5},ue={marginLeft:12,marginRight:12},de={color:"#1b75bb",display:"inline-block",textAlign:"right",width:100,paddingRight:5,fontSize:"16px",fontWeight:"bold",userSelect:"none"},pe={display:"none"},fe=t=>{let{isShowLabels:e=!0,caption:n="",captionStyle:o,...r}=t;const i=(t=>t&&-1===t.indexOf(":")?t+":":t)(n),[s,a]=function(t){return void 0===t&&(t=!0),t?[{...he},{...de}]:[{...he,...ue},{...de,...pe}]}(e),l={width:270,...r,optionName:e?"":n.replace(":","")};return(0,C.jsxs)("div",{style:s,children:[(0,C.jsx)("span",{style:{...a,...o},children:i}),(0,C.jsx)(ce,{...l})]})},ge=t=>{let{style:e,exchanges:n,onSelectExchange:o,isMarkets:r={},markets:i,onSelectMarket:s,timeframes:a,onSelectTimeframe:l}=t;return(0,C.jsxs)("div",{style:e,children:[(0,C.jsx)(fe,{isShowLabels:!1,placeholder:"Exchanges",options:n,onSelect:o}),(0,C.jsx)(fe,{isShowLabels:!1,placeholder:"Time Frames (Default: 1d)",options:a,onSelect:l}),(0,C.jsx)(fe,{isShowLabels:!1,placeholder:"Markets",isLoading:r.loading,isLoadingFailed:r.failed,options:i,onSelect:s})]})},me="MARKET_LOADING",ye="MARKET_LOADED",xe="MARKET_LOADING_FAIL",ve="EXCHANGES_SET",we="EXCHANGE_SET",be="PAIR_SET",ke=(t,e)=>{switch(e.type){case me:return{...t,isMarkets:{loading:!0,failed:!1}};case ye:return{...t,exchange:e.exchange,markets:e.markets,isMarkets:{loading:!1,failed:!1}};case xe:return{...t,isMarkets:{loading:!1,failed:!0}};case ve:return{...t,exchanges:e.exchanges};case we:return{...t,exchange:e.exchange,pair:void 0};case be:return{...t,pair:e.pair};default:throw new TypeError("Not existed action "+e.type)}},Se={exchange:"",pair:"",isMarkets:{loading:!1,failed:!1},exchanges:[],markets:[]},Ce=t=>{let{dispatch:e,exchImpl:n,exchange:o,proxy:r}=t;e({type:me}),n.fetchMarkets(r).then((t=>{e({type:ye,exchange:o,markets:t})})).catch((t=>{e({type:xe}),console.log(t.message)}))},De=t=>{let{exchImpl:e,exchange:n,pair:o,timeframe:r,dataAction:i,proxy:s}=t;i.loading();const{v:a,tf:l}="object"==typeof r?r:{v:r,tf:r};e.fetchOHLCV(o,a,s).then((t=>{0!==t.length&&i.loadData({providerTitle:n,itemTitle:o,data:t,timeframe:l})})).catch((t=>{i.loadFailed(),console.log(t.message)}))},Ae=t=>fetch(t).then((t=>{const{status:e}=t;if(e>=200&&e<400)return t.json();throw new Error("Response is incorrect: "+e)})),Me=Array.isArray,Te=(t,e)=>{const n=e?(t||{})[e]:t;return Me(n)?n:[]},_e=(t,e)=>t.caption<e.caption?-1:t.caption>e.caption?1:0,Pe=t=>"object"==typeof t,Ne="https://api.binance.com/api/v3",je=Ne+"/exchangeInfo",Ee=Ne+"/klines",Ie={fetchMarkets:()=>Ae(je).then((t=>Te(t,"symbols").reduce(((t,e)=>{const{baseAsset:n,quoteAsset:o,status:r}=e||{};return"TRADING"===r&&t.push({caption:n+"/"+o,value:""+n+o}),t}),[]).sort(_e))),getTimeframes:()=>[{caption:"1m",value:"1m"},{caption:"3m",value:"3m"},{caption:"5m",value:"5m"},{caption:"15m",value:"15m"},{caption:"30m",value:"30m"},{caption:"1h",value:"1h"},{caption:"2h",value:"2h"},{caption:"4h",value:"4h"},{caption:"8h",value:"8h"},{caption:"12h",value:"12h"},{caption:"1d",value:"1d"},{caption:"3d",value:"3d"},{caption:"1w",value:"1w"},{caption:"1M",value:"1M"}],fetchOHLCV:(t,e)=>Ae(((t,e)=>Ee+"?symbol="+t+"&interval="+e)(t,e)).then((t=>Te(t).reduce(((t,e)=>(Pe(e)&&t.push({date:e[0],open:parseFloat(e[1]),high:parseFloat(e[2]),low:parseFloat(e[3]),close:parseFloat(e[4]),volume:parseFloat(e[5])}),t)),[])))},Fe="https://www.bitstamp.net/api/v2",Le=Fe+"/trading-pairs-info/",Oe=Fe+"/ohlc",Re={binance:Ie,bitstamp:{isRequireProxy:!0,fetchMarkets:t=>Ae(t+"/"+Le).then((t=>Te(t).reduce(((t,e)=>{const{trading:n,name:o,url_symbol:r}=e||{};if("Enabled"===n)return t.push({caption:o,value:r}),t}),[]))),getTimeframes:()=>[{caption:"1m",value:{v:"60",tf:"1m"}},{caption:"3m",value:{v:"180",tf:"3m"}},{caption:"5m",value:{v:"300",tf:"5m"}},{caption:"15m",value:{v:"900",tf:"15m"}},{caption:"30m",value:{v:"1800",tf:"30m"}},{caption:"1h",value:{v:"3600",tf:"1h"}},{caption:"2h",value:{v:"7200",tf:"2h"}},{caption:"4h",value:{v:"14400",tf:"4h"}},{caption:"10h",value:{v:"21600",tf:"10h"}},{caption:"12h",value:{v:"43200",tf:"12h"}},{caption:"1d",value:{v:"86400",tf:"1d"}},{caption:"3d",value:{v:"259200",tf:"3d"}}],fetchOHLCV:(t,e,n)=>Ae(((t,e,n)=>n+"/"+Oe+"/"+t+"?step="+e+"&limit=300")(t,e,n)).then((t=>Te((t||{}).data,"ohlc").reduce(((t,e)=>(Pe(e)&&t.push({date:1e3*parseFloat(e.timestamp),open:parseFloat(e.open),high:parseFloat(e.high),low:parseFloat(e.low),close:parseFloat(e.close),volume:parseFloat(e.volume)}),t)),[])))}},ze=[{caption:"Binance",value:"binance"},{caption:"Bitstamp",value:"bitstamp"}],We="1d",Xe={height:400},He={paddingLeft:8},Ye=(t,e)=>"binance"===t&&"1m"===e,Be=(t,e)=>t.isRequireProxy&&!e,Ue=t=>{let{style:e,onPrevPage:n}=t;const{appSettings:o,dataAction:i,onLiveUpdate:s,onStopUpdate:a}=(0,r.useContext)(c),{isLiveUpdating:l}=(0,r.useContext)(u),[h,d]=(0,r.useReducer)(ke,Se),{exchange:p,pair:f,isMarkets:g,exchanges:m,markets:y}=h,[x,v]=(0,r.useState)([]),[w,b]=(0,r.useState)(We),k=(0,r.useRef)(null);(0,r.useEffect)((()=>{d({type:ve,exchanges:ze})}),[]),(0,r.useEffect)((()=>{if(p){k.current=(t=>Re[t])(p);const t=k.current,e=o.proxy();if(Be(t,e))return;b(We),v(t.getTimeframes()),Ce({dispatch:d,exchange:p,exchImpl:t,proxy:e})}}),[p]),(0,r.useEffect)((()=>{if(f&&w){const t=k.current,e=o.proxy();if(Be(t,e))return;De({exchange:p,pair:f,timeframe:w,exchImpl:t,dataAction:i,proxy:e})}}),[f,w]);return(0,C.jsxs)("div",{style:{...Xe,...e},children:[(0,C.jsx)(Ct,{onClick:n}),(0,C.jsx)(ge,{exchanges:m,onSelectExchange:t=>{t&&t.value&&d({type:we,exchange:t.value})},isMarkets:g,markets:y,onSelectMarket:t=>{d({type:be,pair:t&&t.value||void 0})},timeframes:x,onSelectTimeframe:t=>{b(t&&t.value||We)}}),Ye(p,w)&&(0,C.jsx)("div",{style:He,children:(0,C.jsx)(wt,{caption:l?"Stop Updating":"Live Updating 1min",onClick:l?a:()=>s(f)})})]})},Ze={display:"inline",color:"green",height:26,width:40,paddingLeft:5,margin:"0 5px",fontSize:"16px",fontWeight:"bold",border:"medium none",outline:"medium none",background:"transparent none repeat scroll 0 0",backgroundColor:"#e1e1cb"},Ve="text",qe="off",Ge=()=>{},$e=(0,r.forwardRef)(((t,e)=>{let{initValue:n,style:o,spellCheck:i,placeholder:s,type:a=Ve,maxLenght:l=125,onEnter:c=Ge}=t;const h=(0,r.useRef)(),[u,d]=(0,r.useState)((()=>null!=n?n:"")),p=(0,r.useCallback)((t=>{const{value:e}=t.target;e.length<=l&&d(e)}),[l]),f=(0,r.useCallback)((t=>{switch(t.keyCode){case 27:case 46:t.preventDefault(),d("");break;case 13:c(t.target.value);break;default:return}}),[]);(0,r.useImperativeHandle)(e,(()=>({getValue:()=>(h.current||{}).value,setValue:t=>d(t)})),[]);const g=i?"on":qe,m=!!i;return(0,C.jsx)("input",{ref:h,style:{...Ze,...o},type:a,name:Ve,autoCapitalize:qe,autoComplete:qe,autoCorrect:g,spellCheck:m,translate:"false",value:u,placeholder:s,maxLength:l,onChange:p,onKeyDown:f})})),Ke=$e,Je={paddingLeft:4},Qe={color:"#265782",display:"inline-block",padding:"0 0 4px 8px",fontWeight:"bold"},tn={display:"block",width:"92%",height:32,padding:"8px 0 8px 4px"},en={float:"right",padding:"6px 22px 0 0"},nn="http://127.0.0.1",on=t=>!!(t=>"string"==typeof t)(t)&&-1!==t.indexOf(nn),rn=t=>{let{style:e,onPrevPage:n}=t;const{appSettings:o}=(0,r.useContext)(c),s=(0,r.useRef)(),[a,l]=(0,r.useState)(0),h=o.proxy();return(0,C.jsxs)("div",{style:{...Je,...e},children:[(0,C.jsx)(Ct,{onClick:n}),(0,C.jsxs)("div",{children:[(0,C.jsx)("span",{style:Qe,children:"Local Proxy Server"}),(0,C.jsx)(Ke,{ref:s,style:tn,initValue:h,placeholder:nn,onEnter:t=>{on(t)?o.proxy(t):i(s).setValue("")}},a),(0,C.jsxs)("div",{style:en,children:[(0,C.jsx)(wt,{caption:"Clear",onClick:()=>{o.clearProxy(),l((t=>t+1))}}),(0,C.jsx)(wt,{caption:"Apply",onClick:()=>{const t=i(s),e=t.getValue();on(e)?o.proxy(e):t.setValue("")}})]})]})]})},sn={p1:St,"p1-1":rn,"p1-2":Ue},an="drawer__list",ln=t=>{let{onCloseDrawer:e}=t;const{theme:n,setThemeId:o}=(0,r.useContext)(c),i=(0,r.useContext)(h),s=n.getDrawerStyle(i);return(0,C.jsxs)("div",{className:an,style:s,children:[(0,C.jsx)(J,{setThemeId:o,onClose:e}),(0,C.jsx)(st,{pageRouter:sn,initialPageId:"p1",maxPages:4})]})},cn=t=>(0,C.jsx)(Y,{children:(0,C.jsx)(ln,{...t})}),hn={position:"relative",top:6,left:8,display:"inline-block",verticalAlign:"middle",cursor:"pointer"},un={color:"#80c040",display:"inline-block",paddingLeft:6,fontSize:16,fontWeight:"bold"},dn=t=>{let{spinnerCn:e,onStopUpdate:n}=t;const{isLiveUpdating:o,sec:i}=(0,r.useContext)(u);return o&&(0,C.jsxs)("button",{style:hn,onClick:n,children:[(0,C.jsx)("span",{className:e,"data-loader":"circle"}),(0,C.jsx)("span",{style:un,children:i})]})},pn="header",fn=pn+"__logo-notes",gn=pn+"__title-gap",mn=pn+"__title",yn=pn+"__spinner",xn=t=>t.charAt(0).toUpperCase()+t.slice(1),vn=t=>{let{text:e,is:n}=t;return(0,C.jsxs)("span",{className:mn,children:[xn(e),!n&&(0,C.jsx)("span",{children:": "})]})},wn=t=>{let{fetchStatus:e,providerTitle:n="",itemTitle:o="",timeframe:i="",isLiveUpdating:s,...a}=t;const{theme:l,onStopUpdate:u}=(0,r.useContext)(c),d=(0,r.useContext)(h),p=l.getHeaderStyle(d);return(0,C.jsxs)("header",{className:pn,style:p,children:[(0,C.jsx)(L,{fetchStatus:e}),(0,C.jsx)(A,{className:fn}),(0,C.jsx)("span",{className:gn}),(0,C.jsx)(vn,{text:n}),(0,C.jsx)(vn,{text:o}),(0,C.jsx)(vn,{text:i,is:!0}),(0,C.jsx)(dn,{spinnerCn:yn,onStopUpdate:u}),(0,C.jsx)(cn,{...a})]})},bn=Math.sqrt,kn=(t,e)=>{let n,o;if(void 0===e)for(const e of t)null!=e&&(void 0===n?e>=e&&(n=o=e):(n>e&&(n=e),o<e&&(o=e)));else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(void 0===n?i>=i&&(n=o=i):(n>i&&(n=i),o<i&&(o=i)))}return[n,o]},Sn=(t,e)=>{let n;if(void 0===e)for(const e of t)null!=e&&(n<e||void 0===n&&e>=e)&&(n=e);else{let o=-1;for(let r of t)null!=(r=e(r,++o,t))&&(n<r||void 0===n&&r>=r)&&(n=r)}return n},Cn=(t,e)=>{let n;if(void 0===e)for(const e of t)null!=e&&(n>e||void 0===n&&e>=e)&&(n=e);else{let o=-1;for(let r of t)null!=(r=e(r,++o,t))&&(n>r||void 0===n&&r>=r)&&(n=r)}return n},Dn=(t,e)=>{let n=0,o=0;if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(++n,o+=e);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(i=+i)>=i&&(++n,o+=i)}if(n)return o/n},An=Math.max,Mn=Math.ceil,Tn=t=>t.length,_n=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return(t=>{let e=t.length;if(!e)return[];let n,o,r=-1,i=Cn(t,Tn),s=new Array(i);for(;++r<i;)for(n=-1,o=s[r]=new Array(e);++n<e;)o[n]=t[n][r];return s})(e)},Pn=(t,e)=>null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN,Nn=()=>0,jn=t=>{let e,n,o;2!==t.length?(e=Pn,n=(e,n)=>Pn(t(e),n),o=(e,n)=>t(e)-n):(e=t===Pn?t:Nn,n=t,o=t);const r=function(t,o,r,i){if(void 0===r&&(r=0),void 0===i&&(i=t.length),r<i){if(0!==e(o,o))return i;do{const e=r+i>>>1;n(t[e],o)<0?r=e+1:i=e}while(r<i)}return r};return{left:r,center:function(t,e,n,i){void 0===n&&(n=0),void 0===i&&(i=t.length);const s=r(t,e,n,i-1);return s>n&&o(t[s-1],e)>-o(t[s],e)?s-1:s},right:function(t,o,r,i){if(void 0===r&&(r=0),void 0===i&&(i=t.length),r<i){if(0!==e(o,o))return i;do{const e=r+i>>>1;n(t[e],o)<=0?r=e+1:i=e}while(r<i)}return r}}},En=jn(Pn).right,In=Math.max,Fn=Math.sqrt,Ln=Math.floor,On=Math.pow,Rn=Math.log10,zn=Math.round,Wn=Fn(50),Xn=Fn(10),Hn=Fn(2);function Yn(t,e,n){const o=(e-t)/In(0,n),r=Ln(Rn(o)),i=o/On(10,r),s=i>=Wn?10:i>=Xn?5:i>=Hn?2:1;let a,l,c;return r<0?(c=On(10,-r)/s,a=zn(t*c),l=zn(e*c),a/c<t&&++a,l/c>e&&--l,c=-c):(c=On(10,r)*s,a=zn(t/c),l=zn(e/c),a*c<t&&++a,l*c>e&&--l),l<a&&.5<=n&&n<2?Yn(t,e,2*n):[a,l,c]}function Bn(t,e,n){return Yn(t=+t,e=+e,n=+n)[2]}function Un(t,e,n){n=+n;const o=(e=+e)<(t=+t),r=o?Bn(e,t,n):Bn(t,e,n);return(o?-1:1)*(r<0?1/-r:r)}const Zn=t=>t;function Vn(){let t=Zn;const e=t=>t.length;function n(){for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];const i=o.length;if(!i)return[];const s=Cn(o,e),a=new Array(s);for(let e=-1;++e<s;){for(let t=-1,n=a[e]=new Array(i);++t<i;)n[t]=o[t][e];a[e]=t.apply(this,a[e])}return a}return n.combine=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],n):t},n}const qn=Array.isArray,Gn=function(t){void 0===t&&(t=[]);const e=qn(t)?t:[t],n=e.length;return function(t,o){if(0===n)return null!=t?t:o;let r=0;for(;null!=t&&r<n;)t=t[e[r++]];return r===n?t:o}},$n=t=>"function"==typeof t?t:()=>t;function Kn(){let t,e,n,o,r=10,i=()=>{},s=0,a=function(a){const l=n||Gn(e),c=$n(r).apply(this,arguments),h=a.slice(s,c+s).map(l);let u=0;const d=$n(t);return a.map(((t,e)=>e<s+c-1?d(l(t),e,o):(e>=s+c&&(h.shift(),h.push(l(t,e))),i(h,e,u++,o))))};return a.undefinedValue=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],a):t},a.windowSize=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],a):r},a.misc=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],a):o},a.accumulator=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],a):i},a.skipInitial=function(){return arguments.length?(s=arguments.length<=0?void 0:arguments[0],a):s},a.sourcePath=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],a):e},a.source=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],a):n},a}const Jn=t=>{switch(t){default:case"Solid":return"none";case"ShortDash":return"6, 2";case"ShortDash2":return"6, 3";case"ShortDot":return"2, 2";case"ShortDashDot":return"6, 2, 2, 2";case"ShortDashDotDot":return"6, 2, 2, 2, 2, 2";case"Dot":return"2, 6";case"Dash":return"4, 6";case"LongDash":return"16, 6";case"DashDot":return"8, 6, 2, 6";case"LongDashDot":return"16, 6, 2, 6";case"LongDashDotDot":return"16, 6, 2, 6, 2, 6"}},Qn=t=>{const e=Jn(t).split(",");return 1===e.length?[]:e.map((t=>Number(t)))};function to(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function eo(t,e){var n=Object.create(t.prototype);for(var o in e)n[o]=e[o];return n}function no(){}let oo=.7,ro=1/oo,io="\\s*([+-]?\\d+)\\s*",so="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ao="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",lo=/^#([0-9a-f]{3,8})$/,co=new RegExp("^rgb\\("+io+","+io+","+io+"\\)$"),ho=new RegExp("^rgb\\("+ao+","+ao+","+ao+"\\)$"),uo=new RegExp("^rgba\\("+io+","+io+","+io+","+so+"\\)$"),po=new RegExp("^rgba\\("+ao+","+ao+","+ao+","+so+"\\)$"),fo=new RegExp("^hsl\\("+so+","+ao+","+ao+"\\)$"),go=new RegExp("^hsla\\("+so+","+ao+","+ao+","+so+"\\)$");const mo={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},yo=Math.min,xo=Math.max,vo=Math.pow,wo=Math.round,bo=t=>(t=(t||0)%360)<0?t+360:t,ko=t=>xo(0,yo(1,t||0)),So=(t,e,n)=>255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e);function Co(){return this.rgb().formatHex()}function Do(){return this.rgb().formatRgb()}function Ao(t){let e,n;return t=(t+"").trim().toLowerCase(),(e=lo.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?Mo(e):3===n?new Po(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?To(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?To(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=co.exec(t))?new Po(e[1],e[2],e[3],1):(e=ho.exec(t))?new Po(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=uo.exec(t))?To(e[1],e[2],e[3],e[4]):(e=po.exec(t))?To(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=fo.exec(t))?Lo(e[1],e[2]/100,e[3]/100,1):(e=go.exec(t))?Lo(e[1],e[2]/100,e[3]/100,e[4]):mo.hasOwnProperty(t)?Mo(mo[t]):"transparent"===t?new Po(NaN,NaN,NaN,0):null}function Mo(t){return new Po(t>>16&255,t>>8&255,255&t,1)}function To(t,e,n,o){return o<=0&&(t=e=n=NaN),new Po(t,e,n,o)}function _o(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const[o,r,i,s]=e;return 1===e.length?((a=o)instanceof no||(a=Ao(a)),a?new Po((a=a.rgb()).r,a.g,a.b,a.opacity):new Po):new Po(o,r,i,null==s?1:s);var a}function Po(t,e,n,o){this.r=+t,this.g=+e,this.b=+n,this.opacity=+o}function No(){return"#"+Fo(this.r)+Fo(this.g)+Fo(this.b)}function jo(){const t=Eo(this.opacity);return(1===t?"rgb(":"rgba(")+Io(this.r)+", "+Io(this.g)+", "+Io(this.b)+(1===t?")":", "+t+")")}function Eo(t){return isNaN(t)?1:xo(0,yo(1,t))}function Io(t){return xo(0,yo(255,wo(t)||0))}function Fo(t){return((t=Io(t))<16?"0":"")+t.toString(16)}function Lo(t,e,n,o){return o<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Ro(t,e,n,o)}function Oo(t){if(t instanceof Ro)return new Ro(t.h,t.s,t.l,t.opacity);if(t instanceof no||(t=Ao(t)),!t)return new Ro;if(t instanceof Ro)return t;let e=(t=t.rgb()).r/255,n=t.g/255,o=t.b/255,r=yo(e,n,o),i=xo(e,n,o),s=NaN,a=i-r,l=(i+r)/2;return a?(s=e===i?(n-o)/a+6*(n<o):n===i?(o-e)/a+2:(e-n)/a+4,a/=l<.5?i+r:2-i-r,s*=60):a=l>0&&l<1?0:s,new Ro(s,a,l,t.opacity)}function Ro(t,e,n,o){this.h=+t,this.s=+e,this.l=+n,this.opacity=+o}function zo(t,e,n,o,r){const i=t*t,s=i*t;return((1-3*t+3*i-s)*e+(4-6*i+3*s)*n+(1+3*t+3*i-3*s)*o+s*r)/6}to(no,Ao,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Co,formatHex:Co,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Oo(this).formatHsl()},formatRgb:Do,toString:Do}),to(Po,_o,eo(no,{brighter(t){return t=null==t?ro:vo(ro,t),new Po(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?oo:vo(oo,t),new Po(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Po(Io(this.r),Io(this.g),Io(this.b),Eo(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:No,formatHex:No,formatHex8:function(){return"#"+Fo(this.r)+Fo(this.g)+Fo(this.b)+Fo(255*(isNaN(this.opacity)?1:this.opacity))},formatRgb:jo,toString:jo})),to(Ro,(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const[o,r,i,s]=e;return 1===e.length?Oo(o):new Ro(o,r,i,null==s?1:s)}),eo(no,{brighter(t){return t=null==t?ro:vo(ro,t),new Ro(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?oo:vo(oo,t),new Ro(this.h,this.s,this.l*t,this.opacity)},rgb(){let t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*e,r=2*n-o;return new Po(So(t>=240?t-240:t+120,r,o),So(t,r,o),So(t<120?t+240:t-120,r,o),this.opacity)},clamp(){return new Ro(bo(this.h),ko(this.s),ko(this.l),Eo(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Eo(this.opacity);return(1===t?"hsl(":"hsla(")+bo(this.h)+", "+100*ko(this.s)+"%, "+100*ko(this.l)+"%"+(1===t?")":", "+t+")")}}));const Wo=t=>()=>t;function Xo(t,e){return function(n){return t+n*e}}function Ho(t){return 1==(t=+t)?Yo:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(o){return Math.pow(t+o*e,n)}}(e,n,t):Wo(isNaN(e)?n:e)}}function Yo(t,e){const n=e-t;return n?Xo(t,n):Wo(isNaN(t)?e:t)}const Bo=function t(e){const n=Ho(e);function o(t,e){const o=n((t=_o(t)).r,(e=_o(e)).r),r=n(t.g,e.g),i=n(t.b,e.b),s=Yo(t.opacity,e.opacity);return function(e){return t.r=o(e),t.g=r(e),t.b=i(e),t.opacity=s(e),t+""}}return o.gamma=t,o}(1);function Uo(t){return function(e){let n,o,r=e.length,i=new Array(r),s=new Array(r),a=new Array(r);for(n=0;n<r;++n)o=_o(e[n]),i[n]=o.r||0,s[n]=o.g||0,a[n]=o.b||0;return i=t(i),s=t(s),a=t(a),o.opacity=1,function(t){return o.r=i(t),o.g=s(t),o.b=a(t),o+""}}}Uo((function(t){const e=t.length-1;return function(n){let o=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),r=t[o],i=t[o+1],s=o>0?t[o-1]:2*r-i,a=o<e-1?t[o+2]:2*i-r;return zo((n-o/e)*e,s,r,i,a)}})),Uo((function(t){const e=t.length;return function(n){let o=Math.floor(((n%=1)<0?++n:n)*e),r=t[(o+e-1)%e],i=t[o%e],s=t[(o+1)%e],a=t[(o+2)%e];return zo((n-o/e)*e,r,i,s,a)}}));function Zo(t,e){let n,o=e?e.length:0,r=t?Math.min(o,t.length):0,i=new Array(r),s=new Array(o);for(n=0;n<r;++n)i[n]=tr(t[n],e[n]);for(;n<o;++n)s[n]=e[n];return function(t){for(n=0;n<r;++n)s[n]=i[n](t);return s}}function Vo(t,e){const n=new Date;return t=+t,e=+e,function(o){return n.setTime(t*(1-o)+e*o),n}}function qo(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Go(t,e){let n,o={},r={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?o[n]=tr(t[n],e[n]):r[n]=e[n];return function(t){for(n in o)r[n]=o[n](t);return r}}const $o=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ko=new RegExp($o.source,"g");function Jo(t,e){let n,o,r,i=$o.lastIndex=Ko.lastIndex=0,s=-1,a=[],l=[];for(t+="",e+="";(n=$o.exec(t))&&(o=Ko.exec(e));)(r=o.index)>i&&(r=e.slice(i,r),a[s]?a[s]+=r:a[++s]=r),(n=n[0])===(o=o[0])?a[s]?a[s]+=o:a[++s]=o:(a[++s]=null,l.push({i:s,x:qo(n,o)})),i=Ko.lastIndex;return i<e.length&&(r=e.slice(i),a[s]?a[s]+=r:a[++s]=r),a.length<2?l[0]?function(t){return function(e){return t(e)+""}}(l[0].x):function(t){return function(){return t}}(e):(e=l.length,function(t){for(var n,o=0;o<e;++o)a[(n=l[o]).i]=n.x(t);return a.join("")})}function Qo(t,e){e||(e=[]);let n,o=t?Math.min(e.length,t.length):0,r=e.slice();return function(i){for(n=0;n<o;++n)r[n]=t[n]*(1-i)+e[n]*i;return r}}function tr(t,e){let n,o=typeof e;return null==e||"boolean"===o?Wo(e):("number"===o?qo:"string"===o?(n=Ao(e))?(e=n,Bo):Jo:e instanceof Ao?Bo:e instanceof Date?Vo:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}(e)?Qo:Array.isArray(e)?Zo:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?Go:qo)(t,e)}function er(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}const nr=t=>void 0===t,or=Array.from,rr=Math.min,ir=Math.max;let sr=[0,1];const ar=t=>+t,lr=t=>t,cr=(t,e)=>(e-=t=+t)?n=>(n-t)/e:(t=>()=>t)(isNaN(e)?NaN:.5),hr=(t,e)=>{const[n,o]=t>e?[e,t]:[t,e];return t=>ir(n,rr(o,t))};function ur(t,e,n){let[o,r]=t,[i,s]=e;return r<o?(o=cr(r,o),i=n(s,i)):(o=cr(o,r),i=n(i,s)),t=>i(o(t))}function dr(t,e,n){let o=rr(t.length,e.length)-1,r=new Array(o),i=new Array(o),s=-1;for(t[o]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<o;)r[s]=cr(t[s],t[s+1]),i[s]=n(e[s],e[s+1]);return function(e){let n=En(t,e,1,o)-1;return i[n](r[n](e))}}const pr=(t,e)=>e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown());function fr(){return function(){let t,e,n,o,r,i,s=sr,a=sr,l=tr,c=lr;function h(){let t=rr(s.length,a.length);return c!==lr&&(c=hr(s[0],s[t-1])),o=t>2?dr:ur,r=i=null,u}function u(e){return null==e||isNaN(e=+e)?n:(r||(r=o(s.map(t),a,l)))(t(c(e)))}return u.invert=n=>c(e((i||(i=o(a,s.map(t),qo)))(n))),u.domain=t=>nr(t)?s.slice():(s=or(t,ar),h()),u.range=t=>nr(t)?a.slice():(a=or(t),h()),u.rangeRound=t=>(a=or(t),l=er,h()),u.clamp=t=>nr(t)?c!==lr:(c=!!t||lr,h()),u.interpolate=t=>nr(t)?l:(l=t,h()),u.unknown=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],u):n},function(n,o){return t=n,e=o,h()}}()(lr,lr)}function gr(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const[o,r]=e;switch(e.length){case 0:break;case 1:this.range(o);break;default:this.range(r).domain(o)}return this}function mr(t,e){let n,o;return(n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0?null:(o=t.slice(0,n),[o.length>1?o[0]+o.slice(2):o,+t.slice(n+1)])}function yr(t){return(t=mr(Math.abs(t)))?t[1]:NaN}const xr=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function vr(t){let e;if(!(e=xr.exec(t)))throw new Error("invalid format: "+t);return new wr({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function wr(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}let br;function kr(t,e){let n=mr(t,e);if(!n)return t+"";let o=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+o:o.length>r+1?o.slice(0,r+1)+"."+o.slice(r+1):o+new Array(r-o.length+2).join("0")}vr.prototype=wr.prototype,wr.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const Sr={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>kr(100*t,e),r:kr,s:function(t,e){let n=mr(t,e);if(!n)return t+"";let o=n[0],r=n[1],i=r-(br=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,s=o.length;return i===s?o:i>s?o+new Array(i-s+1).join("0"):i>0?o.slice(0,i)+"."+o.slice(i):"0."+new Array(1-i).join("0")+mr(t,Math.max(0,e+i-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Cr(t){return t}const Dr=Array.prototype.map,Ar=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Mr(t){let e=void 0===t.grouping||void 0===t.thousands?Cr:(c=Dr.call(t.grouping,Number),h=t.thousands+"",function(t,e){let n=t.length,o=[],r=0,i=c[0],s=0;for(;n>0&&i>0&&(s+i+1>e&&(i=Math.max(1,e-s)),o.push(t.substring(n-=i,n+i)),!((s+=i+1)>e));)i=c[r=(r+1)%c.length];return o.reverse().join(h)}),n=void 0===t.currency?"":t.currency[0]+"",o=void 0===t.currency?"":t.currency[1]+"",r=void 0===t.decimal?".":t.decimal+"",i=void 0===t.numerals?Cr:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(Dr.call(t.numerals,String)),s=void 0===t.percent?"%":t.percent+"",a=void 0===t.minus?"−":t.minus+"",l=void 0===t.nan?"NaN":t.nan+"";var c,h;function u(t){let c=(t=vr(t)).fill,h=t.align,u=t.sign,d=t.symbol,p=t.zero,f=t.width,g=t.comma,m=t.precision,y=t.trim,x=t.type;"n"===x?(g=!0,x="g"):Sr[x]||(void 0===m&&(m=12),y=!0,x="g"),(p||"0"===c&&"="===h)&&(p=!0,c="0",h="=");let v="$"===d?n:"#"===d&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",w="$"===d?o:/[%p]/.test(x)?s:"",b=Sr[x],k=/[defgprs%]/.test(x);function S(t){let n,o,s,d=v,S=w;if("c"===x)S=b(t)+S,t="";else{let e=(t=+t)<0||1/t<0;if(t=isNaN(t)?l:b(Math.abs(t),m),y&&(t=function(t){let e,n=t.length,o=1,r=-1;t:for(;o<n;++o)switch(t[o]){case".":r=e=o;break;case"0":0===r&&(r=o),e=o;break;default:if(!+t[o])break t;r>0&&(r=0)}return r>0?t.slice(0,r)+t.slice(e+1):t}(t)),e&&0==+t&&"+"!==u&&(e=!1),d=(e?"("===u?u:a:"-"===u||"("===u?"":u)+d,S=("s"===x?Ar[8+br/3]:"")+S+(e&&"("===u?")":""),k)for(n=-1,o=t.length;++n<o;)if(s=t.charCodeAt(n),48>s||s>57){S=(46===s?r+t.slice(n+1):t.slice(n))+S,t=t.slice(0,n);break}}g&&!p&&(t=e(t,1/0));let C=d.length+t.length+S.length,D=C<f?new Array(f-C+1).join(c):"";switch(g&&p&&(t=e(D+t,D.length?f-S.length:1/0),D=""),h){case"<":t=d+t+S+D;break;case"=":t=d+D+t+S;break;case"^":t=D.slice(0,C=D.length>>1)+d+t+S+D.slice(C);break;default:t=D+d+t+S}return i(t)}return m=void 0===m?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),S.toString=function(){return t+""},S}return{format:u,formatPrefix:function(t,e){let n=u(((t=vr(t)).type="f",t)),o=3*Math.max(-8,Math.min(8,Math.floor(yr(e)/3))),r=Math.pow(10,-o),i=Ar[8+o/3];return function(t){return n(r*t)+i}}}}let Tr,_r,Pr;Tr=Mr({thousands:",",grouping:[3],currency:["$",""]}),_r=Tr.format,Pr=Tr.formatPrefix;const Nr=Math.max,jr=Math.min,Er=Math.abs,Ir=Math.floor,Fr=t=>Nr(0,-yr(Er(t))),Lr=(t,e)=>Nr(0,3*Nr(-8,jr(8,Ir(yr(e)/3)))-yr(Er(t))),Or=(t,e)=>(t=Er(t),e=Er(e)-t,Nr(0,yr(e)-yr(t))+1);const Rr=Math.floor,zr=Math.ceil;function Wr(t){let e=t.domain;return t.ticks=t=>{let n=e();return function(t,e,n){if(!((n=+n)>0))return[];if((t=+t)==(e=+e))return[t];const o=e<t,[r,i,s]=o?Yn(e,t,n):Yn(t,e,n);if(!(i>=r))return[];const a=i-r+1,l=new Array(a);let c=0;if(o)if(s<0)for(;c<a;++c)l[c]=(i-c)/-s;else for(;c<a;++c)l[c]=(i-c)*s;else if(s<0)for(;c<a;++c)l[c]=(r+c)/-s;else for(;c<a;++c)l[c]=(r+c)*s;return l}(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=(t,n)=>{let o=e();return function(t,e,n,o){let r,i=Un(t,e,n);switch((o=vr(null==o?",f":o)).type){case"s":{const n=Math.max(Math.abs(t),Math.abs(e));return null!=o.precision||isNaN(r=Lr(i,n))||(o.precision=r),Pr(o,n)}case"":case"e":case"g":case"p":case"r":null!=o.precision||isNaN(r=Or(i,Math.max(Math.abs(t),Math.abs(e))))||(o.precision=r-("e"===o.type));break;case"f":case"%":null!=o.precision||isNaN(r=Fr(i))||(o.precision=r-2*("%"===o.type))}return _r(o)}(o[0],o[o.length-1],null==t?10:t,n)},t.nice=n=>{null==n&&(n=10);let o,r,i=e(),s=0,a=i.length-1,l=i[s],c=i[a],h=10;for(c<l&&(r=l,l=c,c=r,r=s,s=a,a=r);h-- >0;){if(r=Bn(l,c,n),r===o)return i[s]=l,i[a]=c,e(i);if(r>0)l=Rr(l/r)*r,c=zr(c/r)*r;else{if(!(r<0))break;l=zr(l*r)/r,c=Rr(c*r)/r}o=r}return t},t}function Xr(t){return null!==t&&"object"==typeof t?t.valueOf():t}function Hr(t,e){let{_intern:n,_key:o}=t;const r=o(e);return n.has(r)?n.get(r):e}class Yr extends Map{constructor(t,e){if(void 0===e&&(e=Xr),super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const[e,n]of t)this.set(e,n)}get(t){return super.get(Hr(this,t))}has(t){return super.has(Hr(this,t))}set(t,e){return super.set(function(t,e){let{_intern:n,_key:o}=t;const r=o(e);return n.has(r)?n.get(r):(n.set(r,e),e)}(this,t),e)}delete(t){return super.delete(function(t,e){let{_intern:n,_key:o}=t;const r=o(e);return n.has(r)&&(e=n.get(r),n.delete(r)),e}(this,t))}}const Br=Array.from,Ur=Symbol("implicit");const Zr=new Date,Vr=new Date,qr=Math.floor,Gr=(t,e,n,o)=>{const r=e=>(t(e=void 0===e?new Date:new Date(+e)),e);return r.floor=e=>(t(e=new Date(+e)),e),r.ceil=n=>(t(n=new Date(n-1)),e(n,1),t(n),n),r.round=t=>{const e=r(t),n=r.ceil(t);return t-e<n-t?e:n},r.offset=(t,n)=>(e(t=new Date(+t),null==n?1:qr(n)),t),r.range=(n,o,i)=>{const s=[];if(n=r.ceil(n),i=null==i?1:qr(i),!(n<o&&i>0))return s;let a;do{s.push(a=new Date(+n)),e(n,i),t(n)}while(a<n&&n<o);return s},r.filter=n=>Gr((e=>{if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),((t,o)=>{if(t>=t)if(o<0)for(;++o<=0;)for(;e(t,-1),!n(t););else for(;--o>=0;)for(;e(t,1),!n(t););})),n&&(r.count=(e,o)=>(Zr.setTime(+e),Vr.setTime(+o),t(Zr),t(Vr),qr(n(Zr,Vr))),r.every=t=>(t=qr(t),isFinite(t)&&t>0?t>1?r.filter(o?e=>o(e)%t==0:e=>r.count(0,e)%t==0):r:null)),r},$r=1e3,Kr=6e4,Jr=36e5,Qr=864e5,ti=6048e5,ei=2592e6,ni=31536e6,oi=Gr((t=>{t.setTime(t-t.getMilliseconds())}),((t,e)=>{t.setTime(+t+e*$r)}),((t,e)=>(e-t)/$r),(t=>t.getUTCSeconds())),ri=Gr((t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*$r)}),((t,e)=>{t.setTime(+t+e*Kr)}),((t,e)=>(e-t)/Kr),(t=>t.getMinutes())),ii=Gr((t=>{t.setUTCSeconds(0,0)}),((t,e)=>{t.setTime(+t+e*Kr)}),((t,e)=>(e-t)/Kr),(t=>t.getUTCMinutes())),si=Gr((t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*$r-t.getMinutes()*Kr)}),((t,e)=>{t.setTime(+t+e*Jr)}),((t,e)=>(e-t)/Jr),(t=>t.getHours())),ai=Gr((t=>{t.setUTCMinutes(0,0,0)}),((t,e)=>{t.setTime(+t+e*Jr)}),((t,e)=>(e-t)/Jr),(t=>t.getUTCHours())),li=Gr((t=>t.setHours(0,0,0,0)),((t,e)=>t.setDate(t.getDate()+e)),((t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Kr)/Qr),(t=>t.getDate()-1)),ci=Gr((t=>{t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCDate(t.getUTCDate()+e)}),((t,e)=>(e-t)/Qr),(t=>t.getUTCDate()-1)),hi=t=>Gr((e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),((t,e)=>{t.setDate(t.getDate()+7*e)}),((t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Kr)/ti)),ui=hi(0),di=hi(1),pi=hi(4),fi=(t=>Gr((e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCDate(t.getUTCDate()+7*e)}),((t,e)=>(e-t)/ti)))(0),gi=Gr((t=>{t.setDate(1),t.setHours(0,0,0,0)}),((t,e)=>{t.setMonth(t.getMonth()+e)}),((t,e)=>e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())),(t=>t.getMonth())),mi=Gr((t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)}),((t,e)=>e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())),(t=>t.getUTCMonth())),yi=Math.floor,xi=Gr((t=>{t.setMonth(0,1),t.setHours(0,0,0,0)}),((t,e)=>{t.setFullYear(t.getFullYear()+e)}),((t,e)=>e.getFullYear()-t.getFullYear()),(t=>t.getFullYear()));xi.every=t=>isFinite(t=yi(t))&&t>0?Gr((e=>{e.setFullYear(yi(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),((e,n)=>{e.setFullYear(e.getFullYear()+n*t)})):null;const vi=Gr((t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)}),((t,e)=>e.getUTCFullYear()-t.getUTCFullYear()),(t=>t.getUTCFullYear()));vi.every=t=>isFinite(t=yi(t))&&t>0?Gr((e=>{e.setUTCFullYear(yi(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),((e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null;const wi=Math.floor,bi=Gr((()=>{}),((t,e)=>{t.setTime(+t+e)}),((t,e)=>e-t));bi.every=t=>(t=wi(t),isFinite(t)&&t>0?t>1?Gr((e=>{e.setTime(wi(e/t)*t)}),((e,n)=>{e.setTime(+e+n*t)}),((e,n)=>(n-e)/t)):bi:null);const ki=Math.abs,Si=Math.max,[Ci,Di]=((t,e,n,o,r,i)=>{const s=[[oi,1,$r],[oi,5,5e3],[oi,15,15e3],[oi,30,3e4],[i,1,Kr],[i,5,3e5],[i,15,9e5],[i,30,18e5],[r,1,Jr],[r,3,108e5],[r,6,216e5],[r,12,432e5],[o,1,Qr],[o,2,1728e5],[n,1,ti],[e,1,ei],[e,3,7776e6],[t,1,ni]],a=(e,n,o)=>{const r=ki(n-e)/o,i=jn((t=>{let[,,e]=t;return e})).right(s,r);if(i===s.length)return t.every(Un(e/ni,n/ni,o));if(0===i)return bi.every(Si(Un(e,n,o),1));const[a,l]=s[r/s[i-1][2]<s[i][2]/r?i-1:i];return a.every(l)};return[(t,e,n)=>{const o=e<t;o&&([t,e]=[e,t]);const r=n&&"function"==typeof n.range?n:a(t,e,n),i=r?r.range(t,+e+1):[];return o?i.reverse():i},a]})(xi,gi,ui,li,si,ri),Ai=Math.floor,Mi={"-":"",_:" ",0:"0"},Ti=(t,e,n)=>{const o=t<0?"-":"",r=(o?-t:t)+"",i=r.length;return o+(i<n?new Array(n-i+1).join(e)+r:r)},_i=(t,e)=>Ti(t.getDate(),e,2),Pi=(t,e)=>Ti(t.getHours(),e,2),Ni=(t,e)=>Ti(t.getHours()%12||12,e,2),ji=(t,e)=>Ti(1+li.count(xi(t),t),e,3),Ei=(t,e)=>Ti(t.getMilliseconds(),e,3),Ii=(t,e)=>Ei(t,e)+"000",Fi=(t,e)=>Ti(t.getMonth()+1,e,2),Li=(t,e)=>Ti(t.getMinutes(),e,2),Oi=(t,e)=>Ti(t.getSeconds(),e,2),Ri=t=>{const e=t.getDay();return 0===e?7:e},zi=(t,e)=>Ti(ui.count(xi(t)-1,t),e,2),Wi=t=>{const e=t.getDay();return e>=4||0===e?pi(t):pi.ceil(t)},Xi=(t,e)=>(t=Wi(t),Ti(pi.count(xi(t),t)+(4===xi(t).getDay()),e,2)),Hi=t=>t.getDay(),Yi=(t,e)=>Ti(di.count(xi(t)-1,t),e,2),Bi=(t,e)=>Ti(t.getFullYear()%100,e,2),Ui=(t,e)=>(t=Wi(t),Ti(t.getFullYear()%100,e,2)),Zi=(t,e)=>Ti(t.getFullYear()%1e4,e,4),Vi=(t,e)=>{let n=t.getDay();return t=n>=4||0===n?pi(t):pi.ceil(t),Ti(t.getFullYear()%1e4,e,4)},qi=t=>{let e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Ti(e/60|0,"0",2)+Ti(e%60,"0",2)},Gi=()=>"%",$i=t=>+t,Ki=t=>Ai(+t/1e3);let Ji=function(t){const e=t.dateTime,n=t.date,o=t.time,r=t.periods,i=t.days,s=t.shortDays,a=t.months,l=t.shortMonths,c={a:t=>s[t.getDay()],A:t=>i[t.getDay()],b:t=>l[t.getMonth()],B:t=>a[t.getMonth()],c:null,d:_i,e:_i,f:Ii,g:Ui,G:Vi,H:Pi,I:Ni,j:ji,L:Ei,m:Fi,M:Li,p:t=>r[+(t.getHours()>=12)],q:t=>1+~~(t.getMonth()/3),Q:$i,s:Ki,S:Oi,u:Ri,U:zi,V:Xi,w:Hi,W:Yi,x:null,X:null,y:Bi,Y:Zi,Z:qi,"%":Gi},h=(t,e)=>n=>{let o,r,i,s=[],a=-1,l=0,c=t.length;for(n instanceof Date||(n=new Date(+n));++a<c;)37===t.charCodeAt(a)&&(s.push(t.slice(l,a)),null!=(r=Mi[o=t.charAt(++a)])?o=t.charAt(++a):r="e"===o?" ":"0",(i=e[o])&&(o=i(n,r)),s.push(o),l=a+1);return s.push(t.slice(l,a)),s.join("")};return c.x=h(n,c),c.X=h(o,c),c.c=h(e,c),{format:t=>{const e=h(t+="",c);return e.toString=()=>t,e}}}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}).format;const Qi=Array.from,ts=t=>new Date(t),es=t=>t instanceof Date?+t:+new Date(+t);function ns(t,e,n,o,r,i,s,a,l,c){let h=fr(),u=h.invert,d=h.domain;const p=c(".%L"),f=c(":%S"),g=c("%I:%M"),m=c("%I %p"),y=c("%a %d"),x=c("%b %d"),v=c("%B"),w=c("%Y"),b=t=>(l(t)<t?p:a(t)<t?f:s(t)<t?g:i(t)<t?m:o(t)<t?r(t)<t?y:x:n(t)<t?v:w)(t);return h.invert=t=>new Date(u(t)),h.domain=function(){return arguments.length?d(Qi(arguments.length<=0?void 0:arguments[0],es)):d().map(ts)},h.ticks=e=>{let n=d();return t(n[0],n[n.length-1],null==e?10:e)},h.tickFormat=(t,e)=>null==e?b:c(e),h.nice=t=>{let n=d();return t&&"function"==typeof t.range||(t=e(n[0],n[n.length-1],null==t?10:t)),t?d(function(t,e){let n,o=0,r=(t=t.slice()).length-1,i=t[o],s=t[r];return s<i&&(n=o,o=r,r=n,n=i,i=s,s=n),t[o]=e.floor(i),t[r]=e.ceil(s),t}(n,t)):h},h.copy=()=>pr(h,ns(t,e,n,o,r,i,s,a,l,c)),h}const os=(t,e,n)=>{const o=e[n];if("function"!=typeof o)throw new Error("Attempt to rebind "+n+" which isn't a function on the source object");return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];const s=o.apply(e,r);return s===e?t:s}},rs=function(t,e){for(var n=arguments.length,o=new Array(n>2?n-2:0),r=2;r<n;r++)o[r-2]=arguments[r];for(const n of o)t[n]=os(t,e,n);return t};function is(){let t=Zn,e=!0,n=()=>{};function o(o){return Vn().combine(((t,o)=>{const r=e&&void 0===o?t:n(t,o);return void 0===r?t:r}))(o,t(o))}return o.algorithm=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],o):t},o.merge=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],o):n},o.skipUndefined=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],o):e},o}const ss=t=>"translate("+t[0]+", "+t[1]+")",as=function t(){let e=new Yr,n=[],o=[],r=Ur;function i(t){let i=e.get(t);if(nr(i)){if(r!==Ur)return r;e.set(t,i=n.push(t)-1)}return o[i%o.length]}i.domain=function(t){if(nr(t))return n.slice();n=[],e=new Yr;for(const o of t)e.has(o)||e.set(o,n.push(o)-1);return i},i.range=t=>nr(t)?o.slice():(o=Br(t),i),i.unknown=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],i):r},i.copy=()=>t(n,o).unknown(r);for(var s=arguments.length,a=new Array(s),l=0;l<s;l++)a[l]=arguments[l];return gr.apply(i,a),i}(["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"]);const ls=(t,e)=>{const n=t.replace("#","");if(t.indexOf("#")>-1&&(3===n.length||6===n.length)){const t=3===n.length?1:2;return"rgba("+parseInt(n.substring(0,1*t),16)+", "+parseInt(n.substring(1*t,2*t),16)+", "+parseInt(n.substring(2*t,3*t),16)+", "+e+")"}return t},cs=(t,e)=>{if(e&&t){let n;for(let o=t.length-1;o>=0;o--)if(n=t[o],null!=e(n))return n;return}const n=t?t.length:0;return n?t[n-1]:void 0},hs=(t,e)=>{if(!e||!t)return t?t[0]:void 0;{let n;for(let o=0;o<t.length;o++)if(n=t[o],null!=e(n))return n}},us=hs,ds=(t,e)=>{const{widthRatio:n}=t,{xScale:o}=e,[r,i]=o.range(),s=Math.abs(i-r);let a;if(null!=o.invert){const[t,e]=o.domain();a=s/Math.abs(t-e)}else a=s/o.domain().length;return a*n},ps=(t,e,n)=>{let o=0,r=t.length-1;for(;r-o>1;){const i=Math.round((o+r)/2);n(t[i])<=e?o=i:r=i}const i=n(t[o]),s=n(t[r]);return(null==i?void 0:i.valueOf())===(null==e?void 0:e.valueOf())&&(r=o),(null==s?void 0:s.valueOf())===(null==e?void 0:e.valueOf())&&(o=r),i<e&&s<e&&(o=r),i>e&&s>e&&(r=o),{left:o,right:r}},fs=(t,e)=>{if(t===e)return!0;if(!(t instanceof Object&&e instanceof Object))return!1;const n=Object.keys(t),o=n.length;for(let t=0;t<o;t++)if(!(n[t]in e))return!1;for(let r=0;r<o;r++)if(t[n[r]]!==e[n[r]])return!1;return o===Object.keys(e).length};r.Component;const gs=Array.isArray,ms=Object.keys,ys=Math.round,xs=(Math.abs,t=>(t>0)-(t<0)),vs=t=>t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView),ws="mouseenter.interaction",bs="mouseleave.interaction",ks="mousemove.pan",Ss="mouseup.pan",Cs="touchmove.pan",Ds="touchend.pan touchcancel.pan",As="wheel",Ms=t=>({pageX:t.pageX,pageY:t.pageY,clientX:t.clientX,clientY:t.clientY}),Ts=(t,e,n)=>[ys(t.clientX-e.left-n.clientLeft),ys(t.clientY-e.top-n.clientTop)],_s=(t,e)=>{const n=e.currentTarget,o=n.getBoundingClientRect();return Ts(t,o,n)},Ps=(t,e)=>{const n=t.currentTarget,o=null!=e?e:n.getBoundingClientRect();return Ts(t,o,n)},Ns=(t,e)=>{t.forEach((t=>{t.setTransform(1,0,0,1,0,0),t.clearRect(-1,-1,t.canvas.width+2,t.canvas.height+2),t.scale(e,e)}))};var js=n(779),Es=n.n(js);const Is=t=>"chart_"+t,Fs=(t,e)=>(t||[]).find((t=>{let{id:n}=t;return n===e})),Ls=()=>{},Os={amIOnTop:()=>!1,chartConfigs:[],chartId:0,displayXAccessor:()=>0,fullData:[],getMutableState:()=>({}),height:0,margin:{},plotData:[],setCursorClass:Ls,subscribe:Ls,unsubscribe:Ls,width:0,xAccessor:()=>0,xScale:Ls},Rs=(0,r.createContext)({...Os,chartConfig:{},chartId:0}),zs=(0,r.memo)((t=>{let{id:e=0,onContextMenu:n,onDoubleClick:o,children:i}=t;const s=(0,r.useContext)(wl),{subscribe:a,unsubscribe:l,chartConfigs:c}=s,h=(0,r.useCallback)(((t,r,i,s)=>{switch(t){case"contextmenu":{if(void 0===n)return;const{currentCharts:t}=r;t.indexOf(e)>-1&&n(s,r);break}case"dblclick":{if(void 0===o)return;const{currentCharts:t}=r;t.indexOf(e)>-1&&o(s,r);break}default:return}}),[n,o,e]),u=Fs(c,e),d=(0,r.useMemo)((()=>({...s,chartId:e,chartConfig:u})),[s,e,u]),p=ss(u.origin);return(0,r.useEffect)((()=>(a(Is(e),{listener:h}),()=>{l(Is(e))})),[]),(0,C.jsx)(Rs.Provider,{value:d,children:(0,C.jsx)("g",{transform:p,children:i})})})),Ws={id:0,flipYScale:!1,origin:[0,0],padding:0,yPan:!0,yPanEnabled:!1,yScale:function t(){let e=fr();e.copy=()=>pr(e,t());for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return gr.apply(e,o),Wr(e)}()},Xs=Array.isArray,Hs=Math.abs,Ys=t=>e=>{const n=t(e);return(t=>t&&"object"==typeof t&&!gs(t))(n)?function(t,e){void 0===t&&(t={}),void 0===e&&(e=t=>t);const n=ms(t),o=new Array(n.length);return n.forEach(((n,r)=>{o[r]=e(t[n],n,t)})),o}(n):n},Bs=t=>{if(Xs(t)&&2===t.length){const[e,n]=t;return"number"==typeof e&&"number"==typeof n}return!1},Us=function(t,e,n){return void 0===n&&(n=[]),r.Children.map(e,(e=>{if(null!=e&&(void 0!==(o=e.props)&&void 0!==o.id)){const o={...Ws,...e.props},{id:r,origin:i,padding:s,yExtents:a,yScale:l=Ws.yScale,flipYScale:c,yExtentsCalculator:h}=o,u=l.copy(),{width:d,height:p,availableHeight:f}=((t,e)=>{let{width:n,height:o}=t;return{availableHeight:o,width:n,height:e.height||o}})(t,o),{yPan:g}=o,m=a?(Xs(a)?a:[a]).map($n):void 0,y=n.find((t=>t.id===r));let{yPanEnabled:x}=o;if(Bs(a))if(y&&y.yPan&&y.yPanEnabled&&g&&x&&fs(y.originalYExtentsProp,a))u.domain(y.yScale.domain());else{const[t,e]=a;u.domain([t,e])}else y&&y.yPanEnabled&&(Bs(y.originalYExtentsProp)||(u.domain(y.yScale.domain()),x=!0));return{id:r,origin:$n(i)(d,f),padding:s,originalYExtentsProp:a,yExtents:m,yExtentsCalculator:h,flipYScale:c,yScale:u,yPan:g,yPanEnabled:x,width:d,height:p}}var o})).filter((t=>void 0!==t))},Zs=(t,e)=>t.filter((t=>{const n=t.origin[1],o=n+t.height;return e[1]>n&&e[1]<o})).map((t=>t.id)),Vs=(t,e,n,o,r)=>{let{plotData:i,xAccessor:s,displayXAccessor:a,fullData:l}=e;const c=t.map((t=>{let{yExtentsCalculator:e,yExtents:r,yScale:c}=t;const h=e?e({plotData:i,xDomain:n,xAccessor:s,displayXAccessor:a,fullData:l}):((t,e,n)=>{const o=t.map((t=>n.map(Ys(t)))),r=Es()(o);return e.invert?kn(r):[...new Set(r).values()]})(r,c,i),u=void 0!==o?c.range().map((t=>t-o)).map(c.invert):c.domain();return{realYDomain:h,yDomainDY:u,prevYDomain:c.domain()}})),h=Vn().combine(((t,e)=>{let{realYDomain:n,yDomainDY:o,prevYDomain:i}=e;const{id:s,padding:a,height:l,yScale:c,yPan:h,flipYScale:u,yPanEnabled:d=!1}=t,p=void 0===r||r.indexOf(s)>-1,f=h&&d?p?o:i:n,g=((t,e,n,o)=>{if(t.rangeRoundPoints||null==t.invert){if(isNaN(n))throw new Error("padding has to be a number for ordinal scale");t.rangeRoundPoints&&t.rangeRoundPoints(o?[0,e]:[e,0],n),t.rangeRound&&t.range(o?[0,e]:[e,0]).padding(n)}else{const{top:r,bottom:i}=isNaN(n)?n:{top:n,bottom:n};t.range(o?[r,e-i]:[e-i,r])}return t})(c.copy().domain(f),l,a,u);return{...t,yScale:g,realYDomain:n}}));return h(t,c)},qs=(t,e,n,o)=>{let r;if(t.invert){r=((t,e,n)=>{const{left:o,right:r}=ps(t,e,n);if(o===r)return t[o];const i=n(t[o]),s=n(t[r]);return Math.abs(i.valueOf()-e.valueOf())<Math.abs(s.valueOf()-e.valueOf())?t[o]:t[r]})(o,t.invert(n[0]),e)}else{const e=t.range().map(((t,e)=>({x:Hs(t-n[0]),idx:e}))).reduce(((t,e)=>t.x<e.x?t:e));r=void 0!==e?o[e.idx]:o[0]}return r};function Gs(t){let e;for(;e=t.sourceEvent;)t=e;return t}function $s(t,e){if(t=Gs(t),void 0===e&&(e=t.currentTarget),e){const n=e.ownerSVGElement||e;if(n.createSVGPoint){let o=n.createSVGPoint();return o.x=t.clientX,o.y=t.clientY,o=o.matrixTransform(e.getScreenCTM().inverse()),[o.x,o.y]}if(e.getBoundingClientRect){const t=e.getBoundingClientRect();return[event.clientX-t.left-e.clientLeft,event.clientY-t.top-e.clientTop]}}return[event.pageX,event.pageY]}const Ks=Array.from;function Js(t,e){return t.target&&(t=Gs(t),void 0===e&&(e=t.currentTarget),t=t.touches||[t]),Ks(t,(t=>$s(t,e)))}const Qs=t=>function(e){t.call(this,e,this.__data__)},ta=t=>function(){let e=this.__on;if(!e)return;let n,o=0,r=-1,i=e.length;for(;o<i;++o)n=e[o],t.type&&n.type!==t.type||n.name!==t.name?e[++r]=n:this.removeEventListener(n.type,n.listener,n.options);++r?e.length=r:delete this.__on},ea=(t,e,n)=>function(){let o,r,i=this.__on,s=Qs(e),a=0;if(i)for(r=i.length;a<r;++a)if((o=i[a]).type===t.type&&o.name===t.name)return this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=s,o.options=n),void(o.value=e);this.addEventListener(t.type,s,n),o={type:t.type,name:t.name,value:e,listener:s,options:n},i?i.push(o):this.__on=[o]};let na=[null];function oa(t,e){this._groups=t,this._parents=e}function ra(){return new oa([[document.documentElement]],na)}oa.prototype=ra.prototype={constructor:oa,each:function(t){let e,n,o,r,i=this._groups,s=0,a=i.length;for(;s<a;++s)for(e=i[s],n=0,o=e.length;n<o;++n)(r=e[n])&&t.call(r,r.__data__,n,e);return this},on:function(){let t,e,n,o,r,i=(t=>t.trim().split(/^|\s+/).map((t=>{let e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}})))((arguments.length<=0?void 0:arguments[0])+""),s=arguments.length<=1?void 0:arguments[1],a=arguments.length<=2?void 0:arguments[2],l=i.length,c=0;if(!(arguments.length<2)){for(n=s?ea:ta,t=0;t<l;++t)this.each(n(i[t],s,a));return this}if(n=this.node().__on,n)for(o=n.length;c<o;++c)for(t=0,r=n[c];t<l;++t)if((e=i[t]).type===r.type&&e.name===r.name)return r.value}};function ia(t){return"string"==typeof t?new oa([[document.querySelector(t)]],[document.documentElement]):new oa([[t]],na)}const sa="zhn-charts",aa="tooltip",la=sa+"-"+aa,ca=sa+"-"+aa+"-label",ha=sa+"-"+aa+"-hover",ua=sa+"-bb-"+aa,da=sa+"-ma-"+aa,pa=sa+"-ohlc-"+aa,fa="cursor",ga=sa+"-grabbing-"+fa,ma=sa+"-crosshair-"+fa,ya=sa+"-default-"+fa,xa=sa+"-move-"+fa,va=sa+"-pointer-"+fa,wa=sa+"-ns-resize-"+fa,ba=sa+"-ew-resize-"+fa,ka="interaction",Sa=sa+"-avoid-"+ka,Ca=sa+"-enable-"+ka,Da="axis",Aa=sa+"-x-"+Da,Ma=sa+"-y-"+Da,Ta=sa+"-"+Da+"-domain",_a="series",Pa=sa+"-bb-"+_a,Na=sa+"-bb-"+_a+"-area",ja=sa+"-rsi-"+_a,Ea="candlestick",Ia=sa+"-"+Ea,Fa=sa+"-"+Ea+"-wick",La=sa+"-"+Ea+"-candle",Oa=sa+"-up",Ra=sa+"-down",za=sa+"-crosshair",Wa=sa+"-cross_hair",Xa=sa+"-text-background",Ha="line",Ya=sa+"-"+Ha,Ba=sa+"-"+Ha+"-stroke",Ua=sa+"-bar",Za="-apple-system, system-ui, Roboto, 'Helvetica Neue', Ubuntu, sans-serif",Va=function(t,e,n){void 0===n&&(n=null),t.panInProgress||t.dragInProgress||ia(vs(e.current)).on(ks,n)};class qa extends r.Component{constructor(t){super(t),this.clicked=void 0,this.dx=0,this.dy=0,this.dragHappened=void 0,this.focus=void 0,this.lastNewPos=void 0,this.mouseInside=!1,this.mouseInteraction=!0,this.panEndTimeout=void 0,this.panHappened=void 0,this.ref=r.createRef(),this.handleEnter=t=>{const{onMouseEnter:e}=this.props;void 0!==e&&(this.mouseInside=!0,Va(this.state,this.ref,this.handleMouseMove),e(t))},this.handleLeave=t=>{const{onMouseLeave:e}=this.props;void 0!==e&&(this.mouseInside=!1,Va(this.state,this.ref),e(t))},this.handleWheel=t=>{const{pan:e,onPan:n,zoom:o,onZoom:r}=this.props;if(!e&&!o)return;const{panInProgress:i}=this.state,s=Math.abs(t.deltaY)>Math.abs(t.deltaX)&&Math.abs(t.deltaY)>0,a=Ps(t);if(t.preventDefault(),o&&this.focus&&s&&!i){const e=t.deltaY>0?1:-1;void 0!==r&&r(e,a,t)}else if(this.focus){if(this.shouldPan()&&void 0!==this.state.panStart){const{panStartXScale:e,chartsToPan:o}=this.state.panStart;this.lastNewPos=a,this.panHappened=!0,void 0===this.dx&&(this.dx=0),void 0===this.dy&&(this.dy=0),this.dx-=t.deltaX,this.dy+=t.deltaY;const r={dx:this.dx,dy:this.dy};void 0!==n&&n(a,e,r,o,t)}else{const{xScale:t,chartConfig:e}=this.props,n=Zs(e,a);this.dx=0,this.dy=0,this.setState({panInProgress:!0,panStart:{panStartXScale:t,panOrigin:a,chartsToPan:n}})}this.queuePanEnd(t)}},this.handleMouseMove=t=>{const{onMouseMove:e,mouseMove:n}=this.props;if(void 0!==e&&this.mouseInteraction&&n&&!this.state.panInProgress){e($s(t,this.ref.current),"mouse",t)}},this.handleClick=t=>{const e=Ps(t),{onClick:n,onDoubleClick:o}=this.props;this.panHappened||this.dragHappened||(this.clicked&&void 0!==o?(o(e,t),this.clicked=!1):void 0!==n&&(n(e,t),this.clicked=!0,setTimeout((()=>{this.clicked&&(this.clicked=!1)}),400)))},this.handleRightClick=t=>{t.stopPropagation(),t.preventDefault();const{onContextMenu:e,onPanEnd:n}=this.props,o=Ps(t,this.ref.current.getBoundingClientRect());if(void 0!==this.state.panStart){const{panStartXScale:e,panOrigin:[r,i],chartsToPan:s}=this.state.panStart;this.panHappened&&void 0!==n&&n(o,e,{dx:r,dy:i},s,t);ia(vs(this.ref.current)).on(ks,null).on(Ss,null),this.setState({panInProgress:!1,panStart:void 0})}void 0!==e&&e(o,t)},this.handleDrag=t=>{const{onDrag:e}=this.props;if(void 0===e)return;this.dragHappened=!0;const{dragStartPosition:n}=this.state;if(void 0===n)return;e({startPos:n,mouseXY:$s(t,this.ref.current)},t)},this.handleDragEnd=t=>{const e=$s(t,this.ref.current);if(ia(vs(this.ref.current)).on(ks,this.mouseInside?this.handleMouseMove:null).on(Ss,null),this.dragHappened){const{onDragComplete:n}=this.props;void 0!==n&&n({mouseXY:e},t)}this.mouseInteraction=!0,this.setState({dragInProgress:!1})},this.canPan=()=>{const{getAllPanConditions:t}=this.props,{pan:e}=this.props,{panEnabled:n,draggable:o}=t().reduce(((t,e)=>({draggable:t.draggable||e.draggable,panEnabled:t.panEnabled&&e.panEnabled})),{draggable:!1,panEnabled:e});return{panEnabled:n,somethingSelected:o}},this.handleMouseDown=t=>{if(0!==t.button)return;const{xScale:e,chartConfig:n,onMouseDown:o}=this.props;if(this.panHappened=!1,this.dragHappened=!1,this.focus=!0,!this.state.panInProgress&&this.mouseInteraction){const r=Ps(t),i=Zs(n,r),{panEnabled:s,somethingSelected:a}=this.canPan(),l=s&&!a;if(l)this.setState({panInProgress:l,panStart:{panStartXScale:e,panOrigin:r,chartsToPan:i}}),ia(vs(this.ref.current)).on(ks,this.handlePan).on(Ss,this.handlePanEnd);else if(a){this.setState({panInProgress:!1,dragInProgress:!0,panStart:void 0,dragStartPosition:r});const{onDragStart:e}=this.props;void 0!==e&&e({startPos:r},t),ia(vs(this.ref.current)).on(ks,this.handleDrag).on(Ss,this.handleDragEnd)}void 0!==o&&o(r,i,t)}t.preventDefault()},this.shouldPan=()=>{const{pan:t,onPan:e}=this.props;return t&&e&&void 0!==this.state.panStart},this.handlePan=t=>{if(this.shouldPan()&&void 0!==this.state.panStart){this.panHappened=!0;const{panStartXScale:e,panOrigin:n,chartsToPan:o}=this.state.panStart;let r,i,s;this.mouseInteraction?(s=$s(t,this.ref.current),this.lastNewPos=s,r=s[0]-n[0],i=s[1]-n[1]):(s=Js(t,this.ref.current)[0],this.lastNewPos=s,r=n[0]-s[0],i=n[1]-s[1]),this.dx=r,this.dy=i;const{onPan:a}=this.props;void 0!==a&&a(s,e,{dx:r,dy:i},o,t)}},this.handlePanEnd=t=>{const{pan:e,onPanEnd:n}=this.props;if(void 0!==this.state.panStart){const{panStartXScale:o,chartsToPan:r}=this.state.panStart;if(ia(vs(this.ref.current)).on(ks,this.mouseInside?this.handleMouseMove:null).on(Ss,null).on(Cs,null).on(Ds,null),this.panHappened&&e&&n){const{dx:e=0,dy:i=0}=this;delete this.dx,delete this.dy,void 0!==this.lastNewPos&&n(this.lastNewPos,o,{dx:e,dy:i},r,t)}this.setState({panInProgress:!1,panStart:void 0})}},this.handleTouchMove=t=>{const{onMouseMove:e}=this.props;if(void 0===e)return;const n=Ms(t.touches[0]);e(_s(n,t),"touch",t)},this.handleTouchStart=t=>{this.mouseInteraction=!1;const{pan:e,chartConfig:n,onMouseMove:o,xScale:r,onPanEnd:i}=this.props;if(1===t.touches.length){this.panHappened=!1;const i=_s(Ms(t.touches[0]),t);if(void 0!==o&&o(i,"touch",t),e){const t=Zs(n,i);this.setState({panInProgress:!0,panStart:{panStartXScale:r,panOrigin:i,chartsToPan:t}}),ia(vs(this.ref.current)).on(Cs,this.handlePan,!1).on(Ds,this.handlePanEnd,!1)}}else if(2===t.touches.length){const{panInProgress:n,panStart:o}=this.state;if(n&&e&&i&&void 0!==o){const{panStartXScale:n,panOrigin:[s,a],chartsToPan:l}=o;ia(vs(this.ref.current)).on(ks,this.mouseInside?this.handleMouseMove:null).on(Ss,null).on(Cs,this.handlePinchZoom,!1).on(Ds,this.handlePinchZoomEnd,!1);const c=_s(Ms(t.touches[0]),t),h=_s(Ms(t.touches[1]),t);this.panHappened&&e&&i&&void 0!==this.lastNewPos&&i(this.lastNewPos,n,{dx:s,dy:a},l,t),this.setState({panInProgress:!1,pinchZoomStart:{xScale:r,touch1Pos:c,touch2Pos:h,range:r.range(),chartsToPan:l}})}}},this.handlePinchZoom=t=>{const{pinchZoomStart:e}=this.state;if(void 0===e)return;const{xScale:n,zoom:o,onPinchZoom:r}=this.props;if(!o||void 0===r)return;const[i,s]=Js(this.ref.current),{chartsToPan:a,...l}=e;r(l,{touch1Pos:i,touch2Pos:s,xScale:n},t)},this.handlePinchZoomEnd=t=>{ia(vs(this.ref.current)).on(Cs,null).on(Ds,null);const{pinchZoomStart:e}=this.state;if(void 0===e)return;const{chartsToPan:n,...o}=e,{zoom:r,onPinchZoomEnd:i}=this.props;r&&i&&i(o,t),this.setState({pinchZoomStart:void 0})},this.setCursorClass=t=>{t!==this.state.cursorOverrideClass&&this.setState({cursorOverrideClass:t})},this.focus=t.focus,this.state={panInProgress:!1}}componentDidMount(){const{disableInteraction:t}=this.props,{current:e}=this.ref;null!==e&&(t||ia(e).on(ws,this.handleEnter).on(bs,this.handleLeave).on(As,this.handleWheel,{passive:!1}))}componentDidUpdate(){this.componentDidMount()}componentWillUnmount(){const{disableInteraction:t}=this.props,{current:e}=this.ref;null!==e&&(t||(ia(e).on(ws,null).on(bs,null).on(As,null,{passive:!1}),ia(vs(e)).on(ks,null)))}queuePanEnd(t){void 0!==this.panEndTimeout&&window.clearTimeout(this.panEndTimeout),this.panEndTimeout=window.setTimeout((()=>{this.handlePanEnd(t)}),100)}cancelDrag(){ia(vs(this.ref.current)).on(ks,this.mouseInside?this.handleMouseMove:null).on(Ss,null),this.mouseInteraction=!0,this.setState({dragInProgress:!1})}render(){const{height:t,width:e,disableInteraction:n,useCrossHairStyleCursor:o}=this.props,{cursorOverrideClass:r,panInProgress:i}=this.state,s=n?void 0:void 0!==r?r:o?i?ga:ma:void 0,a=n||{onMouseDown:this.handleMouseDown,onClick:this.handleClick,onContextMenu:this.handleRightClick,onTouchStart:this.handleTouchStart,onTouchMove:this.handleTouchMove};return(0,C.jsx)("rect",{ref:this.ref,className:s,width:e,height:t,style:{opacity:0},...a})}}qa.defaultProps={mouseMove:!1,zoom:!1,pan:!1,panSpeedMultiplier:1,focus:!1,disableInteraction:!1};const Ga=t=>{var e,n;return null!=(e=null==(n=i(t))?void 0:n.getContext("2d"))?e:void 0},$a=(0,r.memo)((0,r.forwardRef)(((t,e)=>{let{style:n,width:o,height:i,ratio:s}=t;const a=(0,r.useRef)(),l=(0,r.useRef)(),c=(0,r.useRef)();(0,r.useImperativeHandle)(e,(()=>({getCanvasContexts:()=>({bg:Ga(a),axes:Ga(l),mouseCoord:Ga(c)})})));const h=o*s,u=i*s,d={position:"absolute",width:o,height:i};return(0,C.jsxs)("div",{style:{...n,position:"absolute"},children:[(0,C.jsx)("canvas",{ref:a,width:h,height:u,style:d}),(0,C.jsx)("canvas",{ref:l,width:h,height:u,style:d}),(0,C.jsx)("canvas",{ref:c,width:h,height:u,style:d})]})}))),Ka="chart-area-clip",Ja=t=>{let{configs:e}=t;return e.map(((t,e)=>(0,C.jsx)("clipPath",{id:Ka+"-"+t.id,children:(0,C.jsx)("rect",{x:"0",y:"0",width:t.width,height:t.height})},e)))},Qa=t=>{let{dimensions:e,chartConfig:n}=t;return(0,C.jsxs)("defs",{children:[(0,C.jsx)("clipPath",{id:Ka,children:(0,C.jsx)("rect",{x:"0",y:"0",width:e.width,height:e.height})}),(0,C.jsx)(Ja,{configs:n})]})},tl=Math.floor,el=Math.max,nl=Math.ceil,ol=(t,e,n,o)=>{const{lastItem:r,lastItemX:i}=t,s=e(r),[a,l]=n.range();return(l-a)/(i.valueOf()-a)*(s.valueOf()-o.valueOf())+o.valueOf()},rl=(t,e,n,o)=>{const r=il(t,o),i=sl(t,n);return e>=r&&e<i},il=(t,e)=>el(1,nl(t*e)),sl=(t,e)=>tl(t*e),al=(t,e)=>tl(.97*sl(t,e)),ll=(t,e,n,o)=>t.slice(ps(t,e,o).left,ps(t,n,o).right+1);function cl(t){let{xScale:e,useWholeData:n,clamp:o,pointsPerPxThreshold:r,minPointsPerPxThreshold:i,flipXScale:s}=t;return((t,e,n,o,r)=>({filterData:function(i,s,a,l,c){let{currentPlotData:h,currentDomain:u,fallbackStart:d,fallbackEnd:p,ignoreThresholds:f=!1}=void 0===c?{}:c;if(t)return{plotData:i,domain:s};let g=hs(s),m=cs(s),y=s,x=ll(i,g,m,a);1===x.length&&void 0!==d&&(g=d,m=ol(p,a,l,g),y=[g,m],x=ll(i,g,m,a)),"function"==typeof e?y=e(y,[a(hs(i)),a(cs(i))]):("left"!==e&&"both"!==e&&!0!==e||(y=[Sn([g,a(hs(i))]),y[1]]),"right"!==e&&"both"!==e&&!0!==e||(y=[y[0],Cn([m,a(cs(i))])])),y!==s&&(x=ll(i,y[0],y[1],a));const v=y,w=l.copy().domain(v);let b,k,S=tl(w(a(cs(x)))-w(a(hs(x))));r&&S<0&&(S*=-1);const C=cs(w.range())-hs(w.range());if(f&&x.length>1||rl(S,x.length,n,o))b=x,k=v;else if(C>sl(S,n)&&null!=p){b=x;const t=ol(p,a,l,hs(v));k=[hs(v),t]}else b=null!=h?h:x.slice(x.length-al(S,n)),k=null!=u?u:[a(hs(b)),a(cs(b))];return{plotData:b,domain:k}}}))(n||null==e.invert,o,r,i,s)}const hl=["seriesName"],ul=()=>{const t="\n\t."+ga+" {\n\t\tpointer-events: all;\n\t\tcursor: -moz-grabbing;\n\t\tcursor: -webkit-grabbing;\n\t\tcursor: grabbing;\n\t}\n\t."+ma+" {\n\t\tpointer-events: all;\n\t\tcursor: arrow;\n\t}\n\t."+ha+" {\n\t\tpointer-events: all;\n\t\tcursor: pointer;\n\t}\n\t."+Sa+" {\n\t\tpointer-events: none;\n\t}\n\t."+Ca+" {\n\t\tpointer-events: all;\n\t}\n\t."+la+" {\n\t\tpointer-events: all;\n\t\tcursor: pointer;\n\t}\n\t."+ya+" {\n\t\tcursor: default;\n\t}\n\t."+xa+" {\n\t\tcursor: move;\n\t}\n\t."+va+" {\n\t\tcursor: pointer;\n\t}\n\t."+wa+" {\n\t\tcursor: ns-resize;\n\t}\n\t."+ba+" {\n\t\tcursor: ew-resize;\n\t}";return(0,C.jsx)("style",{type:"text/css",children:t})},dl=t=>{let{margin:{top:e,bottom:n,left:o,right:r},height:i,width:s}=t;return{height:i-e-n,width:s-o-r}},pl=t=>{const{data:e,plotFull:n,xScale:o,clamp:r,pointsPerPxThreshold:i,flipXScale:s,xAccessor:a,displayXAccessor:l,minPointsPerPxThreshold:c}=t,h=void 0!==n?n:a===Zn,{filterData:u}=cl({xScale:o,useWholeData:h,clamp:r,pointsPerPxThreshold:i,minPointsPerPxThreshold:c,flipXScale:s});return{xAccessor:a,displayXAccessor:null!=l?l:a,xScale:o.copy(),fullData:e,filterData:u}},fl=function(t,e,n,o){if(void 0===o&&(o=1),t.rangeRoundPoints){if(isNaN(n))throw new Error("padding has to be a number for ordinal scale");t.rangeRoundPoints([0,e.width],n)}else if(t.padding){if(isNaN(n))throw new Error("padding has to be a number for ordinal scale");t.range([0,e.width]),t.padding(n/2)}else{const{left:r,right:i}=isNaN(n)?n:{left:n,right:n};o>0?t.range([r,e.width-i]):t.range([e.width-i,r])}return t},gl=t=>t?-1:1,ml=t=>{const e=(t=>{const{xAccessor:e,xExtents:n,data:o,padding:r,flipXScale:i}=t,s=gl(i),a=dl(t),l="function"==typeof n?n(o):kn(n.map((t=>$n(t))).map((t=>t(o,e)))),{xAccessor:c,displayXAccessor:h,xScale:u,fullData:d,filterData:p}=pl(t),f=fl(u,a,r,s),{plotData:g,domain:m}=p(d,l,e,f);return{plotData:g,xScale:f.domain(m),xAccessor:c,displayXAccessor:h,fullData:d,filterData:p}})(t),{xAccessor:n,displayXAccessor:o,fullData:r,plotData:i,xScale:s}=e,{postCalculator:a,children:l}=t,c=void 0!==a?a(i):i,h=dl(t),u=Vs(Us(h,l),{plotData:c,xAccessor:n,displayXAccessor:o,fullData:r},s.domain());return{...e,xScale:s,plotData:c,chartConfigs:u}},yl=t=>{let{touch1Pos:e,touch2Pos:n}=t;return{topLeft:[Math.min(e[0],n[0]),Math.min(e[1],n[1])],bottomRight:[Math.max(e[0],n[0]),Math.max(e[1],n[1])]}},xl=(t,e,n)=>!isNaN(t(e(hs(n))))&&null!=t.invert,vl=(t,e,n,o,r)=>{const i=hs(t),s=hs(e.domain()),a=n(i),l=cs(t),c=cs(e.domain()),h=n(l);s<a&&void 0!==r&&r(s,a),h<c&&void 0!==o&&o(h,c)},wl=(0,r.createContext)(Os),bl=(t,e,n)=>t.map((t=>t.id===e?{...t,yScale:t.yScale.copy().domain(n),yPanEnabled:!0}:t));class kl extends r.Component{constructor(t){super(t),this.canvasContainerRef=(0,r.createRef)(),this.eventCaptureRef=(0,r.createRef)(),this.finalPinch=void 0,this.lastSubscriptionId=0,this.mutableState={},this.panInProgress=!1,this.prevMouseXY=void 0,this._isDidUpdateRedraw=!1,this._asyncRedrawId=void 0,this.subscriptions=[],this.waitingForPinchZoomAnimationFrame=void 0,this.waitingForPanAnimationFrame=void 0,this.waitingForMouseMoveAnimationFrame=void 0,this.hackyWayToStopPanBeyondBounds__plotData=void 0,this.hackyWayToStopPanBeyondBounds__domain=void 0,this.getMutableState=()=>this.mutableState,this.getCanvasContexts=()=>{var t;return null==(t=this.canvasContainerRef.current)?void 0:t.getCanvasContexts()},this.generateSubscriptionId=()=>(this.lastSubscriptionId++,this.lastSubscriptionId),this.subscribe=(t,e)=>{const{getPanConditions:n=$n({draggable:!1,panEnabled:!0})}=e;this.subscriptions=this.subscriptions.concat({id:t,...e,getPanConditions:n})},this.unsubscribe=t=>{this.subscriptions=this.subscriptions.filter((e=>e.id!==t))},this.getAllPanConditions=()=>this.subscriptions.map((t=>t.getPanConditions())),this.setCursorClass=t=>{var e;null==(e=this.eventCaptureRef.current)||e.setCursorClass(t)},this.amIOnTop=t=>{const e=this.subscriptions.filter((t=>t.getPanConditions().draggable));return e.length>0&&cs(e).id===t},this.handleContextMenu=(t,e)=>{const{xAccessor:n,chartConfigs:o,plotData:r,xScale:i}=this.state,s=Zs(o,t),a=qs(i,n,t,r);this.triggerEvent("contextmenu",{mouseXY:t,currentItem:a,currentCharts:s},e)},this.calculateStateForDomain=t=>{const{fullData:e,xAccessor:n,displayXAccessor:o,xScale:r,chartConfigs:i,plotData:s,filterData:a}=this.state,{postCalculator:l}=this.props,{plotData:c,domain:h}=a(e,t,n,r,{currentPlotData:s,currentDomain:r.domain()}),u=l(c),d=r.copy().domain(h),p=Vs(i,{plotData:u,xAccessor:n,displayXAccessor:o,fullData:e},d.domain());return{xScale:d,plotData:u,chartConfigs:p}},this.pinchZoomHelper=(t,e)=>{const{xScale:n}=t,{fullData:o,xScale:r,chartConfigs:i,plotData:s,xAccessor:a,displayXAccessor:l,filterData:c}=this.state,{postCalculator:h}=this.props,u=((t,e,n)=>{const{topLeft:o,bottomRight:r}=yl(t),{topLeft:i,bottomRight:s}=yl(e),a=n.range()[1],l=Math.round(-(r[0]*i[0]-o[0]*s[0])/(o[0]-r[0])),c=Math.round(a+((a-r[0])*(a-i[0])-(a-o[0])*(a-s[0]))/(a-o[0]-(a-r[0])));return[Math.round(-l*o[0]/(-l+i[0])),Math.round(a-(c-a)*(a-o[0])/(c+(a-i[0])))].map(n.invert)})(t,e,n),{plotData:d,domain:p}=c(o,u,a,n,{currentPlotData:s,currentDomain:r.domain()}),f=h(d),g=r.copy().domain(p),m=e.touch1Pos;return{chartConfigs:Vs(i,{plotData:f,xAccessor:a,displayXAccessor:l,fullData:o},g.domain()),xScale:g,plotData:f,mouseXY:m,currentItem:qs(g,a,m,f)}},this.handlePinchZoom=(t,e,n)=>{if(!this.waitingForPinchZoomAnimationFrame){this.waitingForPinchZoomAnimationFrame=!0;const o=this.pinchZoomHelper(t,e);this.triggerEvent("pinchzoom",o,n),this.finalPinch=e,requestAnimationFrame((()=>{this.clearBothCanvas(),this.draw({trigger:"pinchzoom"}),this.waitingForPinchZoomAnimationFrame=!1}))}},this.handlePinchZoomEnd=(t,e)=>{const{fullData:n,xAccessor:o=kl.defaultProps.xAccessor}=this.state;if(this.finalPinch){const r=this.pinchZoomHelper(t,this.finalPinch),{xScale:i}=r,{onLoadAfter:s,onLoadBefore:a}=this.props;this.triggerEvent("pinchzoom",r,e),this.finalPinch=void 0,this.clearThreeCanvas(),this.setState(r,(()=>vl(n,i,o,s,a)))}},this._zoomXImpl=(t,e,n,o,r)=>{this.triggerEvent("zoom",{xScale:n,plotData:t,chartConfigs:e,...o,show:!0},r);const{fullData:i,xAccessor:s}=this.state,{onZoom:a,onLoadAfter:l,onLoadBefore:c}=this.props;a((t||[]).length),this._isDidUpdateRedraw=!0,this.setState({xScale:n,plotData:t,chartConfigs:e},(()=>vl(i,n,s,l,c)))},this.handleZoom=(t,e,n)=>{if(this.panInProgress)return;const{xAccessor:o,xScale:r,plotData:i}=this.state,{zoomMultiplier:s,zoomAnchor:a}=this.props,l=a({xScale:r,xAccessor:o,mouseXY:e,plotData:i}),c=((t,e)=>t>0?1*e:1/e)(t,s),h=((t,e,n)=>{const o=t(e);return t.range().map((t=>o+(t-o)*n)).map((e=>t.invert(e)))})(r,l,c),{xScale:u,plotData:d,chartConfigs:p}=this.calculateStateForDomain(h);this.mutableState={mouseXY:e,currentItem:qs(u,o,e,d),currentCharts:Zs(p,e)},this._zoomXImpl(d,p,u,this.mutableState,n)},this.xAxisZoom=t=>{const{xScale:e,plotData:n,chartConfigs:o}=this.calculateStateForDomain(t);this._zoomXImpl(n,o,e)},this.yAxisZoom=(t,e)=>{this._isDidUpdateRedraw=!0,this.setState({chartConfigs:bl(this.state.chartConfigs,t,e)})},this.draw=t=>{this.subscriptions.forEach((e=>{e.draw&&e.draw(t)}))},this.redraw=()=>{this.clearThreeCanvas(),this.draw({force:!0})},this.panHelper=(t,e,n,o)=>{let{dx:r,dy:i}=n;const{fullData:s,xAccessor:a,displayXAccessor:l,chartConfigs:c,filterData:h}=this.state,{postCalculator:u}=this.props,d=e.range().map((t=>t-r)).map((t=>e.invert(t))),{plotData:p,domain:f}=h(s,d,a,e,{currentPlotData:this.hackyWayToStopPanBeyondBounds__plotData,currentDomain:this.hackyWayToStopPanBeyondBounds__domain,ignoreThresholds:!0}),g=e.copy().domain(f),m=u(p),y=qs(g,a,t,m),x=Vs(c,{plotData:m,xAccessor:a,displayXAccessor:l,fullData:s},g.domain(),i,o);return{xScale:g,plotData:m,chartConfigs:x,mouseXY:t,currentCharts:Zs(x,t),currentItem:y}},this.handlePan=(t,e,n,o,r)=>{if(!this.waitingForPanAnimationFrame){var i,s;this.waitingForPanAnimationFrame=!0,this.hackyWayToStopPanBeyondBounds__plotData=null!=(i=this.hackyWayToStopPanBeyondBounds__plotData)?i:this.state.plotData,this.hackyWayToStopPanBeyondBounds__domain=null!=(s=this.hackyWayToStopPanBeyondBounds__domain)?s:this.state.xScale.domain();const a=this.panHelper(t,e,n,o);this.hackyWayToStopPanBeyondBounds__plotData=a.plotData,this.hackyWayToStopPanBeyondBounds__domain=a.xScale.domain(),this.panInProgress=!0,this.triggerEvent("pan",a,r),this.mutableState={mouseXY:a.mouseXY,currentItem:a.currentItem,currentCharts:a.currentCharts},requestAnimationFrame((()=>{this.waitingForPanAnimationFrame=!1,this.clearBothCanvas(),this.draw({trigger:"pan"})}))}},this.handlePanEnd=(t,e,n,o,r)=>{const i=this.panHelper(t,e,n,o),{xScale:s,plotData:a,chartConfigs:l}=i;this.hackyWayToStopPanBeyondBounds__plotData=null,this.hackyWayToStopPanBeyondBounds__domain=null,this.panInProgress=!1,this.triggerEvent("panend",i,r),requestAnimationFrame((()=>{const{fullData:t,xAccessor:e}=this.state,{onLoadAfter:n,onLoadBefore:o}=this.props;this._isDidUpdateRedraw=!0,this.setState({xScale:s,plotData:a,chartConfigs:l},(()=>vl(t,s,e,n,o)))}))},this.handleMouseDown=(t,e,n)=>{this.triggerEvent("mousedown",this.mutableState,n)},this.handleMouseEnter=t=>{this.triggerEvent("mouseenter",{show:!0},t)},this.handleMouseMove=(t,e,n)=>{if(!this.waitingForMouseMoveAnimationFrame){this.waitingForMouseMoveAnimationFrame=!0;const{chartConfigs:e,plotData:o,xScale:r,xAccessor:i}=this.state,s=Zs(e,t),a=qs(r,i,t,o);this.triggerEvent("mousemove",{show:!0,mouseXY:t,prevMouseXY:this.prevMouseXY,currentItem:a,currentCharts:s},n),this.prevMouseXY=t,this.mutableState={mouseXY:t,currentItem:a,currentCharts:s},requestAnimationFrame((()=>{this.clearMouseCanvas(),this.draw({trigger:"mousemove"}),this.waitingForMouseMoveAnimationFrame=!1}))}},this.handleMouseLeave=t=>{this.triggerEvent("mouseleave",{show:!1},t),this.clearMouseCanvas(),this.draw({trigger:"mouseleave"})},this.handleDragStart=(t,e)=>{let{startPos:n}=t;this.triggerEvent("dragstart",{startPos:n},e)},this.handleDrag=(t,e)=>{let{startPos:n,mouseXY:o}=t;const{chartConfigs:r,plotData:i,xScale:s,xAccessor:a}=this.state,l=Zs(r,o),c=qs(s,a,o,i);this.triggerEvent("drag",{startPos:n,mouseXY:o,currentItem:c,currentCharts:l},e),this.mutableState={mouseXY:o,currentItem:c,currentCharts:l},requestAnimationFrame((()=>{this.clearMouseCanvas(),this.draw({trigger:"drag"})}))},this.handleDragEnd=(t,e)=>{let{mouseXY:n}=t;this.triggerEvent("dragend",{mouseXY:n},e),requestAnimationFrame((()=>{this.clearMouseCanvas(),this.draw({trigger:"dragend"})}))},this.handleClick=(t,e)=>{this.triggerEvent("click",this.mutableState,e),requestAnimationFrame((()=>{this.clearMouseCanvas(),this.draw({trigger:"click"})}))},this.handleDoubleClick=(t,e)=>{this.triggerEvent("dblclick",{},e)},this.resetYDomain=t=>{const{chartConfigs:e}=this.state;let n=!1;const o=e.map((e=>null!=t&&e.id!==t||fs(e.yScale.domain(),e.realYDomain)?e:(n=!0,{...e,yScale:e.yScale.domain(e.realYDomain),yPanEnabled:!1})));n&&(this.clearThreeCanvas(),this.setState({chartConfigs:o}))},this.state=ml(t)}clearBothCanvas(){const{axes:t,mouseCoord:e}=this.getCanvasContexts()||{};t&&e&&Ns([t,e],this.props.ratio)}clearMouseCanvas(){const{mouseCoord:t}=this.getCanvasContexts()||{};t&&Ns([t],this.props.ratio)}clearThreeCanvas(){const{axes:t,mouseCoord:e,bg:n}=this.getCanvasContexts()||{};t&&e&&n&&Ns([t,e,n],this.props.ratio)}cancelDrag(){var t;null==(t=this.eventCaptureRef.current)||t.cancelDrag(),this.triggerEvent("dragcancel")}triggerEvent(t,e,n){this.subscriptions.forEach((o=>{const r={...this.state,subscriptions:this.subscriptions};o.listener(t,e,r,n)}))}getContextValues(){const{margin:t,ratio:e}=this.props,{fullData:n,plotData:o,chartConfigs:r,xScale:i,xAccessor:s,displayXAccessor:a}=this.state,{width:l,height:c}=dl(this.props);return{chartId:-1,margin:t,ratio:e,plotData:o,chartConfigs:r,xScale:i,xAccessor:s,displayXAccessor:a,width:l,height:c,fullData:n||[],xAxisZoom:this.xAxisZoom,yAxisZoom:this.yAxisZoom,getCanvasContexts:this.getCanvasContexts,redraw:this.redraw,subscribe:this.subscribe,unsubscribe:this.unsubscribe,generateSubscriptionId:this.generateSubscriptionId,getMutableState:this.getMutableState,amIOnTop:this.amIOnTop,setCursorClass:this.setCursorClass}}static getDerivedStateFromProps(t,e){const{recentProps:n={},chartConfigs:o,plotData:r,xAccessor:i,xScale:s}=e,a=((t,e)=>!hl.every((n=>fs(t[n],e[n]))))(n,t);let l;if(xl(s,i,r)&&!a&&fs(n.xExtents,t.xExtents)){const[n,r]=s.domain(),i=cs(e.fullData),a=pl(t),{xAccessor:c}=a,h=c(i);l=((t,e,n,o,r)=>{const{fullData:i,xScale:s,xAccessor:a,displayXAccessor:l,filterData:c}=t,h=cs(i),u=a(h),[d,p]=e.domain(),{postCalculator:f,children:g,padding:m,flipXScale:y,maintainPointsPerPixelOnResize:x}=n,v=gl(y),w=dl(n),b=fl(s,w,m,v);let k;if(!o||p>=u){const[t,n]=e.range(),[o,r]=b.range(),s=(r-o)/(n-t)*(p.valueOf()-d.valueOf()),l=c(i,[x?p.valueOf()-s:d,p],a,b,{fallbackStart:d,fallbackEnd:{lastItem:h,lastItemX:e(u)}});k=l.plotData,b.domain(l.domain)}else if(o&&p<u){const t=e(u)-e.range()[1],[n,o]=e.range().map((e=>e+t)).map((t=>e.invert(t))),r=c(i,[n,o],a,b);k=r.plotData,b.domain(r.domain)}const S=f(k),C=Us(w,g,r),D=Vs(C,{plotData:S,xAccessor:a,displayXAccessor:l,fullData:i},b.domain());return{xScale:b,xAccessor:a,chartConfigs:D,plotData:S,fullData:i,filterData:c}})(a,s,t,h<=r&&h>=n,o)}else l=ml(t);return{...l,recentProps:t}}componentDidUpdate(t){this._isDidUpdateRedraw?(this._isDidUpdateRedraw=!1,this.redraw()):t===this.props||this.panInProgress||(clearTimeout(this._asyncRedrawId),this._asyncRedrawId=setTimeout((()=>{this.redraw()}),0)),t.data!==this.props.data&&this.triggerEvent("dataupdated",{chartConfigs:this.state.chartConfigs,xScale:this.state.xScale,plotData:this.state.plotData})}shouldComponentUpdate(){return!this.panInProgress}render(){const{disableInteraction:t,disablePan:e,disableZoom:n,useCrossHairStyleCursor:o,height:r,width:i,margin:s,className:a,zIndex:l,defaultFocus:c,ratio:h,mouseMoveEvent:u,onClick:d,onDoubleClick:p,children:f}=this.props,{plotData:g,xScale:m,xAccessor:y,chartConfigs:x}=this.state,v=dl(this.props),w=xl(m,y,g),b=o&&w;return(0,C.jsx)(wl.Provider,{value:this.getContextValues(),children:(0,C.jsxs)("div",{className:a,style:{position:"relative",width:i,height:r},onClick:d,onDoubleClick:p,children:[(0,C.jsx)($a,{ref:this.canvasContainerRef,ratio:h,width:i,height:r,style:{height:r,zIndex:l,width:i}}),(0,C.jsxs)("svg",{className:a,width:i,height:r,style:{position:"absolute",zIndex:l+5},children:[ul(),(0,C.jsx)(Qa,{dimensions:v,chartConfig:x}),(0,C.jsxs)("g",{transform:"translate("+(s.left+.5)+", "+(s.top+.5)+")",children:[(0,C.jsx)(qa,{ref:this.eventCaptureRef,useCrossHairStyleCursor:b,mouseMove:u&&w,zoom:!n&&w,pan:!e&&w,width:v.width,height:v.height,chartConfig:x,xScale:m,xAccessor:y,focus:c,disableInteraction:t,getAllPanConditions:this.getAllPanConditions,onContextMenu:this.handleContextMenu,onClick:this.handleClick,onDoubleClick:this.handleDoubleClick,onMouseDown:this.handleMouseDown,onMouseMove:this.handleMouseMove,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onDragStart:this.handleDragStart,onDrag:this.handleDrag,onDragComplete:this.handleDragEnd,onZoom:this.handleZoom,onPinchZoom:this.handlePinchZoom,onPinchZoomEnd:this.handlePinchZoomEnd,onPan:this.handlePan,onPanEnd:this.handlePanEnd}),(0,C.jsx)("g",{className:Sa,children:f})]})]})]})})}}kl.defaultProps={clamp:!1,className:sa,defaultFocus:!0,disablePan:!1,disableInteraction:!1,disableZoom:!1,flipXScale:!1,maintainPointsPerPixelOnResize:!0,margin:{top:0,right:40,bottom:40,left:0},minPointsPerPxThreshold:.01,mouseMoveEvent:!0,postCalculator:Zn,padding:0,pointsPerPxThreshold:2,useCrossHairStyleCursor:!0,xAccessor:Zn,xExtents:[Cn,Sn],zIndex:1,zoomAnchor:t=>{let{xScale:e,xAccessor:n,mouseXY:o,plotData:r}=t;return n(qs(e,n,o,r))},zoomMultiplier:1.1,onZoom:()=>{}};const Sl=t=>{const e=(0,r.useRef)(null);return(0,r.useLayoutEffect)((()=>{e.current=t})),(0,r.useCallback)((function(){const t=e.current;return t?t(...arguments):void 0}),[])},Cl=Object.assign,Dl={mouseleave:"mousemove",panend:"pan",pinchzoom:"pan",mousedown:"mousemove",click:"mousemove",contextmenu:"mousemove",dblclick:"mousemove",dragstart:"drag",dragend:"drag",dragcancel:"drag",zoom:"zoom"},Al=t=>t.mouseCoord,Ml=(t,e)=>e?{clipPath:"url(#chart-area-clip"+(void 0!==t?"-"+t:"")+")"}:void 0,Tl=(0,r.memo)((0,r.forwardRef)(((t,e)=>{const{isHover:n,clip:o=!0,edgeClip:i=!1,canvasToDraw:s=Al,canvasDraw:a,svgDraw:l,preCanvasDraw:c,postCanvasDraw:h,updateMoreProps:u,getMoreProps:d}=t,p=(0,r.useContext)(wl),{chartId:f}=(0,r.useContext)(Rs),g=(0,r.useMemo)((()=>(null==p.generateSubscriptionId?void 0:p.generateSubscriptionId())||0),[]),m=_(),{getCanvasContexts:y,subscribe:x,unsubscribe:v}=p,w=(0,r.useRef)({chartId:p.chartId,hovering:!1,currentCharts:[],chartConfigs:p.chartConfigs,fullData:p.fullData,plotData:p.plotData,xScale:p.xScale,xAccessor:p.xAccessor}),b=(0,r.useRef)(!1),k=(0,r.useRef)(!1),S=(0,r.useRef)(!1),D=(0,r.useCallback)(((t,e)=>{Cl(e,t||{}),null==u||u(t,e)}),[u]),A=(0,r.useCallback)((()=>{const{chartConfigs:t,xAccessor:e,displayXAccessor:n,width:o,height:r,fullData:i}=p,s=null==d?void 0:d(w.current);return{displayXAccessor:n,width:o,height:r,...w.current,fullData:i,chartConfigs:t,xAccessor:e,...s,chartConfig:Fs(t,f)}}),[p,d,f]);(0,r.useImperativeHandle)(e,(()=>({getMoreProps:A})),[A]);const M=(0,r.useCallback)((t=>void 0!==n&&n(A(),t)),[n,A]),T=(0,r.useCallback)(((t,e)=>{null==c||c(t,e)}),[c]),P=(0,r.useCallback)(((t,e)=>{null==h||h(t,e)}),[h]),N=Sl(((e,n)=>{const o=Dl[e]||e;if(t.drawOn.includes(o)&&(!t.shouldTypeProceed||t.shouldTypeProceed(e,w.current)))switch(e){case"zoom":case"mouseenter":break;case"mouseleave":w.current.hovering=!1,t.onUnHover&&t.onUnHover(n,A());break;case"contextmenu":t.onContextMenu&&t.onContextMenu(n,A()),w.current.hovering&&t.onContextMenuWhenHover&&t.onContextMenuWhenHover(n,A());break;case"mousedown":t.onMouseDown&&t.onMouseDown(n,A());break;case"click":{const{onClick:e,onClickOutside:o,onClickWhenHover:r}=t,i=A();i.hovering&&void 0!==r?r(n,i):void 0!==o&&o(n,i),void 0!==e&&e(n,i);break}case"mousemove":{const e=w.current.hovering;w.current.hovering=M(n);const{amIOnTop:o,setCursorClass:r}=p;w.current.hovering&&!t.selected&&o(g)&&void 0!==t.onHover?(r("react-financial-charts-pointer-cursor"),S.current=!0):w.current.hovering&&t.selected&&o(g)?(r(t.interactiveCursorClass),S.current=!0):e&&!w.current.hovering&&S.current&&(S.current=!1,r(null));const i=A();w.current.hovering&&!e&&t.onHover&&t.onHover(n,i),e&&!w.current.hovering&&t.onUnHover&&t.onUnHover(n,i),t.onMouseMove&&t.onMouseMove(n,i);break}case"dblclick":{const e=A();t.onDoubleClick&&t.onDoubleClick(n,e),w.current.hovering&&t.onDoubleClickWhenHover&&t.onDoubleClickWhenHover(n,e);break}case"pan":w.current.hovering=!1,t.onPan&&t.onPan(n,A());break;case"panend":t.onPanEnd&&t.onPanEnd(n,A());break;case"dragstart":if(F().draggable){const{amIOnTop:e}=p;e(g)&&(b.current=!0,void 0!==t.onDragStart&&t.onDragStart(n,A()))}break;case"drag":b.current&&t.onDrag&&t.onDrag(n,A());break;case"dragend":b.current&&t.onDragComplete&&t.onDragComplete(n,A()),b.current=!1;break;case"dragcancel":if(b.current||S.current){const{setCursorClass:t}=p;t(null)}break;default:return}})),j=Sl(((t,e,n,o)=>{e&&D(e,w.current),k.current=!0,N(t,o),k.current=!1})),E=(0,r.useCallback)((()=>{if(void 0===a||void 0===s)return;const t=A(),e=null==y?void 0:y();if(void 0===e)return;const n=s(e);void 0!==n&&(T(n,t),a(n,t),P(n,t))}),[s,a,y,T,P,A]),I=Sl((e=>{let{trigger:n,force:o=!1}=e;const r=Dl[n]||n;(t.drawOn.indexOf(r)>-1||t.selected||o)&&(void 0===a?m():E())})),F=Sl((()=>({draggable:!!(w.current.hovering&&(t.selected||t.enableDragOnHover)),panEnabled:!t.disablePan})));return(0,r.useEffect)((()=>{const{setCursorClass:e}=p;t.selected&&w.current.hovering?(S.current=!0,e(t.interactiveCursorClass)):(S.current=!1,e(null))}),[t.selected]),(0,r.useEffect)((()=>{void 0===a||k.current||(D(void 0,w.current),E())})),(0,r.useEffect)((()=>(x(g,{chartId:f,clip:o,edgeClip:i,listener:j,draw:I,getPanConditions:F}),()=>{v(g),S.current&&p.setCursorClass(null)})),[f,g,i,o]),void 0!==a||void 0===l?null:(0,C.jsx)("g",{style:Ml(f,o),children:l(A())})}))),_l=Array.isArray,Pl=["drag","dragend"],Nl=(t,e,n,o,r)=>{t.beginPath(),t.rect(e,n,o,r),t.clip()},jl=[],El=t=>{let{refComp:e,drawOn:n=jl,...o}=t;const i=(0,r.useContext)(Rs),{clip:s,edgeClip:a,disablePan:l}=o,{chartId:c,ratio:h,margin:{left:u,right:d,top:p}}=i,f=(0,r.useCallback)(((t,e)=>{const n=Fs(e.chartConfigs,c);if(!n)return;t.save();const{width:o,height:r,origin:i}=n,l=.5*h,f=l+i[0]+u,g=l+i[1]+p;t.setTransform(1,0,0,1,0,0),t.scale(h,h),a&&Nl(t,-1,g-10,o+u+d+1,r+20),t.translate(f,g),s&&Nl(t,-1,-1,o+1,r+1)}),[u,d,p,h,s,a,c]),g=(0,r.useCallback)(((t,e)=>{t.restore()}),[]),m=(0,r.useCallback)(((t,e)=>{const{chartConfig:n}=t||e;if(n&&_l(n)&&(e.chartConfig=n.find((t=>t.id===c))),e.chartConfig){const{origin:[n,o]}=e.chartConfig,{mouseXY:r,startPos:i}=t;if(r){const[t,i]=r;e.mouseXY=[t-n,i-o]}if(i){const[t,r]=i;e.startPos=[t-n,r-o]}}}),[c]),y=(0,r.useCallback)(((t,e)=>{if(l&&("mousemove"===t||"click"===t))return!0;const{currentCharts:n}=e||{};return!n||-1!==Pl.indexOf(t)||n.indexOf(c)>-1}),[l,c]);return(0,C.jsx)(Tl,{...o,ref:e,drawOn:n,preCanvasDraw:f,postCanvasDraw:g,updateMoreProps:m,shouldTypeProceed:y})};class Il extends r.Component{constructor(){super(...arguments),this.ref=(0,r.createRef)(),this.clicked=!1,this.dragHappened=!1,this.state={startPosition:null},this.handleDragEnd=t=>{const e=i(this.ref);if(e){if(!this.dragHappened)if(this.clicked){const n=$s(t,e),{onDoubleClick:o}=this.props;void 0!==o&&o(t,n)}else this.clicked=!0,setTimeout((()=>{this.clicked=!1}),300);ia(vs(e)).on(ks,null).on(Ss,null).on(Cs,null).on(Ds,null),this.setState({startPosition:null})}},this.handleDrag=t=>{const e=i(this.ref);if(!e)return;this.dragHappened=!0;const{getMouseDelta:n,inverted:o}=this.props,{startPosition:r}=this.state;if(null!==r){const{startScale:i,startXY:s}=r,a=n(s,$s(t,e)),l=Dn(i.range());if(void 0===l)return;const c=i.range().map((t=>o?t-xs(t-l)*a:t+xs(t-l)*a)),h=c.map(i.invert);if(xs(cs(i.range())-us(i.range()))===xs(cs(c)-us(c))){const{axisZoomCallback:t}=this.props;void 0!==t&&t(h)}}},this.handleDragStartTouch=t=>{const e=i(this.ref);if(!e)return;this.dragHappened=!1;const n=this.props.getScale();if(1===t.touches.length&&void 0!==n.invert){ia(vs(e)).on(Cs,this.handleDrag).on(Ds,this.handleDragEnd);const o=_s(Ms(t.touches[0]),t);this.setState({startPosition:{startScale:n,startXY:o}})}},this.handleDragStartMouse=t=>{t.preventDefault();const e=i(this.ref);if(!e)return;this.dragHappened=!1;const n=this.props.getScale();if(void 0!==n.invert){ia(vs(e)).on(ks,this.handleDrag,!1).on(Ss,this.handleDragEnd,!1);const o=Ps(t);this.setState({startPosition:{startXY:o,startScale:n}})}},this.handleRightClick=t=>{t.stopPropagation(),t.preventDefault();const e=i(this.ref),{onContextMenu:n}=this.props;if(!e||!n)return;const o=e.getBoundingClientRect(),r=Ps(t,o);ia(vs(e)).on(ks,null).on(Ss,null),this.setState({startPosition:null}),n(t,r)}}render(){const{bg:t,className:e,zoomCursorClassName:n}=this.props,o=null===this.state.startPosition?ya:n||"";return(0,C.jsx)("rect",{ref:this.ref,className:Ca+" "+o+" "+e,x:t.x,y:t.y,height:t.h,width:t.w,opacity:0,onContextMenu:this.handleRightClick,onMouseDown:this.handleDragStartMouse,onTouchStart:this.handleDragStartTouch})}}Il.defaultProps={inverted:!0,className:""};const Fl=Il,Ll=t=>t.axes,Ol=t=>t.mouseCoord;function Rl(t,e,n,o){if(isNaN(e)||isNaN(n))return t;var r,i,s,a,l,c,h,u,d,p=t._root,f={data:o},g=t._x0,m=t._y0,y=t._x1,x=t._y1;if(!p)return t._root=f,t;for(;p.length;)if((c=e>=(i=(g+y)/2))?g=i:y=i,(h=n>=(s=(m+x)/2))?m=s:x=s,r=p,!(p=p[u=h<<1|c]))return r[u]=f,t;if(a=+t._x.call(null,p.data),l=+t._y.call(null,p.data),e===a&&n===l)return f.next=p,r?r[u]=f:t._root=f,t;do{r=r?r[u]=new Array(4):t._root=new Array(4),(c=e>=(i=(g+y)/2))?g=i:y=i,(h=n>=(s=(m+x)/2))?m=s:x=s}while((u=h<<1|c)==(d=(l>=s)<<1|a>=i));return r[d]=p,r[u]=f,t}function zl(t,e,n,o,r){this.node=t,this.x0=e,this.y0=n,this.x1=o,this.y1=r}function Wl(t){return t[0]}function Xl(t){return t[1]}function Hl(t,e,n){var o=new Yl(null==e?Wl:e,null==n?Xl:n,NaN,NaN,NaN,NaN);return null==t?o:o.addAll(t)}function Yl(t,e,n,o,r,i){this._x=t,this._y=e,this._x0=n,this._y0=o,this._x1=r,this._y1=i,this._root=void 0}function Bl(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var Ul=Hl.prototype=Yl.prototype;function Zl(t){return()=>t}Ul.copy=function(){var t,e,n=new Yl(this._x,this._y,this._x0,this._y0,this._x1,this._y1),o=this._root;if(!o)return n;if(!o.length)return n._root=Bl(o),n;for(t=[{source:o,target:n._root=new Array(4)}];o=t.pop();)for(var r=0;r<4;++r)(e=o.source[r])&&(e.length?t.push({source:e,target:o.target[r]=new Array(4)}):o.target[r]=Bl(e));return n},Ul.add=function(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return Rl(this.cover(e,n),e,n,t)},Ul.addAll=function(t){var e,n,o,r,i=t.length,s=new Array(i),a=new Array(i),l=1/0,c=1/0,h=-1/0,u=-1/0;for(n=0;n<i;++n)isNaN(o=+this._x.call(null,e=t[n]))||isNaN(r=+this._y.call(null,e))||(s[n]=o,a[n]=r,o<l&&(l=o),o>h&&(h=o),r<c&&(c=r),r>u&&(u=r));if(l>h||c>u)return this;for(this.cover(l,c).cover(h,u),n=0;n<i;++n)Rl(this,s[n],a[n],t[n]);return this},Ul.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,o=this._y0,r=this._x1,i=this._y1;if(isNaN(n))r=(n=Math.floor(t))+1,i=(o=Math.floor(e))+1;else{for(var s,a,l=r-n||1,c=this._root;n>t||t>=r||o>e||e>=i;)switch(a=(e<o)<<1|t<n,(s=new Array(4))[a]=c,c=s,l*=2,a){case 0:r=n+l,i=o+l;break;case 1:n=r-l,i=o+l;break;case 2:r=n+l,o=i-l;break;case 3:n=r-l,o=i-l}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=o,this._x1=r,this._y1=i,this},Ul.data=function(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t},Ul.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Ul.find=function(t,e,n){var o,r,i,s,a,l,c,h=this._x0,u=this._y0,d=this._x1,p=this._y1,f=[],g=this._root;for(g&&f.push(new zl(g,h,u,d,p)),null==n?n=1/0:(h=t-n,u=e-n,d=t+n,p=e+n,n*=n);l=f.pop();)if(!(!(g=l.node)||(r=l.x0)>d||(i=l.y0)>p||(s=l.x1)<h||(a=l.y1)<u))if(g.length){var m=(r+s)/2,y=(i+a)/2;f.push(new zl(g[3],m,y,s,a),new zl(g[2],r,y,m,a),new zl(g[1],m,i,s,y),new zl(g[0],r,i,m,y)),(c=(e>=y)<<1|t>=m)&&(l=f[f.length-1],f[f.length-1]=f[f.length-1-c],f[f.length-1-c]=l)}else{var x=t-+this._x.call(null,g.data),v=e-+this._y.call(null,g.data),w=x*x+v*v;if(w<n){var b=Math.sqrt(n=w);h=t-b,u=e-b,d=t+b,p=e+b,o=g.data}}return o},Ul.remove=function(t){if(isNaN(i=+this._x.call(null,t))||isNaN(s=+this._y.call(null,t)))return this;var e,n,o,r,i,s,a,l,c,h,u,d,p=this._root,f=this._x0,g=this._y0,m=this._x1,y=this._y1;if(!p)return this;if(p.length)for(;;){if((c=i>=(a=(f+m)/2))?f=a:m=a,(h=s>=(l=(g+y)/2))?g=l:y=l,e=p,!(p=p[u=h<<1|c]))return this;if(!p.length)break;(e[u+1&3]||e[u+2&3]||e[u+3&3])&&(n=e,d=u)}for(;p.data!==t;)if(o=p,!(p=p.next))return this;return(r=p.next)&&delete p.next,o?(r?o.next=r:delete o.next,this):e?(r?e[u]=r:delete e[u],(p=e[0]||e[1]||e[2]||e[3])&&p===(e[3]||e[2]||e[1]||e[0])&&!p.length&&(n?n[d]=p:this._root=p),this):(this._root=r,this)},Ul.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},Ul.root=function(){return this._root},Ul.size=function(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t},Ul.visit=function(t){var e,n,o,r,i,s,a=[],l=this._root;for(l&&a.push(new zl(l,this._x0,this._y0,this._x1,this._y1));e=a.pop();)if(!t(l=e.node,o=e.x0,r=e.y0,i=e.x1,s=e.y1)&&l.length){var c=(o+i)/2,h=(r+s)/2;(n=l[3])&&a.push(new zl(n,c,h,i,s)),(n=l[2])&&a.push(new zl(n,o,h,c,s)),(n=l[1])&&a.push(new zl(n,c,r,i,h)),(n=l[0])&&a.push(new zl(n,o,r,c,h))}return this},Ul.visitAfter=function(t){var e,n=[],o=[];for(this._root&&n.push(new zl(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var r=e.node;if(r.length){var i,s=e.x0,a=e.y0,l=e.x1,c=e.y1,h=(s+l)/2,u=(a+c)/2;(i=r[0])&&n.push(new zl(i,s,a,h,u)),(i=r[1])&&n.push(new zl(i,h,a,l,u)),(i=r[2])&&n.push(new zl(i,s,u,h,c)),(i=r[3])&&n.push(new zl(i,h,u,l,c))}o.push(e)}for(;e=o.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},Ul.x=function(t){return arguments.length?(this._x=t,this):this._x},Ul.y=function(t){return arguments.length?(this._y=t,this):this._y};const Vl=Math.random;function ql(){return 1e-6*(Vl()-.5)}const Gl=t=>"function"==typeof t,$l=Math.sqrt,Kl=t=>t.x+t.vx,Jl=t=>t.y+t.vy;const Ql={value:()=>{}},tc=Object.prototype.hasOwnProperty;function ec(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];let o,r,i=e.length,s={};for(o=0;o<i;++o){if(!(r=e[o]+"")||r in s||/[\s.]/.test(r))throw new Error("illegal type: "+r);s[r]=[]}return new nc(s)}function nc(t){this._=t}function oc(t,e){let n,o=0,r=t.length;for(;o<r;++o)if((n=t[o]).name===e)return n.value}function rc(t,e,n){let o=0,r=t.length;for(;o<r;++o)if(t[o].name===e){t[o]=Ql,t=t.slice(0,o).concat(t.slice(o+1));break}return null!=n&&t.push({name:e,value:n}),t}nc.prototype=ec.prototype={constructor:nc,on:function(t,e){let n,o=this._,r=(a=o,(t+"").trim().split(/^|\s+/).map((function(t){let e="",n=t.indexOf(".");if(n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!tc.call(a,t))throw new Error("unknown type: "+t);return{type:t,name:e}}))),i=-1,s=r.length;var a;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++i<s;)if(n=(t=r[i]).type)o[n]=rc(o[n],t.name,e);else if(null==e)for(n in o)o[n]=rc(o[n],t.name,null);return this}for(;++i<s;)if((n=(t=r[i]).type)&&(n=oc(o[n],t.name)))return n},copy:function(){let t={},e=this._;for(let n in e)t[n]=e[n].slice();return new nc(t)},call:function(t,e){let n,o,r,i;if((n=arguments.length-2)>0)for(r=new Array(n),i=0;i<n;++i)r[i]=arguments[i+2];if(!tc.call(this._,t))throw new Error("unknown type: "+t);for(o=this._[t],i=0,n=o.length;i<n;++i)o[i].value.apply(e,r)},apply:function(t,e,n){if(!tc.call(this._,t))throw new Error("unknown type: "+t);let o=this._[t],r=0,i=o.length;for(;r<i;++r)o[r].value.apply(e,n)}};const ic=ec;let sc,ac,lc=0,cc=0,hc=0,uc=1e3,dc=0,pc=0,fc=0,gc=t=>"object"==typeof t,mc=gc(performance)&&performance.now?performance:Date,yc=gc(window)&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function xc(){return pc||(yc(vc),pc=mc.now()+fc)}function vc(){pc=0}function wc(){this._call=this._time=this._next=null}function bc(t,e,n){const o=new wc;return o.restart(t,e,n),o}function kc(){pc=(dc=mc.now())+fc,lc=cc=0;try{!function(){xc(),++lc;let t,e=sc;for(;e;)(t=pc-e._time)>=0&&e._call.call(void 0,t),e=e._next;--lc}()}finally{lc=0,function(){let t,e,n=sc,o=1/0;for(;n;)n._call?(o>n._time&&(o=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:sc=e);ac=t,Cc(o)}(),pc=0}}function Sc(){let t=mc.now(),e=t-dc;e>uc&&(fc-=e,dc=t)}function Cc(t){if(lc)return;cc&&(cc=clearTimeout(cc)),t-pc>24?(t<1/0&&(cc=setTimeout(kc,t-mc.now()-fc)),hc&&(hc=clearInterval(hc))):(hc||(dc=mc.now(),hc=setInterval(Sc,uc)),lc=1,yc(kc))}wc.prototype=bc.prototype={constructor:wc,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?xc():+n)+(null==e?0:+e),this._next||ac===this||(ac?ac._next=this:sc=this,ac=this),this._call=t,this._time=n,Cc()},stop:function(){this._call&&(this._call=null,this._time=1/0,Cc())}};let Dc=Math.PI*(3-Math.sqrt(5));const Ac=t=>"function"==typeof t;const Mc=t=>"top"===t||"left"===t?-1:1,Tc=t=>"bottom"===t||"top"===t,_c=(t,e)=>{const{orient:n,innerTickSize:o=4,tickFormat:r,tickPadding:i=4,tickLabelFill:s,tickStrokeWidth:a,tickStrokeDasharray:l,fontSize:c=12,fontFamily:h,fontWeight:u,showTicks:d,showTickLabel:p,ticks:f,tickValues:g,tickStrokeStyle:m,tickInterval:y,tickIntervalFunction:x,...v}=t;let w;if(void 0!==g)w="function"==typeof g?g(e.domain()):g;else if(void 0!==y){const[t,n]=e.domain(),o=function(){let t=+(arguments.length<=0?void 0:arguments[0]),e=+(arguments.length<=1?void 0:arguments[1]),n=arguments.length,o=n<2?(e=t,t=0,1):n<3?1:+(arguments.length<=2?void 0:arguments[2]),r=new Array(n),i=-1;for(n=0|An(0,Mn((e-t)/o));++i<n;)r[i]=t+i*o;return r}(t,n,(n-t)/y);w=x?x(t,n,y):o}else w=void 0!==e.ticks?e.ticks(f):e.domain();const b=void 0===r?e.tickFormat(f):t=>r(t)||"",k=Mc(n),S=Math.max(o,0)+i;let C,D,A,M;if(Tc(n)){const t=k*o,n=k*S;if(D=k<0?"0em":".71em",A=k<0?0:.71*c,M="middle",C=w.map((o=>{const r=Math.round(e(o));return{value:o,x1:r,y1:0,x2:r,y2:t,labelX:r,labelY:n}})),d){const t=C.map((t=>({id:t.value,value:t.value,fy:t.y2,origX:t.x1}))),e=function(t){let e,n=1,o=.001,r=1-Math.pow(o,1/300),i=0,s=.6,a=new Map,l=bc(h),c=ic("tick","end");function h(){u(),c.call("tick",e),n<o&&(l.stop(),c.call("end",e))}function u(o){let l,c,h,u=t.length;for(void 0===o&&(o=1),h=0;h<o;++h)for(n+=(i-n)*r,a.forEach((function(t){t(n)})),l=0;l<u;++l)c=t[l],null==c.fx?c.x+=c.vx*=s:(c.x=c.fx,c.vx=0),null==c.fy?c.y+=c.vy*=s:(c.y=c.fy,c.vy=0);return e}function d(){let e,n=0,o=t.length;for(;n<o;++n){if(e=t[n],e.index=n,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){const t=10*Math.sqrt(n),o=n*Dc;e.x=t*Math.cos(o),e.y=t*Math.sin(o)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function p(e){return e.initialize&&e.initialize(t),e}return null==t&&(t=[]),d(),e={tick:u,restart:function(){return l.restart(h),e},stop:function(){return l.stop(),e},nodes:function(n){return arguments.length?(t=n,d(),a.forEach(p),e):t},alpha:function(t){return arguments.length?(n=+t,e):n},alphaMin:function(t){return arguments.length?(o=+t,e):o},alphaDecay:function(t){return arguments.length?(r=+t,e):+r},alphaTarget:function(t){return arguments.length?(i=+t,e):i},velocityDecay:function(t){return arguments.length?(s=1-t,e):1-s},force:function(t,n){return arguments.length>1?(null==n?a.delete(t):a.set(t,p(n)),e):a.get(t)},find:function(e,n,o){let r,i,s,a,l,c=0,h=t.length;for(null==o?o=1/0:o*=o,c=0;c<h;++c)a=t[c],r=e-a.x,i=n-a.y,s=r*r+i*i,s<o&&(l=a,o=s);return l},on:function(t,n){return arguments.length>1?(c.on(t,n),e):c.on(t)}}}(t).force("x",function(t){let e,n,o,r=Zl(.1);Ac(t)||(t=Zl(null==t?0:+t));const i=t=>{let r,i=0,s=e.length;for(;i<s;++i)r=e[i],r.vx+=(o[i]-r.x)*n[i]*t},s=()=>{if(!e)return;let i,s=e.length;for(n=new Array(s),o=new Array(s),i=0;i<s;++i)n[i]=isNaN(o[i]=+t(e[i],i,e))?0:+r(e[i],i,e)};return i.initialize=t=>{e=t,s()},i.strength=function(){return arguments.length?(r=Ac(arguments.length<=0?void 0:arguments[0])?arguments.length<=0?void 0:arguments[0]:Zl(+(arguments.length<=0?void 0:arguments[0])),s(),i):r},i.x=function(){return arguments.length?(t=Ac(arguments.length<=0?void 0:arguments[0])?arguments.length<=0?void 0:arguments[0]:Zl(+(arguments.length<=0?void 0:arguments[0])),s(),i):t},i}((t=>t.origX)).strength(1)).force("collide",function(t){let e,n,o=1,r=1;Gl(t)||(t=Zl(null==t?1:+t));const i=t=>{if(t.data)return t.r=n[t.data.index];let e;for(e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)},s=()=>{let t,s,a,l,c,h,u,d,p=e.length,f=(t,e,n,r,i)=>{let s=t.data,d=t.r,p=h+d;if(!s)return e>l+p||r<l-p||n>c+p||i<c-p;if(s.index>a.index){let t=l-s.x-s.vx,e=c-s.y-s.vy,n=t*t+e*e;n<p*p&&(0===t&&(t=ql(),n+=t*t),0===e&&(e=ql(),n+=e*e),n=(p-(n=$l(n)))/n*o,a.vx+=(t*=n)*(p=(d*=d)/(u+d)),a.vy+=(e*=n)*p,s.vx-=t*(p=1-p),s.vy-=e*p)}};for(d=0;d<r;++d)for(s=Hl(e,Kl,Jl).visitAfter(i),t=0;t<p;++t)a=e[t],h=n[a.index],u=h*h,l=a.x+a.vx,c=a.y+a.vy,s.visit(f)},a=()=>{if(!e)return;let o,r,i=e.length;for(n=new Array(i),o=0;o<i;++o)r=e[o],n[r.index]=+t(r,o,e)};return s.initialize=t=>{e=t,a()},s.iterations=t=>t.length?(r=+t[0],s):r,s.strength=t=>t.length?(o=+t[0],s):o,s.radius=e=>e.length?(t=Gl(e[0])?e[0]:Zl(+e[0]),a(),s):t,s}(22)).stop();for(let t=0;t<100;++t)e.tick();C=_n(C,t).map((t=>{const[e,n]=t;return Math.abs(n.x-n.origX)>.01?{...e,x2:n.x,labelX:n.x}:e}))}}else C=w.map((t=>{const n=Math.round(e(t));return{value:t,x1:0,y1:n,x2:k*o,y2:n,labelX:k*S,labelY:n}})),D=".32em",A=.32*c,M=k<0?"end":"start";return{orient:n,ticks:C,scale:e,tickStrokeStyle:m,tickLabelFill:s||m,tickStrokeWidth:a,tickStrokeDasharray:l,dy:D,canvas_dy:A,textAnchor:M,fontSize:c,fontFamily:h,fontWeight:u,format:b,showTickLabel:p,...v}},Pc=(t,e)=>{const{ticks:n,tickStrokeStyle:o}=e;void 0!==o&&(t.strokeStyle=o,t.fillStyle=o),n.forEach((n=>{((t,e,n)=>{const{tickStrokeWidth:o,tickStrokeDasharray:r}=n;t.beginPath(),t.moveTo(e.x1,e.y1),t.lineTo(e.x2,e.y2),t.lineWidth=o;const i=Qn(r);t.setLineDash(i),t.stroke()})(t,n,e)}))},Nc=(t,e,n)=>{e.ticks.forEach((o=>{((t,e,n,o)=>{const{orient:r,gridLinesStrokeWidth:i,gridLinesStrokeStyle:s,gridLinesStrokeDasharray:a}=n,{chartConfig:l}=o,{height:c,width:h}=l;void 0!==s&&(t.strokeStyle=s),t.beginPath();const u=Mc(r);Tc(r)?(t.moveTo(e.x1,0),t.lineTo(e.x2,u*c)):(t.moveTo(0,e.y1),t.lineTo(u*h,e.y2)),t.lineWidth=i;const d=Qn(a);t.setLineDash(d),t.stroke()})(t,o,e,n)}))},jc=["pan"],Ec=t=>{const{getScale:e,edgeClip:n,zoomEnabled:o,zoomCursorClassName:s,bg:a,className:l,inverted:c,transform:h,getMouseDelta:u,axisZoomCallback:d,onContextMenu:p,onDoubleClick:f}=t,g=(0,r.useRef)(),m=(0,r.useCallback)((()=>e(i(g).getMoreProps())),[e]);return(0,C.jsxs)("g",{transform:ss(h),children:[o?(0,C.jsx)(Fl,{className:l,zoomCursorClassName:s,inverted:c,bg:a,axisZoomCallback:d,getScale:m,getMouseDelta:u,onContextMenu:p,onDoubleClick:f}):null,(0,C.jsx)(El,{refComp:g,clip:!1,edgeClip:n,canvasToDraw:Ll,canvasDraw:(n,o)=>{((t,e)=>{t.save(),t.translate(e[0],e[1])})(n,h);const r=_c(t,e(o));t.showTicks&&Pc(n,r),t.showGridLines&&Nc(n,r,o),t.showTickLabel&&((t,e)=>{const{textAnchor:n,tickLabelFill:o}=e;t.font=(t=>{let{fontWeight:e,fontSize:n,fontFamily:o}=t;return e+" "+n+"px "+o})(e),void 0!==o&&(t.fillStyle=o),t.textAlign="middle"===n?"center":n,e.ticks.forEach((n=>{((t,e,n)=>{const{canvas_dy:o,format:r}=n,i=r(e.value);t.beginPath(),t.fillText(i,e.labelX,e.labelY+o)})(t,n,e)}))})(n,r),t.showDomain&&((t,e)=>{const{orient:n,outerTickSize:o,strokeStyle:r,strokeWidth:i,range:s}=e,a=Mc(n);t.lineWidth=i,t.strokeStyle=r,t.beginPath();const l=us(s),c=cs(s),h=a*o;Tc(n)?(t.moveTo(l,h),t.lineTo(l,0),t.lineTo(c,0),t.lineTo(c,h)):(t.moveTo(h,l),t.lineTo(0,l),t.lineTo(0,c),t.lineTo(h,c)),t.stroke()})(n,t),n.restore()},drawOn:jc})]})},Ic=t=>t<400?2:t<500?6:8,Fc=t=>{let{xScale:e,width:n}=t;return e.invert?((t,e)=>{const n=e.map(t.invert);return t.copy().domain(n).range(e)})(e,[0,n]):e},Lc=t=>{const{xAxisZoom:e,chartConfig:{width:n,height:o}}=(0,r.useContext)(Rs),{getMouseDelta:i,outerTickSize:s,showTicks:a,strokeStyle:l,strokeWidth:c,zoomEnabled:h,...u}=t,d=((t,e,n)=>{const{axisAt:o,xZoomHeight:r,orient:i,ticks:s}=t,a="top"===i?-r:0,l=r,c=e,h=((t,e)=>"top"===t?0:"bottom"===t?e:"middle"===t?e/2:t)(o,n);return{bg:{x:0,y:a,h:l,w:c},transform:[0,h],range:[0,e],getScale:Fc,ticks:null!=s?s:Ic(e)}})(t,n,o);return(0,C.jsx)(Ec,{...u,...d,getMouseDelta:i,outerTickSize:s,showTicks:a,strokeStyle:l,strokeWidth:c,zoomEnabled:h&&a,axisZoomCallback:e})},Oc="#000000";Lc.defaultProps={axisAt:"bottom",className:Aa,domainClassName:Ta,fontFamily:Za,fontSize:12,fontWeight:400,getMouseDelta:(t,e)=>t[0]-e[0],gridLinesStrokeStyle:"#e2e4ec",gridLinesStrokeWidth:1,orient:"bottom",outerTickSize:0,innerTickSize:4,showDomain:!0,showGridLines:!1,showTicks:!0,showTickLabel:!0,strokeStyle:Oc,strokeWidth:1,tickPadding:4,tickLabelFill:Oc,tickStrokeStyle:Oc,xZoomHeight:25,zoomEnabled:!0,zoomCursorClassName:ba};const Rc=Lc,zc=t=>t<300?2:t<500?6:8,Wc=t=>{const{yScale:e,flipYScale:n,height:o}=t.chartConfig;if(e.invert){const t=n?[0,o]:[o,0],r=t.map(e.invert);return e.copy().domain(r).range(t)}return e},Xc=t=>{const e=(0,r.useContext)(Rs),{chartId:n,chartConfig:{width:o,height:i,yPan:s},yAxisZoom:a}=e,l=(0,r.useCallback)((t=>{a(n,t)}),[n,a]),{getMouseDelta:c,outerTickSize:h,strokeStyle:u,strokeWidth:d,...p}=t,{zoomEnabled:f,...g}=((t,e,n,o)=>{const{axisAt:r,ticks:i,yZoomWidth:s,orient:a}=t,l=((t,e)=>"left"===t?0:"right"===t?e:"middle"===t?e/2:t)(r,e);return{transform:[l,0],range:[0,n],bg:{x:"left"===a?-s:0,y:0,h:n,w:s},getScale:Wc,ticks:null!=i?i:zc(n),zoomEnabled:o}})(t,o,i,s);return(0,C.jsx)(Ec,{...p,...g,edgeClip:!0,outerTickSize:h,strokeStyle:u,strokeWidth:d,zoomEnabled:t.zoomEnabled&&f,getMouseDelta:c,axisZoomCallback:l})},Hc="#000000";Xc.defaultProps={axisAt:"right",className:Ma,domainClassName:Ta,fontFamily:Za,fontSize:12,fontWeight:400,getMouseDelta:(t,e)=>t[1]-e[1],gridLinesStrokeStyle:"#e2e4ec",gridLinesStrokeWidth:1,innerTickSize:4,outerTickSize:0,orient:"right",showDomain:!0,showGridLines:!1,showTicks:!0,showTickLabel:!0,strokeStyle:Hc,strokeWidth:1,tickPadding:4,tickLabelFill:Hc,tickStrokeStyle:Hc,yZoomWidth:40,zoomEnabled:!0,zoomCursorClassName:wa};const Yc=Xc;function Bc(t){this._context=t}function Uc(t){return new Bc(t)}function Zc(t,e){return e||(e=t.slice(0)),t.raw=e,t}var Vc,qc,Gc,$c,Kc,Jc,Qc,th,eh,nh,oh,rh,ih,sh;Bc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};const ah=Math.PI,lh=2*ah,ch=1e-6,hh=lh-ch;function uh(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}class dh{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==t?uh:function(t){let e=Math.floor(t);if(!(e>=0))throw new Error("invalid digits: "+t);if(e>15)return uh;const n=10**e;return function(t){this._+=t[0];for(let e=1,o=t.length;e<o;++e)this._+=Math.round(arguments[e]*n)/n+t[e]}}(t)}moveTo(t,e){this._append(Vc||(Vc=Zc(["M",",",""])),this._x0=this._x1=+t,this._y0=this._y1=+e)}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append(qc||(qc=Zc(["Z"]))))}lineTo(t,e){this._append(Gc||(Gc=Zc(["L",",",""])),this._x1=+t,this._y1=+e)}quadraticCurveTo(t,e,n,o){this._append($c||($c=Zc(["Q",",",",",",",""])),+t,+e,this._x1=+n,this._y1=+o)}bezierCurveTo(t,e,n,o,r,i){this._append(Kc||(Kc=Zc(["C",",",",",",",",",",",""])),+t,+e,+n,+o,this._x1=+r,this._y1=+i)}arcTo(t,e,n,o,r){if(t=+t,e=+e,n=+n,o=+o,(r=+r)<0)throw new Error("negative radius: "+r);let i=this._x1,s=this._y1,a=n-t,l=o-e,c=i-t,h=s-e,u=c*c+h*h;if(null===this._x1)this._append(Jc||(Jc=Zc(["M",",",""])),this._x1=t,this._y1=e);else if(u>ch)if(Math.abs(h*a-l*c)>ch&&r){let d=n-i,p=o-s,f=a*a+l*l,g=d*d+p*p,m=Math.sqrt(f),y=Math.sqrt(u),x=r*Math.tan((ah-Math.acos((f+u-g)/(2*m*y)))/2),v=x/y,w=x/m;Math.abs(v-1)>ch&&this._append(th||(th=Zc(["L",",",""])),t+v*c,e+v*h),this._append(eh||(eh=Zc(["A",",",",0,0,",",",",",""])),r,r,+(h*d>c*p),this._x1=t+w*a,this._y1=e+w*l)}else this._append(Qc||(Qc=Zc(["L",",",""])),this._x1=t,this._y1=e);else;}arc(t,e,n,o,r,i){if(t=+t,e=+e,i=!!i,(n=+n)<0)throw new Error("negative radius: "+n);let s=n*Math.cos(o),a=n*Math.sin(o),l=t+s,c=e+a,h=1^i,u=i?o-r:r-o;null===this._x1?this._append(nh||(nh=Zc(["M",",",""])),l,c):(Math.abs(this._x1-l)>ch||Math.abs(this._y1-c)>ch)&&this._append(oh||(oh=Zc(["L",",",""])),l,c),n&&(u<0&&(u=u%lh+lh),u>hh?this._append(rh||(rh=Zc(["A",",",",0,1,",",",",","A",",",",0,1,",",",",",""])),n,n,h,t-s,e-a,n,n,h,this._x1=l,this._y1=c):u>ch&&this._append(ih||(ih=Zc(["A",",",",0,",",",",",",",""])),n,n,+(u>=ah),h,this._x1=t+n*Math.cos(r),this._y1=e+n*Math.sin(r)))}rect(t,e,n,o){this._append(sh||(sh=Zc(["M",",","h","v","h","Z"])),this._x0=this._x1=+t,this._y0=this._y1=+e,n=+n,+o,-n)}toString(){return this._}}dh.prototype;const ph=t=>"function"==typeof t,fh=t=>void 0===t;function gh(t){return function(){return t}}const mh=Array.from;function yh(t){return"object"==typeof t&&"length"in t?t:mh(t)}const xh=Math.floor;function vh(t){let e=3;return t.digits=function(n){if(fh(n))return e;if(null==n)e=null;else{const t=xh(n);if(!(t>=0))throw new RangeError("invalid digits: "+n);e=t}return t},()=>new dh(e)}function wh(t){return t[0]}function bh(t){return t[1]}const kh=(t,e)=>ph(t)?t:void 0===t?e:gh(t);function Sh(t,e){let n=gh(!0),o=null,r=Uc,i=null,s=vh(a);function a(a){let l,c,h,u=(a=yh(a)).length,d=!1;for(null==o&&(i=r(h=s())),l=0;l<=u;++l)!(l<u&&n(c=a[l],l,a))===d&&((d=!d)?i.lineStart():i.lineEnd()),d&&i.point(+t(c,l,a),+e(c,l,a));if(h)return i=null,h+""||null}return t=kh(t,wh),e=kh(e,bh),a.x=e=>fh(e)?t:(t=ph(e)?e:gh(+e),a),a.y=t=>fh(t)?e:(e=ph(t)?t:gh(+t),a),a.defined=t=>fh(t)?n:(n=ph(t)?t:gh(!!t),a),a.curve=t=>fh(t)?r:(r=t,null!=o&&(i=r(o)),a),a.context=t=>fh(t)?o:(null==t?o=i=null:i=r(o=t),a),a}const Ch=(t,e)=>ph(t)?t:fh(t)?e:gh(+t);function Dh(t,e){if(!((i=t.length)>1))return;let n,o,r,i,s=t[e[0]],a=s.length;for(n=1;n<i;++n)for(r=s,s=t[e[n]],o=0;o<a;++o)s[o][1]+=s[o][0]=isNaN(r[o][1])?r[o][0]:r[o][1]}function Ah(t){let e=t.length,n=new Array(e);for(;--e>=0;)n[e]=e;return n}function Mh(t,e){return t[e]}function Th(t){const e=[];return e.key=t,e}function _h(){let t=gh([]),e=Ah,n=Dh,o=Mh;function r(r){let i,s,a=mh(t.apply(this,arguments),Th),l=a.length,c=-1;for(const t of r)for(i=0,++c;i<l;++i)(a[i][c]=[0,+o(t,a[i].key,c,r)]).data=t;for(i=0,s=yh(e(a));i<l;++i)a[s[i]].index=i;return n(a,s),a}return r.keys=e=>fh(e)?t:(t=ph(e)?e:gh(mh(e)),r),r.value=t=>fh(t)?o:(o=ph(t)?t:gh(+t),r),r.order=t=>fh(t)?e:(e=null==t?Ah:ph(t)?t:gh(mh(t)),r),r.offset=t=>fh(t)?n:(n=null==t?Dh:t,r),r}const Ph=()=>{},Nh=Math.round,jh=Math.pow,Eh=t=>{const{yAccessor:e,hoverTolerance:n,highlightOnHover:o,stroke:r,strokeOpacity:i,strokeWidth:s,strokeDasharray:a,hoverStrokeWidth:l,defined:c,connectNulls:h,interpolation:u,style:d,fill:p,className:f,canvasClip:g,onClick:m,onDoubleClick:y,onContextMenu:x,onHover:v,onUnHover:w}=t,b=o||v||w?{isHover:t=>{if(!o)return!1;const{mouseXY:r,currentItem:i,xScale:s,xAccessor:a,plotData:l,chartConfig:{yScale:c,origin:h}}=t,[u,d]=r,p=n,{left:f,right:g}=ps(l,s.invert(u),a);if(f===g){const t=c(e(i))+h[1],n=s(a(i))+h[0];return jh(u-n,2)+jh(d-t,2)<jh(p,2)}{const t=l[f],n=l[g],o=s(a(t))+h[0],r=c(e(t))+h[1],i=s(a(n))+h[0],m=(c(e(n))+h[1]-r)/(i-o),y=Nh(m*u+(-1*m*o+r));return d>=y-p&&d<=y+p}},drawOn:["mousemove","pan"],canvasToDraw:Ol}:{drawOn:["pan"],canvasToDraw:Ll};return(0,C.jsx)(El,{svgDraw:t=>{const{xAccessor:n,xScale:o,plotData:g,hovering:m,chartConfig:y}=t,{yScale:x}=y,v=Sh().x((t=>Nh(o(n(t))))).y((t=>Nh(x(e(t)))));return u&&v.curve(u),h||v.defined((t=>c(e(t)))),(0,C.jsx)("path",{style:d,className:f+" "+(r?"":Ba),d:v(g),stroke:r,strokeOpacity:i,strokeWidth:m?l:s,strokeDasharray:Jn(a),fill:p})},canvasDraw:(t,n)=>{const{hovering:o,xScale:d,xAccessor:p,plotData:f,chartConfig:{yScale:m}}=n;g&&(t.save(),g(t,n)),t.lineWidth=o?l:s,t.strokeStyle=ls(r,i),t.setLineDash(Jn(a).split(","));const y=Sh().x((t=>Nh(d(p(t))))).y((t=>Nh(m(e(t)))));u&&y.curve(u),h||y.defined((t=>c(e(t)))),t.beginPath(),y.context(t)(f),t.stroke(),g&&t.restore()},onClickWhenHover:m,onDoubleClickWhenHover:y,onContextMenuWhenHover:x,onHover:v,onUnHover:w,...b})};Eh.defaultProps={className:Ya,strokeWidth:1,strokeOpacity:1,hoverStrokeWidth:4,fill:"none",stroke:"#4682b4",strokeDasharray:"Solid",defined:t=>!isNaN(t),hoverTolerance:6,highlightOnHover:!1,connectNulls:!1,onClick:Ph,onDoubleClick:Ph,onContextMenu:Ph};const Ih=Eh,Fh=Math.round,Lh=(t,e)=>Fh(t(e)),Oh=(t,e,n,o,r,i,s)=>"horizontal"===t?{x1:0,y1:Lh(n,r),x2:i,y2:Lh(n,r)}:{x1:Lh(e,o),y1:0,x2:Lh(e,o),y2:s},Rh=["pan"],zh=t=>{const{type:e,className:n,opacity:o,stroke:r,strokeWidth:i,strokeDasharray:s,yValue:a,xValue:l}=t;return(0,C.jsx)(El,{svgDraw:t=>{const{width:c,height:h,xScale:u,chartConfig:{yScale:d}}=t,p=Oh(e,u,d,l,a,c,h);return(0,C.jsx)("line",{className:n,strokeDasharray:Jn(s),stroke:r,strokeWidth:i,strokeOpacity:o,...p})},canvasDraw:(t,n)=>{const{xScale:c}=n,{chartConfig:{yScale:h,width:u,height:d}}=n,{x1:p,y1:f,x2:g,y2:m}=Oh(e,c,h,l,a,u,d);t.beginPath(),t.strokeStyle=ls(r,o),t.lineWidth=i,t.setLineDash((t=>Jn(t).split(","))(s)),t.moveTo(p,f),t.lineTo(g,m),t.stroke()},canvasToDraw:Ll,drawOn:Rh})};zh.defaultProps={type:"horizontal",className:Ya,opacity:.5,stroke:"#000000",strokeWidth:1,strokeDasharray:"Solid"};const Wh=zh,Xh=t=>{let{children:e}=t;return(0,C.jsx)(El,{svgDraw:e})},Hh=()=>"rsi-clip-"+String(Math.round(1e4*Math.random()*1e4)),Yh=t=>({clipPath:"url(#"+t+")"});class Bh extends r.Component{constructor(t){super(t),this.topAndBottomClip=(t,e)=>{const{overSold:n,overBought:o}=this.props,{chartConfig:{yScale:r,width:i}}=e;t.beginPath(),t.rect(0,r(n),i,r(o)-r(n)),t.clip()},this.mainClip=(t,e)=>{const{overSold:n,overBought:o}=this.props,{chartConfig:{yScale:r,width:i,height:s}}=e;t.beginPath(),t.rect(0,0,i,r(n)),t.rect(0,r(o),i,s-r(o)),t.clip()},this.renderClip=t=>{const{overSold:e,overBought:n}=this.props,{chartConfig:{yScale:o,width:r,height:i}}=t;return(0,C.jsxs)("defs",{children:[(0,C.jsx)("clipPath",{id:this.clipPathId1,children:(0,C.jsx)("rect",{x:0,y:o(e),width:r,height:o(n)-o(e)})}),(0,C.jsxs)("clipPath",{id:this.clipPathId2,children:[(0,C.jsx)("rect",{x:0,y:0,width:r,height:o(e)}),(0,C.jsx)("rect",{x:0,y:o(n),width:r,height:i-o(n)})]})]})},this.clipPathId1=Hh(),this.clipPathId2=Hh()}render(){const{className:t,opacity:e,stroke:n,strokeDasharray:o,strokeWidth:r,yAccessor:i,overSold:s,middle:a,overBought:l}=this.props,c=Yh(this.clipPathId1),h=Yh(this.clipPathId2);return(0,C.jsxs)("g",{className:t,children:[(0,C.jsx)(Xh,{children:this.renderClip}),(0,C.jsx)(Wh,{opacity:e.top,stroke:n.top,strokeWidth:r.top,strokeDasharray:o.top,yValue:s}),(0,C.jsx)(Wh,{opacity:e.middle,stroke:n.middle,strokeWidth:r.middle,strokeDasharray:o.middle,yValue:a}),(0,C.jsx)(Wh,{opacity:e.bottom,stroke:n.bottom,strokeWidth:r.bottom,strokeDasharray:o.bottom,yValue:l}),(0,C.jsx)(Ih,{style:c,canvasClip:this.topAndBottomClip,className:t,yAccessor:i,stroke:n.insideThreshold||n.line,strokeWidth:r.insideThreshold,strokeDasharray:o.line}),(0,C.jsx)(Ih,{style:h,canvasClip:this.mainClip,className:t,yAccessor:i,stroke:n.outsideThreshold||n.line,strokeWidth:r.outsideThreshold,strokeDasharray:o.line})]})}}const Uh="ShortDash";Bh.defaultProps={className:ja,stroke:{line:"#000000",top:"#b8b2bb",middle:"#8795a1",bottom:"#b8c2cc",outsideThreshold:"#b300b3",insideThreshold:"#ffccff"},opacity:{top:1,middle:1,bottom:1},strokeDasharray:{line:"Solid",top:Uh,middle:Uh,bottom:Uh},strokeWidth:{outsideThreshold:1,insideThreshold:1,top:1,middle:1,bottom:1},overSold:70,middle:50,overBought:30};const Zh=Bh,Vh=()=>new Map,qh=(t,e,n)=>{t.set(e,n)};function Gh(){let t,e,n=[],o=[];const r=(e,o,i,s)=>{if(o>=n.length)return null==t?e:e.sort(t);let a,l,c,h=-1,u=e.length,d=n[o++],p=new Map,f=i();for(;++h<u;)c=p.get(a=d(l=e[h])+""),c?c.push(l):p.set(a,[l]);return p.forEach(((t,e)=>{s(f,e,r(t,o,i,s))})),f},i=(t,e)=>{if(++e>n.length)return t;let r,s=o[e-1];return r=[],t.forEach(((t,n)=>{r.push({key:n,values:i(t,e)})})),null==s?r:r.sort(((t,e)=>s(t.key,e.key)))};return e={entries:t=>i(r(t,0,Vh,qh),0),key:t=>(n.push(t),e),sortKeys:t=>(o[n.length-1]=t,e),sortValues:n=>(t=n,e)}}const $h=Math.round,Kh=Math.floor,Jh=Math.max,Qh=Math.abs,tu=t=>t.map(((t,e)=>{const{className:n,wick:o}=t,{stroke:r,x:i,y1:s,y2:a,y3:l,y4:c}=o;return(0,C.jsx)("path",{className:n,stroke:r,d:"M"+i+","+s+" L"+i+","+a+" M"+i+","+l+" L"+i+","+c},e)})),eu=(t,e)=>{const{opacity:n,candleStrokeWidth:o}=t;return e.map(((t,e)=>{const{className:r,fill:i,stroke:s,x:a,y:l,width:c,height:h}=t;return t.width<=1?(0,C.jsx)("line",{className:r,stroke:i,x1:a,y1:l,x2:a,y2:l+h},e):0===t.height?(0,C.jsx)("line",{stroke:i,x1:a,y1:l,x2:a+c,y2:l+h},e):(0,C.jsx)("rect",{className:r,fillOpacity:n,fill:i,stroke:s,strokeWidth:o,x:a,y:l,width:c,height:h},e)}))},nu=(t,e,n,o,r)=>{const{classNames:i,yAccessor:s,fill:a,stroke:l,wickStroke:c,width:h}=t,u=$n(c),d=$n(i),p=$n(a),f=$n(l),g=.5*$n(h)(t,{xScale:n,xAccessor:e,plotData:r}),m=g>.7?$h(g):Kh(g);let y=[];for(let t=0;t<r.length;t++){const i=r[t],a=t>0?r[t-1]:{};if(null!=s(i).close){const t=$h(n(e(i))),r=s(i),l=s(a),c=$h(o(Jh(r.open,r.close))),h=$h(Qh(o(r.open)-o(r.close)));y.push({x:t-m,y:c,wick:{stroke:u(r,l),x:t,y1:$h(o(r.high)),y2:c,y3:c+h,y4:$h(o(r.low))},height:h,width:2*m,className:d(r),fill:p(r,l),stroke:f(r,l),direction:r.close-r.open})}}return y},ou=["pan"],ru=t=>{const{className:e,wickClassName:n,candleClassName:o,clip:r}=t;return(0,C.jsx)(El,{clip:r,svgDraw:r=>{const{xAccessor:i,xScale:s,plotData:a,chartConfig:{yScale:l}}=r,c=nu(t,i,s,l,a);return(0,C.jsxs)("g",{className:e,children:[(0,C.jsx)("g",{className:n,children:tu(c)},"wicks"),(0,C.jsx)("g",{className:o,children:eu(t,c)},"candles")]})},canvasDraw:(e,n)=>{((t,e,n)=>{const{opacity:o,candleStrokeWidth:r}=e,{xAccessor:i,xScale:s,plotData:a,chartConfig:{yScale:l}}=n,c=nu(e,i,s,l,a);Gh().key((t=>t.wick.stroke)).entries(c).forEach((e=>{const{key:n,values:o}=e;t.strokeStyle=n,t.fillStyle=n,o.forEach((e=>{const n=e.wick;t.fillRect(n.x-.5,n.y1,1,n.y2-n.y1),t.fillRect(n.x-.5,n.y3,1,n.y4-n.y3)}))})),Gh().key((t=>t.stroke)).key((t=>t.fill)).entries(c).forEach((e=>{const{key:n,values:i}=e;"none"!==n&&(t.strokeStyle=n,t.lineWidth=r),i.forEach((e=>{const{key:r,values:i}=e,s=hs(i).width<=1?r:ls(r,o);t.fillStyle=s,i.forEach((e=>{e.width<=1?t.fillRect(e.x-.5,e.y,1,e.height):0===e.height?t.fillRect(e.x,e.y-.5,e.width,1):(t.fillRect(e.x,e.y,e.width,e.height),"none"!==n&&t.strokeRect(e.x,e.y,e.width,e.height))}))}))}))})(e,t,n)},canvasToDraw:Ll,drawOn:ou})};ru.defaultProps={className:Ia,wickClassName:Fa,candleClassName:La,yAccessor:t=>({open:t.open,high:t.high,low:t.low,close:t.close}),classNames:t=>t.close>t.open?Oa:Ra,width:ds,wickStroke:"#000000",fill:t=>t.close>t.open?"#6ba583":"#ff0000",stroke:"#000000",candleStrokeWidth:.5,widthRatio:.8,opacity:.5,clip:!0};const iu=ru,su=Math.round,au=(t,e,n,o,r,i,s)=>function(t,e,n){let o=null,r=gh(!0),i=null,s=Uc,a=null,l=vh(c);function c(c){let h,u,d,p,f,g=(c=yh(c)).length,m=!1,y=new Array(g),x=new Array(g);for(null==i&&(a=s(f=l())),h=0;h<=g;++h){if(!(h<g&&r(p=c[h],h,c))===m)if(m=!m)u=h,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),d=h-1;d>=u;--d)a.point(y[d],x[d]);a.lineEnd(),a.areaEnd()}m&&(y[h]=+t(p,h,c),x[h]=+e(p,h,c),a.point(o?+o(p,h,c):y[h],n?+n(p,h,c):x[h]))}if(f)return a=null,f+""||null}function h(){return Sh().defined(r).curve(s).context(i)}return t=Ch(t,wh),e=Ch(e,gh(0)),n=Ch(n,bh),c.x=e=>fh(e)?t:(t=ph(e)?e:gh(+e),o=null,c),c.x0=e=>fh(e)?t:(t=ph(e)?e:gh(+e),c),c.x1=t=>fh(t)?o:(o=null==t?null:ph(t)?t:gh(+t),c),c.y=t=>fh(t)?e:(e=ph(t)?t:gh(+t),n=null,c),c.y0=t=>fh(t)?e:(e=ph(t)?t:gh(+t),c),c.y1=t=>fh(t)?n:(n=null==t?null:ph(t)?t:gh(+t),c),c.lineX0=c.lineY0=()=>h().x(t).y(e),c.lineY1=()=>h().x(t).y(n),c.lineX1=()=>h().x(o).y(e),c.defined=t=>fh(t)?r:(r=ph(t)?t:gh(!!t),c),c.curve=t=>fh(t)?s:(s=t,null!=i&&(a=s(i)),c),c.context=t=>fh(t)?i:(null==t?i=a=null:a=s(i=t),c),c}().defined((t=>e(o(t)))).x((t=>su(r(n(t))))).y0((e=>$n(t)(i,e,s))).y1((t=>su(i(o(t))))),lu=["pan"],cu=t=>{const{yAccessor:e,defined:n,base:o,style:r,className:i,stroke:s,fill:a,opacity:l,interpolation:c,canvasGradient:h,canvasClip:u}=t;return(0,C.jsx)(El,{svgDraw:t=>{const{plotData:h,xScale:u,xAccessor:d,chartConfig:{yScale:p}}=t,f=au(o,n,d,e,u,p,t);null!=c&&f.curve(c);const g=f(h),m=i.concat(null!=s?"":" "+Ba);return(0,C.jsx)("path",{className:m,style:r,stroke:s,fill:ls(a,l),d:g})},canvasDraw:(t,r)=>{const{xScale:i,plotData:d,xAccessor:p,chartConfig:{yScale:f}}=r;u&&(t.save(),u(t,r)),t.fillStyle=null!=h?h(r,t):ls(a,l),t.strokeStyle=s,t.beginPath();const g=au(o,n,p,e,i,f,r).context(t);null!=c&&g.curve(c),g(d),t.fill(),u&&t.restore()},canvasToDraw:Ll,drawOn:lu})};cu.defaultProps={className:Ya,fill:"none",opacity:1,defined:t=>!isNaN(t),base:t=>us(t.range())};const hu=cu;class uu extends r.Component{constructor(){super(...arguments),this.yAccessorForTop=t=>{const{yAccessor:e}=this.props,n=e(t);return n&&n.top},this.yAccessorForMiddle=t=>{const{yAccessor:e}=this.props,n=e(t);return n&&n.middle},this.yAccessorForBottom=t=>{const{yAccessor:e}=this.props,n=e(t);return n&&n.bottom},this.yAccessorForScalledBottom=(t,e)=>{const{yAccessor:n}=this.props,o=n(e);return t(o&&o.bottom)}}render(){const{className:t,areaClassName:e,opacity:n,stroke:o,fill:r}=this.props;return(0,C.jsxs)("g",{className:t,children:[(0,C.jsx)(Ih,{yAccessor:this.yAccessorForTop,stroke:o.top,fill:"none"}),(0,C.jsx)(Ih,{yAccessor:this.yAccessorForMiddle,stroke:o.middle,fill:"none"}),(0,C.jsx)(Ih,{yAccessor:this.yAccessorForBottom,stroke:o.bottom,fill:"none"}),(0,C.jsx)(hu,{className:e,yAccessor:this.yAccessorForTop,base:this.yAccessorForScalledBottom,opacity:n,stroke:"none",fill:r})]})}}uu.defaultProps={className:Pa,areaClassName:Na,opacity:.2};const du=uu,pu=Array.isArray,fu=Math.round,gu=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];let o=[];const r=t=>o.map(((e,n)=>{const o=t.map((t=>{const n=[0,t[e]];return n.data=t,n}));return o.key=e,o.index=n,o}));return r.keys=t=>e.length?(o=t,r):o,r},mu=t=>"y"+t,yu=function(t,e,n,o,r,i,s,a){void 0===s&&(s=gu),void 0===a&&(a=Zn);const{baseAt:l,className:c,fill:h,stroke:u,spaceBetweenBar:d=0,width:p}=t,f=$n(c),g=$n(h),m=$n(l),y=$n(p)(t,{xScale:o,xAccessor:e,plotData:i}),x=fu(y),v=(x-d*(n.length-1))/n.length,w=1===x?0:.5*y,b=i.map((t=>{const o={appearance:{},x:e(t)};return n.forEach(((e,n)=>{const r=mu(n),i={className:f(t,n),stroke:u?g(t,n):"none",fill:g(t,n)};o[r]=e(t),o.appearance[r]=i})),o})),k=n.map(((t,e)=>mu(e))),S=s().keys(k)(b).map(((t,e)=>{const n=t.key;return t.map((t=>{const o=[t[0],t[1]];return o.data={i:e,x:t.data.x,appearance:t.data.appearance[n]},o}))})),C=(t=>{let e,n,o,r=t.length,i=-1,s=0;for(;++i<r;)s+=t[i].length;for(n=new Array(s);--r>=0;)for(o=t[r],e=o.length;--e>=0;)n[--s]=o[e];return n})(S).map((t=>{let e=r(t[1]),n=m(o,r,t.data)-r(t[1]-t[0]);return n<0&&(e+=n,n=-n),{...t.data.appearance,x:fu(o(t.data.x)-y/2),y:e,groupOffset:fu(w-(t.data.i>0?(v+d)*t.data.i:0)),groupWidth:fu(v),offset:fu(w),height:n,width:x}})).filter((t=>!isNaN(t.y)));return a(C)},xu=t=>pu(t)?t:[t],vu=(t,e,n,o,r,i,s,a)=>{const{xAccessor:l,yAccessor:c,swapScales:h}=t,[u,d,p,f,g]=h?[xu(l),c,r,o,s]:[xu(c),e,o,r,a];return yu(t,d,u,p,f,n,i,g)},wu=t=>t.map((t=>({...t,x:t.y,y:t.x,height:t.width,width:t.height}))),bu=(t,e,n)=>{const{stroke:o,opacity:r}=e;Gh().key((t=>t.fill)).entries(n).forEach((e=>{const{key:n,values:i}=e;hs(i).width>1&&(t.strokeStyle=n),t.fillStyle=hs(i).width<=1?n:ls(n,r),i.forEach((e=>{let{x:n,y:r,width:i,height:s}=e;i<=1?t.fillRect(n-.5,r,1,s):(t.fillRect(n,r,i,s),o&&t.strokeRect(n,r,i,s))}))}))},ku=function(t,e,n,o,r,i){void 0===r&&(r=Zn),void 0===i&&(i=wu);const{xAccessor:s,plotData:a,xScale:l,chartConfig:{yScale:c}}=n,h=vu(e,s,a,l,c,o,i,r);bu(t,e,h)},Su=function(t,e,n,o,r){void 0===o&&(o=Zn),void 0===r&&(r=wu);const{xAccessor:i,plotData:s,xScale:a,chartConfig:{yScale:l}}=e,c=vu(t,i,s,a,l,n,r,o);return Cu(t,c)},Cu=(t,e)=>{let{opacity:n}=t;return e.map(((t,e)=>{const{className:o,fill:r,stroke:i,x:s,y:a,width:l,height:c}=t;return l<=1?(0,C.jsx)("line",{className:o,stroke:r,x1:s,y1:a,x2:s,y2:a+c},e):(0,C.jsx)("rect",{className:o,fill:r,fillOpacity:n,stroke:i,x:s,y:a,width:l,height:c},e)}))},Du=["pan"],Au=t=>(0,C.jsx)(El,{clip:t.clip,svgDraw:e=>(0,C.jsx)("g",{children:Su(t,e,_h)}),canvasDraw:(e,n)=>{ku(e,t,n,_h)},canvasToDraw:Ll,drawOn:Du});Au.defaultProps={baseAt:(t,e)=>hs(e.range()),direction:"up",className:Ua,stroke:!0,fill:"#4682b4",opacity:.5,width:ds,widthRatio:.8,clip:!0,swapScales:!1};const Mu=Au,Tu=Math.round,_u=Math.floor,Pu=(t,e)=>{const{baseAt:n,fill:o,stroke:r,yAccessor:i}=t,{xScale:s,xAccessor:a,plotData:l,chartConfig:{yScale:c}}=e,h=$n(n),u=$n(t.width)(t,{xScale:s,xAccessor:a,plotData:l}),d=_u(.5*u),p=l.filter((t=>null!=i(t))).map(((t,e,n)=>{const l=n[e-1]||t,u=i(t),p=Tu(s(a(t)))-d;let f=c(u),g=h(s,c,t)-c(u);return g<0&&(f+=g,g=-g),{x:p,y:Tu(f),height:Tu(g),width:2*d,fill:o(t,l),stroke:r(t,l)}}));return p},Nu=["pan"],ju=t=>{const{swapScales:e,clip:n}=t;return(0,C.jsx)(El,{clip:n,svgDraw:n=>(0,C.jsx)("g",{children:e?Su(t,n,gu):Cu(t,Pu(t,n))}),canvasToDraw:Ll,canvasDraw:(n,o)=>{e?ku(n,t,o,gu):bu(n,t,Pu(t,o))},drawOn:Nu})};ju.defaultProps=Mu.defaultProps;const Eu=ju,Iu=Array.isArray,Fu=Math.round,Lu=(t,e)=>{const{mouseXY:n,currentItem:o,show:r,height:i,width:s}=e,{customX:a,stroke:l,opacity:c,strokeDasharray:h}=t;if(!r||null==o)return null;const u={x1:0,x2:s,y1:n[1],y2:n[1],stroke:l,strokeDasharray:h,opacity:c},d=a(t,e);return[u,{x1:d,x2:d,y1:0,y2:i,stroke:l,strokeDasharray:h,opacity:c}]},Ou=t=>{const e=(0,r.useContext)(wl);return(0,C.jsx)(Tl,{clip:!1,canvasDraw:(n,o)=>{const r=Lu(t,o);if(Iu(r)){const{margin:t,ratio:o}=e,i=.5*o+t.left,s=.5*o+t.top;n.save(),n.setTransform(1,0,0,1,0,0),n.scale(o,o),n.translate(i,s),r.forEach((t=>{const e=Jn(t.strokeDasharray).split(",").map((t=>+t));n.strokeStyle=ls(t.stroke,t.opacity),n.setLineDash(e),n.beginPath(),n.moveTo(t.x1,t.y1),n.lineTo(t.x2,t.y2),n.stroke()})),n.restore()}},canvasToDraw:Ol,drawOn:["mousemove","pan","drag"],svgDraw:e=>{const n=Lu(t,e);return Iu(n)?(0,C.jsx)("g",{className:ut(za,t.className),children:n.map(((t,e)=>{let{strokeDasharray:n,...o}=t;return(0,C.jsx)("line",{strokeDasharray:Jn(n),...o},e)}))}):null}})};Ou.defaultProps={customX:(t,e)=>{let{xScale:n,xAccessor:o,currentItem:r,mouseXY:i}=e;return t.snapX?Fu(n(o(r))):i[0]},opacity:.3,snapX:!0,stroke:"#000000",strokeDasharray:"ShortDash"};const Ru=Ou;function zu(t){const{coordinate:e,show:n,type:o,orient:r,edgeAt:i,hideLine:s,lineStrokeDasharray:a}=t,{fill:l,opacity:c,fontFamily:h,fontSize:u,textFill:d,lineStroke:p,lineOpacity:f}=t,{stroke:g,strokeOpacity:m,strokeWidth:y}=t,{arrowWidth:x,rectWidth:v,rectHeight:w,rectRadius:b}=t,{x1:k,y1:S,x2:C,y2:D,dx:A}=t;if(!n)return null;let M,T;if(null!=e){let t,n,s,a;if("horizontal"===o)t=A+("right"===r?i+1:i-v-1),n=S-w/2-y,s=A+("right"===r?i+v/2:i-v/2),a=S;else{const e="bottom"===r?y-1:1-y;t=k-v/2,n=("bottom"===r?i:i-w)+e,s=k,a=("bottom"===r?i+w/2:i-w/2)+e}M={edgeXRect:t,edgeYRect:n,rectHeight:w+y,rectWidth:v,rectRadius:b,fill:l,opacity:c,arrowWidth:x,stroke:g,strokeOpacity:m,strokeWidth:y},T={edgeXText:s,edgeYText:a,textAnchor:"middle",fontFamily:h,fontSize:u,textFill:d,displayCoordinate:e}}return{coordinateBase:M,coordinate:T,orient:r,line:s?void 0:{opacity:f,stroke:p,strokeDasharray:a,x1:k,y1:S,x2:C,y2:D}}}const Wu=["mousemove","pan","drag"],Xu=t=>e=>(0,C.jsx)(El,{clip:!1,svgDraw:n=>{const o=t(e,n);return null==o?null:function(t){const{className:e}=t,n=zu(t);if(null===n)return null;let o,r,i;if(n.line&&(o=(0,C.jsx)("line",{className:Wa,strokeOpacity:n.line.opacity,stroke:n.line.stroke,strokeDasharray:Jn(n.line.strokeDasharray),x1:n.line.x1,y1:n.line.y1,x2:n.line.x2,y2:n.line.y2})),n.coordinateBase){const{rectWidth:t,rectHeight:e,arrowWidth:o}=n.coordinateBase,s="left"===n.orient?"M0,0L0,"+e+"L"+t+","+e+"L"+(t+o)+",10L"+t+",0L0,0L0,0":"M0,"+o+"L"+o+","+e+"L"+(t+o)+","+e+"L"+(t+o)+",0L"+o+",0L0,"+o;r="left"===n.orient||"right"===n.orient?(0,C.jsx)("g",{transform:"translate("+n.coordinateBase.edgeXRect+","+n.coordinateBase.edgeYRect+")",children:(0,C.jsx)("path",{d:s,className:Xa,height:e,width:t,stroke:n.coordinateBase.stroke,strokeLinejoin:"miter",strokeOpacity:n.coordinateBase.strokeOpacity,strokeWidth:n.coordinateBase.strokeWidth,fill:n.coordinateBase.fill,fillOpacity:n.coordinateBase.opacity})},1):(0,C.jsx)("rect",{className:Xa,x:n.coordinateBase.edgeXRect,y:n.coordinateBase.edgeYRect,height:e,width:t,fill:n.coordinateBase.fill,opacity:n.coordinateBase.opacity},1);const{edgeXText:a,edgeYText:l,textAnchor:c,fontFamily:h,fontSize:u,textFill:d,displayCoordinate:p}=n.coordinate;i=(0,C.jsx)("text",{x:a,y:l,textAnchor:c,fontFamily:h,fontSize:u,dy:".32em",fill:d,children:null!=p?p:""},2)}return(0,C.jsxs)("g",{className:e,children:[o,r,i]})}(o)},canvasDraw:(n,o)=>{const r=t(e,o);if(null==r)return null;!function(t,e){const{fontSize:n,fontFamily:o}=e;t.font=n+"px "+o,t.textBaseline="middle";const r=Math.round(t.measureText(e.coordinate).width+10),i=zu({...e,rectWidth:r});if(null!==i){if(i.line){const e=Jn(i.line.strokeDasharray).split(",").map((t=>+t));t.setLineDash(e),t.strokeStyle=ls(i.line.stroke,i.line.opacity),t.lineWidth=1,t.beginPath(),t.moveTo(i.line.x1,i.line.y1),t.lineTo(i.line.x2,i.line.y2),t.stroke()}if(t.setLineDash([]),i.coordinateBase){const{rectWidth:e,rectHeight:n,rectRadius:o,arrowWidth:r}=i.coordinateBase;t.fillStyle=ls(i.coordinateBase.fill,i.coordinateBase.opacity),i.coordinateBase.stroke&&(t.strokeStyle=ls(i.coordinateBase.stroke,i.coordinateBase.strokeOpacity),t.lineWidth=i.coordinateBase.strokeWidth);let s=i.coordinateBase.edgeXRect;const a=i.coordinateBase.edgeYRect,l=n/2;t.beginPath(),"right"===i.orient?(s-=r,t.moveTo(s,a+l),t.lineTo(s+r,a),t.lineTo(s+e+r,a),t.lineTo(s+e+r,a+n),t.lineTo(s+r,a+n),t.closePath()):"left"===i.orient?(t.moveTo(s,a),t.lineTo(s+e,a),t.lineTo(s+e+r,a+l),t.lineTo(s+e,a+n),t.lineTo(s,a+n),t.closePath()):o?function(t,e,n,o,r,i){t.beginPath(),t.moveTo(e+i,n),t.lineTo(e+o-i,n),t.quadraticCurveTo(e+o,n,e+o,n+i),t.lineTo(e+o,n+r-i),t.quadraticCurveTo(e+o,n+r,e+o-i,n+r),t.lineTo(e+i,n+r),t.quadraticCurveTo(e,n+r,e,n+r-i),t.lineTo(e,n+i),t.quadraticCurveTo(e,n,e+i,n),t.closePath()}(t,s,a,e,n,3):t.rect(s,a,e,n),t.fill(),i.coordinateBase.stroke&&t.stroke(),t.fillStyle=i.coordinate.textFill,t.textAlign="middle"===i.coordinate.textAnchor?"center":i.coordinate.textAnchor,t.fillText(i.coordinate.displayCoordinate,i.coordinate.edgeXText,i.coordinate.edgeYText)}}}(n,r)},canvasToDraw:Ol,drawOn:Wu}),Hu="#525252",Yu="#ffffff",Bu="Helvetica Neue, Helvetica, Arial, sans-serif",Uu=Xu(((t,e)=>{const{show:n,currentItem:o,chartConfig:{height:r}}=e;if(null==o)return null;const{orient:i,at:s,stroke:a,strokeOpacity:l,strokeWidth:c,rectRadius:h,rectWidth:u,rectHeight:d,fill:p,opacity:f,fontFamily:g,fontSize:m,textFill:y,customX:x}=t,{x:v,coordinate:w}=x(t,e);return{type:"vertical",hideLine:!0,edgeAt:"bottom"===s?r:0,coordinate:w,show:n,orient:i,fill:p,opacity:f,fontFamily:g,fontSize:m,textFill:y,stroke:a,strokeOpacity:l,strokeWidth:c,rectWidth:u,rectHeight:d,rectRadius:h,arrowWidth:0,x1:v,x2:v,y1:0,y2:r}}));Uu.defaultProps={fill:Hu,textFill:Yu,fontFamily:Bu,fontSize:13,yAxisPad:0,rectWidth:80,rectHeight:20,strokeOpacity:1,strokeWidth:1,orient:"bottom",at:"bottom",opacity:1,snapX:!0,customX:(t,e)=>{const{snapX:n,displayFormat:o}=t,{xScale:r,xAccessor:i,currentItem:s,mouseXY:a,displayXAccessor:l}=e,[c,h]=n?[r(i(s)),l(s)]:[a[0],r.invert(c)];return{x:c,coordinate:o(h)}}};const Zu=Uu,Vu=Xu(((t,e)=>{const{displayFormat:n,yAccessor:o}=t,{chartConfig:r,currentCharts:i,currentItem:s,mouseXY:a,show:l}=e,{id:c,yScale:h}=r||{};if(null==a||i.indexOf(c)<0||!l||o&&!s)return null;const u=o?h(o(s)):a[1]-r.origin[1];return((t,e,n,o)=>{const{width:r}=o,{orient:i,at:s,rectWidth:a,rectHeight:l,dx:c,fill:h,opacity:u,fontFamily:d,fontSize:p,textFill:f,arrowWidth:g,stroke:m,strokeOpacity:y,strokeWidth:x}=n;return{coordinate:"NaNundefined"===e?"no data":e,show:!0,type:"horizontal",hideLine:!0,edgeAt:"right"===s?r:0,orient:i,fill:h,opacity:u,fontFamily:d,fontSize:p,textFill:f,stroke:m,strokeOpacity:y,strokeWidth:x,rectWidth:a,rectHeight:l,arrowWidth:g,dx:c,x1:0,x2:r,y1:t,y2:t}})(u,n(h.invert(u)),t,e)}));Vu.defaultProps={fill:Hu,textFill:Yu,fontFamily:Bu,fontSize:13,yAxisPad:0,rectWidth:50,rectHeight:20,orient:"left",at:"left",dx:0,arrowWidth:10,opacity:1,strokeOpacity:1,strokeWidth:1};const qu=Vu,Gu=11,$u="-apple-system, system-ui, 'Helvetica Neue', Ubuntu, sans-serif",Ku=t=>{let{className:e=la,fontFamily:n=$u,fontSize:o=Gu,children:r,...i}=t;return(0,C.jsx)("text",{className:e,fontFamily:n,fontSize:o,...i,children:r})},Ju="#4682b4",Qu=t=>{let{className:e=ca,fill:n=Ju,children:o,...r}=t;return(0,C.jsx)("tspan",{className:e,fill:n,...r,children:o})},td=["mousemove"],ed=t=>(0,C.jsx)(El,{clip:!1,svgDraw:e=>{var n;const{onClick:o,displayFormat:r,yAccessor:i,options:s,origin:a,textFill:l,labelFill:c,labelFontWeight:h,className:u,displayValuesFor:d,displayInit:p,fontFamily:f,fontSize:g,fontWeight:m}=t,{chartConfig:{width:y,height:x},fullData:v}=e,w=null!=(n=d(t,e))?n:cs(v);let b=p,k=p,S=p;if(void 0!==w){const t=i(w);void 0!==t&&(b=r(t.top),k=r(t.middle),S=r(t.bottom))}const D=$n(a),[A,M]=D(y,x),{sourcePath:T,windowSize:_,multiplier:P,movingAverageType:N}=s,j="BB("+T+", "+_+", "+P+", "+N+")",E=b+", "+k+", "+S,I=ss([A,M]);return(0,C.jsx)("g",{transform:I,className:u,onClick:o,children:(0,C.jsxs)(Ku,{x:0,y:0,fontFamily:f,fontSize:g,fontWeight:m,children:[(0,C.jsx)(Qu,{fill:c,fontWeight:h,children:j}),(0,C.jsx)("tspan",{x:0,dy:15,fill:l,children:E})]})})},drawOn:td});ed.defaultProps={className:ua,displayFormat:_r(".2f"),displayValuesFor:(t,e)=>e.currentItem,displayInit:"n/a",origin:[8,8],yAccessor:t=>t.bb};const nd=ed,od=t=>{let{color:e,displayName:n,fontSize:o,fontFamily:i,fontWeight:s,textFill:a,labelFill:l,labelFontWeight:c,value:h,origin:u,onClick:d,forChart:p,options:f}=t;const g=(0,r.useCallback)((t=>{void 0!==d&&d(t,{chartId:p,...f})}),[d,p,f]),m=ss(u);return(0,C.jsxs)("g",{transform:m,children:[(0,C.jsx)("line",{x1:0,y1:2,x2:0,y2:28,stroke:e,strokeWidth:4}),(0,C.jsxs)(Ku,{x:5,y:11,fontFamily:i,fontSize:o,fontWeight:s,children:[(0,C.jsx)(Qu,{fill:l,fontWeight:c,children:n}),(0,C.jsx)("tspan",{x:5,dy:15,fill:a,children:h})]}),(0,C.jsx)("rect",{x:0,y:0,width:55,height:30,fill:"none",stroke:"none",onClick:g})]})},rd=["mousemove"],id=t=>(0,C.jsx)(El,{clip:!1,svgDraw:e=>{var n;const{chartId:o,chartConfig:r,chartConfig:{height:i},fullData:s}=e,{className:a,displayInit:l,onClick:c,width:h,fontFamily:u,fontSize:d,fontWeight:p,textFill:f,labelFill:g,origin:m,displayFormat:y,displayValuesFor:x,options:v}=t,w=null!=(n=x(t,e))?n:cs(s),b=$n(m),[k,S]=b(h,i),[D,A]=r.origin,M=ss([D+k,A+S]);return(0,C.jsx)("g",{transform:M,className:a,children:v.map(((t,e)=>{const n=w&&t.yAccessor(w),r=t.type+" ("+t.windowSize+")",i=n?y(n):l;return(0,C.jsx)(od,{origin:[h*e,0],color:t.stroke,displayName:r,value:i,options:t,forChart:o,onClick:c,fontFamily:u,fontSize:d,fontWeight:p,textFill:f,labelFill:g},e)}))})},drawOn:rd});id.defaultProps={className:da,displayFormat:_r(".2f"),displayInit:"n/a",displayValuesFor:(t,e)=>e.currentItem,origin:[0,10],width:65};const sd=id,ad=t=>{let{labelFill:e,labelFontWeight:n,text:o,valueFill:r,value:i}=t;return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(Qu,{fill:e,fontWeight:n,children:o}),(0,C.jsx)("tspan",{fill:r,children:i},"value_O")]})},ld=["mousemove"],cd=t=>(0,C.jsx)(El,{clip:!1,svgDraw:e=>{var n;const{accessor:o,changeFormat:r,className:i,displayTexts:s,displayValuesFor:a,fontFamily:l,fontSize:c,fontWeight:h,labelFill:u,labelFontWeight:d,ohlcFormat:p,onClick:f,percentFormat:g,textFill:m}=t,{chartConfig:{width:y,height:x},fullData:v}=e,w=null!=(n=a(t,e))?n:cs(v),{na:b}=s;let k=b,S=b,D=b,A=b,M=b;if(void 0!==w&&void 0!==o){const t=o(w);void 0!==t&&(k=p(t.open),S=p(t.high),D=p(t.low),A=p(t.close),M=r(t.close-t.open)+" ("+g((t.close-t.open)/t.open)+")")}const{origin:T}=t,[_,P]=$n(T)(y,x),N=$n(m)(w),j=ss([_,P]);return(0,C.jsx)("g",{className:i,transform:j,onClick:f,children:(0,C.jsxs)(Ku,{x:0,y:0,fontFamily:l,fontSize:c,fontWeight:h,children:[(0,C.jsx)(ad,{fill:u,fontWeight:d,text:s.o,valueFill:N,value:k}),(0,C.jsx)(ad,{fill:u,fontWeight:d,text:s.h,valueFill:N,value:S}),(0,C.jsx)(ad,{fill:u,fontWeight:d,text:s.l,valueFill:N,value:D}),(0,C.jsx)(ad,{fill:u,fontWeight:d,text:s.c,valueFill:N,value:A}),(0,C.jsx)("tspan",{fill:N,children:" "+M},"value_Change")]})})},drawOn:ld});cd.defaultProps={className:pa,fontFamily:Za,fontWeight:"bold",accessor:t=>t,changeFormat:_r("+.2f"),displayTexts:{o:"O: ",h:" H: ",l:" L: ",c:" C: ",na:"n/a"},displayValuesFor:(t,e)=>e.currentItem,ohlcFormat:_r(".2f"),origin:[0,0],percentFormat:_r("+.2%")};const hd=cd,ud=_r(".2f"),dd="n/a",pd=(t,e)=>e.currentItem,fd=[0,0],gd=["mousemove"],md=t=>{const{className:e=la,displayInit:n=dd,displayFormat:o=ud,displayValuesFor:r=pd,origin:i=fd,fontFamily:s,fontSize:a,fontWeight:l,yAccessor:c,options:h,labelFill:u,labelFontWeight:d,textFill:p,onClick:f}=t;return(0,C.jsx)(El,{clip:!1,svgDraw:g=>{const{chartConfig:{width:m,height:y}}=g,x=r(t,g),v=x&&c(x),w=v&&o(v)||n,b=$n(i),[k,S]=b(m,y),D="RSI ("+h.windowSize+"): ";return(0,C.jsx)("g",{className:e,transform:"translate("+k+", "+S+")",onClick:f,children:(0,C.jsxs)(Ku,{x:0,y:0,fontFamily:s,fontSize:a,fontWeight:l,children:[(0,C.jsx)(Qu,{fill:u,fontWeight:d,children:D}),(0,C.jsx)("tspan",{fill:p,children:w})]})})},drawOn:gd})},yd={sourcePath:"close",multiplier:2,movingAverageType:"sma",windowSize:20},xd={sourcePath:"close",windowSize:10},vd={sourcePath:"close",windowSize:14},wd={sourcePath:"close",windowSize:10};function bd(){let t=yd;const e=e=>{const{windowSize:n,multiplier:o,movingAverageType:r,sourcePath:i}=t,s=Gn(i),a="ema"===r?function(){let t=xd;const e=e=>{const{windowSize:n,sourcePath:o}=t,r=Gn(o),i=2/(n+1);let s,a=0,l=0;return e.map(((t,e)=>{const o=r(t,e);if(void 0!==s||void 0!==o){if(!(e<n+l-1)){if(e===n+l-1){a+=o;const t=a/n;return s=t,t}{const t=o*i+(1-i)*s;return s=t,t}}a+=o}else l++}))};return e.undefinedLength=()=>t.windowSize-1,e.options=function(){return arguments.length?(t={...xd,...arguments.length<=0?void 0:arguments[0]},e):t},e}().options({windowSize:n,sourcePath:i}):Kn().windowSize(n).accumulator((t=>Dn(t))).sourcePath(i),l=Kn().windowSize(n).accumulator((t=>{const e=t[t.length-1].mean,n=((t,e)=>{const n=((t,e)=>{let n,o=0,r=0,i=0;if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(n=e-r,r+=n/++o,i+=n*(e-r));else{let s=-1;for(let a of t)null!=(a=e(a,++s,t))&&(a=+a)>=a&&(n=a-r,r+=n/++o,i+=n*(a-r))}if(o>1)return i/(o-1)})(t,e);return n?bn(n):n})(t,(t=>s(t.datum)));return void 0===n?void 0:{top:e+o*n,middle:e,bottom:e-o*n}})),c=Vn().combine(((t,e)=>({datum:t,mean:e})));return l(c(e,a(e)))};return e.undefinedLength=()=>t.windowSize-1,e.options=function(){return arguments.length?(t={...yd,...arguments.length<=0?void 0:arguments[0]},e):t},e}let kd=0;function Sd(){let t,e,n,o,r,i=kd++;function s(){}return s.id=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],s):i},s.accessor=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],s):t},s.stroke=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],s):e||(e=as(i))},s.fill=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],s):n||(n=as(i))},s.echo=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],s):o},s.type=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],s):r},s}const Cd={merge:!0},Dd=(t,e,n,o)=>{const r=function(r,i){if(void 0===i&&(i=Cd),i.merge){if(!e.accessor())throw new Error("Set an accessor to "+t+" before calculating");return o(r)}return n(r)};return rs(r,e,"id","accessor","stroke","fill","echo","type"),rs(r,n,"options","undefinedLength"),rs(r,o,"merge","skipUndefined"),r},Ad="BollingerBand",Md=function(t){let{id:e,minWidth:n=100,initialWidth:o=1e3}=void 0===t?{}:t;const s=(0,r.useRef)(),[a,l]=(0,r.useState)(o),c=(0,r.useCallback)((()=>{const t=e?document.getElementById(e):i(s);if(t){const{width:e,paddingLeft:o,paddingRight:r}=window.getComputedStyle(t),i=parseFloat(e)-(parseFloat(o)+parseFloat(r));l(Math.round(Math.max(i,n)))}}),[]);return(0,r.useLayoutEffect)(c,[]),(0,r.useEffect)((()=>(window.addEventListener("resize",c),()=>window.removeEventListener("resize",c))),[]),[a,s]},Td=Math.round,_d={pointerEvents:"all",transform:"translate(0, 50px)"},Pd={transform:"translate(-40px, 0)"},Nd={transform:"translate(-56px, 0)"},jd=(t,e,n)=>"translate ("+(t-20)+", "+(e-8+n/4)+")",Ed=t=>{let{zoomMultiplier:e,heightFromBase:n,r:o,fill:i,fillOpacity:s,stroke:a,strokeWidth:l,textFill:c}=t;const h=(0,r.useContext)(Rs),u=t=>{const{xAxisZoom:n,xScale:o,plotData:r,xAccessor:i}=h,s=o(i(cs(r))),a=t>0?1*e:1/e,[l,c]=o.domain(),[u,d]=o.range().map((t=>s+(t-s)*a)).map(o.invert),p=qo(l,u),f=qo(c,d);n([p(.2),f(.2)])},{chartConfig:{width:d,height:p}}=h,f=Td(d/2),g=p-n,m=f-8,y=f+16+2*o,x=jd(f-16-2*o,g,o),v=jd(m,g,o),w=g+o/2,b=m-o/2,k=y-o/2;return(0,C.jsxs)("g",{style:_d,children:[(0,C.jsx)("g",{transform:x,children:(0,C.jsx)("path",{d:"M19,13H5V11H19V13Z",fill:c})}),(0,C.jsx)("circle",{style:Pd,cx:b,cy:w,fill:i,fillOpacity:s,stroke:a,strokeWidth:l,r:o,onClick:()=>u(1)}),(0,C.jsx)("g",{transform:v,children:(0,C.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z",fill:c})}),(0,C.jsx)("circle",{style:Nd,cx:k,cy:w,fill:i,fillOpacity:s,stroke:a,strokeWidth:l,r:o,onClick:()=>u(-1)})]})};Ed.defaultProps={fill:"#ffffff",fillOpacity:.4,heightFromBase:32,r:16,stroke:"grey",strokeWidth:1,textFill:"#000000",zoomMultiplier:1.5};const Id={ChartCanvas:kl,Chart:zs,XAxis:Rc,YAxis:Yc,LineSeries:Ih,RSISeries:Zh,CandlestickSeries:iu,BollingerSeries:du,BarSeries:Eu,CrossHairCursor:Ru,MouseCoordinateX:Zu,MouseCoordinateY:qu,RSITooltip:md,OHLCTooltip:hd,MovingAverageTooltip:sd,BollingerBandTooltip:nd,sma:()=>{const t=Sd().type("SMA").accessor((t=>t.sma)),e=function(){let t=wd;function e(e){const{windowSize:n,sourcePath:o}=t,r=Kn().windowSize(n).sourcePath(o).accumulator((t=>Dn(t)));return r(e)}return e.undefinedLength=()=>t.windowSize-1,e.options=function(){return arguments.length?(t={...wd,...arguments.length<=0?void 0:arguments[0]},e):t},e}(),n=is().algorithm(e).merge(((t,e)=>{t.sma=e}));return Dd("SMA",t,e,n)},rsi:()=>{const t=Sd().type("RSI").accessor((t=>t.rsi)),e=function(){let t=vd;const e=e=>{let n,o;const{windowSize:r,sourcePath:i}=t,s=Gn(i),a=Kn().windowSize(r).accumulator((t=>{const e=void 0!==n?(n*(r-1)+t[t.length-1].gain)/r:Dn(t,(t=>t.gain));if(void 0===e)return;const i=void 0!==o?(o*(r-1)+t[t.length-1].loss)/r:Dn(t,(t=>t.loss));return void 0!==i?(n=e,o=i,100-100/(1+e/i)):void 0})),l=Kn().windowSize(2).undefinedValue((()=>[0,0])).accumulator((t=>{const e=t[0],n=t[1],o=s(n)-s(e);return{gain:Math.max(o,0),loss:Math.abs(Math.min(o,0))}}));return a(l(e))};return e.undefinedLength=()=>t.windowSize-1,e.options=function(){return arguments.length?(t={...vd,...arguments.length<=0?void 0:arguments[0]},e):t},e}(),n=is().algorithm(e).merge(((t,e)=>{t.rsi=e}));return Dd("RSI",t,e,n)},bollingerBand:()=>{const t=Sd().type(Ad),e=bd(),n=is().algorithm(e).merge(((t,e)=>{t.bollingerBand=e}));return Dd(Ad,t,e,n)},useElementWidth:Md,ZoomButtons:Ed},Fd=Id,Ld=t=>function(e,n){const{widthRatio:o}=e,{xScale:r,xAccessor:i,plotData:s}=n,a=i(((t,e)=>{if(!e||!t)return t?t[0]:void 0;for(let n=0;n<t.length;n++){const o=t[n];if(null!=e(o))return o}})(s));return Math.abs(r(t.offset(a,1))-r(a))*o},Od={UP:"black",DOWN:"#980032",TRANSPARENT:"transparent"},Rd=t=>"string"==typeof t,zd=(t,e)=>-1!==t.indexOf(e),Wd=_r(".8~"),Xd=_r(".4f"),Hd=_r(".2f"),Yd=_r(".4s"),Bd=_r(".0s"),Ud=t=>{if(!t||!Rd(t))return ci;const e=parseInt(t,10);return zd(t,"m")?ii.every(e):zd(t,"h")?ai.every(e):zd(t,"d")?ci.every(e):zd(t,"w")?fi.every(e):zd(t,"M")?mi.every(e):ci},Zd=t=>Rd(t)&&(zd(t,"m")||zd(t,"h"))?Ji("%m-%d %H:%M"):Ji("%Y-%m-%d");let Vd,qd,Gd=[];const $d=document&&"ontouchstart"in document.documentElement,Kd=t=>(0,r.useMemo)((()=>Ld(t)),[t]),Jd="rs-tooltip",Qd=(t,e)=>(t||{}).close>(e||{}).close?Od.UP:Od.DOWN,tp=(t,e)=>(t||{}).close>(t||{}).open?Od.TRANSPARENT:Qd(t,e),ep={top:"#964b00",middle:"#000000",bottom:"#964b00"},np=(t,e)=>({type:"SMA",yAccessor:t,stroke:e.stroke,windowSize:e.windowSize}),op=[5,-90],rp=[5,320],ip=[190,432],sp=t=>t.bb,ap=t=>{let{id:e,height:n,timeInterval:o,timeFormat:i,sma20:s,sma50:a,bb:l,yExtents:c,origin:h}=t;const u=Kd(o),[d,p]=(0,r.useMemo)((()=>[s.accessor(),s.options()]),[s]),[f,g]=(0,r.useMemo)((()=>[a.accessor(),a.options()]),[a]),m=(0,r.useMemo)((()=>[np(d,p),np(f,g)]),[d,p,f,g]),y=(0,r.useMemo)((()=>l.options()),[l]);return(0,C.jsxs)(Fd.Chart,{id:e,height:n,yExtents:c,origin:h,children:[(0,C.jsx)(Fd.YAxis,{axisAt:"right",orient:"right",ticks:5,stroke:"black"}),(0,C.jsx)(Fd.BollingerSeries,{yAccessor:sp,stroke:ep,fill:"#4682b4"}),(0,C.jsx)(Fd.LineSeries,{yAccessor:d,stroke:p.stroke}),(0,C.jsx)(Fd.LineSeries,{yAccessor:f,stroke:g.stroke}),(0,C.jsx)(Fd.CandlestickSeries,{width:u,fill:tp,stroke:Qd,wickStroke:Qd,candleStrokeWidth:.8}),(0,C.jsx)(Fd.MouseCoordinateY,{at:"right",orient:"right",displayFormat:Xd}),(0,C.jsx)(Fd.OHLCTooltip,{fontSize:15,xDisplayFormat:i,textFill:"black",ohlcFormat:Wd,forChart:3,origin:op}),(0,C.jsx)(Fd.MovingAverageTooltip,{className:Jd,width:100,fontSize:15,origin:rp,options:m}),(0,C.jsx)(Fd.BollingerBandTooltip,{className:Jd,fontSize:15,origin:ip,yAccessor:sp,options:y}),$d&&(0,C.jsx)(Fd.ZoomButtons,{})]})},lp=(t,e)=>(t||{}).close>(e||{}).close?Od.UP:Od.DOWN,cp=t=>t.volume,hp=t=>{let{id:e,height:n,timeInterval:o,timeFormat:r,yExtents:i,origin:s}=t;const a=Kd(o);return(0,C.jsxs)(Fd.Chart,{id:e,height:n,yExtents:i,origin:s,children:[(0,C.jsx)(Fd.YAxis,{axisAt:"left",orient:"left",ticks:3,tickFormat:Bd,stroke:"black"}),(0,C.jsx)(Fd.MouseCoordinateY,{at:"left",orient:"left",displayFormat:Yd}),(0,C.jsx)(Fd.BarSeries,{width:a,yAccessor:cp,fill:lp,stroke:lp}),(0,C.jsx)(Fd.XAxis,{axisAt:"bottom",orient:"bottom",ticks:6}),(0,C.jsx)(Fd.MouseCoordinateX,{at:"bottom",orient:"bottom",displayFormat:r})]})},up={line:"#000000",top:"#b8b2bb",middle:"transparent",bottom:"#b8c2cc",outsideThreshold:"#b300b3",insideThreshold:"#4699cb"},dp=[30,50,70],pp=t=>t.rsi,fp=t=>{let{id:e,height:n,width:o,rsi:i,yExtents:s,origin:a}=t;const l=(0,r.useMemo)((()=>[o-160,10]),[o]),c=(0,r.useMemo)((()=>i.options()),[i]);return(0,C.jsxs)(Fd.Chart,{id:e,height:n,yExtents:s,origin:a,children:[(0,C.jsx)(Fd.YAxis,{axisAt:"right",orient:"right",stroke:"black",tickStroke:"#4699cb",tickValues:dp}),(0,C.jsx)(Fd.MouseCoordinateY,{at:"right",orient:"right",displayFormat:Hd}),(0,C.jsx)(Fd.RSISeries,{yAccessor:pp,stroke:up}),(0,C.jsx)(Fd.RSITooltip,{className:"rs-tooltip",fontSize:15,yAccessor:pp,origin:l,options:c})]})},gp=t=>t.close,mp=t=>{let{id:e,height:n,yExtents:o,origin:r}=t;return(0,C.jsxs)(Fd.Chart,{id:e,height:n,yExtents:o,origin:r,children:[(0,C.jsx)(Fd.YAxis,{axisAt:"left",orient:"left",stroke:"black",ticks:5}),(0,C.jsx)(Fd.LineSeries,{yAccessor:gp,stroke:"black"}),(0,C.jsx)(Fd.MouseCoordinateY,{at:"left",orient:"left",displayFormat:Hd})]})},{sma:yp,rsi:xp,bollingerBand:vp,useElementWidth:wp}=Fd,bp={left:50,right:80,top:0,bottom:30},kp={width:"98%"},Sp=t=>t?t.date:0,Cp=function(){return gr.apply(ns(Ci,Di,xi,gi,ui,li,si,ri,oi,Ji).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}(),Dp=(t,e)=>[0,e-510],Ap=[0,100],Mp=t=>[t.high,t.low],Tp=(t,e)=>[0,e-420],_p=t=>t.volume,Pp=(t,e)=>[0,e-120],Np=yp().options({windowSize:20,stroke:"green"}).merge(((t,e)=>{t.sma20=e})).accessor((t=>t.sma20)),jp=yp().options({windowSize:50,stroke:"orange"}).merge(((t,e)=>{t.sma50=e})).accessor((t=>t.sma50)),Ep=vp().merge(((t,e)=>{t.bb=e})).accessor((t=>t.bb)),Ip=xp().options({windowSize:14}).merge(((t,e)=>{t.rsi=e})).accessor((t=>t.rsi)),Fp=(0,r.memo)((t=>{let{id:e,style:n,data:o,height:s,timeframe:a}=t;const[l]=wp({id:e}),c=(0,r.useRef)(150),h=(0,r.useMemo)((()=>jp(Np(Ep(Ip(o))))),[o]),[u,d]=(0,r.useMemo)((()=>[Ud(a),Zd(a)]),[a]),p=(0,r.useMemo)((()=>((t,e,n)=>{const o=t.length-1,r=o<n?(t[0]||{}).date:(t[o-n]||{}).date,i=(t.slice(-1)[0]||{}).date,s="1m"===e?i+3e5:i;return r===Vd&&s===qd||(Vd=r),qd=s,Gd=[r,s]})(h,a,i(c))),[h,a]),f=(0,r.useMemo)((()=>t=>{c.current=t}),[]);return(0,C.jsx)("div",{id:e,style:{...kp,...n},children:(0,C.jsxs)(Fd.ChartCanvas,{ratio:2,width:l,height:s,margin:bp,data:h,xAccessor:Sp,displayXAccessor:Sp,xScale:Cp,xExtents:p,onZoom:f,children:[(0,C.jsx)(fp,{id:1,height:100,width:l,rsi:Ip,yExtents:Ap,origin:Dp}),(0,C.jsx)(mp,{id:2,height:100,yExtents:Mp,origin:Dp}),(0,C.jsx)(ap,{id:3,height:300,timeInterval:u,timeFormat:d,sma20:Np,sma50:jp,bb:Ep,yExtents:Mp,origin:Tp}),(0,C.jsx)(hp,{id:4,height:100,timeInterval:u,timeFormat:d,yExtents:_p,origin:Pp}),(0,C.jsx)(Fd.CrossHairCursor,{})]})})})),Lp={providerTitle:y.INITIAL_PROVIDER_TITLE,itemTitle:y.INITIAL_ITEM_TITLE,data:y.DF_DATA,timeframe:y.DF_TIMEFRAME,fetchStatus:M.INITIAL,isLiveUpdating:!1},Op=Object.freeze({LOADING:"DATA_LOADING",LOADED:"DATA_LOADED",LOAD_FAILED:"DATA_LOAD_FAILED",UPDATE:"DATA_UPDATE"}),Rp=(t,e)=>{switch(e.type){case Op.LOADING:return{...t,fetchStatus:M.LOADING};case Op.LOADED:{const{data:n}=e;return(t=>Array.isArray(t)||t.length>20)(n)?{...t,data:e.data,providerTitle:e.providerTitle,itemTitle:e.itemTitle,timeframe:e.timeframe,fetchStatus:M.SUCCESS}:t}case Op.LOAD_FAILED:return{...t,fetchStatus:M.FAILED};case Op.UPDATE:return{...t,data:[...t.data,e.point]};default:throw new TypeError("Not existed action "+e.type)}},zp="wss://stream.binance.com:9443/ws/",Wp="@kline_1m";let Xp;function Hp(t,e,n,o,r){let i;Xp=new WebSocket(""+zp+t+Wp),Xp.addEventListener("open",(function(){i=(new Date).getMinutes(),n()})),Xp.addEventListener("message",(function(t){try{const{E:n,k:o}=JSON.parse(t.data),s=new Date(n),a=s.getMinutes();i!==a?(i=a,e(((t,e)=>({date:t,high:parseFloat(e.h),low:parseFloat(e.l),open:parseFloat(e.o),close:parseFloat(e.c),volume:parseFloat(e.v)}))(n,o)),r("")):r(s.getSeconds())}catch(t){console.log(t)}})),Xp.addEventListener("error",(function(t){o()})),Xp.addEventListener("close",(function(t){o()}))}const Yp={startLiveUpdate:t=>{let{pair:e,onMessage:n,onOpen:o,onClose:r,onSecond:i}=t;Hp((t=>(""+t).replace("/","").toLowerCase())(e),n,o,r,i)},stopLiveUpdate:()=>{try{void 0===(t=1e3)&&(t=1005),Xp&&Xp.close(t)}catch(t){console.log(t)}var t}},Bp=t=>{let{appSettings:e,theme:n,setThemeId:o,dispatch:r,setLiveUpdating:i}=t;return{appSettings:e,theme:n,setThemeId:o,dataAction:{loading:()=>r({type:Op.LOADING}),loadData:t=>{let{timeframe:e=y.DF_TIMEFRAME,...n}=t;i({isLiveUpdating:!1}),Yp.stopLiveUpdate(),r({type:Op.LOADED,timeframe:e,...n})},loadFailed:()=>r({type:Op.LOAD_FAILED})},onLiveUpdate:t=>{Yp.startLiveUpdate({pair:t,onMessage:(t,e)=>r({type:Op.UPDATE,point:t}),onOpen:()=>i({isLiveUpdating:!0}),onClose:()=>i({isLiveUpdating:!1}),onSecond:t=>i({isLiveUpdating:!0,sec:t})})},onStopUpdate:()=>{Yp.stopLiveUpdate()}}},Up={paddingTop:8},Zp={isLiveUpdating:!1,sec:""},Vp=()=>{const[t,e]=(0,r.useState)(1),[n,o]=(0,r.useReducer)(Rp,Lp),{providerTitle:i,itemTitle:s,data:a,timeframe:d,fetchStatus:p}=n,[f,g]=(0,r.useState)(Zp),m=l((()=>Bp({appSettings:v,theme:S,setThemeId:e,dispatch:o,setLiveUpdating:g})));return(0,C.jsx)(c.Provider,{value:m,children:(0,C.jsx)(h.Provider,{value:t,children:(0,C.jsxs)(u.Provider,{value:f,children:[(0,C.jsx)(wn,{fetchStatus:p,providerTitle:i,itemTitle:s,timeframe:d}),(0,C.jsx)("main",{style:Up,children:(0,C.jsx)(Fp,{id:"chart_wrapper",height:550,data:a,timeframe:d})})]})})})};(0,o.s)(document.getElementById("app")).render((0,C.jsx)(Vp,{}))},745:(t,e,n)=>{var o=n(935);e.s=o.createRoot,o.hydrateRoot},251:(t,e,n)=>{var o=n(294),r=Symbol.for("react.element"),i=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(t,e,n){var o,i={},c=null,h=null;for(o in void 0!==n&&(c=""+n),void 0!==e.key&&(c=""+e.key),void 0!==e.ref&&(h=e.ref),e)s.call(e,o)&&!l.hasOwnProperty(o)&&(i[o]=e[o]);if(t&&t.defaultProps)for(o in e=t.defaultProps)void 0===i[o]&&(i[o]=e[o]);return{$$typeof:r,type:t,key:c,ref:h,props:i,_owner:a.current}}e.Fragment=i,e.jsx=c,e.jsxs=c},893:(t,e,n)=>{t.exports=n(251)}},t=>{var e;e=34,t(t.s=e)}]);