/*! For license information please see app_e00d021a44c61fb4b88d.js.LICENSE.txt */
"use strict";(self.webpackChunkTA_Chart=self.webpackChunkTA_Chart||[]).push([[524],{20:(t,e,n)=>{var o=n(540),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,a=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(t,e,n){var o,s={},c=null,h=null;for(o in void 0!==n&&(c=""+n),void 0!==e.key&&(c=""+e.key),void 0!==e.ref&&(h=e.ref),e)r.call(e,o)&&!l.hasOwnProperty(o)&&(s[o]=e[o]);if(t&&t.defaultProps)for(o in e=t.defaultProps)void 0===s[o]&&(s[o]=e[o]);return{$$typeof:i,type:t,key:c,ref:h,props:s,_owner:a.current}}e.Fragment=s,e.jsx=c,e.jsxs=c},338:(t,e,n)=>{var o=n(961);e.H=o.createRoot,o.hydrateRoot},749:(t,e,n)=>{var o=n(338),i=n(540);const s=(t,e)=>Object.assign({},e,t),r=t=>(t||{}).current,a=(t,e)=>{t&&(t.current=e)},l=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];return t.bind(null,...n)},c=t=>{const e=(0,i.useRef)();return e.current||(e.current=t())},h=(0,i.createContext)({}),u=(0,i.createContext)(),d=(0,i.createContext)(),p=Math.random,f=()=>p()*(p()>.5?1:-1),g=(t,e)=>t>e?t+.2:e+.2,m=(t,e)=>t>e?e-.2:t-.2,y={INITIAL_PROVIDER_TITLE:"Data Provider (Random)",INITIAL_ITEM_TITLE:"Item",PROXY:"http://127.0.0.1:3000/proxy",RATE_LIMIT:3e3,DF_DATA:(()=>{const t=new Date,e=[];let n,o;for(let i=0;i<100;i++)o=1+f(),n=1+f(),e.push({date:t.getTime()-864e5*i,open:o,close:n,high:g(o,n),low:m(o,n)});return e.reverse()})(),DF_TIMEFRAME:"1d"},x=Object.freeze(y);let v=x.PROXY;const b={proxy:t=>t?(v=t,!0):v||"",clearProxy:()=>{v=""}},w={1:"#5f5f5f",2:"#e1e1e1",3:"#e8e0cb"},k={1:{},2:{backgroundColor:"#d4d4d4"},3:{backgroundColor:"#e8dcbe"}},S={getBgColor:t=>w[""+t],getHeaderStyle:t=>k[""+t],getDrawerStyle:t=>k[""+t]},C=S;function D(t,e){if(null==t)return{};var n={};for(var o in t)if({}.hasOwnProperty.call(t,o)){if(-1!==e.indexOf(o))continue;n[o]=t[o]}return n}const A=t=>"string"==typeof t?t.charAt(0).toUpperCase()+t.slice(1):"";var M=n(848);const j="Logo of web app TA Chart v0.3.0",T=t=>{let{className:e,style:n,title:o=j}=t;return(0,M.jsx)("span",{className:e,style:n,title:o,children:(0,M.jsxs)("svg",{viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:"2",strokeWidth:"2",children:[(0,M.jsx)("rect",{ry:"1.8825414",rx:"194.14471",y:"1.434558",x:"19.176462",height:"12.460618",width:"10.85316",fill:"#8ecc2d",stroke:"#8ecc2d"}),(0,M.jsx)("rect",{ry:"1.87537",rx:"204.478",y:"16.639841",x:"8.8410215",height:"13.752699",width:"18.307165",fill:"#232f3b",stroke:"#232f3b"}),(0,M.jsx)("rect",{ry:"1.87537",rx:"204.478",y:"3.4229634",x:"2.5897937",height:"10.894996",width:"10.001963",fill:"#a487d4",stroke:"#a487d4"})]})})},_=Object.freeze({INITIAL:"INITIAL",LOADING:"LOADING",SUCCESS:"SUCCESS",FAILED:"FAILED"}),P=()=>({}),N=()=>(0,i.useReducer)(P)[1],E="#2f7ed8",O=(t,e,n)=>({backgroundColor:t,width:e+"%",transition:n,opacity:1}),F=(t,e,n)=>r(t)?(a(t,!1),O(e,0)):O(e,((t,e)=>t<0?0:t>=100?(a(e,!0),100):t)(n,t),"width 500ms linear"),I=t=>{let{color:e=E,completed:n}=t;const o=N(),s=(0,i.useRef)(!1),l=(0,i.useRef)(null);(0,i.useEffect)((()=>{r(s)&&a(l,setTimeout(o,800))})),(0,i.useEffect)((()=>()=>{clearTimeout(r(l))}),[]);const c=F(s,e,n);return(0,M.jsx)("div",{className:"progress-line",style:c})},L="#2f7ed8",z=(t,e)=>[t,e],R=(0,i.memo)((t=>{let{fetchStatus:e}=t;const[n,o]=(t=>t===_.LOADING?z(35,L):t===_.SUCCESS?z(100,L):t===_.FAILED?z(100,"#ed5813"):z(0,L))(e);return(0,M.jsx)(I,{color:o,completed:n})})),W=t=>{const[e,n]=(0,i.useState)((()=>!!t));return[e,(0,i.useCallback)((t=>{(t=>"boolean"==typeof t)(t)?n(t):n((t=>!t))}),[])]},H="drawer",X=H+"-bt",Y=H+"-span",U=H+"-svg",B=H+"-modal",Z={position:"absolute",top:0,right:16},V={transform:"translateX(334px)",pointerEvents:"none"},q={transform:"translate(0px, 0px)"},G={display:"none",opacity:0,zIndex:-1,transition:"opacity 195ms cubic-bezier(0.4, 0, 0.2, 1) 0ms"},$={display:"block",opacity:1,zIndex:1e3,transition:"opacity 225ms cubic-bezier(0.4, 0, 0.2, 1) 0ms"},K=t=>{let{btStyle:e,children:n}=t;const[o,s]=W();(0,i.useEffect)((()=>{document.body.style.overflowY=o?"hidden":"auto"}),[o]);const r=o?q:V,a=o?$:G,l=o?s:void 0;return[(0,M.jsx)("button",{className:X,style:Object.assign({},Z,e),"aria-label":"Open Drawer",onClick:s,children:(0,M.jsx)("span",{className:Y,children:(0,M.jsxs)("svg",{className:U,focusable:"false",viewBox:"0 0 24 24","aria-hidden":"true",children:[(0,M.jsx)("path",{fill:"none",d:"M0 0h24v24H0z"}),(0,M.jsx)("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"})]})})},"bt-drawer"),(0,M.jsx)("div",{role:"presentation","aria-hidden":!o,className:B,style:a,onClick:l},"wrapper"),(0,M.jsx)("aside",{className:H,style:r,children:(0,i.cloneElement)(n,{onCloseDrawer:s})},"aside")]},J=["w","h","children"],Q=t=>{let{w:e,h:n=e,children:o}=t,i=D(t,J);return(0,M.jsx)("svg",Object.assign({},i,{viewBox:"0 0 "+e+" "+n,width:"100%",height:"100%",preserveAspectRatio:"none",xmlns:"http://www.w3.org/2000/svg",children:o}))},tt={padding:3},et=t=>{let{style:e,tabIndex:n=-1,onClick:o}=t;return(0,M.jsx)("button",{className:"svg-close",style:e,tabIndex:n,onClick:o,children:(0,M.jsxs)(Q,{w:"12",style:tt,strokeWidth:"2",stroke:"#f44336",strokeLinecap:"round",children:[(0,M.jsx)("path",{d:"M 0,0 L 12,12"}),(0,M.jsx)("path",{d:"M 12,0 L 0,12"})]})})},nt="bt-triple",ot=nt+"__one",it=nt+"__two",st=nt+"__three",rt={backgroundColor:"#1b2836"},at=(t,e)=>t===e?rt:void 0,lt=t=>{let{style:e,tabIndex:n=-1,initialValue:o=1,oneC:s="One",twoC:r="Two",threeC:a="Three",onClick:c}=t;const[h,u]=(0,i.useState)(o),d=at(h,1),p=at(h,2),f=at(h,3),g=t=>{c(t),u(t)};return(0,M.jsxs)("div",{className:nt,style:e,children:[(0,M.jsx)("button",{type:"button",className:ot,style:d,tabIndex:n,onClick:l(g,1),children:s}),(0,M.jsx)("button",{type:"button",className:it,style:p,tabIndex:n,onClick:l(g,2),children:r}),(0,M.jsx)("button",{type:"button",className:st,style:f,tabIndex:n,onClick:l(g,3),children:a})]})},ct=t=>{t&&(document.body.style.backgroundColor=t)},ht={paddingTop:12,paddingBottom:8},ut={marginRight:8},dt={position:"relative",top:4},pt=t=>{let{onClose:e,setThemeId:n}=t;const{theme:o}=(0,i.useContext)(h);return(0,M.jsxs)("div",{className:"drawer__title",style:ht,children:[(0,M.jsx)(lt,{style:ut,oneC:"GREY",twoC:"LIGHT",threeC:"SAND",onClick:t=>{ct(o.getBgColor(t)),n(t)}}),(0,M.jsx)(et,{style:dt,onClick:e})]})},ft=Date.now||(()=>new Date.getTime),gt=function(t,e){void 0===e&&(e=800);let n=0;return function(){const o=ft();if(o-n>e)return n=o,t(...arguments)}},mt=(t,e,n)=>(0,i.useCallback)(gt(t,n),e||[]),yt=t=>{let{style:e,pages:n,pageCurrent:o,onPrevPage:s,onNextPage:r}=t;return n.map(((t,n)=>(0,i.cloneElement)(t,{style:e,pageCurrent:o,pageNumber:n+1,onPrevPage:s,onNextPage:r})))},xt={position:"absolute",overflow:"hidden"},vt={display:"flex",flexFlow:"row nowrap",alignItems:"flex-start",overflowX:"hidden",transition:"all 750ms ease-out"},bt=t=>parseInt(t.style.transform.substr(11).replace("px","").replace(")",""),10),wt=t=>{let{pageWidth:e=330,maxPages:n=3,initialPageId:o,pageRouter:s}=t;const l=(0,i.useRef)(),c=(0,i.useRef)(0),h=(0,i.useRef)({width:n*e+"px"}),u=(0,i.useRef)({width:e+"px"}),[d,p]=(0,i.useState)({pageCurrent:1,pages:[(0,i.createElement)(s[o],{key:o})]}),{pageCurrent:f,pages:g}=d,m=mt((()=>{p((t=>(t.pageCurrent>1&&(t.pageCurrent-=1,a(c,-1)),Object.assign({},t))))})),y=mt((t=>{p((e=>{const{pages:n}=e,o=((t,e)=>t.findIndex((t=>t.key===e)))(n,t);var r,l;return e.pages=-1!==o?(l=o,[(r=n)[0],r.splice(l,1)[0],...r.slice(1)]):((t,e)=>[t[0],e,...t.slice(1)])(n,(0,i.createElement)(s[t],{key:t})),e.pageCurrent+=1,a(c,1),Object.assign({},e)}))})),x=((t,e,n)=>{const o=r(e),i=r(n);let s=0;if(0!==i&&o){const e=bt(o);s=1===i?e-t:e+t,a(n,0)}else 0===i&&o&&(s=bt(o));return{transform:"translateX("+s+"px)"}})(e,l,c),v=Object.assign({},r(h),vt,x);return(0,M.jsx)("div",{style:xt,children:(0,M.jsx)("div",{ref:l,style:v,children:(0,M.jsx)(yt,{style:r(u),pages:g,pageCurrent:f,onPrevPage:m,onNextPage:y})})})},kt=()=>{},St=function(t,e){void 0===t&&(t=kt),void 0===e&&(e=0);const n=(0,i.useRef)(null);return(0,i.useCallback)((o=>{if(0===e)return void t(o);const i=n.current,{timeStamp:s}=o;(null==i||s-i>e)&&(t(o),n.current=s)}),[e,t])},Ct=Array.isArray,Dt=t=>Ct(t)?t[0]?t[1]:"":t||"",At=(t,e)=>{const n=Dt(t),o=Dt(e);return n?o?n+" "+o:n:o||void 0},Mt=Array.isArray,jt=t=>Mt(t)?t[0]?t[1]:void 0:t||void 0,Tt=(t,e)=>{const n=jt(t),o=jt(e);return n?o?Object.assign({},n,o):n:o||void 0},_t={textDecoration:"underline"},Pt=t=>{let{className:e,style:n,caption:o="",accessKey:i,children:s}=t;const r=((t,e)=>t?e.toLowerCase().indexOf(t):-1)(i,o),a=-1===r?o:((t,e)=>{const n=e.substring(0,t),o=e.substring(t,t+1),i=e.substring(t+1);return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("span",{children:n}),(0,M.jsx)("span",{style:_t,children:o}),(0,M.jsx)("span",{children:i})]})})(r,o);return(0,M.jsxs)("span",{className:e,style:n,children:[a,s]})},Nt="bt-flat",Et=Nt+"__div",Ot=Nt+"__span",Ft={color:"#607d8b"},It=t=>{let{refEl:e,className:n,style:o,clDiv:s=Et,clCaption:r,isPrimary:a,title:l="",caption:c,accessKey:h,timeout:u=500,onClick:d,children:p}=t;const f=(0,i.useRef)(),g=St(d,u);(0,i.useImperativeHandle)(e,(()=>({focus:()=>{const t=f.current;t&&t.focus()}})),[]);const m=At(Nt,n),y=At(Ot,r),x=Tt(o,[a,Ft]),v=((t,e)=>e?t+" ["+e+"]":t)(l,h);return(0,M.jsx)("button",{ref:f,className:m,style:x,accessKey:h,tabIndex:0,title:v,onClick:g,children:(0,M.jsxs)("div",{className:s,children:[(0,M.jsx)(Pt,{className:y,caption:c,accessKey:h}),p]})})},Lt="drawer__list-bt",zt={listStyleType:"none"},Rt=t=>{let{style:e,onNextPage:n}=t;return(0,M.jsxs)("ul",{style:Object.assign({},zt,e),children:[(0,M.jsx)("li",{children:(0,M.jsx)(It,{className:Lt,caption:"App Settings",onClick:()=>n("p1-1")})}),(0,M.jsx)("li",{children:(0,M.jsx)(It,{className:Lt,caption:"AltCoins",onClick:()=>n("p1-2")})})]})},Wt=t=>{let{onClick:e}=t;return(0,M.jsx)(It,{className:"drawer__list-bt",caption:"< Menu",onClick:e})},Ht=t=>{let{item:e,propCaption:n}=t;return(0,M.jsx)("span",{children:e[n]})},Xt="zhn-select",Yt=Xt+"__input",Ut=Xt+"__spinner",Bt=Ut+"--failed",Zt=Xt+"__bt-arrow",Vt=Xt+"__input__hr",qt=Xt+"__options",Gt=qt+"__div",$t=Xt+"__row",Kt=$t+"--active",Jt=Xt+"__footer",Qt=Jt+"__index",te=Jt+"__bts",ee=Jt+"--margin",ne=(t,e)=>t?-1!==(""+t).indexOf("%")?Object.assign({},e,{width:t}):Object.assign({},e,{width:t+"px"}):null,oe=["className","style","caption","onClick"],ie=t=>{let{className:e="",style:n,caption:o="",onClick:i}=t,s=D(t,oe);return(0,M.jsx)("button",Object.assign({className:"zhn-bt-circle2 "+e,style:n,onClick:i},s,{children:(0,M.jsx)("div",{children:o})}))},se={backgroundColor:"#949ab4"},re=t=>{let{refIndexActive:e,indexActiveOption:n,nFiltered:o,nAll:i,onStepDown:s,onStepUp:r,onClear:a}=t;return(0,M.jsxs)("div",{className:Jt+" not-selected",children:[(0,M.jsxs)("span",{className:Qt,children:[(0,M.jsx)("span",{ref:e,children:n}),(0,M.jsxs)("span",{children:[": ",o,": ",i]})]}),(0,M.jsxs)("span",{className:te,children:[(0,M.jsx)(ie,{className:ee,style:se,caption:"Dn",onClick:s}),(0,M.jsx)(ie,{className:ee,style:se,caption:"Up",onClick:r}),(0,M.jsx)(ie,{style:se,caption:"CL",onClick:a})]})]})},ae={display:"block"},le={display:"none"},ce=t=>{let{refOptionsElement:e,refIndexElement:n,optionsStyle:o,width:i,isShowOption:s,indexActiveOption:r,nFiltered:a,nAll:l,onStepUp:c,onStepDown:h,onClear:u,children:d}=t;const p=ne(i,s?ae:le);return(0,M.jsxs)("div",{className:qt,style:p,"data-scrollable":!0,children:[(0,M.jsx)("div",{ref:e,className:Gt,style:Object.assign({},o,p),children:d}),(0,M.jsx)(re,{refIndexActive:n,indexActiveOption:r,nAll:l,nFiltered:a,onStepUp:c,onStepDown:h,onClear:u})]})},he=t=>{let{options:e,indexActiveOption:n,propCaption:o,ItemOptionComp:i,onClick:s}=t;return e.map(((t,e)=>(0,M.jsx)("div",{role:"option","aria-selected":n===e,tabIndex:"-1",className:$t,"data-index":e,onClick:e=>s(t,e),children:(0,M.jsx)(i,{item:t,propCaption:o})},e)))},ue={color:"#1b75bb"},de={color:"#858585"},pe=t=>{let{isShowOption:e,onClick:n}=t;return(0,M.jsx)("button",{className:Zt,type:"button",tabIndex:"-1","aria-label":"Toggle suggestions",onClick:n,children:(0,M.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",style:e?ue:de,children:(0,M.jsx)("path",{d:"M 3,6 L 10,12.5 M 10,12.5 L 17,6"})})})},fe=(t,e,n,o)=>{const{isLoading:i,isLoadingFailed:s,placeholder:r,optionName:a="",onLoadOption:l}=t,{optionNames:c}=e;return i||s?i?["Loading "+c+"...",(0,M.jsx)("span",{className:Ut,"data-loader":"circle"})]:s?["Loading "+c+" Failed",(0,M.jsx)(ie,{className:Bt,"data-loader":"circle-failed",onClick:l})]:[]:[r||"Select "+a+"...",(0,M.jsx)(pe,{isShowOption:n,onClick:o})]},ge="From input:",me=(t,e,n,o)=>{const i=((t,e,n)=>{const o=e.toLowerCase();return(t||[]).filter((t=>-1!==t[n].toLowerCase().indexOf(o)))})(e,t,n);return 0===i.length&&i.push(((t,e,n)=>{const o=String(t).replace(ge,"").trim(),i=n?ge+" "+o:"No results found";return{[e]:i,value:"noresult",inputValue:o}})(t,n,o)),i},ye=(t,e)=>{const n=(0,i.useRef)(t);return(0,i.useMemo)((()=>[t=>{n.current=t},()=>void 0===n.current?e:n.current]),[])},xe=t=>"number"==typeof t&&t-t==0,ve=t=>{const{dataset:e}=t,{index:n}=e||{};return Number(n)},be=(t,e)=>(0,i.useMemo)((()=>[e=>{if(e){e.classList.add(Kt);const n=ve(e),o=r(t);o&&xe(n)&&(o.textContent=n+1)}},t=>{const n=t||e();n&&n.classList.remove(Kt)}]),[]),we=t=>(t.children||{}).length,ke=()=>{const t=(0,i.useRef)(),e=(0,i.useRef)(),[n,o]=ye(0),s=(0,i.useMemo)((()=>()=>((r(t)||{}).childNodes||[])[o()]),[]),[a,l]=be(e,s);return[t,e,n,o,s,a,l,...(0,i.useMemo)((()=>[()=>{const e=s();if(e){l(e);const i=r(t);n(o()+1),o()>=we(i)&&(n(0),i.scrollTop=0);const c=s();a(c);const h=c.offsetTop,u=i.scrollTop;h-u>70&&(i.scrollTop+=h-u-70)}},()=>{const e=s();if(e){l(e);const i=r(t);if(n(o()-1),o()<0){n(we(i)-1);const t=s();i.scrollTop=t.offsetTop}const c=s();a(c);const h=c.offsetTop,u=i.scrollTop;h-u<70&&(i.scrollTop-=70-(h-u))}}]),[])]},Se=[],Ce=t=>{let{optionName:e,optionNames:n,options:o=Se}=t;return{value:"",initialOptions:o,options:o,optionNames:n||e||""}},De=()=>{},Ae=t=>{const{style:e,width:n,optionsStyle:o,propCaption:s="caption",ItemOptionComp:r=Ht,isWithInput:a=!1,onSelect:l=De}=t,c=(0,i.useRef)(),[h,u]=(0,i.useState)((()=>Ce(t))),{value:d,options:p,initialOptions:f}=h,[g,m]=W(!1),[y,x,v,b,w,k,S,C,D]=ke(),A=(0,i.useCallback)((()=>{S(),u((()=>Ce(t))),m(!1),v(0),l()}),[t.options,l]),j=(0,i.useCallback)(((t,e)=>{S(),v(ve(e.currentTarget)),m(!1),u((e=>Object.assign({},e,{value:t[s]}))),l(t)}),[]),T=(0,i.useMemo)((()=>(0,M.jsx)(he,{options:p,indexActiveOption:b(),propCaption:s,ItemOptionComp:r,onClick:j})),[p]);(0,i.useEffect)((()=>{if(g){const t=w();k(t),(t=>{if(t){const{offsetTop:e}=t,n=t.parentElement,{scrollTop:o}=n;e-o>70&&(n.scrollTop+=e-o-70),e-o<0&&(n.scrollTop=0)}})(t)}}),[g]),(0,i.useEffect)((()=>{t.options!==f&&A()}),[t.options]);const _=b(),P=ne(n,e),[N,E]=fe(t,h,g,m),[O,F]=((t,e)=>[t[0]&&"noresult"!==t[0].value?t.length:0,e?e.length:0])(p,f);return(0,M.jsxs)("div",{className:Xt,style:P,children:[(0,M.jsx)("input",{ref:c,className:Yt,type:"text",name:"select",autoCorrect:"off",autoCapitalize:"off",spellCheck:!1,value:d,placeholder:N,onChange:t=>{const e=t.target.value,n=e.length,o=d.length;n!==o&&(0!==b()&&(S(),v(0)),u((t=>Object.assign({},t,{value:e,options:me(e,n>o?p:f,s,a)}))),m(!0))},onKeyDown:t=>{switch(t.keyCode){case 13:{const t=b();if(xe(t)){const e=p[t];e&&e[s]&&(l(((t,e,n)=>"noresult"!==t.value?t:n?{[e]:"From Input",value:t.inputValue}:void 0)(e,s,a)),m(!1),u((t=>Object.assign({},t,{value:e[s]}))))}else l();break}case 27:case 46:t.preventDefault(),g?m(!1):A();break;case 40:g?(t.preventDefault(),C()):m(!0);break;case 38:g&&(t.preventDefault(),D());break;default:return}}}),E,(0,M.jsx)("hr",{className:Vt}),(0,M.jsx)(ce,{refOptionsElement:y,refIndexElement:x,optionsStyle:o,width:n,isShowOption:g,indexActiveOption:_,nFiltered:O,nAll:F,onStepUp:D,onStepDown:C,onClear:A,children:T})]})},Me={display:"flex",alignItems:"center",marginRight:5,marginTop:5,marginLeft:5,marginBottom:5},je={marginLeft:12,marginRight:12},Te={color:"#1b75bb",display:"inline-block",textAlign:"right",width:100,paddingRight:5,fontSize:"16px",fontWeight:"bold",userSelect:"none"},_e={display:"none"},Pe=["isShowLabels","caption","captionStyle"],Ne=t=>{let{isShowLabels:e=!0,caption:n="",captionStyle:o}=t,i=D(t,Pe);const s=(t=>t&&-1===t.indexOf(":")?t+":":t)(n),[r,a]=function(t){return void 0===t&&(t=!0),t?[Object.assign({},Me),Object.assign({},Te)]:[Object.assign({},Me,je),Object.assign({},Te,_e)]}(e),l=e?"":n.replace(":",""),c=Object.assign({width:270},i,{optionName:l});return(0,M.jsxs)("div",{style:r,children:[(0,M.jsx)("span",{style:Object.assign({},a,o),children:s}),(0,M.jsx)(Ae,Object.assign({},c))]})},Ee=t=>{let{style:e,exchanges:n,onSelectExchange:o,isMarkets:i={},markets:s,onSelectMarket:r,timeframes:a,onSelectTimeframe:l}=t;return(0,M.jsxs)("div",{style:e,children:[(0,M.jsx)(Ne,{isShowLabels:!1,placeholder:"Exchanges",options:n,onSelect:o}),(0,M.jsx)(Ne,{isShowLabels:!1,placeholder:"Time Frames (Default: 1d)",options:a,onSelect:l}),(0,M.jsx)(Ne,{isShowLabels:!1,placeholder:"Markets",isLoading:i.loading,isLoadingFailed:i.failed,options:s,onSelect:r})]})},Oe="MARKET_LOADING",Fe="MARKET_LOADED",Ie="MARKET_LOADING_FAIL",Le="EXCHANGES_SET",ze="EXCHANGE_SET",Re="PAIR_SET",We=(t,e)=>{switch(e.type){case Oe:return Object.assign({},t,{isMarkets:{loading:!0,failed:!1}});case Fe:return Object.assign({},t,{exchange:e.exchange,markets:e.markets,isMarkets:{loading:!1,failed:!1}});case Ie:return Object.assign({},t,{isMarkets:{loading:!1,failed:!0}});case Le:return Object.assign({},t,{exchanges:e.exchanges});case ze:return Object.assign({},t,{exchange:e.exchange,pair:void 0});case Re:return Object.assign({},t,{pair:e.pair});default:throw new TypeError("Not existed action "+e.type)}},He={exchange:"",pair:"",isMarkets:{loading:!1,failed:!1},exchanges:[],markets:[]},Xe=t=>{let{dispatch:e,exchImpl:n,exchange:o,proxy:i}=t;e({type:Oe}),n.fetchMarkets(i).then((t=>{e({type:Fe,exchange:o,markets:t})})).catch((t=>{e({type:Ie}),console.log(t.message)}))},Ye=t=>{let{exchImpl:e,exchange:n,pair:o,timeframe:i,dataAction:s,proxy:r}=t;s.loading();const{v:a,tf:l}="object"==typeof i?i:{v:i,tf:i};e.fetchOHLCV(o,a,r).then((t=>{0!==t.length&&s.loadData({providerTitle:n,itemTitle:o,data:t,timeframe:l})})).catch((t=>{s.loadFailed(),console.log(t.message)}))},Ue=t=>fetch(t).then((t=>{const{status:e}=t;if(e>=200&&e<400)return t.json();throw new Error("Response is incorrect: "+e)})),Be=Array.isArray,Ze=(t,e)=>{const n=e?(t||{})[e]:t;return Be(n)?n:[]},Ve=(t,e)=>t.caption<e.caption?-1:t.caption>e.caption?1:0,qe=t=>"object"==typeof t,Ge="https://api.binance.com/api/v3",$e=Ge+"/exchangeInfo",Ke=Ge+"/klines",Je={fetchMarkets:()=>Ue($e).then((t=>Ze(t,"symbols").reduce(((t,e)=>{const{baseAsset:n,quoteAsset:o,status:i}=e||{};return"TRADING"===i&&t.push({caption:n+"/"+o,value:""+n+o}),t}),[]).sort(Ve))),getTimeframes:()=>[{caption:"1m",value:"1m"},{caption:"3m",value:"3m"},{caption:"5m",value:"5m"},{caption:"15m",value:"15m"},{caption:"30m",value:"30m"},{caption:"1h",value:"1h"},{caption:"2h",value:"2h"},{caption:"4h",value:"4h"},{caption:"8h",value:"8h"},{caption:"12h",value:"12h"},{caption:"1d",value:"1d"},{caption:"3d",value:"3d"},{caption:"1w",value:"1w"},{caption:"1M",value:"1M"}],fetchOHLCV:(t,e)=>Ue(((t,e)=>Ke+"?symbol="+t+"&interval="+e)(t,e)).then((t=>Ze(t).reduce(((t,e)=>(qe(e)&&t.push({date:e[0],open:parseFloat(e[1]),high:parseFloat(e[2]),low:parseFloat(e[3]),close:parseFloat(e[4]),volume:parseFloat(e[5])}),t)),[])))},Qe="https://www.bitstamp.net/api/v2",tn=Qe+"/trading-pairs-info/",en=Qe+"/ohlc",nn={binance:Je,bitstamp:{fetchMarkets:()=>Ue(""+tn).then((t=>Ze(t).reduce(((t,e)=>{const{trading:n,name:o,url_symbol:i}=e||{};if("Enabled"===n)return t.push({caption:o,value:i}),t}),[]))),getTimeframes:()=>[{caption:"1m",value:{v:"60",tf:"1m"}},{caption:"3m",value:{v:"180",tf:"3m"}},{caption:"5m",value:{v:"300",tf:"5m"}},{caption:"15m",value:{v:"900",tf:"15m"}},{caption:"30m",value:{v:"1800",tf:"30m"}},{caption:"1h",value:{v:"3600",tf:"1h"}},{caption:"2h",value:{v:"7200",tf:"2h"}},{caption:"4h",value:{v:"14400",tf:"4h"}},{caption:"10h",value:{v:"21600",tf:"10h"}},{caption:"12h",value:{v:"43200",tf:"12h"}},{caption:"1d",value:{v:"86400",tf:"1d"}},{caption:"3d",value:{v:"259200",tf:"3d"}}],fetchOHLCV:(t,e)=>Ue(((t,e)=>en+"/"+t+"?step="+e+"&limit=300")(t,e)).then((t=>Ze((t||{}).data,"ohlc").reduce(((t,e)=>(qe(e)&&t.push({date:1e3*parseFloat(e.timestamp),open:parseFloat(e.open),high:parseFloat(e.high),low:parseFloat(e.low),close:parseFloat(e.close),volume:parseFloat(e.volume)}),t)),[])))}},on=[{caption:"Binance",value:"binance"},{caption:"Bitstamp",value:"bitstamp"}],sn="1d",rn={height:400},an={paddingLeft:8},ln=(t,e)=>"binance"===t&&"1m"===e,cn=(t,e)=>t.isRequireProxy&&!e,hn=t=>{let{style:e,onPrevPage:n}=t;const{appSettings:o,dataAction:s,onLiveUpdate:r,onStopUpdate:a}=(0,i.useContext)(h),{isLiveUpdating:l}=(0,i.useContext)(d),[c,u]=(0,i.useReducer)(We,He),{exchange:p,pair:f,isMarkets:g,exchanges:m,markets:y}=c,[x,v]=(0,i.useState)([]),[b,w]=(0,i.useState)(sn),k=(0,i.useRef)(null);(0,i.useEffect)((()=>{u({type:Le,exchanges:on})}),[]),(0,i.useEffect)((()=>{if(p){k.current=(t=>nn[t])(p);const t=k.current,e=o.proxy();if(cn(t,e))return;w(sn),v(t.getTimeframes()),Xe({dispatch:u,exchange:p,exchImpl:t,proxy:e})}}),[p]),(0,i.useEffect)((()=>{if(f&&b){const t=k.current,e=o.proxy();if(cn(t,e))return;Ye({exchange:p,pair:f,timeframe:b,exchImpl:t,dataAction:s,proxy:e})}}),[f,b]);return(0,M.jsxs)("div",{style:Object.assign({},rn,e),children:[(0,M.jsx)(Wt,{onClick:n}),(0,M.jsx)(Ee,{exchanges:m,onSelectExchange:t=>{t&&t.value&&u({type:ze,exchange:t.value})},isMarkets:g,markets:y,onSelectMarket:t=>{u({type:Re,pair:t&&t.value||void 0})},timeframes:x,onSelectTimeframe:t=>{w(t&&t.value||sn)}}),ln(p,b)&&(0,M.jsx)("div",{style:an,children:(0,M.jsx)(It,{caption:l?"Stop Updating":"Live Updating 1min",onClick:l?a:()=>r(f)})})]})},un={display:"inline",color:"green",height:26,width:40,paddingLeft:5,margin:"0 5px",fontSize:"16px",fontWeight:"bold",border:"medium none",outline:"medium none",background:"transparent none repeat scroll 0 0",backgroundColor:"#e1e1cb"},dn="text",pn="off",fn=()=>{},gn=t=>{let{refEl:e,initValue:n,style:o,spellCheck:s,placeholder:r,type:a=dn,maxLenght:l=125,onEnter:c=fn}=t;const h=(0,i.useRef)(),[u,d]=(0,i.useState)((()=>null!=n?n:"")),p=(0,i.useCallback)((t=>{const{value:e}=t.target;e.length<=l&&d(e)}),[l]),f=(0,i.useCallback)((t=>{switch(t.keyCode){case 27:case 46:t.preventDefault(),d("");break;case 13:c(t.target.value);break;default:return}}),[]);(0,i.useImperativeHandle)(e,(()=>({getValue:()=>(h.current||{}).value,setValue:t=>d(t)})),[]);const g=s?"on":pn,m=!!s;return(0,M.jsx)("input",{ref:h,style:Object.assign({},un,o),type:a,name:dn,autoCapitalize:pn,autoComplete:pn,autoCorrect:g,spellCheck:m,translate:"false",value:u,placeholder:r,maxLength:l,onChange:p,onKeyDown:f})},mn={paddingLeft:4},yn={color:"#265782",display:"inline-block",padding:"0 0 4px 8px",fontWeight:"bold"},xn={display:"block",width:"92%",height:32,padding:"8px 0 8px 4px"},vn={float:"right",padding:"6px 22px 0 0"},bn="http://127.0.0.1",wn=t=>!!(t=>"string"==typeof t)(t)&&-1!==t.indexOf(bn),kn=t=>{let{style:e,onPrevPage:n}=t;const{appSettings:o}=(0,i.useContext)(h),s=(0,i.useRef)(),[a,l]=(0,i.useState)(0),c=o.proxy();return(0,M.jsxs)("div",{style:Object.assign({},mn,e),children:[(0,M.jsx)(Wt,{onClick:n}),(0,M.jsxs)("div",{children:[(0,M.jsx)("span",{style:yn,children:"Local Proxy Server"}),(0,M.jsx)(gn,{refEl:s,style:xn,initValue:c,placeholder:bn,onEnter:t=>{wn(t)?o.proxy(t):r(s).setValue("")}},a),(0,M.jsxs)("div",{style:vn,children:[(0,M.jsx)(It,{caption:"Clear",onClick:()=>{o.clearProxy(),l((t=>t+1))}}),(0,M.jsx)(It,{caption:"Apply",onClick:()=>{const t=r(s),e=t.getValue();wn(e)?o.proxy(e):t.setValue("")}})]})]})]})},Sn={p1:Rt,"p1-1":kn,"p1-2":hn},Cn=t=>{let{onCloseDrawer:e}=t;const{theme:n,setThemeId:o}=(0,i.useContext)(h),s=(0,i.useContext)(u),r=n.getDrawerStyle(s);return(0,M.jsxs)("div",{className:"drawer__list",style:r,children:[(0,M.jsx)(pt,{setThemeId:o,onClose:e}),(0,M.jsx)(wt,{pageRouter:Sn,initialPageId:"p1",maxPages:4})]})},Dn=t=>(0,M.jsx)(K,{children:(0,M.jsx)(Cn,Object.assign({},t))}),An={position:"relative",top:6,left:8,display:"inline-block",verticalAlign:"middle",cursor:"pointer"},Mn={color:"#80c040",display:"inline-block",paddingLeft:6,fontSize:16,fontWeight:"bold"},jn=t=>{let{spinnerCn:e,onStopUpdate:n}=t;const{isLiveUpdating:o,sec:s}=(0,i.useContext)(d);return o&&(0,M.jsxs)("button",{style:An,onClick:n,children:[(0,M.jsx)("span",{className:e,"data-loader":"circle"}),(0,M.jsx)("span",{style:Mn,children:s})]})},Tn="header",_n=Tn+"__logo-notes",Pn=Tn+"__title-gap",Nn=Tn+"__title",En=Tn+"__spinner",On=["fetchStatus","providerTitle","itemTitle","timeframe","isLiveUpdating"],Fn=t=>{let{text:e,is:n}=t;return(0,M.jsxs)("span",{className:Nn,children:[A(e),!n&&(0,M.jsx)("span",{children:": "})]})},In=t=>{let{fetchStatus:e,providerTitle:n="",itemTitle:o="",timeframe:s=""}=t,r=D(t,On);const{theme:a,onStopUpdate:l}=(0,i.useContext)(h),c=(0,i.useContext)(u),d=a.getHeaderStyle(c);return(0,M.jsxs)("header",{className:Tn,style:d,children:[(0,M.jsx)(R,{fetchStatus:e}),(0,M.jsx)(T,{className:_n}),(0,M.jsx)("span",{className:Pn}),(0,M.jsx)(Fn,{text:n}),(0,M.jsx)(Fn,{text:o}),(0,M.jsx)(Fn,{text:s,is:!0}),(0,M.jsx)(jn,{spinnerCn:En,onStopUpdate:l}),(0,M.jsx)(Dn,Object.assign({},r))]})},Ln=Math.sqrt,zn=(t,e)=>{let n,o;if(void 0===e)for(const e of t)null!=e&&(void 0===n?e>=e&&(n=o=e):(n>e&&(n=e),o<e&&(o=e)));else{let i=-1;for(let s of t)null!=(s=e(s,++i,t))&&(void 0===n?s>=s&&(n=o=s):(n>s&&(n=s),o<s&&(o=s)))}return[n,o]},Rn=(t,e)=>{let n;if(void 0===e)for(const e of t)null!=e&&(n<e||void 0===n&&e>=e)&&(n=e);else{let o=-1;for(let i of t)null!=(i=e(i,++o,t))&&(n<i||void 0===n&&i>=i)&&(n=i)}return n},Wn=(t,e)=>{let n;if(void 0===e)for(const e of t)null!=e&&(n>e||void 0===n&&e>=e)&&(n=e);else{let o=-1;for(let i of t)null!=(i=e(i,++o,t))&&(n>i||void 0===n&&i>=i)&&(n=i)}return n},Hn=(t,e)=>{let n=0,o=0;if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(++n,o+=e);else{let i=-1;for(let s of t)null!=(s=e(s,++i,t))&&(s=+s)>=s&&(++n,o+=s)}if(n)return o/n},Xn=Math.max,Yn=Math.ceil,Un=t=>t.length,Bn=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return(t=>{let e=t.length;if(!e)return[];let n,o,i=-1,s=Wn(t,Un),r=new Array(s);for(;++i<s;)for(n=-1,o=r[i]=new Array(e);++n<e;)o[n]=t[n][i];return r})(e)},Zn=(t,e)=>null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN,Vn=()=>0,qn=t=>{let e,n,o;2!==t.length?(e=Zn,n=(e,n)=>Zn(t(e),n),o=(e,n)=>t(e)-n):(e=t===Zn?t:Vn,n=t,o=t);const i=function(t,o,i,s){if(void 0===i&&(i=0),void 0===s&&(s=t.length),i<s){if(0!==e(o,o))return s;do{const e=i+s>>>1;n(t[e],o)<0?i=e+1:s=e}while(i<s)}return i};return{left:i,center:function(t,e,n,s){void 0===n&&(n=0),void 0===s&&(s=t.length);const r=i(t,e,n,s-1);return r>n&&o(t[r-1],e)>-o(t[r],e)?r-1:r},right:function(t,o,i,s){if(void 0===i&&(i=0),void 0===s&&(s=t.length),i<s){if(0!==e(o,o))return s;do{const e=i+s>>>1;n(t[e],o)<=0?i=e+1:s=e}while(i<s)}return i}}},Gn=qn(Zn).right,$n=Math.max,Kn=Math.sqrt,Jn=Math.floor,Qn=Math.pow,to=Math.log10,eo=Math.round,no=Kn(50),oo=Kn(10),io=Kn(2);function so(t,e,n){const o=(e-t)/$n(0,n),i=Jn(to(o)),s=o/Qn(10,i),r=s>=no?10:s>=oo?5:s>=io?2:1;let a,l,c;return i<0?(c=Qn(10,-i)/r,a=eo(t*c),l=eo(e*c),a/c<t&&++a,l/c>e&&--l,c=-c):(c=Qn(10,i)*r,a=eo(t/c),l=eo(e/c),a*c<t&&++a,l*c>e&&--l),l<a&&.5<=n&&n<2?so(t,e,2*n):[a,l,c]}function ro(t,e,n){return so(t=+t,e=+e,n=+n)[2]}function ao(t,e,n){n=+n;const o=(e=+e)<(t=+t),i=o?ro(e,t,n):ro(t,e,n);return(o?-1:1)*(i<0?1/-i:i)}const lo=t=>t;function co(){let t=lo;const e=t=>t.length;function n(){for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];const s=o.length;if(!s)return[];const r=Wn(o,e),a=new Array(r);for(let e=-1;++e<r;){for(let t=-1,n=a[e]=new Array(s);++t<s;)n[t]=o[t][e];a[e]=t.apply(this,a[e])}return a}return n.combine=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],n):t},n}const ho=Array.isArray,uo=function(t){void 0===t&&(t=[]);const e=ho(t)?t:[t],n=e.length;return(t,o)=>{if(0===n)return null==t?o:t;let i=0;for(;null!=t&&i<n;)t=t[e[i++]];return i===n?t:o}},po=t=>"function"==typeof t?t:()=>t;function fo(){let t,e,n,o,i=10,s=()=>{},r=0,a=function(a){const l=n||uo(e),c=po(i).apply(this,arguments),h=a.slice(r,c+r).map(l);let u=0;const d=po(t);return a.map(((t,e)=>e<r+c-1?d(l(t),e,o):(e>=r+c&&(h.shift(),h.push(l(t,e))),s(h,e,u++,o))))};return a.undefinedValue=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],a):t},a.windowSize=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],a):i},a.misc=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],a):o},a.accumulator=function(){return arguments.length?(s=arguments.length<=0?void 0:arguments[0],a):s},a.skipInitial=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],a):r},a.sourcePath=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],a):e},a.source=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],a):n},a}const go=t=>{switch(t){default:case"Solid":return"none";case"ShortDash":return"6, 2";case"ShortDash2":return"6, 3";case"ShortDot":return"2, 2";case"ShortDashDot":return"6, 2, 2, 2";case"ShortDashDotDot":return"6, 2, 2, 2, 2, 2";case"Dot":return"2, 6";case"Dash":return"4, 6";case"LongDash":return"16, 6";case"DashDot":return"8, 6, 2, 6";case"LongDashDot":return"16, 6, 2, 6";case"LongDashDotDot":return"16, 6, 2, 6, 2, 6"}},mo=t=>{const e=go(t).split(",");return 1===e.length?[]:e.map((t=>Number(t)))};function yo(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function xo(t,e){var n=Object.create(t.prototype);for(var o in e)n[o]=e[o];return n}function vo(){}let bo=.7,wo=1/bo,ko="\\s*([+-]?\\d+)\\s*",So="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Co="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Do=/^#([0-9a-f]{3,8})$/,Ao=new RegExp("^rgb\\("+ko+","+ko+","+ko+"\\)$"),Mo=new RegExp("^rgb\\("+Co+","+Co+","+Co+"\\)$"),jo=new RegExp("^rgba\\("+ko+","+ko+","+ko+","+So+"\\)$"),To=new RegExp("^rgba\\("+Co+","+Co+","+Co+","+So+"\\)$"),_o=new RegExp("^hsl\\("+So+","+Co+","+Co+"\\)$"),Po=new RegExp("^hsla\\("+So+","+Co+","+Co+","+So+"\\)$");const No={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Eo=Math.min,Oo=Math.max,Fo=Math.pow,Io=Math.round,Lo=t=>(t=(t||0)%360)<0?t+360:t,zo=t=>Oo(0,Eo(1,t||0)),Ro=(t,e,n)=>255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e);function Wo(){return this.rgb().formatHex()}function Ho(){return this.rgb().formatRgb()}function Xo(t){let e,n;return t=(t+"").trim().toLowerCase(),(e=Do.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?Yo(e):3===n?new Zo(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?Uo(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?Uo(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Ao.exec(t))?new Zo(e[1],e[2],e[3],1):(e=Mo.exec(t))?new Zo(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=jo.exec(t))?Uo(e[1],e[2],e[3],e[4]):(e=To.exec(t))?Uo(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=_o.exec(t))?Jo(e[1],e[2]/100,e[3]/100,1):(e=Po.exec(t))?Jo(e[1],e[2]/100,e[3]/100,e[4]):No.hasOwnProperty(t)?Yo(No[t]):"transparent"===t?new Zo(NaN,NaN,NaN,0):null}function Yo(t){return new Zo(t>>16&255,t>>8&255,255&t,1)}function Uo(t,e,n,o){return o<=0&&(t=e=n=NaN),new Zo(t,e,n,o)}function Bo(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const[o,i,s,r]=e;return 1===e.length?((a=o)instanceof vo||(a=Xo(a)),a?new Zo((a=a.rgb()).r,a.g,a.b,a.opacity):new Zo):new Zo(o,i,s,null==r?1:r);var a}function Zo(t,e,n,o){this.r=+t,this.g=+e,this.b=+n,this.opacity=+o}function Vo(){return"#"+Ko(this.r)+Ko(this.g)+Ko(this.b)}function qo(){const t=Go(this.opacity);return(1===t?"rgb(":"rgba(")+$o(this.r)+", "+$o(this.g)+", "+$o(this.b)+(1===t?")":", "+t+")")}function Go(t){return isNaN(t)?1:Oo(0,Eo(1,t))}function $o(t){return Oo(0,Eo(255,Io(t)||0))}function Ko(t){return((t=$o(t))<16?"0":"")+t.toString(16)}function Jo(t,e,n,o){return o<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new ti(t,e,n,o)}function Qo(t){if(t instanceof ti)return new ti(t.h,t.s,t.l,t.opacity);if(t instanceof vo||(t=Xo(t)),!t)return new ti;if(t instanceof ti)return t;let e=(t=t.rgb()).r/255,n=t.g/255,o=t.b/255,i=Eo(e,n,o),s=Oo(e,n,o),r=NaN,a=s-i,l=(s+i)/2;return a?(r=e===s?(n-o)/a+6*(n<o):n===s?(o-e)/a+2:(e-n)/a+4,a/=l<.5?s+i:2-s-i,r*=60):a=l>0&&l<1?0:r,new ti(r,a,l,t.opacity)}function ti(t,e,n,o){this.h=+t,this.s=+e,this.l=+n,this.opacity=+o}function ei(t,e,n,o,i){const s=t*t,r=s*t;return((1-3*t+3*s-r)*e+(4-6*s+3*r)*n+(1+3*t+3*s-3*r)*o+r*i)/6}yo(vo,Xo,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Wo,formatHex:Wo,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Qo(this).formatHsl()},formatRgb:Ho,toString:Ho}),yo(Zo,Bo,xo(vo,{brighter(t){return t=null==t?wo:Fo(wo,t),new Zo(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?bo:Fo(bo,t),new Zo(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Zo($o(this.r),$o(this.g),$o(this.b),Go(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Vo,formatHex:Vo,formatHex8:function(){return"#"+Ko(this.r)+Ko(this.g)+Ko(this.b)+Ko(255*(isNaN(this.opacity)?1:this.opacity))},formatRgb:qo,toString:qo})),yo(ti,(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const[o,i,s,r]=e;return 1===e.length?Qo(o):new ti(o,i,s,null==r?1:r)}),xo(vo,{brighter(t){return t=null==t?wo:Fo(wo,t),new ti(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?bo:Fo(bo,t),new ti(this.h,this.s,this.l*t,this.opacity)},rgb(){let t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*e,i=2*n-o;return new Zo(Ro(t>=240?t-240:t+120,i,o),Ro(t,i,o),Ro(t<120?t+240:t-120,i,o),this.opacity)},clamp(){return new ti(Lo(this.h),zo(this.s),zo(this.l),Go(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Go(this.opacity);return(1===t?"hsl(":"hsla(")+Lo(this.h)+", "+100*zo(this.s)+"%, "+100*zo(this.l)+"%"+(1===t?")":", "+t+")")}}));const ni=t=>()=>t;function oi(t,e){return function(n){return t+n*e}}function ii(t){return 1==(t=+t)?si:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(o){return Math.pow(t+o*e,n)}}(e,n,t):ni(isNaN(e)?n:e)}}function si(t,e){const n=e-t;return n?oi(t,n):ni(isNaN(t)?e:t)}const ri=function t(e){const n=ii(e);function o(t,e){const o=n((t=Bo(t)).r,(e=Bo(e)).r),i=n(t.g,e.g),s=n(t.b,e.b),r=si(t.opacity,e.opacity);return function(e){return t.r=o(e),t.g=i(e),t.b=s(e),t.opacity=r(e),t+""}}return o.gamma=t,o}(1);function ai(t){return function(e){let n,o,i=e.length,s=new Array(i),r=new Array(i),a=new Array(i);for(n=0;n<i;++n)o=Bo(e[n]),s[n]=o.r||0,r[n]=o.g||0,a[n]=o.b||0;return s=t(s),r=t(r),a=t(a),o.opacity=1,function(t){return o.r=s(t),o.g=r(t),o.b=a(t),o+""}}}ai((function(t){const e=t.length-1;return function(n){let o=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[o],s=t[o+1],r=o>0?t[o-1]:2*i-s,a=o<e-1?t[o+2]:2*s-i;return ei((n-o/e)*e,r,i,s,a)}})),ai((function(t){const e=t.length;return function(n){let o=Math.floor(((n%=1)<0?++n:n)*e),i=t[(o+e-1)%e],s=t[o%e],r=t[(o+1)%e],a=t[(o+2)%e];return ei((n-o/e)*e,i,s,r,a)}}));function li(t,e){let n,o=e?e.length:0,i=t?Math.min(o,t.length):0,s=new Array(i),r=new Array(o);for(n=0;n<i;++n)s[n]=mi(t[n],e[n]);for(;n<o;++n)r[n]=e[n];return function(t){for(n=0;n<i;++n)r[n]=s[n](t);return r}}function ci(t,e){const n=new Date;return t=+t,e=+e,function(o){return n.setTime(t*(1-o)+e*o),n}}function hi(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function ui(t,e){let n,o={},i={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?o[n]=mi(t[n],e[n]):i[n]=e[n];return function(t){for(n in o)i[n]=o[n](t);return i}}const di=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,pi=new RegExp(di.source,"g");function fi(t,e){let n,o,i,s=di.lastIndex=pi.lastIndex=0,r=-1,a=[],l=[];for(t+="",e+="";(n=di.exec(t))&&(o=pi.exec(e));)(i=o.index)>s&&(i=e.slice(s,i),a[r]?a[r]+=i:a[++r]=i),(n=n[0])===(o=o[0])?a[r]?a[r]+=o:a[++r]=o:(a[++r]=null,l.push({i:r,x:hi(n,o)})),s=pi.lastIndex;return s<e.length&&(i=e.slice(s),a[r]?a[r]+=i:a[++r]=i),a.length<2?l[0]?function(t){return function(e){return t(e)+""}}(l[0].x):function(t){return function(){return t}}(e):(e=l.length,function(t){for(var n,o=0;o<e;++o)a[(n=l[o]).i]=n.x(t);return a.join("")})}function gi(t,e){e||(e=[]);let n,o=t?Math.min(e.length,t.length):0,i=e.slice();return function(s){for(n=0;n<o;++n)i[n]=t[n]*(1-s)+e[n]*s;return i}}function mi(t,e){let n,o=typeof e;return null==e||"boolean"===o?ni(e):("number"===o?hi:"string"===o?(n=Xo(e))?(e=n,ri):fi:e instanceof Xo?ri:e instanceof Date?ci:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}(e)?gi:Array.isArray(e)?li:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?ui:hi)(t,e)}function yi(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}const xi=t=>void 0===t,vi=Array.from,bi=Math.min,wi=Math.max;let ki=[0,1];const Si=t=>+t,Ci=t=>t,Di=(t,e)=>(e-=t=+t)?n=>(n-t)/e:(t=>()=>t)(isNaN(e)?NaN:.5);function Ai(t,e,n){let[o,i]=t,[s,r]=e;return i<o?(o=Di(i,o),s=n(r,s)):(o=Di(o,i),s=n(s,r)),t=>s(o(t))}function Mi(t,e,n){let o=bi(t.length,e.length)-1,i=new Array(o),s=new Array(o),r=-1;for(t[o]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++r<o;)i[r]=Di(t[r],t[r+1]),s[r]=n(e[r],e[r+1]);return function(e){let n=Gn(t,e,1,o)-1;return s[n](i[n](e))}}function ji(){let t,e,n,o,i,s,r=ki,a=ki,l=mi,c=Ci;function h(){let t=bi(r.length,a.length);return c!==Ci&&(c=((t,e)=>{const[n,o]=t>e?[e,t]:[t,e];return t=>wi(n,bi(o,t))})(r[0],r[t-1])),o=t>2?Mi:Ai,i=s=null,u}function u(e){return null==e||isNaN(e=+e)?n:(i||(i=o(r.map(t),a,l)))(t(c(e)))}return u.invert=n=>c(e((s||(s=o(a,r.map(t),hi)))(n))),u.domain=t=>xi(t)?r.slice():(r=vi(t,Si),h()),u.range=t=>xi(t)?a.slice():(a=vi(t),h()),u.rangeRound=t=>(a=vi(t),l=yi,h()),u.clamp=t=>xi(t)?c!==Ci:(c=!!t||Ci,h()),u.interpolate=t=>xi(t)?l:(l=t,h()),u.unknown=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],u):n},function(n,o){return t=n,e=o,h()}}const Ti=(t,e)=>e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown());function _i(){return ji()(Ci,Ci)}function Pi(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const[o,i]=e;switch(e.length){case 0:break;case 1:this.range(o);break;default:this.range(i).domain(o)}return this}function Ni(t,e){let n,o;return(n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0?null:(o=t.slice(0,n),[o.length>1?o[0]+o.slice(2):o,+t.slice(n+1)])}function Ei(t){return(t=Ni(Math.abs(t)))?t[1]:NaN}const Oi=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Fi(t){let e;if(!(e=Oi.exec(t)))throw new Error("invalid format: "+t);return new Ii({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function Ii(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}let Li;function zi(t,e){let n=Ni(t,e);if(!n)return t+"";let o=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+o:o.length>i+1?o.slice(0,i+1)+"."+o.slice(i+1):o+new Array(i-o.length+2).join("0")}Fi.prototype=Ii.prototype,Ii.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const Ri={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>zi(100*t,e),r:zi,s:function(t,e){let n=Ni(t,e);if(!n)return t+"";let o=n[0],i=n[1],s=i-(Li=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,r=o.length;return s===r?o:s>r?o+new Array(s-r+1).join("0"):s>0?o.slice(0,s)+"."+o.slice(s):"0."+new Array(1-s).join("0")+Ni(t,Math.max(0,e+s-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Wi(t){return t}const Hi=Array.prototype.map,Xi=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Yi(t){let e=void 0===t.grouping||void 0===t.thousands?Wi:(c=Hi.call(t.grouping,Number),h=t.thousands+"",function(t,e){let n=t.length,o=[],i=0,s=c[0],r=0;for(;n>0&&s>0&&(r+s+1>e&&(s=Math.max(1,e-r)),o.push(t.substring(n-=s,n+s)),!((r+=s+1)>e));)s=c[i=(i+1)%c.length];return o.reverse().join(h)}),n=void 0===t.currency?"":t.currency[0]+"",o=void 0===t.currency?"":t.currency[1]+"",i=void 0===t.decimal?".":t.decimal+"",s=void 0===t.numerals?Wi:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(Hi.call(t.numerals,String)),r=void 0===t.percent?"%":t.percent+"",a=void 0===t.minus?"−":t.minus+"",l=void 0===t.nan?"NaN":t.nan+"";var c,h;function u(t){let c=(t=Fi(t)).fill,h=t.align,u=t.sign,d=t.symbol,p=t.zero,f=t.width,g=t.comma,m=t.precision,y=t.trim,x=t.type;"n"===x?(g=!0,x="g"):Ri[x]||(void 0===m&&(m=12),y=!0,x="g"),(p||"0"===c&&"="===h)&&(p=!0,c="0",h="=");let v="$"===d?n:"#"===d&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",b="$"===d?o:/[%p]/.test(x)?r:"",w=Ri[x],k=/[defgprs%]/.test(x);function S(t){let n,o,r,d=v,S=b;if("c"===x)S=w(t)+S,t="";else{let e=(t=+t)<0||1/t<0;if(t=isNaN(t)?l:w(Math.abs(t),m),y&&(t=function(t){let e,n=t.length,o=1,i=-1;t:for(;o<n;++o)switch(t[o]){case".":i=e=o;break;case"0":0===i&&(i=o),e=o;break;default:if(!+t[o])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(e+1):t}(t)),e&&0==+t&&"+"!==u&&(e=!1),d=(e?"("===u?u:a:"-"===u||"("===u?"":u)+d,S=("s"===x?Xi[8+Li/3]:"")+S+(e&&"("===u?")":""),k)for(n=-1,o=t.length;++n<o;)if(r=t.charCodeAt(n),48>r||r>57){S=(46===r?i+t.slice(n+1):t.slice(n))+S,t=t.slice(0,n);break}}g&&!p&&(t=e(t,1/0));let C=d.length+t.length+S.length,D=C<f?new Array(f-C+1).join(c):"";switch(g&&p&&(t=e(D+t,D.length?f-S.length:1/0),D=""),h){case"<":t=d+t+S+D;break;case"=":t=d+D+t+S;break;case"^":t=D.slice(0,C=D.length>>1)+d+t+S+D.slice(C);break;default:t=D+d+t+S}return s(t)}return m=void 0===m?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),S.toString=function(){return t+""},S}return{format:u,formatPrefix:function(t,e){let n=u(((t=Fi(t)).type="f",t)),o=3*Math.max(-8,Math.min(8,Math.floor(Ei(e)/3))),i=Math.pow(10,-o),s=Xi[8+o/3];return function(t){return n(i*t)+s}}}}let Ui,Bi,Zi;Ui=Yi({thousands:",",grouping:[3],currency:["$",""]}),Bi=Ui.format,Zi=Ui.formatPrefix;const Vi=Math.max,qi=Math.min,Gi=Math.abs,$i=Math.floor;function Ki(t,e,n,o){let i,s=ao(t,e,n);switch((o=Fi(null==o?",f":o)).type){case"s":{const n=Math.max(Math.abs(t),Math.abs(e));return null!=o.precision||isNaN(i=((t,e)=>Vi(0,3*Vi(-8,qi(8,$i(Ei(e)/3)))-Ei(Gi(t))))(s,n))||(o.precision=i),Zi(o,n)}case"":case"e":case"g":case"p":case"r":null!=o.precision||isNaN(i=((t,e)=>(t=Gi(t),e=Gi(e)-t,Vi(0,Ei(e)-Ei(t))+1))(s,Math.max(Math.abs(t),Math.abs(e))))||(o.precision=i-("e"===o.type));break;case"f":case"%":null!=o.precision||isNaN(i=(t=>Vi(0,-Ei(Gi(t))))(s))||(o.precision=i-2*("%"===o.type))}return Bi(o)}const Ji=Math.floor,Qi=Math.ceil;function ts(t){let e=t.domain;return t.ticks=t=>{let n=e();return function(t,e,n){if(!((n=+n)>0))return[];if((t=+t)==(e=+e))return[t];const o=e<t,[i,s,r]=o?so(e,t,n):so(t,e,n);if(!(s>=i))return[];const a=s-i+1,l=new Array(a);let c=0;if(o)if(r<0)for(;c<a;++c)l[c]=(s-c)/-r;else for(;c<a;++c)l[c]=(s-c)*r;else if(r<0)for(;c<a;++c)l[c]=(i+c)/-r;else for(;c<a;++c)l[c]=(i+c)*r;return l}(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=(t,n)=>{let o=e();return Ki(o[0],o[o.length-1],null==t?10:t,n)},t.nice=n=>{null==n&&(n=10);let o,i,s=e(),r=0,a=s.length-1,l=s[r],c=s[a],h=10;for(c<l&&(i=l,l=c,c=i,i=r,r=a,a=i);h-- >0;){if(i=ro(l,c,n),i===o)return s[r]=l,s[a]=c,e(s);if(i>0)l=Ji(l/i)*i,c=Qi(c/i)*i;else{if(!(i<0))break;l=Qi(l*i)/i,c=Ji(c*i)/i}o=i}return t},t}function es(t){return null!==t&&"object"==typeof t?t.valueOf():t}function ns(t,e){let{_intern:n,_key:o}=t;const i=o(e);return n.has(i)?n.get(i):e}class os extends Map{constructor(t,e){if(void 0===e&&(e=es),super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const[e,n]of t)this.set(e,n)}get(t){return super.get(ns(this,t))}has(t){return super.has(ns(this,t))}set(t,e){return super.set(function(t,e){let{_intern:n,_key:o}=t;const i=o(e);return n.has(i)?n.get(i):(n.set(i,e),e)}(this,t),e)}delete(t){return super.delete(function(t,e){let{_intern:n,_key:o}=t;const i=o(e);return n.has(i)&&(e=n.get(i),n.delete(i)),e}(this,t))}}const is=Array.from,ss=Symbol("implicit");const rs=new Date,as=new Date,ls=Math.floor,cs=(t,e,n,o)=>{const i=e=>(t(e=void 0===e?new Date:new Date(+e)),e);return i.floor=e=>(t(e=new Date(+e)),e),i.ceil=n=>(t(n=new Date(n-1)),e(n,1),t(n),n),i.round=t=>{const e=i(t),n=i.ceil(t);return t-e<n-t?e:n},i.offset=(t,n)=>(e(t=new Date(+t),null==n?1:ls(n)),t),i.range=(n,o,s)=>{const r=[];if(n=i.ceil(n),s=null==s?1:ls(s),!(n<o&&s>0))return r;let a;do{r.push(a=new Date(+n)),e(n,s),t(n)}while(a<n&&n<o);return r},i.filter=n=>cs((e=>{if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),((t,o)=>{if(t>=t)if(o<0)for(;++o<=0;)for(;e(t,-1),!n(t););else for(;--o>=0;)for(;e(t,1),!n(t););})),n&&(i.count=(e,o)=>(rs.setTime(+e),as.setTime(+o),t(rs),t(as),ls(n(rs,as))),i.every=t=>(t=ls(t),isFinite(t)&&t>0?t>1?i.filter(o?e=>o(e)%t==0:e=>i.count(0,e)%t==0):i:null)),i},hs=1e3,us=6e4,ds=36e5,ps=864e5,fs=6048e5,gs=2592e6,ms=31536e6,ys=cs((t=>{t.setTime(t-t.getMilliseconds())}),((t,e)=>{t.setTime(+t+e*hs)}),((t,e)=>(e-t)/hs),(t=>t.getUTCSeconds())),xs=cs((t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*hs)}),((t,e)=>{t.setTime(+t+e*us)}),((t,e)=>(e-t)/us),(t=>t.getMinutes())),vs=cs((t=>{t.setUTCSeconds(0,0)}),((t,e)=>{t.setTime(+t+e*us)}),((t,e)=>(e-t)/us),(t=>t.getUTCMinutes())),bs=cs((t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*hs-t.getMinutes()*us)}),((t,e)=>{t.setTime(+t+e*ds)}),((t,e)=>(e-t)/ds),(t=>t.getHours())),ws=cs((t=>{t.setUTCMinutes(0,0,0)}),((t,e)=>{t.setTime(+t+e*ds)}),((t,e)=>(e-t)/ds),(t=>t.getUTCHours())),ks=cs((t=>t.setHours(0,0,0,0)),((t,e)=>t.setDate(t.getDate()+e)),((t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*us)/ps),(t=>t.getDate()-1)),Ss=cs((t=>{t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCDate(t.getUTCDate()+e)}),((t,e)=>(e-t)/ps),(t=>t.getUTCDate()-1)),Cs=t=>cs((e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),((t,e)=>{t.setDate(t.getDate()+7*e)}),((t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*us)/fs)),Ds=Cs(0),As=Cs(1),Ms=Cs(4),js=(t=>cs((e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCDate(t.getUTCDate()+7*e)}),((t,e)=>(e-t)/fs)))(0),Ts=cs((t=>{t.setDate(1),t.setHours(0,0,0,0)}),((t,e)=>{t.setMonth(t.getMonth()+e)}),((t,e)=>e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())),(t=>t.getMonth())),_s=cs((t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)}),((t,e)=>e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())),(t=>t.getUTCMonth())),Ps=Math.floor,Ns=cs((t=>{t.setMonth(0,1),t.setHours(0,0,0,0)}),((t,e)=>{t.setFullYear(t.getFullYear()+e)}),((t,e)=>e.getFullYear()-t.getFullYear()),(t=>t.getFullYear()));Ns.every=t=>isFinite(t=Ps(t))&&t>0?cs((e=>{e.setFullYear(Ps(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),((e,n)=>{e.setFullYear(e.getFullYear()+n*t)})):null;const Es=cs((t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)}),((t,e)=>e.getUTCFullYear()-t.getUTCFullYear()),(t=>t.getUTCFullYear()));Es.every=t=>isFinite(t=Ps(t))&&t>0?cs((e=>{e.setUTCFullYear(Ps(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),((e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null;const Os=Math.floor,Fs=cs((()=>{}),((t,e)=>{t.setTime(+t+e)}),((t,e)=>e-t));Fs.every=t=>(t=Os(t),isFinite(t)&&t>0?t>1?cs((e=>{e.setTime(Os(e/t)*t)}),((e,n)=>{e.setTime(+e+n*t)}),((e,n)=>(n-e)/t)):Fs:null);const Is=Math.abs,Ls=Math.max,[zs,Rs]=((t,e,n,o,i,s)=>{const r=[[ys,1,hs],[ys,5,5e3],[ys,15,15e3],[ys,30,3e4],[s,1,us],[s,5,3e5],[s,15,9e5],[s,30,18e5],[i,1,ds],[i,3,108e5],[i,6,216e5],[i,12,432e5],[o,1,ps],[o,2,1728e5],[n,1,fs],[e,1,gs],[e,3,7776e6],[t,1,ms]],a=(e,n,o)=>{const i=Is(n-e)/o,s=qn((t=>{let[,,e]=t;return e})).right(r,i);if(s===r.length)return t.every(ao(e/ms,n/ms,o));if(0===s)return Fs.every(Ls(ao(e,n,o),1));const[a,l]=r[i/r[s-1][2]<r[s][2]/i?s-1:s];return a.every(l)};return[(t,e,n)=>{const o=e<t;o&&([t,e]=[e,t]);const i=n&&"function"==typeof n.range?n:a(t,e,n),s=i?i.range(t,+e+1):[];return o?s.reverse():s},a]})(Ns,Ts,Ds,ks,bs,xs),Ws=Math.floor,Hs={"-":"",_:" ",0:"0"},Xs=(t,e,n)=>{const o=t<0?"-":"",i=(o?-t:t)+"",s=i.length;return o+(s<n?new Array(n-s+1).join(e)+i:i)},Ys=(t,e)=>Xs(t.getDate(),e,2),Us=(t,e)=>Xs(t.getHours(),e,2),Bs=(t,e)=>Xs(t.getHours()%12||12,e,2),Zs=(t,e)=>Xs(1+ks.count(Ns(t),t),e,3),Vs=(t,e)=>Xs(t.getMilliseconds(),e,3),qs=(t,e)=>Vs(t,e)+"000",Gs=(t,e)=>Xs(t.getMonth()+1,e,2),$s=(t,e)=>Xs(t.getMinutes(),e,2),Ks=(t,e)=>Xs(t.getSeconds(),e,2),Js=t=>{const e=t.getDay();return 0===e?7:e},Qs=(t,e)=>Xs(Ds.count(Ns(t)-1,t),e,2),tr=t=>{const e=t.getDay();return e>=4||0===e?Ms(t):Ms.ceil(t)},er=(t,e)=>(t=tr(t),Xs(Ms.count(Ns(t),t)+(4===Ns(t).getDay()),e,2)),nr=t=>t.getDay(),or=(t,e)=>Xs(As.count(Ns(t)-1,t),e,2),ir=(t,e)=>Xs(t.getFullYear()%100,e,2),sr=(t,e)=>(t=tr(t),Xs(t.getFullYear()%100,e,2)),rr=(t,e)=>Xs(t.getFullYear()%1e4,e,4),ar=(t,e)=>{let n=t.getDay();return t=n>=4||0===n?Ms(t):Ms.ceil(t),Xs(t.getFullYear()%1e4,e,4)},lr=t=>{let e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Xs(e/60|0,"0",2)+Xs(e%60,"0",2)},cr=()=>"%",hr=t=>+t,ur=t=>Ws(+t/1e3);let dr=function(t){const e=t.dateTime,n=t.date,o=t.time,i=t.periods,s=t.days,r=t.shortDays,a=t.months,l=t.shortMonths,c={a:t=>r[t.getDay()],A:t=>s[t.getDay()],b:t=>l[t.getMonth()],B:t=>a[t.getMonth()],c:null,d:Ys,e:Ys,f:qs,g:sr,G:ar,H:Us,I:Bs,j:Zs,L:Vs,m:Gs,M:$s,p:t=>i[+(t.getHours()>=12)],q:t=>1+~~(t.getMonth()/3),Q:hr,s:ur,S:Ks,u:Js,U:Qs,V:er,w:nr,W:or,x:null,X:null,y:ir,Y:rr,Z:lr,"%":cr},h=(t,e)=>n=>{let o,i,s,r=[],a=-1,l=0,c=t.length;for(n instanceof Date||(n=new Date(+n));++a<c;)37===t.charCodeAt(a)&&(r.push(t.slice(l,a)),null!=(i=Hs[o=t.charAt(++a)])?o=t.charAt(++a):i="e"===o?" ":"0",(s=e[o])&&(o=s(n,i)),r.push(o),l=a+1);return r.push(t.slice(l,a)),r.join("")};return c.x=h(n,c),c.X=h(o,c),c.c=h(e,c),{format:t=>{const e=h(t+="",c);return e.toString=()=>t,e}}}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}).format;const pr=Array.from,fr=t=>new Date(t),gr=t=>t instanceof Date?+t:+new Date(+t);function mr(t,e,n,o,i,s,r,a,l,c){let h=_i(),u=h.invert,d=h.domain;const p=c(".%L"),f=c(":%S"),g=c("%I:%M"),m=c("%I %p"),y=c("%a %d"),x=c("%b %d"),v=c("%B"),b=c("%Y"),w=t=>(l(t)<t?p:a(t)<t?f:r(t)<t?g:s(t)<t?m:o(t)<t?i(t)<t?y:x:n(t)<t?v:b)(t);return h.invert=t=>new Date(u(t)),h.domain=function(){return arguments.length?d(pr(arguments.length<=0?void 0:arguments[0],gr)):d().map(fr)},h.ticks=e=>{let n=d();return t(n[0],n[n.length-1],null==e?10:e)},h.tickFormat=(t,e)=>null==e?w:c(e),h.nice=t=>{let n=d();return t&&"function"==typeof t.range||(t=e(n[0],n[n.length-1],null==t?10:t)),t?d(function(t,e){let n,o=0,i=(t=t.slice()).length-1,s=t[o],r=t[i];return r<s&&(n=o,o=i,i=n,n=s,s=r,r=n),t[o]=e.floor(s),t[i]=e.ceil(r),t}(n,t)):h},h.copy=()=>Ti(h,mr(t,e,n,o,i,s,r,a,l,c)),h}const yr=(t,e,n)=>{const o=e[n];if("function"!=typeof o)throw new Error("Attempt to rebind "+n+" which isn't a function on the source object");return function(){for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];const r=o.apply(e,i);return r===e?t:r}},xr=function(t,e){for(var n=arguments.length,o=new Array(n>2?n-2:0),i=2;i<n;i++)o[i-2]=arguments[i];for(const n of o)t[n]=yr(t,e,n);return t};function vr(){let t=lo,e=!0,n=()=>{};function o(o){return co().combine(((t,o)=>{const i=e&&void 0===o?t:n(t,o);return void 0===i?t:i}))(o,t(o))}return o.algorithm=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],o):t},o.merge=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],o):n},o.skipUndefined=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],o):e},o}const br=t=>"translate("+t[0]+", "+t[1]+")",wr=function t(){let e=new os,n=[],o=[],i=ss;function s(t){let s=e.get(t);if(xi(s)){if(i!==ss)return i;e.set(t,s=n.push(t)-1)}return o[s%o.length]}s.domain=function(t){if(xi(t))return n.slice();n=[],e=new os;for(const o of t)e.has(o)||e.set(o,n.push(o)-1);return s},s.range=t=>xi(t)?o.slice():(o=is(t),s),s.unknown=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],s):i},s.copy=()=>t(n,o).unknown(i);for(var r=arguments.length,a=new Array(r),l=0;l<r;l++)a[l]=arguments[l];return Pi.apply(s,a),s}(["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"]);const kr=(t,e)=>{const n=t.replace("#","");if(t.indexOf("#")>-1&&(3===n.length||6===n.length)){const t=3===n.length?1:2;return"rgba("+parseInt(n.substring(0,1*t),16)+", "+parseInt(n.substring(1*t,2*t),16)+", "+parseInt(n.substring(2*t,3*t),16)+", "+e+")"}return t},Sr=(t,e)=>{if(e&&t){let n;for(let o=t.length-1;o>=0;o--)if(n=t[o],null!=e(n))return n;return}const n=t?t.length:0;return n?t[n-1]:void 0},Cr=(t,e)=>{if(!e||!t)return t?t[0]:void 0;{let n;for(let o=0;o<t.length;o++)if(n=t[o],null!=e(n))return n}},Dr=Cr,Ar=(t,e)=>{const{widthRatio:n}=t,{xScale:o}=e,[i,s]=o.range(),r=Math.abs(s-i);let a;if(null!=o.invert){const[t,e]=o.domain();a=r/Math.abs(t-e)}else a=r/o.domain().length;return a*n},Mr=(t,e,n)=>{let o=0,i=t.length-1;for(;i-o>1;){const s=Math.round((o+i)/2);n(t[s])<=e?o=s:i=s}const s=n(t[o]),r=n(t[i]);return(null==s?void 0:s.valueOf())===(null==e?void 0:e.valueOf())&&(i=o),(null==r?void 0:r.valueOf())===(null==e?void 0:e.valueOf())&&(o=i),s<e&&r<e&&(o=i),s>e&&r>e&&(i=o),{left:o,right:i}},jr=(t,e)=>{if(t===e)return!0;if(!(t instanceof Object&&e instanceof Object))return!1;const n=Object.keys(t),o=n.length;for(let t=0;t<o;t++)if(!(n[t]in e))return!1;for(let i=0;i<o;i++)if(t[n[i]]!==e[n[i]])return!1;return o===Object.keys(e).length};const Tr=Array.isArray,_r=Object.keys,Pr=Math.round,Nr=(Math.abs,t=>(t>0)-(t<0)),Er=t=>t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView),Or="mouseenter.interaction",Fr="mouseleave.interaction",Ir="mousemove.pan",Lr="mouseup.pan",zr="touchmove.pan",Rr="touchend.pan touchcancel.pan",Wr="wheel",Hr=t=>({pageX:t.pageX,pageY:t.pageY,clientX:t.clientX,clientY:t.clientY}),Xr=(t,e,n)=>[Pr(t.clientX-e.left-n.clientLeft),Pr(t.clientY-e.top-n.clientTop)],Yr=(t,e)=>{const n=e.currentTarget,o=n.getBoundingClientRect();return Xr(t,o,n)},Ur=(t,e)=>{const n=t.currentTarget,o=null!=e?e:n.getBoundingClientRect();return Xr(t,o,n)},Br=(t,e)=>{t.forEach((t=>{t.setTransform(1,0,0,1,0,0),t.clearRect(-1,-1,t.canvas.width+2,t.canvas.height+2),t.scale(e,e)}))},Zr=t=>"chart_"+t,Vr=(t,e)=>(t||[]).find((t=>{let{id:n}=t;return n===e})),qr=()=>{},Gr={amIOnTop:()=>!1,chartConfigs:[],chartId:0,displayXAccessor:()=>0,fullData:[],getMutableState:()=>({}),height:0,margin:{},plotData:[],setCursorClass:qr,subscribe:qr,unsubscribe:qr,width:0,xAccessor:()=>0,xScale:qr},$r=(0,i.createContext)(Object.assign({},Gr,{chartConfig:{},chartId:0})),Kr=(0,i.memo)((t=>{let{id:e=0,onContextMenu:n,onDoubleClick:o,children:s}=t;const r=(0,i.useContext)(Il),{subscribe:a,unsubscribe:l,chartConfigs:c}=r,h=(0,i.useCallback)(((t,i,s,r)=>{switch(t){case"contextmenu":{if(void 0===n)return;const{currentCharts:t}=i;t.indexOf(e)>-1&&n(r,i);break}case"dblclick":{if(void 0===o)return;const{currentCharts:t}=i;t.indexOf(e)>-1&&o(r,i);break}default:return}}),[n,o,e]),u=Vr(c,e),d=(0,i.useMemo)((()=>Object.assign({},r,{chartId:e,chartConfig:u})),[r,e,u]),p=br(u.origin);return(0,i.useEffect)((()=>(a(Zr(e),{listener:h}),()=>{l(Zr(e))})),[]),(0,M.jsx)($r.Provider,{value:d,children:(0,M.jsx)("g",{transform:p,children:s})})})),Jr={id:0,flipYScale:!1,origin:[0,0],padding:0,yPan:!0,yPanEnabled:!1,yScale:function t(){let e=_i();e.copy=()=>Ti(e,t());for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return Pi.apply(e,o),ts(e)}()},Qr=Array.isArray,ta=Math.abs,ea=t=>e=>{const n=t(e);return(t=>t&&"object"==typeof t&&!Tr(t))(n)?function(t,e){void 0===t&&(t={}),void 0===e&&(e=t=>t);const n=_r(t),o=new Array(n.length);return n.forEach(((n,i)=>{o[i]=e(t[n],n,t)})),o}(n):n},na=t=>"number"==typeof t,oa=t=>{if(Qr(t)&&2===t.length){const[e,n]=t;return na(e)&&na(n)}return!1},ia=function(t,e,n){return void 0===n&&(n=[]),i.Children.map(e,(e=>{if(null!=e&&(void 0!==(o=e.props)&&void 0!==o.id)){const o=Object.assign({},Jr,e.props),{id:i,origin:s,padding:r,yExtents:a,yScale:l=Jr.yScale,flipYScale:c,yExtentsCalculator:h}=o,u=l.copy(),{width:d,height:p,availableHeight:f}=((t,e)=>{let{width:n,height:o}=t;return{availableHeight:o,width:n,height:e.height||o}})(t,o),{yPan:g}=o,m=a?(Qr(a)?a:[a]).map(po):void 0,y=n.find((t=>t.id===i));let{yPanEnabled:x}=o;if(oa(a))if(y&&y.yPan&&y.yPanEnabled&&g&&x&&jr(y.originalYExtentsProp,a))u.domain(y.yScale.domain());else{const[t,e]=a;u.domain([t,e])}else y&&y.yPanEnabled&&(oa(y.originalYExtentsProp)||(u.domain(y.yScale.domain()),x=!0));return{id:i,origin:po(s)(d,f),padding:r,originalYExtentsProp:a,yExtents:m,yExtentsCalculator:h,flipYScale:c,yScale:u,yPan:g,yPanEnabled:x,width:d,height:p}}var o})).filter((t=>void 0!==t))},sa=(t,e)=>t.filter((t=>{const n=t.origin[1],o=n+t.height;return e[1]>n&&e[1]<o})).map((t=>t.id)),ra=(t,e,n)=>{const o=(t=>t.reduce(((t,e)=>(Qr(e[0])?e.forEach((e=>{t.push(...e)})):t.push(...e),t)),[]))(t.map((t=>n.map(ea(t)))));return e.invert?zn(o):[...new Set(o).values()]},aa=(t,e,n,o,i)=>{let{plotData:s,xAccessor:r,displayXAccessor:a,fullData:l}=e;const c=t.map((t=>{let{yExtentsCalculator:e,yExtents:i,yScale:c}=t;const h=e?e({plotData:s,xDomain:n,xAccessor:r,displayXAccessor:a,fullData:l}):ra(i,c,s),u=void 0!==o?c.range().map((t=>t-o)).map(c.invert):c.domain();return{realYDomain:h,yDomainDY:u,prevYDomain:c.domain()}})),h=co().combine(((t,e)=>{let{realYDomain:n,yDomainDY:o,prevYDomain:s}=e;const{id:r,padding:a,height:l,yScale:c,yPan:h,flipYScale:u,yPanEnabled:d=!1}=t,p=void 0===i||i.indexOf(r)>-1,f=h&&d?p?o:s:n,g=((t,e,n,o)=>{if(t.rangeRoundPoints||null==t.invert){if(isNaN(n))throw new Error("padding has to be a number for ordinal scale");t.rangeRoundPoints&&t.rangeRoundPoints(o?[0,e]:[e,0],n),t.rangeRound&&t.range(o?[0,e]:[e,0]).padding(n)}else{const{top:i,bottom:s}=isNaN(n)?n:{top:n,bottom:n};t.range(o?[i,e-s]:[e-s,i])}return t})(c.copy().domain(f),l,a,u);return Object.assign({},t,{yScale:g,realYDomain:n})}));return h(t,c)},la=(t,e,n,o)=>{let i;if(t.invert){i=((t,e,n)=>{const{left:o,right:i}=Mr(t,e,n);if(o===i)return t[o];const s=n(t[o]),r=n(t[i]);return Math.abs(s.valueOf()-e.valueOf())<Math.abs(r.valueOf()-e.valueOf())?t[o]:t[i]})(o,t.invert(n[0]),e)}else{const e=t.range().map(((t,e)=>({x:ta(t-n[0]),idx:e}))).reduce(((t,e)=>t.x<e.x?t:e));i=void 0!==e?o[e.idx]:o[0]}return i};function ca(t){let e;for(;e=t.sourceEvent;)t=e;return t}function ha(t,e){if(t=ca(t),void 0===e&&(e=t.currentTarget),e){const n=e.ownerSVGElement||e;if(n.createSVGPoint){let o=n.createSVGPoint();return o.x=t.clientX,o.y=t.clientY,o=o.matrixTransform(e.getScreenCTM().inverse()),[o.x,o.y]}if(e.getBoundingClientRect){const t=e.getBoundingClientRect();return[event.clientX-t.left-e.clientLeft,event.clientY-t.top-e.clientTop]}}return[event.pageX,event.pageY]}const ua=Array.from;function da(t,e){return t.target&&(t=ca(t),void 0===e&&(e=t.currentTarget),t=t.touches||[t]),ua(t,(t=>ha(t,e)))}const pa=t=>function(e){t.call(this,e,this.__data__)},fa=t=>function(){let e=this.__on;if(!e)return;let n,o=0,i=-1,s=e.length;for(;o<s;++o)n=e[o],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?e.length=i:delete this.__on},ga=(t,e,n)=>function(){let o,i,s=this.__on,r=pa(e),a=0;if(s)for(i=s.length;a<i;++a)if((o=s[a]).type===t.type&&o.name===t.name)return this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=r,o.options=n),void(o.value=e);this.addEventListener(t.type,r,n),o={type:t.type,name:t.name,value:e,listener:r,options:n},s?s.push(o):this.__on=[o]};let ma=[null];function ya(t,e){this._groups=t,this._parents=e}function xa(){return new ya([[document.documentElement]],ma)}ya.prototype=xa.prototype={constructor:ya,each:function(t){let e,n,o,i,s=this._groups,r=0,a=s.length;for(;r<a;++r)for(e=s[r],n=0,o=e.length;n<o;++n)(i=e[n])&&t.call(i,i.__data__,n,e);return this},on:function(){let t,e,n,o,i,s=(t=>t.trim().split(/^|\s+/).map((t=>{let e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}})))((arguments.length<=0?void 0:arguments[0])+""),r=arguments.length<=1?void 0:arguments[1],a=arguments.length<=2?void 0:arguments[2],l=s.length,c=0;if(!(arguments.length<2)){for(n=r?ga:fa,t=0;t<l;++t)this.each(n(s[t],r,a));return this}if(n=this.node().__on,n)for(o=n.length;c<o;++c)for(t=0,i=n[c];t<l;++t)if((e=s[t]).type===i.type&&e.name===i.name)return i.value}};function va(t){return"string"==typeof t?new ya([[document.querySelector(t)]],[document.documentElement]):new ya([[t]],ma)}const ba="zhn-charts",wa="tooltip",ka=ba+"-"+wa,Sa=ba+"-"+wa+"-label",Ca=ba+"-"+wa+"-hover",Da=ba+"-bb-"+wa,Aa=ba+"-ma-"+wa,Ma=ba+"-ohlc-"+wa,ja="cursor",Ta=ba+"-grabbing-"+ja,_a=ba+"-crosshair-"+ja,Pa=ba+"-default-"+ja,Na=ba+"-move-"+ja,Ea=ba+"-pointer-"+ja,Oa=ba+"-ns-resize-"+ja,Fa=ba+"-ew-resize-"+ja,Ia="interaction",La=ba+"-avoid-"+Ia,za=ba+"-enable-"+Ia,Ra="axis",Wa=ba+"-x-"+Ra,Ha=ba+"-y-"+Ra,Xa=ba+"-"+Ra+"-domain",Ya="series",Ua=ba+"-bb-"+Ya,Ba=ba+"-bb-"+Ya+"-area",Za=ba+"-rsi-"+Ya,Va="candlestick",qa=ba+"-"+Va,Ga=ba+"-"+Va+"-wick",$a=ba+"-"+Va+"-candle",Ka=ba+"-up",Ja=ba+"-down",Qa=ba+"-crosshair",tl=ba+"-cross_hair",el=ba+"-text-background",nl="line",ol=ba+"-"+nl,il=ba+"-"+nl+"-stroke",sl=ba+"-bar",rl="-apple-system, system-ui, Roboto, 'Helvetica Neue', Ubuntu, sans-serif",al=["chartsToPan"],ll=["chartsToPan"],cl=function(t,e,n){void 0===n&&(n=null),t.panInProgress||t.dragInProgress||va(Er(e.current)).on(Ir,n)};class hl extends i.Component{constructor(t){super(t),this.clicked=void 0,this.dx=0,this.dy=0,this.dragHappened=void 0,this.focus=void 0,this.lastNewPos=void 0,this.mouseInside=!1,this.mouseInteraction=!0,this.panEndTimeout=void 0,this.panHappened=void 0,this.ref=(0,i.createRef)(),this.handleEnter=t=>{const{onMouseEnter:e}=this.props;void 0!==e&&(this.mouseInside=!0,cl(this.state,this.ref,this.handleMouseMove),e(t))},this.handleLeave=t=>{const{onMouseLeave:e}=this.props;void 0!==e&&(this.mouseInside=!1,cl(this.state,this.ref),e(t))},this.handleWheel=t=>{const{pan:e,onPan:n,zoom:o,onZoom:i}=this.props;if(!e&&!o)return;const{panInProgress:s}=this.state,r=Math.abs(t.deltaY)>Math.abs(t.deltaX)&&Math.abs(t.deltaY)>0,a=Ur(t);if(t.preventDefault(),o&&this.focus&&r&&!s){const e=t.deltaY>0?1:-1;void 0!==i&&i(e,a,t)}else if(this.focus){if(this.shouldPan()&&void 0!==this.state.panStart){const{panStartXScale:e,chartsToPan:o}=this.state.panStart;this.lastNewPos=a,this.panHappened=!0,void 0===this.dx&&(this.dx=0),void 0===this.dy&&(this.dy=0),this.dx-=t.deltaX,this.dy+=t.deltaY;const i={dx:this.dx,dy:this.dy};void 0!==n&&n(a,e,i,o,t)}else{const{xScale:t,chartConfig:e}=this.props,n=sa(e,a);this.dx=0,this.dy=0,this.setState({panInProgress:!0,panStart:{panStartXScale:t,panOrigin:a,chartsToPan:n}})}this.queuePanEnd(t)}},this.handleMouseMove=t=>{const{onMouseMove:e,mouseMove:n}=this.props;if(void 0!==e&&this.mouseInteraction&&n&&!this.state.panInProgress){e(ha(t,this.ref.current),"mouse",t)}},this.handleClick=t=>{const e=Ur(t),{onClick:n,onDoubleClick:o}=this.props;this.panHappened||this.dragHappened||(this.clicked&&void 0!==o?(o(e,t),this.clicked=!1):void 0!==n&&(n(e,t),this.clicked=!0,setTimeout((()=>{this.clicked&&(this.clicked=!1)}),400)))},this.handleRightClick=t=>{t.stopPropagation(),t.preventDefault();const{onContextMenu:e,onPanEnd:n}=this.props,o=Ur(t,this.ref.current.getBoundingClientRect());if(void 0!==this.state.panStart){const{panStartXScale:e,panOrigin:[i,s],chartsToPan:r}=this.state.panStart;this.panHappened&&void 0!==n&&n(o,e,{dx:i,dy:s},r,t);va(Er(this.ref.current)).on(Ir,null).on(Lr,null),this.setState({panInProgress:!1,panStart:void 0})}void 0!==e&&e(o,t)},this.handleDrag=t=>{const{onDrag:e}=this.props;if(void 0===e)return;this.dragHappened=!0;const{dragStartPosition:n}=this.state;if(void 0===n)return;e({startPos:n,mouseXY:ha(t,this.ref.current)},t)},this.handleDragEnd=t=>{const e=ha(t,this.ref.current);if(va(Er(this.ref.current)).on(Ir,this.mouseInside?this.handleMouseMove:null).on(Lr,null),this.dragHappened){const{onDragComplete:n}=this.props;void 0!==n&&n({mouseXY:e},t)}this.mouseInteraction=!0,this.setState({dragInProgress:!1})},this.canPan=()=>{const{getAllPanConditions:t}=this.props,{pan:e}=this.props,{panEnabled:n,draggable:o}=t().reduce(((t,e)=>({draggable:t.draggable||e.draggable,panEnabled:t.panEnabled&&e.panEnabled})),{draggable:!1,panEnabled:e});return{panEnabled:n,somethingSelected:o}},this.handleMouseDown=t=>{if(0!==t.button)return;const{xScale:e,chartConfig:n,onMouseDown:o}=this.props;if(this.panHappened=!1,this.dragHappened=!1,this.focus=!0,!this.state.panInProgress&&this.mouseInteraction){const i=Ur(t),s=sa(n,i),{panEnabled:r,somethingSelected:a}=this.canPan(),l=r&&!a;if(l)this.setState({panInProgress:l,panStart:{panStartXScale:e,panOrigin:i,chartsToPan:s}}),va(Er(this.ref.current)).on(Ir,this.handlePan).on(Lr,this.handlePanEnd);else if(a){this.setState({panInProgress:!1,dragInProgress:!0,panStart:void 0,dragStartPosition:i});const{onDragStart:e}=this.props;void 0!==e&&e({startPos:i},t),va(Er(this.ref.current)).on(Ir,this.handleDrag).on(Lr,this.handleDragEnd)}void 0!==o&&o(i,s,t)}t.preventDefault()},this.shouldPan=()=>{const{pan:t,onPan:e}=this.props;return t&&e&&void 0!==this.state.panStart},this.handlePan=t=>{if(this.shouldPan()&&void 0!==this.state.panStart){this.panHappened=!0;const{panStartXScale:e,panOrigin:n,chartsToPan:o}=this.state.panStart;let i,s,r;this.mouseInteraction?(r=ha(t,this.ref.current),this.lastNewPos=r,i=r[0]-n[0],s=r[1]-n[1]):(r=da(t,this.ref.current)[0],this.lastNewPos=r,i=n[0]-r[0],s=n[1]-r[1]),this.dx=i,this.dy=s;const{onPan:a}=this.props;void 0!==a&&a(r,e,{dx:i,dy:s},o,t)}},this.handlePanEnd=t=>{const{pan:e,onPanEnd:n}=this.props;if(void 0!==this.state.panStart){const{panStartXScale:o,chartsToPan:i}=this.state.panStart;if(va(Er(this.ref.current)).on(Ir,this.mouseInside?this.handleMouseMove:null).on(Lr,null).on(zr,null).on(Rr,null),this.panHappened&&e&&n){const{dx:e=0,dy:s=0}=this;delete this.dx,delete this.dy,void 0!==this.lastNewPos&&n(this.lastNewPos,o,{dx:e,dy:s},i,t)}this.setState({panInProgress:!1,panStart:void 0})}},this.handleTouchMove=t=>{const{onMouseMove:e}=this.props;if(void 0===e)return;const n=Hr(t.touches[0]);e(Yr(n,t),"touch",t)},this.handleTouchStart=t=>{this.mouseInteraction=!1;const{pan:e,chartConfig:n,onMouseMove:o,xScale:i,onPanEnd:s}=this.props;if(1===t.touches.length){this.panHappened=!1;const s=Yr(Hr(t.touches[0]),t);if(void 0!==o&&o(s,"touch",t),e){const t=sa(n,s);this.setState({panInProgress:!0,panStart:{panStartXScale:i,panOrigin:s,chartsToPan:t}}),va(Er(this.ref.current)).on(zr,this.handlePan,!1).on(Rr,this.handlePanEnd,!1)}}else if(2===t.touches.length){const{panInProgress:n,panStart:o}=this.state;if(n&&e&&s&&void 0!==o){const{panStartXScale:n,panOrigin:[r,a],chartsToPan:l}=o;va(Er(this.ref.current)).on(Ir,this.mouseInside?this.handleMouseMove:null).on(Lr,null).on(zr,this.handlePinchZoom,!1).on(Rr,this.handlePinchZoomEnd,!1);const c=Yr(Hr(t.touches[0]),t),h=Yr(Hr(t.touches[1]),t);this.panHappened&&e&&s&&void 0!==this.lastNewPos&&s(this.lastNewPos,n,{dx:r,dy:a},l,t),this.setState({panInProgress:!1,pinchZoomStart:{xScale:i,touch1Pos:c,touch2Pos:h,range:i.range(),chartsToPan:l}})}}},this.handlePinchZoom=t=>{const{pinchZoomStart:e}=this.state;if(void 0===e)return;const{xScale:n,zoom:o,onPinchZoom:i}=this.props;if(!o||void 0===i)return;const[s,r]=da(this.ref.current);i(D(e,al),{touch1Pos:s,touch2Pos:r,xScale:n},t)},this.handlePinchZoomEnd=t=>{va(Er(this.ref.current)).on(zr,null).on(Rr,null);const{pinchZoomStart:e}=this.state;if(void 0===e)return;const n=D(e,ll),{zoom:o,onPinchZoomEnd:i}=this.props;o&&i&&i(n,t),this.setState({pinchZoomStart:void 0})},this.setCursorClass=t=>{t!==this.state.cursorOverrideClass&&this.setState({cursorOverrideClass:t})},this.focus=t.focus,this.state={panInProgress:!1}}componentDidMount(){const{disableInteraction:t}=this.props,{current:e}=this.ref;null!==e&&(t||va(e).on(Or,this.handleEnter).on(Fr,this.handleLeave).on(Wr,this.handleWheel,{passive:!1}))}componentDidUpdate(){this.componentDidMount()}componentWillUnmount(){const{disableInteraction:t}=this.props,{current:e}=this.ref;null!==e&&(t||(va(e).on(Or,null).on(Fr,null).on(Wr,null,{passive:!1}),va(Er(e)).on(Ir,null)))}queuePanEnd(t){void 0!==this.panEndTimeout&&window.clearTimeout(this.panEndTimeout),this.panEndTimeout=window.setTimeout((()=>{this.handlePanEnd(t)}),100)}cancelDrag(){va(Er(this.ref.current)).on(Ir,this.mouseInside?this.handleMouseMove:null).on(Lr,null),this.mouseInteraction=!0,this.setState({dragInProgress:!1})}render(){const{height:t,width:e,disableInteraction:n,useCrossHairStyleCursor:o}=this.props,{cursorOverrideClass:i,panInProgress:s}=this.state,r=n?void 0:void 0!==i?i:o?s?Ta:_a:void 0,a=n||{onMouseDown:this.handleMouseDown,onClick:this.handleClick,onContextMenu:this.handleRightClick,onTouchStart:this.handleTouchStart,onTouchMove:this.handleTouchMove};return(0,M.jsx)("rect",Object.assign({ref:this.ref,className:r,width:e,height:t,style:{opacity:0}},a))}}hl.defaultProps={mouseMove:!1,zoom:!1,pan:!1,panSpeedMultiplier:1,focus:!1,disableInteraction:!1};const ul=t=>{var e,n;return null!=(e=null==(n=r(t))?void 0:n.getContext("2d"))?e:void 0},dl=(0,i.memo)((t=>{let{refEl:e,style:n,width:o,height:s,ratio:r}=t;const a=(0,i.useRef)(),l=(0,i.useRef)(),c=(0,i.useRef)();(0,i.useImperativeHandle)(e,(()=>({getCanvasContexts:()=>({bg:ul(a),axes:ul(l),mouseCoord:ul(c)})})));const h=o*r,u=s*r,d={position:"absolute",width:o,height:s};return(0,M.jsxs)("div",{style:Object.assign({},n,{position:"absolute"}),children:[(0,M.jsx)("canvas",{ref:a,width:h,height:u,style:d}),(0,M.jsx)("canvas",{ref:l,width:h,height:u,style:d}),(0,M.jsx)("canvas",{ref:c,width:h,height:u,style:d})]})})),pl="chart-area-clip",fl=t=>{let{configs:e}=t;return e.map(((t,e)=>(0,M.jsx)("clipPath",{id:pl+"-"+t.id,children:(0,M.jsx)("rect",{x:"0",y:"0",width:t.width,height:t.height})},e)))},gl=t=>{let{dimensions:e,chartConfig:n}=t;return(0,M.jsxs)("defs",{children:[(0,M.jsx)("clipPath",{id:pl,children:(0,M.jsx)("rect",{x:"0",y:"0",width:e.width,height:e.height})}),(0,M.jsx)(fl,{configs:n})]})},ml=Math.floor,yl=Math.max,xl=Math.ceil,vl=(t,e,n,o)=>{const{lastItem:i,lastItemX:s}=t,r=e(i),[a,l]=n.range();return(l-a)/(s.valueOf()-a)*(r.valueOf()-o.valueOf())+o.valueOf()},bl=(t,e,n,o)=>{const i=wl(t,o),s=kl(t,n);return e>=i&&e<s},wl=(t,e)=>yl(1,xl(t*e)),kl=(t,e)=>ml(t*e),Sl=(t,e)=>ml(.97*kl(t,e)),Cl=(t,e,n,o)=>t.slice(Mr(t,e,o).left,Mr(t,n,o).right+1);function Dl(t){let{xScale:e,useWholeData:n,clamp:o,pointsPerPxThreshold:i,minPointsPerPxThreshold:s,flipXScale:r}=t;return((t,e,n,o,i)=>({filterData:function(s,r,a,l,c){let{currentPlotData:h,currentDomain:u,fallbackStart:d,fallbackEnd:p,ignoreThresholds:f=!1}=void 0===c?{}:c;if(t)return{plotData:s,domain:r};let g=Cr(r),m=Sr(r),y=r,x=Cl(s,g,m,a);1===x.length&&void 0!==d&&(g=d,m=vl(p,a,l,g),y=[g,m],x=Cl(s,g,m,a)),"function"==typeof e?y=e(y,[a(Cr(s)),a(Sr(s))]):("left"!==e&&"both"!==e&&!0!==e||(y=[Rn([g,a(Cr(s))]),y[1]]),"right"!==e&&"both"!==e&&!0!==e||(y=[y[0],Wn([m,a(Sr(s))])])),y!==r&&(x=Cl(s,y[0],y[1],a));const v=y,b=l.copy().domain(v);let w,k,S=ml(b(a(Sr(x)))-b(a(Cr(x))));i&&S<0&&(S*=-1);const C=Sr(b.range())-Cr(b.range());if(f&&x.length>1||bl(S,x.length,n,o))w=x,k=v;else if(C>kl(S,n)&&null!=p){w=x;const t=vl(p,a,l,Cr(v));k=[Cr(v),t]}else w=null!=h?h:x.slice(x.length-Sl(S,n)),k=null!=u?u:[a(Cr(w)),a(Sr(w))];return{plotData:w,domain:k}}}))(n||null==e.invert,o,i,s,r)}const Al=["seriesName"],Ml=()=>{const t="\n\t."+Ta+" {\n\t\tpointer-events: all;\n\t\tcursor: -moz-grabbing;\n\t\tcursor: -webkit-grabbing;\n\t\tcursor: grabbing;\n\t}\n\t."+_a+" {\n\t\tpointer-events: all;\n\t\tcursor: arrow;\n\t}\n\t."+Ca+" {\n\t\tpointer-events: all;\n\t\tcursor: pointer;\n\t}\n\t."+La+" {\n\t\tpointer-events: none;\n\t}\n\t."+za+" {\n\t\tpointer-events: all;\n\t}\n\t."+ka+" {\n\t\tpointer-events: all;\n\t\tcursor: pointer;\n\t}\n\t."+Pa+" {\n\t\tcursor: default;\n\t}\n\t."+Na+" {\n\t\tcursor: move;\n\t}\n\t."+Ea+" {\n\t\tcursor: pointer;\n\t}\n\t."+Oa+" {\n\t\tcursor: ns-resize;\n\t}\n\t."+Fa+" {\n\t\tcursor: ew-resize;\n\t}";return(0,M.jsx)("style",{type:"text/css",children:t})},jl=t=>{let{margin:{top:e,bottom:n,left:o,right:i},height:s,width:r}=t;return{height:s-e-n,width:r-o-i}},Tl=t=>{const{data:e,plotFull:n,xScale:o,clamp:i,pointsPerPxThreshold:s,flipXScale:r,xAccessor:a,displayXAccessor:l,minPointsPerPxThreshold:c}=t,h=void 0!==n?n:a===lo,{filterData:u}=Dl({xScale:o,useWholeData:h,clamp:i,pointsPerPxThreshold:s,minPointsPerPxThreshold:c,flipXScale:r});return{xAccessor:a,displayXAccessor:null!=l?l:a,xScale:o.copy(),fullData:e,filterData:u}},_l=function(t,e,n,o){if(void 0===o&&(o=1),t.rangeRoundPoints){if(isNaN(n))throw new Error("padding has to be a number for ordinal scale");t.rangeRoundPoints([0,e.width],n)}else if(t.padding){if(isNaN(n))throw new Error("padding has to be a number for ordinal scale");t.range([0,e.width]),t.padding(n/2)}else{const{left:i,right:s}=isNaN(n)?n:{left:n,right:n};o>0?t.range([i,e.width-s]):t.range([e.width-s,i])}return t},Pl=t=>t?-1:1,Nl=t=>{const e=(t=>{const{xAccessor:e,xExtents:n,data:o,padding:i,flipXScale:s}=t,r=Pl(s),a=jl(t),l="function"==typeof n?n(o):zn(n.map((t=>po(t))).map((t=>t(o,e)))),{xAccessor:c,displayXAccessor:h,xScale:u,fullData:d,filterData:p}=Tl(t),f=_l(u,a,i,r),{plotData:g,domain:m}=p(d,l,e,f);return{plotData:g,xScale:f.domain(m),xAccessor:c,displayXAccessor:h,fullData:d,filterData:p}})(t),{xAccessor:n,displayXAccessor:o,fullData:i,plotData:s,xScale:r}=e,{postCalculator:a,children:l}=t,c=void 0!==a?a(s):s,h=jl(t),u=aa(ia(h,l),{plotData:c,xAccessor:n,displayXAccessor:o,fullData:i},r.domain());return Object.assign({},e,{xScale:r,plotData:c,chartConfigs:u})},El=t=>{let{touch1Pos:e,touch2Pos:n}=t;return{topLeft:[Math.min(e[0],n[0]),Math.min(e[1],n[1])],bottomRight:[Math.max(e[0],n[0]),Math.max(e[1],n[1])]}},Ol=(t,e,n)=>!isNaN(t(e(Cr(n))))&&null!=t.invert,Fl=(t,e,n,o,i)=>{const s=Cr(t),r=Cr(e.domain()),a=n(s),l=Sr(t),c=Sr(e.domain()),h=n(l);r<a&&void 0!==i&&i(r,a),h<c&&void 0!==o&&o(h,c)},Il=(0,i.createContext)(Gr),Ll=(t,e,n)=>t.map((t=>t.id===e?Object.assign({},t,{yScale:t.yScale.copy().domain(n),yPanEnabled:!0}):t));class zl extends i.Component{constructor(t){super(t),this.canvasContainerRef=(0,i.createRef)(),this.eventCaptureRef=(0,i.createRef)(),this.finalPinch=void 0,this.lastSubscriptionId=0,this.mutableState={},this.panInProgress=!1,this.prevMouseXY=void 0,this._isDidUpdateRedraw=!1,this._asyncRedrawId=void 0,this.subscriptions=[],this.waitingForPinchZoomAnimationFrame=void 0,this.waitingForPanAnimationFrame=void 0,this.waitingForMouseMoveAnimationFrame=void 0,this.hackyWayToStopPanBeyondBounds__plotData=void 0,this.hackyWayToStopPanBeyondBounds__domain=void 0,this.getMutableState=()=>this.mutableState,this.getCanvasContexts=()=>{var t;return null==(t=this.canvasContainerRef.current)?void 0:t.getCanvasContexts()},this.generateSubscriptionId=()=>(this.lastSubscriptionId++,this.lastSubscriptionId),this.subscribe=(t,e)=>{const{getPanConditions:n=po({draggable:!1,panEnabled:!0})}=e;this.subscriptions=this.subscriptions.concat(Object.assign({id:t},e,{getPanConditions:n}))},this.unsubscribe=t=>{this.subscriptions=this.subscriptions.filter((e=>e.id!==t))},this.getAllPanConditions=()=>this.subscriptions.map((t=>t.getPanConditions())),this.setCursorClass=t=>{var e;null==(e=this.eventCaptureRef.current)||e.setCursorClass(t)},this.amIOnTop=t=>{const e=this.subscriptions.filter((t=>t.getPanConditions().draggable));return e.length>0&&Sr(e).id===t},this.handleContextMenu=(t,e)=>{const{xAccessor:n,chartConfigs:o,plotData:i,xScale:s}=this.state,r=sa(o,t),a=la(s,n,t,i);this.triggerEvent("contextmenu",{mouseXY:t,currentItem:a,currentCharts:r},e)},this.calculateStateForDomain=t=>{const{fullData:e,xAccessor:n,displayXAccessor:o,xScale:i,chartConfigs:s,plotData:r,filterData:a}=this.state,{postCalculator:l}=this.props,{plotData:c,domain:h}=a(e,t,n,i,{currentPlotData:r,currentDomain:i.domain()}),u=l(c),d=i.copy().domain(h),p=aa(s,{plotData:u,xAccessor:n,displayXAccessor:o,fullData:e},d.domain());return{xScale:d,plotData:u,chartConfigs:p}},this.pinchZoomHelper=(t,e)=>{const{xScale:n}=t,{fullData:o,xScale:i,chartConfigs:s,plotData:r,xAccessor:a,displayXAccessor:l,filterData:c}=this.state,{postCalculator:h}=this.props,u=((t,e,n)=>{const{topLeft:o,bottomRight:i}=El(t),{topLeft:s,bottomRight:r}=El(e),a=n.range()[1],l=Math.round(-(i[0]*s[0]-o[0]*r[0])/(o[0]-i[0])),c=Math.round(a+((a-i[0])*(a-s[0])-(a-o[0])*(a-r[0]))/(a-o[0]-(a-i[0])));return[Math.round(-l*o[0]/(-l+s[0])),Math.round(a-(c-a)*(a-o[0])/(c+(a-s[0])))].map(n.invert)})(t,e,n),{plotData:d,domain:p}=c(o,u,a,n,{currentPlotData:r,currentDomain:i.domain()}),f=h(d),g=i.copy().domain(p),m=e.touch1Pos;return{chartConfigs:aa(s,{plotData:f,xAccessor:a,displayXAccessor:l,fullData:o},g.domain()),xScale:g,plotData:f,mouseXY:m,currentItem:la(g,a,m,f)}},this.handlePinchZoom=(t,e,n)=>{if(!this.waitingForPinchZoomAnimationFrame){this.waitingForPinchZoomAnimationFrame=!0;const o=this.pinchZoomHelper(t,e);this.triggerEvent("pinchzoom",o,n),this.finalPinch=e,requestAnimationFrame((()=>{this.clearBothCanvas(),this.draw({trigger:"pinchzoom"}),this.waitingForPinchZoomAnimationFrame=!1}))}},this.handlePinchZoomEnd=(t,e)=>{const{fullData:n,xAccessor:o=zl.defaultProps.xAccessor}=this.state;if(this.finalPinch){const i=this.pinchZoomHelper(t,this.finalPinch),{xScale:s}=i,{onLoadAfter:r,onLoadBefore:a}=this.props;this.triggerEvent("pinchzoom",i,e),this.finalPinch=void 0,this.clearThreeCanvas(),this.setState(i,(()=>Fl(n,s,o,r,a)))}},this._zoomXImpl=(t,e,n,o,i)=>{this.triggerEvent("zoom",Object.assign({xScale:n,plotData:t,chartConfigs:e},o,{show:!0}),i);const{fullData:s,xAccessor:r}=this.state,{onZoom:a,onLoadAfter:l,onLoadBefore:c}=this.props;a((t||[]).length),this._isDidUpdateRedraw=!0,this.setState({xScale:n,plotData:t,chartConfigs:e},(()=>Fl(s,n,r,l,c)))},this.handleZoom=(t,e,n)=>{if(this.panInProgress)return;const{xAccessor:o,xScale:i,plotData:s}=this.state,{zoomMultiplier:r,zoomAnchor:a}=this.props,l=a({xScale:i,xAccessor:o,mouseXY:e,plotData:s}),c=((t,e)=>t>0?1*e:1/e)(t,r),h=((t,e,n)=>{const o=t(e);return t.range().map((t=>o+(t-o)*n)).map((e=>t.invert(e)))})(i,l,c),{xScale:u,plotData:d,chartConfigs:p}=this.calculateStateForDomain(h);this.mutableState={mouseXY:e,currentItem:la(u,o,e,d),currentCharts:sa(p,e)},this._zoomXImpl(d,p,u,this.mutableState,n)},this.xAxisZoom=t=>{const{xScale:e,plotData:n,chartConfigs:o}=this.calculateStateForDomain(t);this._zoomXImpl(n,o,e)},this.yAxisZoom=(t,e)=>{this._isDidUpdateRedraw=!0,this.setState({chartConfigs:Ll(this.state.chartConfigs,t,e)})},this.draw=t=>{this.subscriptions.forEach((e=>{e.draw&&e.draw(t)}))},this.redraw=()=>{this.clearThreeCanvas(),this.draw({force:!0})},this.panHelper=(t,e,n,o)=>{let{dx:i,dy:s}=n;const{fullData:r,xAccessor:a,displayXAccessor:l,chartConfigs:c,filterData:h}=this.state,{postCalculator:u}=this.props,d=e.range().map((t=>t-i)).map((t=>e.invert(t))),{plotData:p,domain:f}=h(r,d,a,e,{currentPlotData:this.hackyWayToStopPanBeyondBounds__plotData,currentDomain:this.hackyWayToStopPanBeyondBounds__domain,ignoreThresholds:!0}),g=e.copy().domain(f),m=u(p),y=la(g,a,t,m),x=aa(c,{plotData:m,xAccessor:a,displayXAccessor:l,fullData:r},g.domain(),s,o);return{xScale:g,plotData:m,chartConfigs:x,mouseXY:t,currentCharts:sa(x,t),currentItem:y}},this.handlePan=(t,e,n,o,i)=>{if(!this.waitingForPanAnimationFrame){var s,r;this.waitingForPanAnimationFrame=!0,this.hackyWayToStopPanBeyondBounds__plotData=null!=(s=this.hackyWayToStopPanBeyondBounds__plotData)?s:this.state.plotData,this.hackyWayToStopPanBeyondBounds__domain=null!=(r=this.hackyWayToStopPanBeyondBounds__domain)?r:this.state.xScale.domain();const a=this.panHelper(t,e,n,o);this.hackyWayToStopPanBeyondBounds__plotData=a.plotData,this.hackyWayToStopPanBeyondBounds__domain=a.xScale.domain(),this.panInProgress=!0,this.triggerEvent("pan",a,i),this.mutableState={mouseXY:a.mouseXY,currentItem:a.currentItem,currentCharts:a.currentCharts},requestAnimationFrame((()=>{this.waitingForPanAnimationFrame=!1,this.clearBothCanvas(),this.draw({trigger:"pan"})}))}},this.handlePanEnd=(t,e,n,o,i)=>{const s=this.panHelper(t,e,n,o),{xScale:r,plotData:a,chartConfigs:l}=s;this.hackyWayToStopPanBeyondBounds__plotData=null,this.hackyWayToStopPanBeyondBounds__domain=null,this.panInProgress=!1,this.triggerEvent("panend",s,i),requestAnimationFrame((()=>{const{fullData:t,xAccessor:e}=this.state,{onLoadAfter:n,onLoadBefore:o}=this.props;this._isDidUpdateRedraw=!0,this.setState({xScale:r,plotData:a,chartConfigs:l},(()=>Fl(t,r,e,n,o)))}))},this.handleMouseDown=(t,e,n)=>{this.triggerEvent("mousedown",this.mutableState,n)},this.handleMouseEnter=t=>{this.triggerEvent("mouseenter",{show:!0},t)},this.handleMouseMove=(t,e,n)=>{if(!this.waitingForMouseMoveAnimationFrame){this.waitingForMouseMoveAnimationFrame=!0;const{chartConfigs:e,plotData:o,xScale:i,xAccessor:s}=this.state,r=sa(e,t),a=la(i,s,t,o);this.triggerEvent("mousemove",{show:!0,mouseXY:t,prevMouseXY:this.prevMouseXY,currentItem:a,currentCharts:r},n),this.prevMouseXY=t,this.mutableState={mouseXY:t,currentItem:a,currentCharts:r},requestAnimationFrame((()=>{this.clearMouseCanvas(),this.draw({trigger:"mousemove"}),this.waitingForMouseMoveAnimationFrame=!1}))}},this.handleMouseLeave=t=>{this.triggerEvent("mouseleave",{show:!1},t),this.clearMouseCanvas(),this.draw({trigger:"mouseleave"})},this.handleDragStart=(t,e)=>{let{startPos:n}=t;this.triggerEvent("dragstart",{startPos:n},e)},this.handleDrag=(t,e)=>{let{startPos:n,mouseXY:o}=t;const{chartConfigs:i,plotData:s,xScale:r,xAccessor:a}=this.state,l=sa(i,o),c=la(r,a,o,s);this.triggerEvent("drag",{startPos:n,mouseXY:o,currentItem:c,currentCharts:l},e),this.mutableState={mouseXY:o,currentItem:c,currentCharts:l},requestAnimationFrame((()=>{this.clearMouseCanvas(),this.draw({trigger:"drag"})}))},this.handleDragEnd=(t,e)=>{let{mouseXY:n}=t;this.triggerEvent("dragend",{mouseXY:n},e),requestAnimationFrame((()=>{this.clearMouseCanvas(),this.draw({trigger:"dragend"})}))},this.handleClick=(t,e)=>{this.triggerEvent("click",this.mutableState,e),requestAnimationFrame((()=>{this.clearMouseCanvas(),this.draw({trigger:"click"})}))},this.handleDoubleClick=(t,e)=>{this.triggerEvent("dblclick",{},e)},this.resetYDomain=t=>{const{chartConfigs:e}=this.state;let n=!1;const o=e.map((e=>null!=t&&e.id!==t||jr(e.yScale.domain(),e.realYDomain)?e:(n=!0,Object.assign({},e,{yScale:e.yScale.domain(e.realYDomain),yPanEnabled:!1}))));n&&(this.clearThreeCanvas(),this.setState({chartConfigs:o}))},this.state=Nl(t)}clearBothCanvas(){const{axes:t,mouseCoord:e}=this.getCanvasContexts()||{};t&&e&&Br([t,e],this.props.ratio)}clearMouseCanvas(){const{mouseCoord:t}=this.getCanvasContexts()||{};t&&Br([t],this.props.ratio)}clearThreeCanvas(){const{axes:t,mouseCoord:e,bg:n}=this.getCanvasContexts()||{};t&&e&&n&&Br([t,e,n],this.props.ratio)}cancelDrag(){var t;null==(t=this.eventCaptureRef.current)||t.cancelDrag(),this.triggerEvent("dragcancel")}triggerEvent(t,e,n){this.subscriptions.forEach((o=>{const i=Object.assign({},this.state,{subscriptions:this.subscriptions});o.listener(t,e,i,n)}))}getContextValues(){const{margin:t,ratio:e}=this.props,{fullData:n,plotData:o,chartConfigs:i,xScale:s,xAccessor:r,displayXAccessor:a}=this.state,{width:l,height:c}=jl(this.props);return{chartId:-1,margin:t,ratio:e,plotData:o,chartConfigs:i,xScale:s,xAccessor:r,displayXAccessor:a,width:l,height:c,fullData:n||[],xAxisZoom:this.xAxisZoom,yAxisZoom:this.yAxisZoom,getCanvasContexts:this.getCanvasContexts,redraw:this.redraw,subscribe:this.subscribe,unsubscribe:this.unsubscribe,generateSubscriptionId:this.generateSubscriptionId,getMutableState:this.getMutableState,amIOnTop:this.amIOnTop,setCursorClass:this.setCursorClass}}static getDerivedStateFromProps(t,e){const{recentProps:n={},chartConfigs:o,plotData:i,xAccessor:s,xScale:r}=e,a=((t,e)=>!Al.every((n=>jr(t[n],e[n]))))(n,t);let l;if(Ol(r,s,i)&&!a&&jr(n.xExtents,t.xExtents)){const[n,i]=r.domain(),s=Sr(e.fullData),a=Tl(t),{xAccessor:c}=a,h=c(s);l=((t,e,n,o,i)=>{const{fullData:s,xScale:r,xAccessor:a,displayXAccessor:l,filterData:c}=t,h=Sr(s),u=a(h),[d,p]=e.domain(),{postCalculator:f,children:g,padding:m,flipXScale:y,maintainPointsPerPixelOnResize:x}=n,v=Pl(y),b=jl(n),w=_l(r,b,m,v);let k;if(!o||p>=u){const[t,n]=e.range(),[o,i]=w.range(),r=(i-o)/(n-t)*(p.valueOf()-d.valueOf()),l=c(s,[x?p.valueOf()-r:d,p],a,w,{fallbackStart:d,fallbackEnd:{lastItem:h,lastItemX:e(u)}});k=l.plotData,w.domain(l.domain)}else if(o&&p<u){const t=e(u)-e.range()[1],[n,o]=e.range().map((e=>e+t)).map((t=>e.invert(t))),i=c(s,[n,o],a,w);k=i.plotData,w.domain(i.domain)}const S=f(k),C=ia(b,g,i),D=aa(C,{plotData:S,xAccessor:a,displayXAccessor:l,fullData:s},w.domain());return{xScale:w,xAccessor:a,chartConfigs:D,plotData:S,fullData:s,filterData:c}})(a,r,t,h<=i&&h>=n,o)}else l=Nl(t);return Object.assign({},l,{recentProps:t})}componentDidUpdate(t){this._isDidUpdateRedraw?(this._isDidUpdateRedraw=!1,this.redraw()):t===this.props||this.panInProgress||(clearTimeout(this._asyncRedrawId),this._asyncRedrawId=setTimeout((()=>{this.redraw()}),0)),t.data!==this.props.data&&this.triggerEvent("dataupdated",{chartConfigs:this.state.chartConfigs,xScale:this.state.xScale,plotData:this.state.plotData})}shouldComponentUpdate(){return!this.panInProgress}render(){const{disableInteraction:t,disablePan:e,disableZoom:n,useCrossHairStyleCursor:o,height:i,width:s,margin:r,className:a,zIndex:l,defaultFocus:c,ratio:h,mouseMoveEvent:u,onClick:d,onDoubleClick:p,children:f}=this.props,{plotData:g,xScale:m,xAccessor:y,chartConfigs:x}=this.state,v=jl(this.props),b=Ol(m,y,g),w=o&&b;return(0,M.jsx)(Il.Provider,{value:this.getContextValues(),children:(0,M.jsxs)("div",{className:a,style:{position:"relative",width:s,height:i},onClick:d,onDoubleClick:p,children:[(0,M.jsx)(dl,{refEl:this.canvasContainerRef,ratio:h,width:s,height:i,style:{height:i,zIndex:l,width:s}}),(0,M.jsxs)("svg",{className:a,width:s,height:i,style:{position:"absolute",zIndex:l+5},children:[Ml(),(0,M.jsx)(gl,{dimensions:v,chartConfig:x}),(0,M.jsxs)("g",{transform:"translate("+(r.left+.5)+", "+(r.top+.5)+")",children:[(0,M.jsx)(hl,{ref:this.eventCaptureRef,useCrossHairStyleCursor:w,mouseMove:u&&b,zoom:!n&&b,pan:!e&&b,width:v.width,height:v.height,chartConfig:x,xScale:m,xAccessor:y,focus:c,disableInteraction:t,getAllPanConditions:this.getAllPanConditions,onContextMenu:this.handleContextMenu,onClick:this.handleClick,onDoubleClick:this.handleDoubleClick,onMouseDown:this.handleMouseDown,onMouseMove:this.handleMouseMove,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onDragStart:this.handleDragStart,onDrag:this.handleDrag,onDragComplete:this.handleDragEnd,onZoom:this.handleZoom,onPinchZoom:this.handlePinchZoom,onPinchZoomEnd:this.handlePinchZoomEnd,onPan:this.handlePan,onPanEnd:this.handlePanEnd}),(0,M.jsx)("g",{className:La,children:f})]})]})]})})}}zl.defaultProps={clamp:!1,className:ba,defaultFocus:!0,disablePan:!1,disableInteraction:!1,disableZoom:!1,flipXScale:!1,maintainPointsPerPixelOnResize:!0,margin:{top:0,right:40,bottom:40,left:0},minPointsPerPxThreshold:.01,mouseMoveEvent:!0,postCalculator:lo,padding:0,pointsPerPxThreshold:2,useCrossHairStyleCursor:!0,xAccessor:lo,xExtents:[Wn,Rn],zIndex:1,zoomAnchor:t=>{let{xScale:e,xAccessor:n,mouseXY:o,plotData:i}=t;return n(la(e,n,o,i))},zoomMultiplier:1.1,onZoom:()=>{}};const Rl=t=>{const e=(0,i.useRef)(null);return(0,i.useLayoutEffect)((()=>{e.current=t})),(0,i.useCallback)((function(){const t=e.current;return t?t(...arguments):void 0}),[])},Wl=Object.assign,Hl={mouseleave:"mousemove",panend:"pan",pinchzoom:"pan",mousedown:"mousemove",click:"mousemove",contextmenu:"mousemove",dblclick:"mousemove",dragstart:"drag",dragend:"drag",dragcancel:"drag",zoom:"zoom"},Xl=t=>t.mouseCoord,Yl=(t,e)=>e?{clipPath:"url(#chart-area-clip"+(void 0!==t?"-"+t:"")+")"}:void 0,Ul=(0,i.memo)((t=>{const{refEl:e,isHover:n,clip:o=!0,edgeClip:s=!1,canvasToDraw:r=Xl,canvasDraw:a,svgDraw:l,preCanvasDraw:c,postCanvasDraw:h,updateMoreProps:u,getMoreProps:d}=t,p=(0,i.useContext)(Il),{chartId:f}=(0,i.useContext)($r),g=(0,i.useMemo)((()=>(null==p.generateSubscriptionId?void 0:p.generateSubscriptionId())||0),[]),m=N(),{getCanvasContexts:y,subscribe:x,unsubscribe:v}=p,b=(0,i.useRef)({chartId:p.chartId,hovering:!1,currentCharts:[],chartConfigs:p.chartConfigs,fullData:p.fullData,plotData:p.plotData,xScale:p.xScale,xAccessor:p.xAccessor}),w=(0,i.useRef)(!1),k=(0,i.useRef)(!1),S=(0,i.useRef)(!1),C=(0,i.useCallback)(((t,e)=>{Wl(e,t||{}),null==u||u(t,e)}),[u]),D=(0,i.useCallback)((()=>{const{chartConfigs:t,xAccessor:e,displayXAccessor:n,width:o,height:i,fullData:s}=p,r=null==d?void 0:d(b.current);return Object.assign({displayXAccessor:n,width:o,height:i},b.current,{fullData:s,chartConfigs:t,xAccessor:e},r,{chartConfig:Vr(t,f)})}),[p,d,f]);(0,i.useImperativeHandle)(e,(()=>({getMoreProps:D})),[D]);const A=(0,i.useCallback)((t=>void 0!==n&&n(D(),t)),[n,D]),j=(0,i.useCallback)(((t,e)=>{null==c||c(t,e)}),[c]),T=(0,i.useCallback)(((t,e)=>{null==h||h(t,e)}),[h]),_=Rl(((e,n)=>{const o=Hl[e]||e;if(t.drawOn.includes(o)&&(!t.shouldTypeProceed||t.shouldTypeProceed(e,b.current)))switch(e){case"zoom":case"mouseenter":break;case"mouseleave":b.current.hovering=!1,t.onUnHover&&t.onUnHover(n,D());break;case"contextmenu":t.onContextMenu&&t.onContextMenu(n,D()),b.current.hovering&&t.onContextMenuWhenHover&&t.onContextMenuWhenHover(n,D());break;case"mousedown":t.onMouseDown&&t.onMouseDown(n,D());break;case"click":{const{onClick:e,onClickOutside:o,onClickWhenHover:i}=t,s=D();s.hovering&&void 0!==i?i(n,s):void 0!==o&&o(n,s),void 0!==e&&e(n,s);break}case"mousemove":{const e=b.current.hovering;b.current.hovering=A(n);const{amIOnTop:o,setCursorClass:i}=p;b.current.hovering&&!t.selected&&o(g)&&void 0!==t.onHover?(i("react-financial-charts-pointer-cursor"),S.current=!0):b.current.hovering&&t.selected&&o(g)?(i(t.interactiveCursorClass),S.current=!0):e&&!b.current.hovering&&S.current&&(S.current=!1,i(null));const s=D();b.current.hovering&&!e&&t.onHover&&t.onHover(n,s),e&&!b.current.hovering&&t.onUnHover&&t.onUnHover(n,s),t.onMouseMove&&t.onMouseMove(n,s);break}case"dblclick":{const e=D();t.onDoubleClick&&t.onDoubleClick(n,e),b.current.hovering&&t.onDoubleClickWhenHover&&t.onDoubleClickWhenHover(n,e);break}case"pan":b.current.hovering=!1,t.onPan&&t.onPan(n,D());break;case"panend":t.onPanEnd&&t.onPanEnd(n,D());break;case"dragstart":if(F().draggable){const{amIOnTop:e}=p;e(g)&&(w.current=!0,void 0!==t.onDragStart&&t.onDragStart(n,D()))}break;case"drag":w.current&&t.onDrag&&t.onDrag(n,D());break;case"dragend":w.current&&t.onDragComplete&&t.onDragComplete(n,D()),w.current=!1;break;case"dragcancel":if(w.current||S.current){const{setCursorClass:t}=p;t(null)}break;default:return}})),P=Rl(((t,e,n,o)=>{e&&C(e,b.current),k.current=!0,_(t,o),k.current=!1})),E=(0,i.useCallback)((()=>{if(void 0===a||void 0===r)return;const t=D(),e=null==y?void 0:y();if(void 0===e)return;const n=r(e);void 0!==n&&(j(n,t),a(n,t),T(n,t))}),[r,a,y,j,T,D]),O=Rl((e=>{let{trigger:n,force:o=!1}=e;const i=Hl[n]||n;(t.drawOn.indexOf(i)>-1||t.selected||o)&&(void 0===a?m():E())})),F=Rl((()=>({draggable:!!(b.current.hovering&&(t.selected||t.enableDragOnHover)),panEnabled:!t.disablePan})));return(0,i.useEffect)((()=>{const{setCursorClass:e}=p;t.selected&&b.current.hovering?(S.current=!0,e(t.interactiveCursorClass)):(S.current=!1,e(null))}),[t.selected]),(0,i.useEffect)((()=>{void 0===a||k.current||(C(void 0,b.current),E())})),(0,i.useEffect)((()=>(x(g,{chartId:f,clip:o,edgeClip:s,listener:P,draw:O,getPanConditions:F}),()=>{v(g),S.current&&p.setCursorClass(null)})),[f,g,s,o]),void 0!==a||void 0===l?null:(0,M.jsx)("g",{style:Yl(f,o),children:l(D())})})),Bl=["refComp","drawOn"],Zl=Array.isArray,Vl=["drag","dragend"],ql=(t,e,n,o,i)=>{t.beginPath(),t.rect(e,n,o,i),t.clip()},Gl=[],$l=t=>{let{refComp:e,drawOn:n=Gl}=t,o=D(t,Bl);const s=(0,i.useContext)($r),{clip:r,edgeClip:a,disablePan:l}=o,{chartId:c,ratio:h,margin:{left:u,right:d,top:p}}=s,f=(0,i.useCallback)(((t,e)=>{const n=Vr(e.chartConfigs,c);if(!n)return;t.save();const{width:o,height:i,origin:s}=n,l=.5*h,f=l+s[0]+u,g=l+s[1]+p;t.setTransform(1,0,0,1,0,0),t.scale(h,h),a&&ql(t,-1,g-10,o+u+d+1,i+20),t.translate(f,g),r&&ql(t,-1,-1,o+1,i+1)}),[u,d,p,h,r,a,c]),g=(0,i.useCallback)(((t,e)=>{t.restore()}),[]),m=(0,i.useCallback)(((t,e)=>{const{chartConfig:n}=t||e;if(n&&Zl(n)&&(e.chartConfig=n.find((t=>t.id===c))),e.chartConfig){const{origin:[n,o]}=e.chartConfig,{mouseXY:i,startPos:s}=t;if(i){const[t,s]=i;e.mouseXY=[t-n,s-o]}if(s){const[t,i]=s;e.startPos=[t-n,i-o]}}}),[c]),y=(0,i.useCallback)(((t,e)=>{if(l&&("mousemove"===t||"click"===t))return!0;const{currentCharts:n}=e||{};return!n||-1!==Vl.indexOf(t)||n.indexOf(c)>-1}),[l,c]);return(0,M.jsx)(Ul,Object.assign({},o,{refEl:e,drawOn:n,preCanvasDraw:f,postCanvasDraw:g,updateMoreProps:m,shouldTypeProceed:y}))};class Kl extends i.Component{constructor(){super(...arguments),this.ref=(0,i.createRef)(),this.clicked=!1,this.dragHappened=!1,this.state={startPosition:null},this.handleDragEnd=t=>{const e=r(this.ref);if(e){if(!this.dragHappened)if(this.clicked){const n=ha(t,e),{onDoubleClick:o}=this.props;void 0!==o&&o(t,n)}else this.clicked=!0,setTimeout((()=>{this.clicked=!1}),300);va(Er(e)).on(Ir,null).on(Lr,null).on(zr,null).on(Rr,null),this.setState({startPosition:null})}},this.handleDrag=t=>{const e=r(this.ref);if(!e)return;this.dragHappened=!0;const{getMouseDelta:n,inverted:o}=this.props,{startPosition:i}=this.state;if(null!==i){const{startScale:s,startXY:r}=i,a=n(r,ha(t,e)),l=Hn(s.range());if(void 0===l)return;const c=s.range().map((t=>o?t-Nr(t-l)*a:t+Nr(t-l)*a)),h=c.map(s.invert);if(Nr(Sr(s.range())-Dr(s.range()))===Nr(Sr(c)-Dr(c))){const{axisZoomCallback:t}=this.props;void 0!==t&&t(h)}}},this.handleDragStartTouch=t=>{const e=r(this.ref);if(!e)return;this.dragHappened=!1;const n=this.props.getScale();if(1===t.touches.length&&void 0!==n.invert){va(Er(e)).on(zr,this.handleDrag).on(Rr,this.handleDragEnd);const o=Yr(Hr(t.touches[0]),t);this.setState({startPosition:{startScale:n,startXY:o}})}},this.handleDragStartMouse=t=>{t.preventDefault();const e=r(this.ref);if(!e)return;this.dragHappened=!1;const n=this.props.getScale();if(void 0!==n.invert){va(Er(e)).on(Ir,this.handleDrag,!1).on(Lr,this.handleDragEnd,!1);const o=Ur(t);this.setState({startPosition:{startXY:o,startScale:n}})}},this.handleRightClick=t=>{t.stopPropagation(),t.preventDefault();const e=r(this.ref),{onContextMenu:n}=this.props;if(!e||!n)return;const o=e.getBoundingClientRect(),i=Ur(t,o);va(Er(e)).on(Ir,null).on(Lr,null),this.setState({startPosition:null}),n(t,i)}}render(){const{bg:t,className:e,zoomCursorClassName:n}=this.props,o=null===this.state.startPosition?Pa:n||"";return(0,M.jsx)("rect",{ref:this.ref,className:za+" "+o+" "+e,x:t.x,y:t.y,height:t.h,width:t.w,opacity:0,onContextMenu:this.handleRightClick,onMouseDown:this.handleDragStartMouse,onTouchStart:this.handleDragStartTouch})}}Kl.defaultProps={inverted:!0,className:""};const Jl=Kl,Ql=t=>t.axes,tc=t=>t.mouseCoord;function ec(t,e,n,o){if(isNaN(e)||isNaN(n))return t;var i,s,r,a,l,c,h,u,d,p=t._root,f={data:o},g=t._x0,m=t._y0,y=t._x1,x=t._y1;if(!p)return t._root=f,t;for(;p.length;)if((c=e>=(s=(g+y)/2))?g=s:y=s,(h=n>=(r=(m+x)/2))?m=r:x=r,i=p,!(p=p[u=h<<1|c]))return i[u]=f,t;if(a=+t._x.call(null,p.data),l=+t._y.call(null,p.data),e===a&&n===l)return f.next=p,i?i[u]=f:t._root=f,t;do{i=i?i[u]=new Array(4):t._root=new Array(4),(c=e>=(s=(g+y)/2))?g=s:y=s,(h=n>=(r=(m+x)/2))?m=r:x=r}while((u=h<<1|c)==(d=(l>=r)<<1|a>=s));return i[d]=p,i[u]=f,t}function nc(t,e,n,o,i){this.node=t,this.x0=e,this.y0=n,this.x1=o,this.y1=i}function oc(t){return t[0]}function ic(t){return t[1]}function sc(t,e,n){var o=new rc(null==e?oc:e,null==n?ic:n,NaN,NaN,NaN,NaN);return null==t?o:o.addAll(t)}function rc(t,e,n,o,i,s){this._x=t,this._y=e,this._x0=n,this._y0=o,this._x1=i,this._y1=s,this._root=void 0}function ac(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var lc=sc.prototype=rc.prototype;function cc(t){return()=>t}lc.copy=function(){var t,e,n=new rc(this._x,this._y,this._x0,this._y0,this._x1,this._y1),o=this._root;if(!o)return n;if(!o.length)return n._root=ac(o),n;for(t=[{source:o,target:n._root=new Array(4)}];o=t.pop();)for(var i=0;i<4;++i)(e=o.source[i])&&(e.length?t.push({source:e,target:o.target[i]=new Array(4)}):o.target[i]=ac(e));return n},lc.add=function(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return ec(this.cover(e,n),e,n,t)},lc.addAll=function(t){var e,n,o,i,s=t.length,r=new Array(s),a=new Array(s),l=1/0,c=1/0,h=-1/0,u=-1/0;for(n=0;n<s;++n)isNaN(o=+this._x.call(null,e=t[n]))||isNaN(i=+this._y.call(null,e))||(r[n]=o,a[n]=i,o<l&&(l=o),o>h&&(h=o),i<c&&(c=i),i>u&&(u=i));if(l>h||c>u)return this;for(this.cover(l,c).cover(h,u),n=0;n<s;++n)ec(this,r[n],a[n],t[n]);return this},lc.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,o=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,s=(o=Math.floor(e))+1;else{for(var r,a,l=i-n||1,c=this._root;n>t||t>=i||o>e||e>=s;)switch(a=(e<o)<<1|t<n,(r=new Array(4))[a]=c,c=r,l*=2,a){case 0:i=n+l,s=o+l;break;case 1:n=i-l,s=o+l;break;case 2:i=n+l,o=s-l;break;case 3:n=i-l,o=s-l}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=o,this._x1=i,this._y1=s,this},lc.data=function(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t},lc.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},lc.find=function(t,e,n){var o,i,s,r,a,l,c,h=this._x0,u=this._y0,d=this._x1,p=this._y1,f=[],g=this._root;for(g&&f.push(new nc(g,h,u,d,p)),null==n?n=1/0:(h=t-n,u=e-n,d=t+n,p=e+n,n*=n);l=f.pop();)if(!(!(g=l.node)||(i=l.x0)>d||(s=l.y0)>p||(r=l.x1)<h||(a=l.y1)<u))if(g.length){var m=(i+r)/2,y=(s+a)/2;f.push(new nc(g[3],m,y,r,a),new nc(g[2],i,y,m,a),new nc(g[1],m,s,r,y),new nc(g[0],i,s,m,y)),(c=(e>=y)<<1|t>=m)&&(l=f[f.length-1],f[f.length-1]=f[f.length-1-c],f[f.length-1-c]=l)}else{var x=t-+this._x.call(null,g.data),v=e-+this._y.call(null,g.data),b=x*x+v*v;if(b<n){var w=Math.sqrt(n=b);h=t-w,u=e-w,d=t+w,p=e+w,o=g.data}}return o},lc.remove=function(t){if(isNaN(s=+this._x.call(null,t))||isNaN(r=+this._y.call(null,t)))return this;var e,n,o,i,s,r,a,l,c,h,u,d,p=this._root,f=this._x0,g=this._y0,m=this._x1,y=this._y1;if(!p)return this;if(p.length)for(;;){if((c=s>=(a=(f+m)/2))?f=a:m=a,(h=r>=(l=(g+y)/2))?g=l:y=l,e=p,!(p=p[u=h<<1|c]))return this;if(!p.length)break;(e[u+1&3]||e[u+2&3]||e[u+3&3])&&(n=e,d=u)}for(;p.data!==t;)if(o=p,!(p=p.next))return this;return(i=p.next)&&delete p.next,o?(i?o.next=i:delete o.next,this):e?(i?e[u]=i:delete e[u],(p=e[0]||e[1]||e[2]||e[3])&&p===(e[3]||e[2]||e[1]||e[0])&&!p.length&&(n?n[d]=p:this._root=p),this):(this._root=i,this)},lc.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},lc.root=function(){return this._root},lc.size=function(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t},lc.visit=function(t){var e,n,o,i,s,r,a=[],l=this._root;for(l&&a.push(new nc(l,this._x0,this._y0,this._x1,this._y1));e=a.pop();)if(!t(l=e.node,o=e.x0,i=e.y0,s=e.x1,r=e.y1)&&l.length){var c=(o+s)/2,h=(i+r)/2;(n=l[3])&&a.push(new nc(n,c,h,s,r)),(n=l[2])&&a.push(new nc(n,o,h,c,r)),(n=l[1])&&a.push(new nc(n,c,i,s,h)),(n=l[0])&&a.push(new nc(n,o,i,c,h))}return this},lc.visitAfter=function(t){var e,n=[],o=[];for(this._root&&n.push(new nc(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var i=e.node;if(i.length){var s,r=e.x0,a=e.y0,l=e.x1,c=e.y1,h=(r+l)/2,u=(a+c)/2;(s=i[0])&&n.push(new nc(s,r,a,h,u)),(s=i[1])&&n.push(new nc(s,h,a,l,u)),(s=i[2])&&n.push(new nc(s,r,u,h,c)),(s=i[3])&&n.push(new nc(s,h,u,l,c))}o.push(e)}for(;e=o.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},lc.x=function(t){return arguments.length?(this._x=t,this):this._x},lc.y=function(t){return arguments.length?(this._y=t,this):this._y};const hc=Math.random;function uc(){return 1e-6*(hc()-.5)}const dc=t=>"function"==typeof t,pc=Math.sqrt,fc=t=>t.x+t.vx,gc=t=>t.y+t.vy;const mc={value:()=>{}},yc=Object.prototype.hasOwnProperty;function xc(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];let o,i,s=e.length,r={};for(o=0;o<s;++o){if(!(i=e[o]+"")||i in r||/[\s.]/.test(i))throw new Error("illegal type: "+i);r[i]=[]}return new vc(r)}function vc(t){this._=t}function bc(t,e){let n,o=0,i=t.length;for(;o<i;++o)if((n=t[o]).name===e)return n.value}function wc(t,e,n){let o=0,i=t.length;for(;o<i;++o)if(t[o].name===e){t[o]=mc,t=t.slice(0,o).concat(t.slice(o+1));break}return null!=n&&t.push({name:e,value:n}),t}vc.prototype=xc.prototype={constructor:vc,on:function(t,e){let n,o=this._,i=(a=o,(t+"").trim().split(/^|\s+/).map((function(t){let e="",n=t.indexOf(".");if(n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!yc.call(a,t))throw new Error("unknown type: "+t);return{type:t,name:e}}))),s=-1,r=i.length;var a;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++s<r;)if(n=(t=i[s]).type)o[n]=wc(o[n],t.name,e);else if(null==e)for(n in o)o[n]=wc(o[n],t.name,null);return this}for(;++s<r;)if((n=(t=i[s]).type)&&(n=bc(o[n],t.name)))return n},copy:function(){let t={},e=this._;for(let n in e)t[n]=e[n].slice();return new vc(t)},call:function(t,e){let n,o,i,s;if((n=arguments.length-2)>0)for(i=new Array(n),s=0;s<n;++s)i[s]=arguments[s+2];if(!yc.call(this._,t))throw new Error("unknown type: "+t);for(o=this._[t],s=0,n=o.length;s<n;++s)o[s].value.apply(e,i)},apply:function(t,e,n){if(!yc.call(this._,t))throw new Error("unknown type: "+t);let o=this._[t],i=0,s=o.length;for(;i<s;++i)o[i].value.apply(e,n)}};const kc=xc;let Sc,Cc,Dc=0,Ac=0,Mc=0,jc=0,Tc=0,_c=0,Pc=t=>"object"==typeof t,Nc=Pc(performance)&&performance.now?performance:Date,Ec=Pc(window)&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Oc(){return Tc||(Ec(Fc),Tc=Nc.now()+_c)}function Fc(){Tc=0}function Ic(){this._call=this._time=this._next=null}function Lc(t,e,n){const o=new Ic;return o.restart(t,e,n),o}function zc(){Tc=(jc=Nc.now())+_c,Dc=Ac=0;try{!function(){Oc(),++Dc;let t,e=Sc;for(;e;)(t=Tc-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Dc}()}finally{Dc=0,function(){let t,e,n=Sc,o=1/0;for(;n;)n._call?(o>n._time&&(o=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:Sc=e);Cc=t,Wc(o)}(),Tc=0}}function Rc(){let t=Nc.now(),e=t-jc;e>1e3&&(_c-=e,jc=t)}function Wc(t){if(Dc)return;Ac&&(Ac=clearTimeout(Ac)),t-Tc>24?(t<1/0&&(Ac=setTimeout(zc,t-Nc.now()-_c)),Mc&&(Mc=clearInterval(Mc))):(Mc||(jc=Nc.now(),Mc=setInterval(Rc,1e3)),Dc=1,Ec(zc))}Ic.prototype=Lc.prototype={constructor:Ic,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?Oc():+n)+(null==e?0:+e),this._next||Cc===this||(Cc?Cc._next=this:Sc=this,Cc=this),this._call=t,this._time=n,Wc()},stop:function(){this._call&&(this._call=null,this._time=1/0,Wc())}};let Hc=Math.PI*(3-Math.sqrt(5));const Xc=t=>"function"==typeof t;const Yc=["orient","innerTickSize","tickFormat","tickPadding","tickLabelFill","tickStrokeWidth","tickStrokeDasharray","fontSize","fontFamily","fontWeight","showTicks","showTickLabel","ticks","tickValues","tickStrokeStyle","tickInterval","tickIntervalFunction"],Uc=t=>"top"===t||"left"===t?-1:1,Bc=t=>"bottom"===t||"top"===t,Zc=(t,e)=>{const{orient:n,innerTickSize:o=4,tickFormat:i,tickPadding:s=4,tickLabelFill:r,tickStrokeWidth:a,tickStrokeDasharray:l,fontSize:c=12,fontFamily:h,fontWeight:u,showTicks:d,showTickLabel:p,ticks:f,tickValues:g,tickStrokeStyle:m,tickInterval:y,tickIntervalFunction:x}=t,v=D(t,Yc);let b;if(void 0!==g)b="function"==typeof g?g(e.domain()):g;else if(void 0!==y){const[t,n]=e.domain(),o=function(){let t=+(arguments.length<=0?void 0:arguments[0]),e=+(arguments.length<=1?void 0:arguments[1]),n=arguments.length,o=n<2?(e=t,t=0,1):n<3?1:+(arguments.length<=2?void 0:arguments[2]),i=new Array(n),s=-1;for(n=0|Xn(0,Yn((e-t)/o));++s<n;)i[s]=t+s*o;return i}(t,n,(n-t)/y);b=x?x(t,n,y):o}else b=void 0!==e.ticks?e.ticks(f):e.domain();const w=void 0===i?e.tickFormat(f):t=>i(t)||"",k=Uc(n),S=Math.max(o,0)+s;let C,A,M,j;if(Bc(n)){const t=k*o,n=k*S;if(A=k<0?"0em":".71em",M=k<0?0:.71*c,j="middle",C=b.map((o=>{const i=Math.round(e(o));return{value:o,x1:i,y1:0,x2:i,y2:t,labelX:i,labelY:n}})),d){const t=C.map((t=>({id:t.value,value:t.value,fy:t.y2,origX:t.x1}))),e=function(t){let e,n=1,o=.001,i=1-Math.pow(o,1/300),s=0,r=.6,a=new Map,l=Lc(h),c=kc("tick","end");function h(){u(),c.call("tick",e),n<o&&(l.stop(),c.call("end",e))}function u(o){let l,c,h,u=t.length;for(void 0===o&&(o=1),h=0;h<o;++h)for(n+=(s-n)*i,a.forEach((function(t){t(n)})),l=0;l<u;++l)c=t[l],null==c.fx?c.x+=c.vx*=r:(c.x=c.fx,c.vx=0),null==c.fy?c.y+=c.vy*=r:(c.y=c.fy,c.vy=0);return e}function d(){let e,n=0,o=t.length;for(;n<o;++n){if(e=t[n],e.index=n,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){const t=10*Math.sqrt(n),o=n*Hc;e.x=t*Math.cos(o),e.y=t*Math.sin(o)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function p(e){return e.initialize&&e.initialize(t),e}return null==t&&(t=[]),d(),e={tick:u,restart:function(){return l.restart(h),e},stop:function(){return l.stop(),e},nodes:function(n){return arguments.length?(t=n,d(),a.forEach(p),e):t},alpha:function(t){return arguments.length?(n=+t,e):n},alphaMin:function(t){return arguments.length?(o=+t,e):o},alphaDecay:function(t){return arguments.length?(i=+t,e):+i},alphaTarget:function(t){return arguments.length?(s=+t,e):s},velocityDecay:function(t){return arguments.length?(r=1-t,e):1-r},force:function(t,n){return arguments.length>1?(null==n?a.delete(t):a.set(t,p(n)),e):a.get(t)},find:function(e,n,o){let i,s,r,a,l,c=0,h=t.length;for(null==o?o=1/0:o*=o,c=0;c<h;++c)a=t[c],i=e-a.x,s=n-a.y,r=i*i+s*s,r<o&&(l=a,o=r);return l},on:function(t,n){return arguments.length>1?(c.on(t,n),e):c.on(t)}}}(t).force("x",function(t){let e,n,o,i=cc(.1);Xc(t)||(t=cc(null==t?0:+t));const s=t=>{let i,s=0,r=e.length;for(;s<r;++s)i=e[s],i.vx+=(o[s]-i.x)*n[s]*t},r=()=>{if(!e)return;let s,r=e.length;for(n=new Array(r),o=new Array(r),s=0;s<r;++s)n[s]=isNaN(o[s]=+t(e[s],s,e))?0:+i(e[s],s,e)};return s.initialize=t=>{e=t,r()},s.strength=function(){return arguments.length?(i=Xc(arguments.length<=0?void 0:arguments[0])?arguments.length<=0?void 0:arguments[0]:cc(+(arguments.length<=0?void 0:arguments[0])),r(),s):i},s.x=function(){return arguments.length?(t=Xc(arguments.length<=0?void 0:arguments[0])?arguments.length<=0?void 0:arguments[0]:cc(+(arguments.length<=0?void 0:arguments[0])),r(),s):t},s}((t=>t.origX)).strength(1)).force("collide",function(t){let e,n,o=1,i=1;dc(t)||(t=cc(null==t?1:+t));const s=t=>{if(t.data)return t.r=n[t.data.index];let e;for(e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)},r=()=>{let t,r,a,l,c,h,u,d,p=e.length,f=(t,e,n,i,s)=>{let r=t.data,d=t.r,p=h+d;if(!r)return e>l+p||i<l-p||n>c+p||s<c-p;if(r.index>a.index){let t=l-r.x-r.vx,e=c-r.y-r.vy,n=t*t+e*e;n<p*p&&(0===t&&(t=uc(),n+=t*t),0===e&&(e=uc(),n+=e*e),n=(p-(n=pc(n)))/n*o,a.vx+=(t*=n)*(p=(d*=d)/(u+d)),a.vy+=(e*=n)*p,r.vx-=t*(p=1-p),r.vy-=e*p)}};for(d=0;d<i;++d)for(r=sc(e,fc,gc).visitAfter(s),t=0;t<p;++t)a=e[t],h=n[a.index],u=h*h,l=a.x+a.vx,c=a.y+a.vy,r.visit(f)},a=()=>{if(!e)return;let o,i,s=e.length;for(n=new Array(s),o=0;o<s;++o)i=e[o],n[i.index]=+t(i,o,e)};return r.initialize=t=>{e=t,a()},r.iterations=t=>t.length?(i=+t[0],r):i,r.strength=t=>t.length?(o=+t[0],r):o,r.radius=e=>e.length?(t=dc(e[0])?e[0]:cc(+e[0]),a(),r):t,r}(22)).stop();for(let t=0;t<100;++t)e.tick();C=Bn(C,t).map((t=>{const[e,n]=t;return Math.abs(n.x-n.origX)>.01?Object.assign({},e,{x2:n.x,labelX:n.x}):e}))}}else C=b.map((t=>{const n=Math.round(e(t));return{value:t,x1:0,y1:n,x2:k*o,y2:n,labelX:k*S,labelY:n}})),A=".32em",M=.32*c,j=k<0?"end":"start";return Object.assign({orient:n,ticks:C,scale:e,tickStrokeStyle:m,tickLabelFill:r||m,tickStrokeWidth:a,tickStrokeDasharray:l,dy:A,canvas_dy:M,textAnchor:j,fontSize:c,fontFamily:h,fontWeight:u,format:w,showTickLabel:p},v)},Vc=(t,e)=>{const{ticks:n,tickStrokeStyle:o}=e;void 0!==o&&(t.strokeStyle=o,t.fillStyle=o),n.forEach((n=>{((t,e,n)=>{const{tickStrokeWidth:o,tickStrokeDasharray:i}=n;t.beginPath(),t.moveTo(e.x1,e.y1),t.lineTo(e.x2,e.y2),t.lineWidth=o;const s=mo(i);t.setLineDash(s),t.stroke()})(t,n,e)}))},qc=(t,e,n)=>{e.ticks.forEach((o=>{((t,e,n,o)=>{const{orient:i,gridLinesStrokeWidth:s,gridLinesStrokeStyle:r,gridLinesStrokeDasharray:a}=n,{chartConfig:l}=o,{height:c,width:h}=l;void 0!==r&&(t.strokeStyle=r),t.beginPath();const u=Uc(i);Bc(i)?(t.moveTo(e.x1,0),t.lineTo(e.x2,u*c)):(t.moveTo(0,e.y1),t.lineTo(u*h,e.y2)),t.lineWidth=s;const d=mo(a);t.setLineDash(d),t.stroke()})(t,o,e,n)}))},Gc=["pan"],$c=t=>{const{getScale:e,edgeClip:n,zoomEnabled:o,zoomCursorClassName:s,bg:a,className:l,inverted:c,transform:h,getMouseDelta:u,axisZoomCallback:d,onContextMenu:p,onDoubleClick:f}=t,g=(0,i.useRef)(),m=(0,i.useCallback)((()=>e(r(g).getMoreProps())),[e]);return(0,M.jsxs)("g",{transform:br(h),children:[o?(0,M.jsx)(Jl,{className:l,zoomCursorClassName:s,inverted:c,bg:a,axisZoomCallback:d,getScale:m,getMouseDelta:u,onContextMenu:p,onDoubleClick:f}):null,(0,M.jsx)($l,{refComp:g,clip:!1,edgeClip:n,canvasToDraw:Ql,canvasDraw:(n,o)=>{((t,e)=>{t.save(),t.translate(e[0],e[1])})(n,h);const i=Zc(t,e(o));t.showTicks&&Vc(n,i),t.showGridLines&&qc(n,i,o),t.showTickLabel&&((t,e)=>{const{textAnchor:n,tickLabelFill:o}=e;t.font=(t=>{let{fontWeight:e,fontSize:n,fontFamily:o}=t;return e+" "+n+"px "+o})(e),void 0!==o&&(t.fillStyle=o),t.textAlign="middle"===n?"center":n,e.ticks.forEach((n=>{((t,e,n)=>{const{canvas_dy:o,format:i}=n,s=i(e.value);t.beginPath(),t.fillText(s,e.labelX,e.labelY+o)})(t,n,e)}))})(n,i),t.showDomain&&((t,e)=>{const{orient:n,outerTickSize:o,strokeStyle:i,strokeWidth:s,range:r}=e,a=Uc(n);t.lineWidth=s,t.strokeStyle=i,t.beginPath();const l=Dr(r),c=Sr(r),h=a*o;Bc(n)?(t.moveTo(l,h),t.lineTo(l,0),t.lineTo(c,0),t.lineTo(c,h)):(t.moveTo(h,l),t.lineTo(0,l),t.lineTo(0,c),t.lineTo(h,c)),t.stroke()})(n,t),n.restore()},drawOn:Gc})]})},Kc=["getMouseDelta","outerTickSize","showTicks","strokeStyle","strokeWidth","zoomEnabled"],Jc=t=>t<400?2:t<500?6:8,Qc=t=>{let{xScale:e,width:n}=t;return e.invert?((t,e)=>{const n=e.map(t.invert);return t.copy().domain(n).range(e)})(e,[0,n]):e},th="#000000",eh={axisAt:"bottom",className:Wa,domainClassName:Xa,fontFamily:rl,fontSize:12,fontWeight:400,getMouseDelta:(t,e)=>t[0]-e[0],gridLinesStrokeStyle:"#e2e4ec",gridLinesStrokeWidth:1,orient:"bottom",outerTickSize:0,innerTickSize:4,showDomain:!0,showGridLines:!1,showTicks:!0,showTickLabel:!0,strokeStyle:th,strokeWidth:1,tickPadding:4,tickLabelFill:th,tickStrokeStyle:th,xZoomHeight:25,zoomEnabled:!0,zoomCursorClassName:Fa},nh=t=>{const e=s(t,eh),{xAxisZoom:n,chartConfig:{width:o,height:r}}=(0,i.useContext)($r),{getMouseDelta:a,outerTickSize:l,showTicks:c,strokeStyle:h,strokeWidth:u,zoomEnabled:d}=e,p=D(e,Kc),f=((t,e,n)=>{const{axisAt:o,xZoomHeight:i,orient:s,ticks:r}=t,a="top"===s?-i:0,l=i,c=e,h=((t,e)=>"top"===t?0:"bottom"===t?e:"middle"===t?e/2:t)(o,n);return{bg:{x:0,y:a,h:l,w:c},transform:[0,h],range:[0,e],getScale:Qc,ticks:null!=r?r:Jc(e)}})(e,o,r);return(0,M.jsx)($c,Object.assign({},p,f,{getMouseDelta:a,outerTickSize:l,showTicks:c,strokeStyle:h,strokeWidth:u,zoomEnabled:d&&c,axisZoomCallback:n}))},oh=["getMouseDelta","outerTickSize","strokeStyle","strokeWidth"],ih=["zoomEnabled"],sh=t=>t<300?2:t<500?6:8,rh=t=>{const{yScale:e,flipYScale:n,height:o}=t.chartConfig;if(e.invert){const t=n?[0,o]:[o,0],i=t.map(e.invert);return e.copy().domain(i).range(t)}return e},ah="#000000",lh={axisAt:"right",className:Ha,domainClassName:Xa,fontFamily:rl,fontSize:12,fontWeight:400,getMouseDelta:(t,e)=>t[1]-e[1],gridLinesStrokeStyle:"#e2e4ec",gridLinesStrokeWidth:1,innerTickSize:4,outerTickSize:0,orient:"right",showDomain:!0,showGridLines:!1,showTicks:!0,showTickLabel:!0,strokeStyle:ah,strokeWidth:1,tickPadding:4,tickLabelFill:ah,tickStrokeStyle:ah,yZoomWidth:40,zoomEnabled:!0,zoomCursorClassName:Oa},ch=t=>{const e=s(t,lh),n=(0,i.useContext)($r),{chartId:o,chartConfig:{width:r,height:a,yPan:l},yAxisZoom:c}=n,h=(0,i.useCallback)((t=>{c(o,t)}),[o,c]),{getMouseDelta:u,outerTickSize:d,strokeStyle:p,strokeWidth:f}=e,g=D(e,oh),m=((t,e,n,o)=>{const{axisAt:i,ticks:s,yZoomWidth:r,orient:a}=t,l=((t,e)=>"left"===t?0:"right"===t?e:"middle"===t?e/2:t)(i,e);return{transform:[l,0],range:[0,n],bg:{x:"left"===a?-r:0,y:0,h:n,w:r},getScale:rh,ticks:null!=s?s:sh(n),zoomEnabled:o}})(e,r,a,l),{zoomEnabled:y}=m,x=D(m,ih);return(0,M.jsx)($c,Object.assign({},g,x,{edgeClip:!0,outerTickSize:d,strokeStyle:p,strokeWidth:f,zoomEnabled:t.zoomEnabled&&y,getMouseDelta:u,axisZoomCallback:h}))};function hh(t){this._context=t}function uh(t){return new hh(t)}function dh(t,e){return e||(e=t.slice(0)),t.raw=e,t}var ph,fh,gh,mh,yh,xh,vh,bh,wh,kh,Sh,Ch,Dh,Ah;hh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};const Mh=Math.PI,jh=2*Mh,Th=1e-6,_h=jh-Th;function Ph(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}class Nh{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==t?Ph:function(t){let e=Math.floor(t);if(!(e>=0))throw new Error("invalid digits: "+t);if(e>15)return Ph;const n=10**e;return function(t){this._+=t[0];for(let e=1,o=t.length;e<o;++e)this._+=Math.round(arguments[e]*n)/n+t[e]}}(t)}moveTo(t,e){this._append(ph||(ph=dh(["M",",",""])),this._x0=this._x1=+t,this._y0=this._y1=+e)}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append(fh||(fh=dh(["Z"]))))}lineTo(t,e){this._append(gh||(gh=dh(["L",",",""])),this._x1=+t,this._y1=+e)}quadraticCurveTo(t,e,n,o){this._append(mh||(mh=dh(["Q",",",",",",",""])),+t,+e,this._x1=+n,this._y1=+o)}bezierCurveTo(t,e,n,o,i,s){this._append(yh||(yh=dh(["C",",",",",",",",",",",""])),+t,+e,+n,+o,this._x1=+i,this._y1=+s)}arcTo(t,e,n,o,i){if(t=+t,e=+e,n=+n,o=+o,(i=+i)<0)throw new Error("negative radius: "+i);let s=this._x1,r=this._y1,a=n-t,l=o-e,c=s-t,h=r-e,u=c*c+h*h;if(null===this._x1)this._append(xh||(xh=dh(["M",",",""])),this._x1=t,this._y1=e);else if(u>Th)if(Math.abs(h*a-l*c)>Th&&i){let d=n-s,p=o-r,f=a*a+l*l,g=d*d+p*p,m=Math.sqrt(f),y=Math.sqrt(u),x=i*Math.tan((Mh-Math.acos((f+u-g)/(2*m*y)))/2),v=x/y,b=x/m;Math.abs(v-1)>Th&&this._append(bh||(bh=dh(["L",",",""])),t+v*c,e+v*h),this._append(wh||(wh=dh(["A",",",",0,0,",",",",",""])),i,i,+(h*d>c*p),this._x1=t+b*a,this._y1=e+b*l)}else this._append(vh||(vh=dh(["L",",",""])),this._x1=t,this._y1=e);else;}arc(t,e,n,o,i,s){if(t=+t,e=+e,s=!!s,(n=+n)<0)throw new Error("negative radius: "+n);let r=n*Math.cos(o),a=n*Math.sin(o),l=t+r,c=e+a,h=1^s,u=s?o-i:i-o;null===this._x1?this._append(kh||(kh=dh(["M",",",""])),l,c):(Math.abs(this._x1-l)>Th||Math.abs(this._y1-c)>Th)&&this._append(Sh||(Sh=dh(["L",",",""])),l,c),n&&(u<0&&(u=u%jh+jh),u>_h?this._append(Ch||(Ch=dh(["A",",",",0,1,",",",",","A",",",",0,1,",",",",",""])),n,n,h,t-r,e-a,n,n,h,this._x1=l,this._y1=c):u>Th&&this._append(Dh||(Dh=dh(["A",",",",0,",",",",",",",""])),n,n,+(u>=Mh),h,this._x1=t+n*Math.cos(i),this._y1=e+n*Math.sin(i)))}rect(t,e,n,o){this._append(Ah||(Ah=dh(["M",",","h","v","h","Z"])),this._x0=this._x1=+t,this._y0=this._y1=+e,n=+n,+o,-n)}toString(){return this._}}const Eh=t=>"function"==typeof t,Oh=t=>void 0===t;function Fh(t){return function(){return t}}const Ih=Array.from;function Lh(t){return"object"==typeof t&&"length"in t?t:Ih(t)}const zh=Math.floor;function Rh(t){let e=3;return t.digits=function(n){if(Oh(n))return e;if(null==n)e=null;else{const t=zh(n);if(!(t>=0))throw new RangeError("invalid digits: "+n);e=t}return t},()=>new Nh(e)}function Wh(t){return t[0]}function Hh(t){return t[1]}const Xh=(t,e)=>Eh(t)?t:void 0===t?e:Fh(t);function Yh(t,e){let n=Fh(!0),o=null,i=uh,s=null,r=Rh(a);function a(a){let l,c,h,u=(a=Lh(a)).length,d=!1;for(null==o&&(s=i(h=r())),l=0;l<=u;++l)!(l<u&&n(c=a[l],l,a))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+t(c,l,a),+e(c,l,a));if(h)return s=null,h+""||null}return t=Xh(t,Wh),e=Xh(e,Hh),a.x=e=>Oh(e)?t:(t=Eh(e)?e:Fh(+e),a),a.y=t=>Oh(t)?e:(e=Eh(t)?t:Fh(+t),a),a.defined=t=>Oh(t)?n:(n=Eh(t)?t:Fh(!!t),a),a.curve=t=>Oh(t)?i:(i=t,null!=o&&(s=i(o)),a),a.context=t=>Oh(t)?o:(null==t?o=s=null:s=i(o=t),a),a}const Uh=(t,e)=>Eh(t)?t:Oh(t)?e:Fh(+t);const Bh=()=>{},Zh=Math.round,Vh=Math.pow,qh=(t,e,n,o)=>Yh().x((e=>Zh(t(n(e))))).y((t=>Zh(e(o(t))))),Gh={className:ol,strokeWidth:1,strokeOpacity:1,hoverStrokeWidth:4,fill:"none",stroke:"#4682b4",strokeDasharray:"Solid",defined:t=>!isNaN(t),hoverTolerance:6,highlightOnHover:!1,connectNulls:!1,onClick:Bh,onDoubleClick:Bh,onContextMenu:Bh},$h=t=>{const e=s(t,Gh),{yAccessor:n,hoverTolerance:o,highlightOnHover:i,stroke:r,strokeOpacity:a,strokeWidth:l,strokeDasharray:c,hoverStrokeWidth:h,defined:u,connectNulls:d,interpolation:p,style:f,fill:g,className:m,canvasClip:y,onClick:x,onDoubleClick:v,onContextMenu:b,onHover:w,onUnHover:k}=e,S=i||w||k?{isHover:t=>{if(!i)return!1;const{mouseXY:e,currentItem:s,xScale:r,xAccessor:a,plotData:l,chartConfig:{yScale:c,origin:h}}=t,[u,d]=h,p=t=>[r(a(t))+u,c(n(t))+d],[f,g]=e,m=o,{left:y,right:x}=Mr(l,r.invert(f),a);if(y===x){const[t,e]=p(s);return Vh(f-t,2)+Vh(g-e,2)<Vh(m,2)}{const t=l[y],e=l[x],[n,o]=p(t),[i,s]=p(e),r=(s-o)/(i-n),a=Zh(r*f+(-1*r*n+o));return g>=a-m&&g<=a+m}},drawOn:["mousemove","pan"],canvasToDraw:tc}:{drawOn:["pan"],canvasToDraw:Ql};return(0,M.jsx)($l,Object.assign({svgDraw:t=>{const{xAccessor:e,xScale:o,plotData:i,hovering:s,chartConfig:y}=t,{yScale:x}=y,v=qh(o,x,e,n);return p&&v.curve(p),d||v.defined((t=>u(n(t)))),(0,M.jsx)("path",{style:f,className:m+" "+(r?"":il),d:v(i),stroke:r,strokeOpacity:a,strokeWidth:s?h:l,strokeDasharray:go(c),fill:g})},canvasDraw:(t,e)=>{const{hovering:o,xScale:i,xAccessor:s,plotData:f,chartConfig:{yScale:g}}=e;y&&(t.save(),y(t,e)),t.lineWidth=o?h:l,t.strokeStyle=kr(r,a),t.setLineDash(go(c).split(","));const m=qh(i,g,s,n);p&&m.curve(p),d||m.defined((t=>u(n(t)))),t.beginPath(),m.context(t)(f),t.stroke(),y&&t.restore()},onClickWhenHover:x,onDoubleClickWhenHover:v,onContextMenuWhenHover:b,onHover:w,onUnHover:k},S))},Kh=Math.round,Jh=(t,e)=>Kh(t(e)),Qh=(t,e,n,o,i,s,r)=>"horizontal"===t?{x1:0,y1:Jh(n,i),x2:s,y2:Jh(n,i)}:{x1:Jh(e,o),y1:0,x2:Jh(e,o),y2:r},tu=["pan"],eu=t=>{const{type:e="horizontal",className:n=ol,opacity:o=.5,stroke:i="#000000",strokeWidth:s=1,strokeDasharray:r="Solid",yValue:a,xValue:l}=t;return(0,M.jsx)($l,{svgDraw:t=>{const{width:c,height:h,xScale:u,chartConfig:{yScale:d}}=t,p=Qh(e,u,d,l,a,c,h);return(0,M.jsx)("line",Object.assign({className:n,strokeDasharray:go(r),stroke:i,strokeWidth:s,strokeOpacity:o},p))},canvasDraw:(t,n)=>{const{xScale:c}=n,{chartConfig:{yScale:h,width:u,height:d}}=n,{x1:p,y1:f,x2:g,y2:m}=Qh(e,c,h,l,a,u,d);t.beginPath(),t.strokeStyle=kr(i,o),t.lineWidth=s,t.setLineDash((t=>go(t).split(","))(r)),t.moveTo(p,f),t.lineTo(g,m),t.stroke()},canvasToDraw:Ql,drawOn:tu})},nu=t=>{let{children:e}=t;return(0,M.jsx)($l,{svgDraw:e})},ou=Math.round,iu=Math.random,su=()=>"rsi-clip-"+String(ou(1e4*iu()*1e4)),ru=t=>({clipPath:"url(#"+t+")"});class au extends i.Component{constructor(t){super(t),this.topAndBottomClip=(t,e)=>{const{overSold:n,overBought:o}=this.props,{chartConfig:{yScale:i,width:s}}=e;t.beginPath(),t.rect(0,i(n),s,i(o)-i(n)),t.clip()},this.mainClip=(t,e)=>{const{overSold:n,overBought:o}=this.props,{chartConfig:{yScale:i,width:s,height:r}}=e;t.beginPath(),t.rect(0,0,s,i(n)),t.rect(0,i(o),s,r-i(o)),t.clip()},this.renderClip=t=>{const{overSold:e,overBought:n}=this.props,{chartConfig:{yScale:o,width:i,height:s}}=t;return(0,M.jsxs)("defs",{children:[(0,M.jsx)("clipPath",{id:this.clipPathId1,children:(0,M.jsx)("rect",{x:0,y:o(e),width:i,height:o(n)-o(e)})}),(0,M.jsxs)("clipPath",{id:this.clipPathId2,children:[(0,M.jsx)("rect",{x:0,y:0,width:i,height:o(e)}),(0,M.jsx)("rect",{x:0,y:o(n),width:i,height:s-o(n)})]})]})},this.clipPathId1=su(),this.clipPathId2=su()}render(){const{className:t,opacity:e,stroke:n,strokeDasharray:o,strokeWidth:i,yAccessor:s,overSold:r,middle:a,overBought:l}=this.props,c=ru(this.clipPathId1),h=ru(this.clipPathId2);return(0,M.jsxs)("g",{className:t,children:[(0,M.jsx)(nu,{children:this.renderClip}),(0,M.jsx)(eu,{opacity:e.top,stroke:n.top,strokeWidth:i.top,strokeDasharray:o.top,yValue:r}),(0,M.jsx)(eu,{opacity:e.middle,stroke:n.middle,strokeWidth:i.middle,strokeDasharray:o.middle,yValue:a}),(0,M.jsx)(eu,{opacity:e.bottom,stroke:n.bottom,strokeWidth:i.bottom,strokeDasharray:o.bottom,yValue:l}),(0,M.jsx)($h,{style:c,canvasClip:this.topAndBottomClip,className:t,yAccessor:s,stroke:n.insideThreshold||n.line,strokeWidth:i.insideThreshold,strokeDasharray:o.line}),(0,M.jsx)($h,{style:h,canvasClip:this.mainClip,className:t,yAccessor:s,stroke:n.outsideThreshold||n.line,strokeWidth:i.outsideThreshold,strokeDasharray:o.line})]})}}const lu="ShortDash";au.defaultProps={className:Za,stroke:{line:"#000000",top:"#b8b2bb",middle:"#8795a1",bottom:"#b8c2cc",outsideThreshold:"#b300b3",insideThreshold:"#ffccff"},opacity:{top:1,middle:1,bottom:1},strokeDasharray:{line:"Solid",top:lu,middle:lu,bottom:lu},strokeWidth:{outsideThreshold:1,insideThreshold:1,top:1,middle:1,bottom:1},overSold:70,middle:50,overBought:30};const cu=()=>new Map,hu=(t,e,n)=>{t.set(e,n)};function uu(){let t,e,n=[],o=[];const i=(e,o,s,r)=>{if(o>=n.length)return null==t?e:e.sort(t);let a,l,c,h=-1,u=e.length,d=n[o++],p=new Map,f=s();for(;++h<u;)c=p.get(a=d(l=e[h])+""),c?c.push(l):p.set(a,[l]);return p.forEach(((t,e)=>{r(f,e,i(t,o,s,r))})),f},s=(t,e)=>{if(++e>n.length)return t;let i,r=o[e-1];return i=[],t.forEach(((t,n)=>{i.push({key:n,values:s(t,e)})})),null==r?i:i.sort(((t,e)=>r(t.key,e.key)))};return e={entries:t=>s(i(t,0,cu,hu),0),key:t=>(n.push(t),e),sortKeys:t=>(o[n.length-1]=t,e),sortValues:n=>(t=n,e)}}const du=Math.round,pu=Math.floor,fu=Math.max,gu=Math.abs,mu=t=>t.map(((t,e)=>{const{className:n,wick:o}=t,{stroke:i,x:s,y1:r,y2:a,y3:l,y4:c}=o;return(0,M.jsx)("path",{className:n,stroke:i,d:"M"+s+","+r+" L"+s+","+a+" M"+s+","+l+" L"+s+","+c},e)})),yu=(t,e)=>{const{opacity:n,candleStrokeWidth:o}=t;return e.map(((t,e)=>{const{className:i,fill:s,stroke:r,x:a,y:l,width:c,height:h}=t;return t.width<=1?(0,M.jsx)("line",{className:i,stroke:s,x1:a,y1:l,x2:a,y2:l+h},e):0===t.height?(0,M.jsx)("line",{stroke:s,x1:a,y1:l,x2:a+c,y2:l+h},e):(0,M.jsx)("rect",{className:i,fillOpacity:n,fill:s,stroke:r,strokeWidth:o,x:a,y:l,width:c,height:h},e)}))},xu=(t,e,n,o,i)=>{const{classNames:s,yAccessor:r,fill:a,stroke:l,wickStroke:c,width:h}=t,u=po(c),d=po(s),p=po(a),f=po(l),g=.5*po(h)(t,{xScale:n,xAccessor:e,plotData:i}),m=g>.7?du(g):pu(g);let y=[];for(let t=0;t<i.length;t++){const s=i[t],a=t>0?i[t-1]:{};if(null!=r(s).close){const t=du(n(e(s))),i=r(s),l=r(a),c=du(o(fu(i.open,i.close))),h=du(gu(o(i.open)-o(i.close)));y.push({x:t-m,y:c,wick:{stroke:u(i,l),x:t,y1:du(o(i.high)),y2:c,y3:c+h,y4:du(o(i.low))},height:h,width:2*m,className:d(i),fill:p(i,l),stroke:f(i,l),direction:i.close-i.open})}}return y},vu=["pan"],bu={className:qa,wickClassName:Ga,candleClassName:$a,yAccessor:t=>({open:t.open,high:t.high,low:t.low,close:t.close}),classNames:t=>t.close>t.open?Ka:Ja,width:Ar,wickStroke:"#000000",fill:t=>t.close>t.open?"#6ba583":"#ff0000",stroke:"#000000",candleStrokeWidth:.5,widthRatio:.8,opacity:.5,clip:!0},wu=t=>{const e=s(t,bu),{className:n,wickClassName:o,candleClassName:i,clip:r}=e;return(0,M.jsx)($l,{clip:r,svgDraw:t=>{const{xAccessor:s,xScale:r,plotData:a,chartConfig:{yScale:l}}=t,c=xu(e,s,r,l,a);return(0,M.jsxs)("g",{className:n,children:[(0,M.jsx)("g",{className:o,children:mu(c)},"wicks"),(0,M.jsx)("g",{className:i,children:yu(e,c)},"candles")]})},canvasDraw:(t,n)=>{((t,e,n)=>{const{opacity:o,candleStrokeWidth:i}=e,{xAccessor:s,xScale:r,plotData:a,chartConfig:{yScale:l}}=n,c=xu(e,s,r,l,a);uu().key((t=>t.wick.stroke)).entries(c).forEach((e=>{const{key:n,values:o}=e;t.strokeStyle=n,t.fillStyle=n,o.forEach((e=>{const n=e.wick;t.fillRect(n.x-.5,n.y1,1,n.y2-n.y1),t.fillRect(n.x-.5,n.y3,1,n.y4-n.y3)}))})),uu().key((t=>t.stroke)).key((t=>t.fill)).entries(c).forEach((e=>{const{key:n,values:s}=e;"none"!==n&&(t.strokeStyle=n,t.lineWidth=i),s.forEach((e=>{const{key:i,values:s}=e,r=Cr(s).width<=1?i:kr(i,o);t.fillStyle=r,s.forEach((e=>{e.width<=1?t.fillRect(e.x-.5,e.y,1,e.height):0===e.height?t.fillRect(e.x,e.y-.5,e.width,1):(t.fillRect(e.x,e.y,e.width,e.height),"none"!==n&&t.strokeRect(e.x,e.y,e.width,e.height))}))}))}))})(t,e,n)},canvasToDraw:Ql,drawOn:vu})},ku=Math.round,Su=(t,e,n,o,i,s,r)=>function(t,e,n){let o=null,i=Fh(!0),s=null,r=uh,a=null,l=Rh(c);function c(c){let h,u,d,p,f,g=(c=Lh(c)).length,m=!1,y=new Array(g),x=new Array(g);for(null==s&&(a=r(f=l())),h=0;h<=g;++h){if(!(h<g&&i(p=c[h],h,c))===m)if(m=!m)u=h,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),d=h-1;d>=u;--d)a.point(y[d],x[d]);a.lineEnd(),a.areaEnd()}m&&(y[h]=+t(p,h,c),x[h]=+e(p,h,c),a.point(o?+o(p,h,c):y[h],n?+n(p,h,c):x[h]))}if(f)return a=null,f+""||null}function h(){return Yh().defined(i).curve(r).context(s)}return t=Uh(t,Wh),e=Uh(e,Fh(0)),n=Uh(n,Hh),c.x=e=>Oh(e)?t:(t=Eh(e)?e:Fh(+e),o=null,c),c.x0=e=>Oh(e)?t:(t=Eh(e)?e:Fh(+e),c),c.x1=t=>Oh(t)?o:(o=null==t?null:Eh(t)?t:Fh(+t),c),c.y=t=>Oh(t)?e:(e=Eh(t)?t:Fh(+t),n=null,c),c.y0=t=>Oh(t)?e:(e=Eh(t)?t:Fh(+t),c),c.y1=t=>Oh(t)?n:(n=null==t?null:Eh(t)?t:Fh(+t),c),c.lineX0=c.lineY0=()=>h().x(t).y(e),c.lineY1=()=>h().x(t).y(n),c.lineX1=()=>h().x(o).y(e),c.defined=t=>Oh(t)?i:(i=Eh(t)?t:Fh(!!t),c),c.curve=t=>Oh(t)?r:(r=t,null!=s&&(a=r(s)),c),c.context=t=>Oh(t)?s:(null==t?s=a=null:a=r(s=t),c),c}().defined((t=>e(o(t)))).x((t=>ku(i(n(t))))).y0((e=>po(t)(s,e,r))).y1((t=>ku(s(o(t))))),Cu=["pan"],Du=t=>!isNaN(t),Au=t=>Dr(t.range()),Mu=t=>{const{yAccessor:e,defined:n=Du,base:o=Au,style:i,className:s=ol,stroke:r,fill:a="none",opacity:l=1,interpolation:c,canvasGradient:h,canvasClip:u}=t;return(0,M.jsx)($l,{svgDraw:t=>{const{plotData:h,xScale:u,xAccessor:d,chartConfig:{yScale:p}}=t,f=Su(o,n,d,e,u,p,t);null!=c&&f.curve(c);const g=f(h),m=At(s,null==r&&il);return(0,M.jsx)("path",{className:m,style:i,stroke:r,fill:kr(a,l),d:g})},canvasDraw:(t,i)=>{const{xScale:s,plotData:d,xAccessor:p,chartConfig:{yScale:f}}=i;u&&(t.save(),u(t,i)),t.fillStyle=null==h?kr(a,l):h(i,t),t.strokeStyle=r,t.beginPath();const g=Su(o,n,p,e,s,f,i).context(t);null!=c&&g.curve(c),g(d),t.fill(),u&&t.restore()},canvasToDraw:Ql,drawOn:Cu})};class ju extends i.Component{constructor(){super(...arguments),this.yAccessorForTop=t=>{const{yAccessor:e}=this.props,n=e(t);return n&&n.top},this.yAccessorForMiddle=t=>{const{yAccessor:e}=this.props,n=e(t);return n&&n.middle},this.yAccessorForBottom=t=>{const{yAccessor:e}=this.props,n=e(t);return n&&n.bottom},this.yAccessorForScalledBottom=(t,e)=>{const{yAccessor:n}=this.props,o=n(e);return t(o&&o.bottom)}}render(){const{className:t,areaClassName:e,opacity:n,stroke:o,fill:i}=this.props;return(0,M.jsxs)("g",{className:t,children:[(0,M.jsx)($h,{yAccessor:this.yAccessorForTop,stroke:o.top,fill:"none"}),(0,M.jsx)($h,{yAccessor:this.yAccessorForMiddle,stroke:o.middle,fill:"none"}),(0,M.jsx)($h,{yAccessor:this.yAccessorForBottom,stroke:o.bottom,fill:"none"}),(0,M.jsx)(Mu,{className:e,yAccessor:this.yAccessorForTop,base:this.yAccessorForScalledBottom,opacity:n,stroke:"none",fill:i})]})}}ju.defaultProps={className:Ua,areaClassName:Ba,opacity:.2};const Tu=Array.isArray,_u=Math.round,Pu={baseAt:(t,e)=>Cr(e.range()),direction:"up",className:sl,stroke:!0,fill:"#4682b4",opacity:.5,width:Ar,widthRatio:.8,clip:!0,swapScales:!1},Nu=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];let o=[];const i=t=>o.map(((e,n)=>{const o=t.map((t=>{const n=[0,t[e]];return n.data=t,n}));return o.key=e,o.index=n,o}));return i.keys=t=>e.length?(o=t,i):o,i},Eu=t=>"y"+t,Ou=function(t,e,n,o,i,s,r,a){void 0===r&&(r=Nu),void 0===a&&(a=lo);const{baseAt:l,className:c,fill:h,stroke:u,spaceBetweenBar:d=0,width:p}=t,f=po(c),g=po(h),m=po(l),y=po(p)(t,{xScale:o,xAccessor:e,plotData:s}),x=_u(y),v=(x-d*(n.length-1))/n.length,b=1===x?0:.5*y,w=s.map((t=>{const o={appearance:{},x:e(t)};return n.forEach(((e,n)=>{const i=Eu(n),s={className:f(t,n),stroke:u?g(t,n):"none",fill:g(t,n)};o[i]=e(t),o.appearance[i]=s})),o})),k=n.map(((t,e)=>Eu(e))),S=r().keys(k)(w).map(((t,e)=>{const n=t.key;return t.map((t=>{const o=[t[0],t[1]];return o.data={i:e,x:t.data.x,appearance:t.data.appearance[n]},o}))})),C=(t=>{let e,n,o,i=t.length,s=-1,r=0;for(;++s<i;)r+=t[s].length;for(n=new Array(r);--i>=0;)for(o=t[i],e=o.length;--e>=0;)n[--r]=o[e];return n})(S).map((t=>{let e=i(t[1]),n=m(o,i,t.data)-i(t[1]-t[0]);return n<0&&(e+=n,n=-n),Object.assign({},t.data.appearance,{x:_u(o(t.data.x)-y/2),y:e,groupOffset:_u(b-(t.data.i>0?(v+d)*t.data.i:0)),groupWidth:_u(v),offset:_u(b),height:n,width:x})})).filter((t=>!isNaN(t.y)));return a(C)},Fu=t=>Tu(t)?t:[t],Iu=(t,e,n,o,i,s,r,a)=>{const{xAccessor:l,yAccessor:c,swapScales:h}=t,[u,d,p,f,g]=h?[Fu(l),c,i,o,r]:[Fu(c),e,o,i,a];return Ou(t,d,u,p,f,n,s,g)},Lu=t=>t.map((t=>Object.assign({},t,{x:t.y,y:t.x,height:t.width,width:t.height}))),zu=(t,e,n)=>{const{stroke:o,opacity:i}=e;uu().key((t=>t.fill)).entries(n).forEach((e=>{const{key:n,values:s}=e;Cr(s).width>1&&(t.strokeStyle=n),t.fillStyle=Cr(s).width<=1?n:kr(n,i),s.forEach((e=>{let{x:n,y:i,width:s,height:r}=e;s<=1?t.fillRect(n-.5,i,1,r):(t.fillRect(n,i,s,r),o&&t.strokeRect(n,i,s,r))}))}))},Ru=function(t,e,n,o,i){void 0===o&&(o=lo),void 0===i&&(i=Lu);const{xAccessor:s,plotData:r,xScale:a,chartConfig:{yScale:l}}=e,c=Iu(t,s,r,a,l,n,i,o);return Wu(t,c)},Wu=(t,e)=>{let{opacity:n}=t;return e.map(((t,e)=>{const{className:o,fill:i,stroke:s,x:r,y:a,width:l,height:c}=t;return l<=1?(0,M.jsx)("line",{className:o,stroke:i,x1:r,y1:a,x2:r,y2:a+c},e):(0,M.jsx)("rect",{className:o,fill:i,fillOpacity:n,stroke:s,x:r,y:a,width:l,height:c},e)}))},Hu=Math.round,Xu=Math.floor,Yu=(t,e)=>{const{baseAt:n,fill:o,stroke:i,yAccessor:s}=t,{xScale:r,xAccessor:a,plotData:l,chartConfig:{yScale:c}}=e,h=po(n),u=po(t.width)(t,{xScale:r,xAccessor:a,plotData:l}),d=Xu(.5*u),p=l.filter((t=>null!=s(t))).map(((t,e,n)=>{const l=n[e-1]||t,u=s(t),p=Hu(r(a(t)))-d;let f=c(u),g=h(r,c,t)-c(u);return g<0&&(f+=g,g=-g),{x:p,y:Hu(f),height:Hu(g),width:2*d,fill:o(t,l),stroke:i(t,l)}}));return p},Uu=["pan"],Bu=t=>{const e=s(t,Pu),{swapScales:n,clip:o}=e;return(0,M.jsx)($l,{clip:o,svgDraw:t=>(0,M.jsx)("g",{children:n?Ru(e,t,Nu):Wu(e,Yu(e,t))}),canvasToDraw:Ql,canvasDraw:(t,o)=>{n?function(t,e,n,o,i,s){void 0===i&&(i=lo),void 0===s&&(s=Lu);const{xAccessor:r,plotData:a,xScale:l,chartConfig:{yScale:c}}=n,h=Iu(e,r,a,l,c,o,s,i);zu(t,e,h)}(t,e,o,Nu):zu(t,e,Yu(e,o))},drawOn:Uu})},Zu=["strokeDasharray"],Vu=Array.isArray,qu=Math.round,Gu=(t,e)=>{const{mouseXY:n,currentItem:o,show:i,height:s,width:r}=e,{customX:a,stroke:l,opacity:c,strokeDasharray:h}=t;if(!i||null==o)return null;const u={x1:0,x2:r,y1:n[1],y2:n[1],stroke:l,strokeDasharray:h,opacity:c},d=a(t,e);return[u,{x1:d,x2:d,y1:0,y2:s,stroke:l,strokeDasharray:h,opacity:c}]},$u={customX:(t,e)=>{let{xScale:n,xAccessor:o,currentItem:i,mouseXY:s}=e;return t.snapX?qu(n(o(i))):s[0]},opacity:.3,snapX:!0,stroke:"#000000",strokeDasharray:"ShortDash"},Ku=t=>{const e=s(t,$u),n=(0,i.useContext)(Il);return(0,M.jsx)(Ul,{clip:!1,canvasDraw:(t,o)=>{const i=Gu(e,o);if(Vu(i)){const{margin:e,ratio:o}=n,s=.5*o+e.left,r=.5*o+e.top;t.save(),t.setTransform(1,0,0,1,0,0),t.scale(o,o),t.translate(s,r),i.forEach((e=>{const n=go(e.strokeDasharray).split(",").map((t=>+t));t.strokeStyle=kr(e.stroke,e.opacity),t.setLineDash(n),t.beginPath(),t.moveTo(e.x1,e.y1),t.lineTo(e.x2,e.y2),t.stroke()})),t.restore()}},canvasToDraw:tc,drawOn:["mousemove","pan","drag"],svgDraw:n=>{const o=Gu(e,n);return Vu(o)?(0,M.jsx)("g",{className:At(Qa,t.className),children:o.map(((t,e)=>{let{strokeDasharray:n}=t,o=D(t,Zu);return(0,M.jsx)("line",Object.assign({strokeDasharray:go(n)},o),e)}))}):null}})};function Ju(t){const{coordinate:e,show:n,type:o,orient:i,edgeAt:s,hideLine:r,lineStrokeDasharray:a}=t,{fill:l,opacity:c,fontFamily:h,fontSize:u,textFill:d,lineStroke:p,lineOpacity:f}=t,{stroke:g,strokeOpacity:m,strokeWidth:y}=t,{arrowWidth:x,rectWidth:v,rectHeight:b,rectRadius:w}=t,{x1:k,y1:S,x2:C,y2:D,dx:A}=t;if(!n)return null;let M,j;if(null!=e){let t,n,r,a;if("horizontal"===o)t=A+("right"===i?s+1:s-v-1),n=S-b/2-y,r=A+("right"===i?s+v/2:s-v/2),a=S;else{const e="bottom"===i?y-1:1-y;t=k-v/2,n=("bottom"===i?s:s-b)+e,r=k,a=("bottom"===i?s+b/2:s-b/2)+e}M={edgeXRect:t,edgeYRect:n,rectHeight:b+y,rectWidth:v,rectRadius:w,fill:l,opacity:c,arrowWidth:x,stroke:g,strokeOpacity:m,strokeWidth:y},j={edgeXText:r,edgeYText:a,textAnchor:"middle",fontFamily:h,fontSize:u,textFill:d,displayCoordinate:e}}return{coordinateBase:M,coordinate:j,orient:i,line:r?void 0:{opacity:f,stroke:p,strokeDasharray:a,x1:k,y1:S,x2:C,y2:D}}}const Qu=["mousemove","pan","drag"],td=(t,e)=>n=>{const o=s(n,e);return(0,M.jsx)($l,{clip:!1,svgDraw:e=>{const n=t(o,e);return null==n?null:function(t){const{className:e}=t,n=Ju(t);if(null===n)return null;let o,i,s;if(n.line&&(o=(0,M.jsx)("line",{className:tl,strokeOpacity:n.line.opacity,stroke:n.line.stroke,strokeDasharray:go(n.line.strokeDasharray),x1:n.line.x1,y1:n.line.y1,x2:n.line.x2,y2:n.line.y2})),n.coordinateBase){const{rectWidth:t,rectHeight:e,arrowWidth:o}=n.coordinateBase,r="left"===n.orient?"M0,0L0,"+e+"L"+t+","+e+"L"+(t+o)+",10L"+t+",0L0,0L0,0":"M0,"+o+"L"+o+","+e+"L"+(t+o)+","+e+"L"+(t+o)+",0L"+o+",0L0,"+o;i="left"===n.orient||"right"===n.orient?(0,M.jsx)("g",{transform:"translate("+n.coordinateBase.edgeXRect+","+n.coordinateBase.edgeYRect+")",children:(0,M.jsx)("path",{d:r,className:el,height:e,width:t,stroke:n.coordinateBase.stroke,strokeLinejoin:"miter",strokeOpacity:n.coordinateBase.strokeOpacity,strokeWidth:n.coordinateBase.strokeWidth,fill:n.coordinateBase.fill,fillOpacity:n.coordinateBase.opacity})},1):(0,M.jsx)("rect",{className:el,x:n.coordinateBase.edgeXRect,y:n.coordinateBase.edgeYRect,height:e,width:t,fill:n.coordinateBase.fill,opacity:n.coordinateBase.opacity},1);const{edgeXText:a,edgeYText:l,textAnchor:c,fontFamily:h,fontSize:u,textFill:d,displayCoordinate:p}=n.coordinate;s=(0,M.jsx)("text",{x:a,y:l,textAnchor:c,fontFamily:h,fontSize:u,dy:".32em",fill:d,children:null!=p?p:""},2)}return(0,M.jsxs)("g",{className:e,children:[o,i,s]})}(n)},canvasDraw:(e,n)=>{const i=t(o,n);if(null==i)return null;!function(t,e){const{fontSize:n,fontFamily:o}=e;t.font=n+"px "+o,t.textBaseline="middle";const i=Math.round(t.measureText(e.coordinate).width+10),s=Ju(Object.assign({},e,{rectWidth:i}));if(null!==s){if(s.line){const e=go(s.line.strokeDasharray).split(",").map((t=>+t));t.setLineDash(e),t.strokeStyle=kr(s.line.stroke,s.line.opacity),t.lineWidth=1,t.beginPath(),t.moveTo(s.line.x1,s.line.y1),t.lineTo(s.line.x2,s.line.y2),t.stroke()}if(t.setLineDash([]),s.coordinateBase){const{rectWidth:e,rectHeight:n,rectRadius:o,arrowWidth:i}=s.coordinateBase;t.fillStyle=kr(s.coordinateBase.fill,s.coordinateBase.opacity),s.coordinateBase.stroke&&(t.strokeStyle=kr(s.coordinateBase.stroke,s.coordinateBase.strokeOpacity),t.lineWidth=s.coordinateBase.strokeWidth);let r=s.coordinateBase.edgeXRect;const a=s.coordinateBase.edgeYRect,l=n/2;t.beginPath(),"right"===s.orient?(r-=i,t.moveTo(r,a+l),t.lineTo(r+i,a),t.lineTo(r+e+i,a),t.lineTo(r+e+i,a+n),t.lineTo(r+i,a+n),t.closePath()):"left"===s.orient?(t.moveTo(r,a),t.lineTo(r+e,a),t.lineTo(r+e+i,a+l),t.lineTo(r+e,a+n),t.lineTo(r,a+n),t.closePath()):o?function(t,e,n,o,i,s){t.beginPath(),t.moveTo(e+s,n),t.lineTo(e+o-s,n),t.quadraticCurveTo(e+o,n,e+o,n+s),t.lineTo(e+o,n+i-s),t.quadraticCurveTo(e+o,n+i,e+o-s,n+i),t.lineTo(e+s,n+i),t.quadraticCurveTo(e,n+i,e,n+i-s),t.lineTo(e,n+s),t.quadraticCurveTo(e,n,e+s,n),t.closePath()}(t,r,a,e,n,3):t.rect(r,a,e,n),t.fill(),s.coordinateBase.stroke&&t.stroke(),t.fillStyle=s.coordinate.textFill,t.textAlign="middle"===s.coordinate.textAnchor?"center":s.coordinate.textAnchor,t.fillText(s.coordinate.displayCoordinate,s.coordinate.edgeXText,s.coordinate.edgeYText)}}}(e,i)},canvasToDraw:tc,drawOn:Qu})},ed="#525252",nd="#ffffff",od="Helvetica Neue, Helvetica, Arial, sans-serif",id={fill:ed,textFill:nd,fontFamily:od,fontSize:13,yAxisPad:0,rectWidth:80,rectHeight:20,strokeOpacity:1,strokeWidth:1,orient:"bottom",at:"bottom",opacity:1,snapX:!0,customX:(t,e)=>{const{snapX:n,displayFormat:o}=t,{xScale:i,xAccessor:s,currentItem:r,mouseXY:a,displayXAccessor:l}=e,[c,h]=n?[i(s(r)),l(r)]:[a[0],i.invert(c)];return{x:c,coordinate:o(h)}}},sd=td(((t,e)=>{const{show:n,currentItem:o,chartConfig:{height:i}}=e;if(null==o)return null;const{orient:s,at:r,stroke:a,strokeOpacity:l,strokeWidth:c,rectRadius:h,rectWidth:u,rectHeight:d,fill:p,opacity:f,fontFamily:g,fontSize:m,textFill:y,customX:x}=t,{x:v,coordinate:b}=x(t,e);return{type:"vertical",hideLine:!0,edgeAt:"bottom"===r?i:0,coordinate:b,show:n,orient:s,fill:p,opacity:f,fontFamily:g,fontSize:m,textFill:y,stroke:a,strokeOpacity:l,strokeWidth:c,rectWidth:u,rectHeight:d,rectRadius:h,arrowWidth:0,x1:v,x2:v,y1:0,y2:i}}),id),rd=td(((t,e)=>{const{displayFormat:n,yAccessor:o}=t,{chartConfig:i,currentCharts:s,currentItem:r,mouseXY:a,show:l}=e,{id:c,yScale:h}=i||{};if(null==a||s.indexOf(c)<0||!l||o&&!r)return null;const u=o?h(o(r)):a[1]-i.origin[1];return((t,e,n,o)=>{const{width:i}=o,{orient:s,at:r,rectWidth:a,rectHeight:l,dx:c,fill:h,opacity:u,fontFamily:d,fontSize:p,textFill:f,arrowWidth:g,stroke:m,strokeOpacity:y,strokeWidth:x}=n;return{coordinate:"NaNundefined"===e?"no data":e,show:!0,type:"horizontal",hideLine:!0,edgeAt:"right"===r?i:0,orient:s,fill:h,opacity:u,fontFamily:d,fontSize:p,textFill:f,stroke:m,strokeOpacity:y,strokeWidth:x,rectWidth:a,rectHeight:l,arrowWidth:g,dx:c,x1:0,x2:i,y1:t,y2:t}})(u,n(h.invert(u)),t,e)}),{fill:ed,textFill:nd,fontFamily:od,fontSize:13,yAxisPad:0,rectWidth:50,rectHeight:20,orient:"left",at:"left",dx:0,arrowWidth:10,opacity:1,strokeOpacity:1,strokeWidth:1}),ad=["className","fontFamily","fontSize","children"],ld=11,cd="-apple-system, system-ui, 'Helvetica Neue', Ubuntu, sans-serif",hd=t=>{let{className:e=ka,fontFamily:n=cd,fontSize:o=ld,children:i}=t,s=D(t,ad);return(0,M.jsx)("text",Object.assign({className:e,fontFamily:n,fontSize:o},s,{children:i}))},ud=["className","fill","children"],dd="#4682b4",pd=t=>{let{className:e=Sa,fill:n=dd,children:o}=t,i=D(t,ud);return(0,M.jsx)("tspan",Object.assign({className:e,fill:n},i,{children:o}))},fd=["mousemove"],gd={className:Da,displayFormat:Bi(".2f"),displayValuesFor:(t,e)=>e.currentItem,displayInit:"n/a",origin:[8,8],yAccessor:t=>t.bb},md=t=>{const e=s(t,gd);return(0,M.jsx)($l,{clip:!1,svgDraw:t=>{var n;const{onClick:o,displayFormat:i,yAccessor:s,options:r,origin:a,textFill:l,labelFill:c,labelFontWeight:h,className:u,displayValuesFor:d,displayInit:p,fontFamily:f,fontSize:g,fontWeight:m}=e,{chartConfig:{width:y,height:x},fullData:v}=t,b=null!=(n=d(e,t))?n:Sr(v);let w=p,k=p,S=p;if(void 0!==b){const t=s(b);void 0!==t&&(w=i(t.top),k=i(t.middle),S=i(t.bottom))}const C=po(a),[D,A]=C(y,x),{sourcePath:j,windowSize:T,multiplier:_,movingAverageType:P}=r,N="BB("+j+", "+T+", "+_+", "+P+")",E=w+", "+k+", "+S,O=br([D,A]);return(0,M.jsx)("g",{transform:O,className:u,onClick:o,children:(0,M.jsxs)(hd,{x:0,y:0,fontFamily:f,fontSize:g,fontWeight:m,children:[(0,M.jsx)(pd,{fill:c,fontWeight:h,children:N}),(0,M.jsx)("tspan",{x:0,dy:15,fill:l,children:E})]})})},drawOn:fd})},yd=t=>{let{color:e,displayName:n,fontSize:o,fontFamily:s,fontWeight:r,textFill:a,labelFill:l,labelFontWeight:c,value:h,origin:u,onClick:d,forChart:p,options:f}=t;const g=(0,i.useCallback)((t=>{void 0!==d&&d(t,Object.assign({chartId:p},f))}),[d,p,f]),m=br(u);return(0,M.jsxs)("g",{transform:m,children:[(0,M.jsx)("line",{x1:0,y1:2,x2:0,y2:28,stroke:e,strokeWidth:4}),(0,M.jsxs)(hd,{x:5,y:11,fontFamily:s,fontSize:o,fontWeight:r,children:[(0,M.jsx)(pd,{fill:l,fontWeight:c,children:n}),(0,M.jsx)("tspan",{x:5,dy:15,fill:a,children:h})]}),(0,M.jsx)("rect",{x:0,y:0,width:55,height:30,fill:"none",stroke:"none",onClick:g})]})},xd=["mousemove"],vd={className:Aa,displayFormat:Bi(".2f"),displayInit:"n/a",displayValuesFor:(t,e)=>e.currentItem,origin:[0,10],width:65},bd=t=>{const e=s(t,vd);return(0,M.jsx)($l,{clip:!1,svgDraw:t=>{var n;const{chartId:o,chartConfig:i,chartConfig:{height:s},fullData:r}=t,{className:a,displayInit:l,onClick:c,width:h,fontFamily:u,fontSize:d,fontWeight:p,textFill:f,labelFill:g,origin:m,displayFormat:y,displayValuesFor:x,options:v}=e,b=null!=(n=x(e,t))?n:Sr(r),w=po(m),[k,S]=w(h,s),[C,D]=i.origin,A=br([C+k,D+S]);return(0,M.jsx)("g",{transform:A,className:a,children:v.map(((t,e)=>{const n=b&&t.yAccessor(b),i=t.type+" ("+t.windowSize+")",s=n?y(n):l;return(0,M.jsx)(yd,{origin:[h*e,0],color:t.stroke,displayName:i,value:s,options:t,forChart:o,onClick:c,fontFamily:u,fontSize:d,fontWeight:p,textFill:f,labelFill:g},e)}))})},drawOn:xd})},wd=t=>{let{labelFill:e,labelFontWeight:n,text:o,valueFill:i,value:s}=t;return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(pd,{fill:e,fontWeight:n,children:o}),(0,M.jsx)("tspan",{fill:i,children:s},"value_O")]})},kd=["mousemove"],Sd={className:Ma,fontFamily:rl,fontWeight:"bold",accessor:t=>t,changeFormat:Bi("+.2f"),displayTexts:{o:"O: ",h:" H: ",l:" L: ",c:" C: ",na:"n/a"},displayValuesFor:(t,e)=>e.currentItem,ohlcFormat:Bi(".2f"),origin:[0,0],percentFormat:Bi("+.2%")},Cd=t=>{const e=s(t,Sd);return(0,M.jsx)($l,{clip:!1,svgDraw:n=>{var o;const{accessor:i,changeFormat:s,className:r,displayTexts:a,displayValuesFor:l,fontFamily:c,fontSize:h,fontWeight:u,labelFill:d,labelFontWeight:p,ohlcFormat:f,onClick:g,percentFormat:m,textFill:y}=e,{chartConfig:{width:x,height:v},fullData:b}=n,w=null!=(o=l(e,n))?o:Sr(b),{na:k}=a;let S=k,C=k,D=k,A=k,j=k;if(void 0!==w&&void 0!==i){const t=i(w);void 0!==t&&(S=f(t.open),C=f(t.high),D=f(t.low),A=f(t.close),j=s(t.close-t.open)+" ("+m((t.close-t.open)/t.open)+")")}const{origin:T}=t,[_,P]=po(T)(x,v),N=po(y)(w),E=br([_,P]);return(0,M.jsx)("g",{className:r,transform:E,onClick:g,children:(0,M.jsxs)(hd,{x:0,y:0,fontFamily:c,fontSize:h,fontWeight:u,children:[(0,M.jsx)(wd,{fill:d,fontWeight:p,text:a.o,valueFill:N,value:S}),(0,M.jsx)(wd,{fill:d,fontWeight:p,text:a.h,valueFill:N,value:C}),(0,M.jsx)(wd,{fill:d,fontWeight:p,text:a.l,valueFill:N,value:D}),(0,M.jsx)(wd,{fill:d,fontWeight:p,text:a.c,valueFill:N,value:A}),(0,M.jsx)("tspan",{fill:N,children:" "+j},"value_Change")]})})},drawOn:kd})},Dd=Bi(".2f"),Ad="n/a",Md=(t,e)=>e.currentItem,jd=[0,0],Td=["mousemove"],_d=t=>{const{className:e=ka,displayInit:n=Ad,displayFormat:o=Dd,displayValuesFor:i=Md,origin:s=jd,fontFamily:r,fontSize:a,fontWeight:l,yAccessor:c,options:h,labelFill:u,labelFontWeight:d,textFill:p,onClick:f}=t;return(0,M.jsx)($l,{clip:!1,svgDraw:g=>{const{chartConfig:{width:m,height:y}}=g,x=i(t,g),v=x&&c(x),b=v&&o(v)||n,w=po(s),[k,S]=w(m,y),C="RSI ("+h.windowSize+"): ";return(0,M.jsx)("g",{className:e,transform:"translate("+k+", "+S+")",onClick:f,children:(0,M.jsxs)(hd,{x:0,y:0,fontFamily:r,fontSize:a,fontWeight:l,children:[(0,M.jsx)(pd,{fill:u,fontWeight:d,children:C}),(0,M.jsx)("tspan",{fill:p,children:b})]})})},drawOn:Td})},Pd={sourcePath:"close",multiplier:2,movingAverageType:"sma",windowSize:20},Nd={sourcePath:"close",windowSize:10},Ed={sourcePath:"close",windowSize:14},Od={sourcePath:"close",windowSize:10};function Fd(){let t=Pd;const e=e=>{const{windowSize:n,multiplier:o,movingAverageType:i,sourcePath:s}=t,r=uo(s),a="ema"===i?function(){let t=Nd;const e=e=>{const{windowSize:n,sourcePath:o}=t,i=uo(o),s=2/(n+1);let r,a=0,l=0;return e.map(((t,e)=>{const o=i(t,e);if(void 0!==r||void 0!==o){if(!(e<n+l-1)){if(e===n+l-1){a+=o;const t=a/n;return r=t,t}{const t=o*s+(1-s)*r;return r=t,t}}a+=o}else l++}))};return e.undefinedLength=()=>t.windowSize-1,e.options=function(){return arguments.length?(t=Object.assign({},Nd,arguments.length<=0?void 0:arguments[0]),e):t},e}().options({windowSize:n,sourcePath:s}):fo().windowSize(n).accumulator((t=>Hn(t))).sourcePath(s),l=fo().windowSize(n).accumulator((t=>{const e=t[t.length-1].mean,n=((t,e)=>{const n=((t,e)=>{let n,o=0,i=0,s=0;if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(n=e-i,i+=n/++o,s+=n*(e-i));else{let r=-1;for(let a of t)null!=(a=e(a,++r,t))&&(a=+a)>=a&&(n=a-i,i+=n/++o,s+=n*(a-i))}if(o>1)return s/(o-1)})(t,e);return n?Ln(n):n})(t,(t=>r(t.datum)));return void 0===n?void 0:{top:e+o*n,middle:e,bottom:e-o*n}})),c=co().combine(((t,e)=>({datum:t,mean:e})));return l(c(e,a(e)))};return e.undefinedLength=()=>t.windowSize-1,e.options=function(){return arguments.length?(t=Object.assign({},Pd,arguments.length<=0?void 0:arguments[0]),e):t},e}let Id=0;function Ld(){let t,e,n,o,i,s=Id++;function r(){}return r.id=function(){return arguments.length?(s=arguments.length<=0?void 0:arguments[0],r):s},r.accessor=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],r):t},r.stroke=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],r):e||(e=wr(s))},r.fill=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],r):n||(n=wr(s))},r.echo=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],r):o},r.type=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],r):i},r}const zd={merge:!0},Rd=(t,e,n,o)=>{const i=function(i,s){if(void 0===s&&(s=zd),s.merge){if(!e.accessor())throw new Error("Set an accessor to "+t+" before calculating");return o(i)}return n(i)};return xr(i,e,"id","accessor","stroke","fill","echo","type"),xr(i,n,"options","undefinedLength"),xr(i,o,"merge","skipUndefined"),i},Wd=()=>{const t=Ld().type("SMA").accessor((t=>t.sma)),e=function(){let t=Od;function e(e){const{windowSize:n,sourcePath:o}=t,i=fo().windowSize(n).sourcePath(o).accumulator((t=>Hn(t)));return i(e)}return e.undefinedLength=()=>t.windowSize-1,e.options=function(){return arguments.length?(t=Object.assign({},Od,arguments.length<=0?void 0:arguments[0]),e):t},e}(),n=vr().algorithm(e).merge(((t,e)=>{t.sma=e}));return Rd("SMA",t,e,n)},Hd="BollingerBand",Xd=Math.round,Yd={pointerEvents:"all",transform:"translate(0, 50px)"},Ud={transform:"translate(-40px, 0)"},Bd={transform:"translate(-56px, 0)"},Zd=(t,e,n)=>"translate ("+(t-20)+", "+(e-8+n/4)+")",Vd=t=>{let{zoomMultiplier:e=1.5,heightFromBase:n=32,r:o=16,fill:s="#ffffff",fillOpacity:r=.4,stroke:a="grey",strokeWidth:l=1,textFill:c="#000000"}=t;const h=(0,i.useContext)($r),u=t=>{const{xAxisZoom:n,xScale:o,plotData:i,xAccessor:s}=h,r=o(s(Sr(i))),a=t>0?1*e:1/e,[l,c]=o.domain(),[u,d]=o.range().map((t=>r+(t-r)*a)).map(o.invert),p=hi(l,u),f=hi(c,d);n([p(.2),f(.2)])},{chartConfig:{width:d,height:p}}=h,f=Xd(d/2),g=p-n,m=f-8,y=f+16+2*o,x=Zd(f-16-2*o,g,o),v=Zd(m,g,o),b=g+o/2,w=m-o/2,k=y-o/2;return(0,M.jsxs)("g",{style:Yd,children:[(0,M.jsx)("g",{transform:x,children:(0,M.jsx)("path",{d:"M19,13H5V11H19V13Z",fill:c})}),(0,M.jsx)("circle",{style:Ud,cx:w,cy:b,fill:s,fillOpacity:r,stroke:a,strokeWidth:l,r:o,onClick:()=>u(1)}),(0,M.jsx)("g",{transform:v,children:(0,M.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z",fill:c})}),(0,M.jsx)("circle",{style:Bd,cx:k,cy:b,fill:s,fillOpacity:r,stroke:a,strokeWidth:l,r:o,onClick:()=>u(-1)})]})},qd=t=>function(e,n){const{widthRatio:o}=e,{xScale:i,xAccessor:s,plotData:r}=n,a=s(((t,e)=>{if(!e||!t)return t?t[0]:void 0;for(let n=0;n<t.length;n++){const o=t[n];if(null!=e(o))return o}})(r));return Math.abs(i(t.offset(a,1))-i(a))*o},Gd={UP:"black",DOWN:"#980032",TRANSPARENT:"transparent"},$d=t=>"string"==typeof t,Kd=(t,e)=>-1!==t.indexOf(e),Jd=Bi(".8~"),Qd=Bi(".4f"),tp=Bi(".2f"),ep=Bi(".4s"),np=Bi(".0s"),op=t=>{if(!t||!$d(t))return Ss;const e=parseInt(t,10);return Kd(t,"m")?vs.every(e):Kd(t,"h")?ws.every(e):Kd(t,"d")?Ss.every(e):Kd(t,"w")?js.every(e):Kd(t,"M")?_s.every(e):Ss},ip=t=>$d(t)&&(Kd(t,"m")||Kd(t,"h"))?dr("%m-%d %H:%M"):dr("%Y-%m-%d");let sp,rp,ap=[];const lp=document&&"ontouchstart"in document.documentElement,cp=t=>(0,i.useMemo)((()=>qd(t)),[t]),hp="rs-tooltip",up=(t,e)=>(t||{}).close>(e||{}).close?Gd.UP:Gd.DOWN,dp=(t,e)=>(t||{}).close>(t||{}).open?Gd.TRANSPARENT:up(t,e),pp={top:"#964b00",middle:"#000000",bottom:"#964b00"},fp=(t,e)=>({type:"SMA",yAccessor:t,stroke:e.stroke,windowSize:e.windowSize}),gp=[5,-90],mp=[5,320],yp=[190,432],xp=t=>t.bb,vp=t=>{let{id:e,height:n,timeInterval:o,timeFormat:s,sma20:r,sma50:a,bb:l,yExtents:c,origin:h}=t;const u=cp(o),[d,p]=(0,i.useMemo)((()=>[r.accessor(),r.options()]),[r]),[f,g]=(0,i.useMemo)((()=>[a.accessor(),a.options()]),[a]),m=(0,i.useMemo)((()=>[fp(d,p),fp(f,g)]),[d,p,f,g]),y=(0,i.useMemo)((()=>l.options()),[l]);return(0,M.jsxs)(Kr,{id:e,height:n,yExtents:c,origin:h,children:[(0,M.jsx)(ch,{axisAt:"right",orient:"right",ticks:5,stroke:"black"}),(0,M.jsx)(ju,{yAccessor:xp,stroke:pp,fill:"#4682b4"}),(0,M.jsx)($h,{yAccessor:d,stroke:p.stroke}),(0,M.jsx)($h,{yAccessor:f,stroke:g.stroke}),(0,M.jsx)(wu,{width:u,fill:dp,stroke:up,wickStroke:up,candleStrokeWidth:.8}),(0,M.jsx)(rd,{at:"right",orient:"right",displayFormat:Qd}),(0,M.jsx)(Cd,{fontSize:15,xDisplayFormat:s,textFill:"black",ohlcFormat:Jd,forChart:3,origin:gp}),(0,M.jsx)(bd,{className:hp,width:100,fontSize:15,origin:mp,options:m}),(0,M.jsx)(md,{className:hp,fontSize:15,origin:yp,yAccessor:xp,options:y}),lp&&(0,M.jsx)(Vd,{})]})},bp=(t,e)=>(t||{}).close>(e||{}).close?Gd.UP:Gd.DOWN,wp=t=>t.volume,kp=t=>{let{id:e,height:n,timeInterval:o,timeFormat:i,yExtents:s,origin:r}=t;const a=cp(o);return(0,M.jsxs)(Kr,{id:e,height:n,yExtents:s,origin:r,children:[(0,M.jsx)(ch,{axisAt:"left",orient:"left",ticks:3,tickFormat:np,stroke:"black"}),(0,M.jsx)(rd,{at:"left",orient:"left",displayFormat:ep}),(0,M.jsx)(Bu,{width:a,yAccessor:wp,fill:bp,stroke:bp}),(0,M.jsx)(nh,{axisAt:"bottom",orient:"bottom",ticks:6}),(0,M.jsx)(sd,{at:"bottom",orient:"bottom",displayFormat:i})]})},Sp={line:"#000000",top:"#b8b2bb",middle:"transparent",bottom:"#b8c2cc",outsideThreshold:"#b300b3",insideThreshold:"#4699cb"},Cp=[30,50,70],Dp=t=>t.rsi,Ap=t=>{let{id:e,height:n,width:o,rsi:s,yExtents:r,origin:a}=t;const l=(0,i.useMemo)((()=>[o-160,10]),[o]),c=(0,i.useMemo)((()=>s.options()),[s]);return(0,M.jsxs)(Kr,{id:e,height:n,yExtents:r,origin:a,children:[(0,M.jsx)(ch,{axisAt:"right",orient:"right",stroke:"black",tickStroke:"#4699cb",tickValues:Cp}),(0,M.jsx)(rd,{at:"right",orient:"right",displayFormat:tp}),(0,M.jsx)(au,{yAccessor:Dp,stroke:Sp}),(0,M.jsx)(_d,{className:"rs-tooltip",fontSize:15,yAccessor:Dp,origin:l,options:c})]})},Mp=t=>t.close,jp=t=>{let{id:e,height:n,yExtents:o,origin:i}=t;return(0,M.jsxs)(Kr,{id:e,height:n,yExtents:o,origin:i,children:[(0,M.jsx)(ch,{axisAt:"left",orient:"left",stroke:"black",ticks:5}),(0,M.jsx)($h,{yAccessor:Mp,stroke:"black"}),(0,M.jsx)(rd,{at:"left",orient:"left",displayFormat:tp})]})},Tp={left:50,right:80,top:0,bottom:30},_p={width:"98%"},Pp=t=>t?t.date:0,Np=function(){return Pi.apply(mr(zs,Rs,Ns,Ts,Ds,ks,bs,xs,ys,dr).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}(),Ep=(t,e)=>[0,e-510],Op=[0,100],Fp=t=>[t.high,t.low],Ip=(t,e)=>[0,e-420],Lp=t=>t.volume,zp=(t,e)=>[0,e-120],Rp=(t,e,n)=>Wd().options({windowSize:e,stroke:n}).merge(((e,n)=>{e[t]=n})).accessor((e=>e[t])),Wp=(()=>{const t=Ld().type(Hd),e=Fd(),n=vr().algorithm(e).merge(((t,e)=>{t.bollingerBand=e}));return Rd(Hd,t,e,n)})().merge(((t,e)=>{t.bb=e})).accessor((t=>t.bb)),Hp=(()=>{const t=Ld().type("RSI").accessor((t=>t.rsi)),e=function(){let t=Ed;const e=e=>{let n,o;const{windowSize:i,sourcePath:s}=t,r=uo(s),a=fo().windowSize(i).accumulator((t=>{const e=void 0!==n?(n*(i-1)+t[t.length-1].gain)/i:Hn(t,(t=>t.gain));if(void 0===e)return;const s=void 0!==o?(o*(i-1)+t[t.length-1].loss)/i:Hn(t,(t=>t.loss));return void 0!==s?(n=e,o=s,100-100/(1+e/s)):void 0})),l=fo().windowSize(2).undefinedValue((()=>[0,0])).accumulator((t=>{const e=t[0],n=t[1],o=r(n)-r(e);return{gain:Math.max(o,0),loss:Math.abs(Math.min(o,0))}}));return a(l(e))};return e.undefinedLength=()=>t.windowSize-1,e.options=function(){return arguments.length?(t=Object.assign({},Ed,arguments.length<=0?void 0:arguments[0]),e):t},e}(),n=vr().algorithm(e).merge(((t,e)=>{t.rsi=e}));return Rd("RSI",t,e,n)})().options({windowSize:14}).merge(((t,e)=>{t.rsi=e})).accessor((t=>t.rsi)),Xp=(0,i.memo)((t=>{let{id:e,style:n,data:o,height:s,timeframe:a}=t;const[l]=function(t){let{id:e,minWidth:n=100,initialWidth:o=1e3}=void 0===t?{}:t;const s=(0,i.useRef)(),[a,l]=(0,i.useState)(o),c=(0,i.useCallback)((()=>{const t=e?document.getElementById(e):r(s);if(t){const{width:e,paddingLeft:o,paddingRight:i}=window.getComputedStyle(t),s=parseFloat(e)-(parseFloat(o)+parseFloat(i));l(Math.round(Math.max(s,n)))}}),[]);return(0,i.useLayoutEffect)(c,[]),(0,i.useEffect)((()=>(window.addEventListener("resize",c),()=>window.removeEventListener("resize",c))),[]),[a,s]}({id:e}),c=(0,i.useRef)(150),[h]=(0,i.useState)(20),[u]=(0,i.useState)(50),d=(0,i.useMemo)((()=>Rp("sma20",h,"green")),[h]),p=(0,i.useMemo)((()=>Rp("sma50",u,"orange")),[u]),f=(0,i.useMemo)((()=>p(d(Wp(Hp(o))))),[o,d,p]),[g,m]=(0,i.useMemo)((()=>[op(a),ip(a)]),[a]),y=(0,i.useMemo)((()=>((t,e,n)=>{const o=t.length-1,i=o<n?(t[0]||{}).date:(t[o-n]||{}).date,s=(t.slice(-1)[0]||{}).date,r="1m"===e?s+3e5:s;return i===sp&&r===rp||(sp=i),rp=r,ap=[i,r]})(f,a,r(c))),[f,a]),x=(0,i.useMemo)((()=>t=>{c.current=t}),[]);return(0,M.jsx)("div",{id:e,style:Object.assign({},_p,n),children:(0,M.jsxs)(zl,{ratio:2,width:l,height:s,margin:Tp,data:f,xAccessor:Pp,displayXAccessor:Pp,xScale:Np,xExtents:y,onZoom:x,children:[(0,M.jsx)(Ap,{id:1,height:100,width:l,rsi:Hp,yExtents:Op,origin:Ep}),(0,M.jsx)(jp,{id:2,height:100,yExtents:Fp,origin:Ep}),(0,M.jsx)(vp,{id:3,height:300,timeInterval:g,timeFormat:m,sma20:d,sma50:p,bb:Wp,yExtents:Fp,origin:Ip}),(0,M.jsx)(kp,{id:4,height:100,timeInterval:g,timeFormat:m,yExtents:Lp,origin:zp}),(0,M.jsx)(Ku,{})]})})})),Yp={providerTitle:x.INITIAL_PROVIDER_TITLE,itemTitle:x.INITIAL_ITEM_TITLE,data:x.DF_DATA,timeframe:x.DF_TIMEFRAME,fetchStatus:_.INITIAL,isLiveUpdating:!1},Up=Object.freeze({LOADING:"DATA_LOADING",LOADED:"DATA_LOADED",LOAD_FAILED:"DATA_LOAD_FAILED",UPDATE:"DATA_UPDATE"}),Bp=(t,e)=>{switch(e.type){case Up.LOADING:return Object.assign({},t,{fetchStatus:_.LOADING});case Up.LOADED:{const{data:n}=e;return(t=>Array.isArray(t)||t.length>20)(n)?Object.assign({},t,{data:e.data,providerTitle:e.providerTitle,itemTitle:e.itemTitle,timeframe:e.timeframe,fetchStatus:_.SUCCESS}):t}case Up.LOAD_FAILED:return Object.assign({},t,{fetchStatus:_.FAILED});case Up.UPDATE:return Object.assign({},t,{data:[...t.data,e.point]});default:throw new TypeError("Not existed action "+e.type)}};let Zp;const Vp=(t,e,n,o,i)=>{let s;Zp=new WebSocket((t=>"wss://stream.binance.com:9443/ws/"+t+"@kline_1m")(t)),Zp.addEventListener("open",(()=>{s=(new Date).getMinutes(),n()})),Zp.addEventListener("message",(t=>{try{const{E:n,k:o}=JSON.parse(t.data),r=new Date(n),a=r.getMinutes();s!==a?(s=a,e(((t,e)=>({date:t,high:parseFloat(e.h),low:parseFloat(e.l),open:parseFloat(e.o),close:parseFloat(e.c),volume:parseFloat(e.v)}))(n,o)),i("")):i(r.getSeconds())}catch(t){console.log(t)}})),Zp.addEventListener("error",(t=>{o()})),Zp.addEventListener("close",(t=>{o()}))},qp={startLiveUpdate:t=>{let{pair:e,onMessage:n,onOpen:o,onClose:i,onSecond:s}=t;Vp((t=>(""+t).replace("/","").toLowerCase())(e),n,o,i,s)},stopLiveUpdate:()=>{try{void 0===(t=1e3)&&(t=1005),Zp&&Zp.close(t)}catch(t){console.log(t)}var t}},Gp=["timeframe"],$p=t=>{let{appSettings:e,theme:n,setThemeId:o,dispatch:i,setLiveUpdating:s}=t;return{appSettings:e,theme:n,setThemeId:o,dataAction:{loading:()=>i({type:Up.LOADING}),loadData:t=>{let{timeframe:e=x.DF_TIMEFRAME}=t,n=D(t,Gp);s({isLiveUpdating:!1}),qp.stopLiveUpdate(),i(Object.assign({type:Up.LOADED,timeframe:e},n))},loadFailed:()=>i({type:Up.LOAD_FAILED})},onLiveUpdate:t=>{qp.startLiveUpdate({pair:t,onMessage:(t,e)=>i({type:Up.UPDATE,point:t}),onOpen:()=>s({isLiveUpdating:!0}),onClose:()=>s({isLiveUpdating:!1}),onSecond:t=>s({isLiveUpdating:!0,sec:t})})},onStopUpdate:()=>{qp.stopLiveUpdate()}}},Kp={paddingTop:8},Jp={isLiveUpdating:!1,sec:""},Qp=()=>{const[t,e]=(0,i.useState)(1),[n,o]=(0,i.useReducer)(Bp,Yp),{providerTitle:s,itemTitle:r,data:a,timeframe:l,fetchStatus:p}=n,[f,g]=(0,i.useState)(Jp),m=c((()=>$p({appSettings:b,theme:C,setThemeId:e,dispatch:o,setLiveUpdating:g})));return(0,M.jsx)(h.Provider,{value:m,children:(0,M.jsx)(u.Provider,{value:t,children:(0,M.jsxs)(d.Provider,{value:f,children:[(0,M.jsx)(In,{fetchStatus:p,providerTitle:s,itemTitle:r,timeframe:l}),(0,M.jsx)("main",{style:Kp,children:(0,M.jsx)(Xp,{id:"chart_wrapper",height:550,data:a,timeframe:l})})]})})})};(0,o.H)(document.getElementById("app")).render((0,M.jsx)(Qp,{}))},848:(t,e,n)=>{t.exports=n(20)}},t=>{var e;e=749,t(t.s=e)}]);