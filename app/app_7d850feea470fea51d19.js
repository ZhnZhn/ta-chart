/*! For license information please see app_7d850feea470fea51d19.js.LICENSE.txt */
"use strict";(self.webpackChunkTA_Chart=self.webpackChunkTA_Chart||[]).push([[143],{178:(t,e,n)=>{var r=n(745),o=n(294);const i=t=>(t||{}).current,s=(t,e)=>{t&&(t.current=e)},a=t=>{const e=i(t);return e&&e.style||{}},l=t=>{const e=(0,o.useRef)();return e.current||(e.current=t())},c=(0,o.createContext)({}),u=(0,o.createContext)(),h=(0,o.createContext)(),d=Math.random,p=()=>d()*(d()>.5?1:-1),f=(t,e)=>t>e?t+.2:e+.2,g=(t,e)=>t>e?e-.2:t-.2,m={INITIAL_PROVIDER_TITLE:"Data Provider (Random)",INITIAL_ITEM_TITLE:"Item",PROXY:"http://127.0.0.1:3000/proxy",RATE_LIMIT:3e3,DF_DATA:(()=>{const t=new Date,e=[];let n,r;for(let o=0;o<100;o++)r=1+p(),n=1+p(),e.push({date:t.getTime()-864e5*o,open:r,close:n,high:f(r,n),low:g(r,n)});return e.reverse()})(),DF_TIMEFRAME:"1d"},y=Object.freeze(m);let v=y.PROXY;const x={proxy:t=>t?(v=t,!0):v||"",clearProxy:()=>{v=""}},w={1:"#5f5f5f",2:"#e1e1e1",3:"#e8e0cb"},b={1:{},2:{backgroundColor:"#d4d4d4"},3:{backgroundColor:"#e8dcbe"}},k={getBgColor:t=>w[""+t],getHeaderStyle:t=>b[""+t],getDrawerStyle:t=>b[""+t]},C=k;var S=n(893);const D="Logo of web app TA Chart v0.3.0",A=t=>{let{className:e,style:n,title:r=D}=t;return(0,S.jsx)("span",{className:e,style:n,title:r,children:(0,S.jsxs)("svg",{viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:"2",strokeWidth:"2",children:[(0,S.jsx)("rect",{ry:"1.8825414",rx:"194.14471",y:"1.434558",x:"19.176462",height:"12.460618",width:"10.85316",fill:"#8ecc2d",stroke:"#8ecc2d"}),(0,S.jsx)("rect",{ry:"1.87537",rx:"204.478",y:"16.639841",x:"8.8410215",height:"13.752699",width:"18.307165",fill:"#232f3b",stroke:"#232f3b"}),(0,S.jsx)("rect",{ry:"1.87537",rx:"204.478",y:"3.4229634",x:"2.5897937",height:"10.894996",width:"10.001963",fill:"#a487d4",stroke:"#a487d4"})]})})},M=Object.freeze({INITIAL:"INITIAL",LOADING:"LOADING",SUCCESS:"SUCCESS",FAILED:"FAILED"}),T=()=>({}),_=()=>(0,o.useReducer)(T)[1],P="#2f7ed8",j=(t,e,n)=>({backgroundColor:t,width:e+"%",transition:n,opacity:1}),N=(t,e,n)=>i(t)?(s(t,!1),j(e,0)):j(e,((t,e)=>t<0?0:t>=100?(s(e,!0),100):t)(n,t),"width 500ms linear"),E=t=>{let{color:e=P,completed:n}=t;const r=_(),a=(0,o.useRef)(!1),l=(0,o.useRef)(null);(0,o.useEffect)((()=>{i(a)&&s(l,setTimeout(r,800))})),(0,o.useEffect)((()=>()=>{clearTimeout(i(l))}),[]);const c=N(a,e,n);return(0,S.jsx)("div",{className:"progress-line",style:c})},I="#2f7ed8",F=(t,e)=>[t,e],L=(0,o.memo)((t=>{let{fetchStatus:e}=t;const[n,r]=(t=>t===M.LOADING?F(35,I):t===M.SUCCESS?F(100,I):t===M.FAILED?F(100,"#ed5813"):F(0,I))(e);return(0,S.jsx)(E,{color:r,completed:n})})),O=t=>{const[e,n]=(0,o.useState)((()=>!!t));return[e,(0,o.useCallback)((t=>{(t=>"boolean"==typeof t)(t)?n(t):n((t=>!t))}),[])]},R={position:"absolute",top:0,right:16},W={transform:"translateX(334px)",pointerEvents:"none"},z={transform:"translate(0px, 0px)"},U={display:"none",opacity:0,zIndex:-1,transition:"opacity 195ms cubic-bezier(0.4, 0, 0.2, 1) 0ms"},H={display:"block",opacity:1,zIndex:1e3,transition:"opacity 225ms cubic-bezier(0.4, 0, 0.2, 1) 0ms"},B=t=>{let{btStyle:e,children:n}=t;const[r,i]=O();(0,o.useEffect)((()=>{document.body.style.overflowY=r?"hidden":"auto"}),[r]);const s=r?z:W,a=r?H:U,l=r?i:void 0;return[(0,S.jsx)("button",{className:"drawer-bt",style:{...R,...e},"aria-label":"Open Drawer",onClick:i,children:(0,S.jsx)("span",{className:"drawer-span",children:(0,S.jsxs)("svg",{className:"drawer-svg",focusable:"false",viewBox:"0 0 24 24","aria-hidden":"true",children:[(0,S.jsx)("path",{fill:"none",d:"M0 0h24v24H0z"}),(0,S.jsx)("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"})]})})},"bt-drawer"),(0,S.jsx)("div",{role:"presentation","aria-hidden":!r,className:"drawer-modal",style:a,onClick:l},"wrapper"),(0,S.jsx)("aside",{className:"drawer",style:s,children:(0,o.cloneElement)(n,{onCloseDrawer:i})},"aside")]},X={padding:3},Y=t=>{let{style:e,tabIndex:n=-1,onClick:r}=t;return(0,S.jsx)("button",{className:"svg-close",style:e,tabIndex:n,onClick:r,children:(0,S.jsxs)("svg",{viewBox:"0 0 12 12",width:"100%",height:"100%",preserveAspectRatio:"none",xmlns:"http://www.w3.org/2000/svg",style:X,strokeWidth:"2",stroke:"#f44336",strokeLinecap:"round",children:[(0,S.jsx)("path",{d:"M 0,0 L 12,12"}),(0,S.jsx)("path",{d:"M 12,0 L 0,12"})]})})},Z={backgroundColor:"#1b2836"},$=(t,e)=>t===e?Z:void 0,V=t=>{let{style:e,tabIndex:n=-1,initialValue:r=1,oneC:i="One",twoC:s="Two",threeC:a="Three",onClick:l}=t;const[c,u]=(0,o.useState)(r),h=$(c,1),d=$(c,2),p=$(c,3),f=t=>{l(t),u(t)};return(0,S.jsxs)("div",{className:"bt-triple",style:e,children:[(0,S.jsx)("button",{className:"bt-triple__one",style:h,tabIndex:n,onClick:f.bind(null,1),children:i}),(0,S.jsx)("button",{className:"bt-triple__two",style:d,tabIndex:n,onClick:f.bind(null,2),children:s}),(0,S.jsx)("button",{className:"bt-triple__three",style:p,tabIndex:n,onClick:f.bind(null,3),children:a})]})},q=t=>{t&&(document.body.style.backgroundColor=t)},G="drawer__title",K={TITLE:{paddingTop:12,paddingBottom:8},BT_TRIPLE:{marginRight:8},BT_CLOSE:{position:"relative",top:4}},J=t=>{let{onClose:e,setThemeId:n}=t;const{theme:r}=(0,o.useContext)(c);return(0,S.jsxs)("div",{className:G,style:K.TITLE,children:[(0,S.jsx)(V,{style:K.BT_TRIPLE,oneC:"GREY",twoC:"LIGHT",threeC:"SAND",onClick:t=>{q(r.getBgColor(t)),n(t)}}),(0,S.jsx)(Y,{style:K.BT_CLOSE,onClick:e})]})},Q=Date.now||(()=>new Date.getTime),tt=function(t,e){void 0===e&&(e=800);let n=0;return function(){const r=Q();if(r-n>e)return n=r,t(...arguments)}},et=(t,e,n)=>(0,o.useCallback)(tt(t,n),e||[]),nt=t=>{let{style:e,pages:n,pageCurrent:r,onPrevPage:i,onNextPage:s}=t;return n.map(((t,n)=>(0,o.cloneElement)(t,{style:e,pageCurrent:r,pageNumber:n+1,onPrevPage:i,onNextPage:s})))},rt={position:"absolute",overflow:"hidden"},ot={display:"flex",flexFlow:"row nowrap",alignItems:"flex-start",overflowX:"hidden",transition:"all 750ms ease-out"},it=t=>parseInt(t.style.transform.substr(11).replace("px","").replace(")",""),10),st=t=>{let{pageWidth:e=330,maxPages:n=3,initialPageId:r,pageRouter:a}=t;const l=(0,o.useRef)(),c=(0,o.useRef)(0),u=(0,o.useRef)({width:n*e+"px"}),h=(0,o.useRef)({width:e+"px"}),[d,p]=(0,o.useState)({pageCurrent:1,pages:[(0,o.createElement)(a[r],{key:r})]}),{pageCurrent:f,pages:g}=d,m=et((()=>{p((t=>(t.pageCurrent>1&&(t.pageCurrent-=1,s(c,-1)),{...t})))})),y=et((t=>{p((e=>{const{pages:n}=e,r=((t,e)=>t.findIndex((t=>t.key===e)))(n,t);var i,l;return e.pages=-1!==r?(l=r,[(i=n)[0],i.splice(l,1)[0],...i.slice(1)]):((t,e)=>[t[0],e,...t.slice(1)])(n,(0,o.createElement)(a[t],{key:t})),e.pageCurrent+=1,s(c,1),{...e}}))})),v=((t,e,n)=>{const r=i(e),o=i(n);let a=0;if(0!==o&&r){const e=it(r);a=1===o?e-t:e+t,s(n,0)}else 0===o&&r&&(a=it(r));return{transform:"translateX("+a+"px)"}})(e,l,c),x={...i(u),...ot,...v};return(0,S.jsx)("div",{style:rt,children:(0,S.jsx)("div",{ref:l,style:x,children:(0,S.jsx)(nt,{style:i(h),pages:g,pageCurrent:f,onPrevPage:m,onNextPage:y})})})},at=()=>{},lt=function(t,e){void 0===t&&(t=at),void 0===e&&(e=0);const n=(0,o.useRef)(null);return(0,o.useCallback)((r=>{if(0===e)return void t(r);const o=n.current,{timeStamp:i}=r;(null==o||i-o>e)&&(t(r),n.current=i)}),[e,t])},ct=Array.isArray,ut=t=>ct(t)?t[0]?t[1]:"":t||"",ht=(t,e)=>{const n=ut(t),r=ut(e);return n?r?n+" "+r:n:r||void 0},dt=Array.isArray,pt=t=>dt(t)?t[0]?t[1]:void 0:t||void 0,ft=(t,e)=>{const n=pt(t),r=pt(e);return n?r?{...n,...r}:n:r||void 0},gt={textDecoration:"underline"},mt=t=>{let{className:e,style:n,caption:r="",accessKey:o,children:i}=t;const s=((t,e)=>t?e.toLowerCase().indexOf(t):-1)(o,r),a=-1===s?r:((t,e)=>{const n=e.substring(0,t),r=e.substring(t,t+1),o=e.substring(t+1);return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("span",{children:n}),(0,S.jsx)("span",{style:gt,children:r}),(0,S.jsx)("span",{children:o})]})})(s,r);return(0,S.jsxs)("span",{className:e,style:n,children:[a,i]})},yt="bt-flat__div",vt={color:"#607d8b"},xt=(0,o.forwardRef)(((t,e)=>{let{className:n,style:r,clDiv:i=yt,clCaption:s,isPrimary:a,title:l="",caption:c,accessKey:u,timeout:h=500,onClick:d,children:p}=t;const f=(0,o.useRef)(),g=lt(d,h);(0,o.useImperativeHandle)(e,(()=>({focus:()=>{const t=f.current;t&&t.focus()}})),[]);const m=ht("bt-flat",n),y=ht("bt-flat__span",s),v=ft(r,[a,vt]),x=((t,e)=>e?t+" ["+e+"]":t)(l,u);return(0,S.jsx)("button",{ref:f,className:m,style:v,accessKey:u,tabIndex:0,title:x,onClick:g,children:(0,S.jsxs)("div",{className:i,children:[(0,S.jsx)(mt,{className:y,caption:c,accessKey:u}),p]})})})),wt=xt,bt="drawer__list-bt",kt={listStyleType:"none"},Ct=t=>{let{style:e,onNextPage:n}=t;return(0,S.jsxs)("ul",{style:{...kt,...e},children:[(0,S.jsx)("li",{children:(0,S.jsx)(wt,{className:bt,caption:"App Settings",onClick:()=>n("p1-1")})}),(0,S.jsx)("li",{children:(0,S.jsx)(wt,{className:bt,caption:"AltCoins",onClick:()=>n("p1-2")})})]})},St=t=>{let{onClick:e}=t;return(0,S.jsx)(wt,{className:"drawer__list-bt",caption:"< Menu",onClick:e})},Dt=t=>{let{item:e,propCaption:n}=t;return(0,S.jsx)("span",{children:e[n]})},At="zhn-select",Mt=At+"__input",Tt=At+"__spinner",_t=Tt+"--failed",Pt=At+"__input__hr",jt=At+"__options",Nt=jt+"__div",Et=At+"__row",It=Et+"--active",Ft=At+"__footer",Lt=Ft+"__index",Ot=Ft+"__bts",Rt=Ft+"--margin",Wt=(t,e)=>t?-1!==(""+t).indexOf("%")?{...e,width:t}:{...e,width:t+"px"}:null,zt=t=>{let{className:e="",style:n,caption:r="",onClick:o,...i}=t;return(0,S.jsx)("button",{className:"zhn-bt-circle2 "+e,style:n,onClick:o,...i,children:(0,S.jsx)("div",{children:r})})},Ut={backgroundColor:"#949ab4"},Ht=(0,o.forwardRef)(((t,e)=>{let{indexActiveOption:n,nFiltered:r,nAll:o,onStepDown:i,onStepUp:s,onClear:a}=t;return(0,S.jsxs)("div",{className:Ft+" not-selected",children:[(0,S.jsxs)("span",{className:Lt,children:[(0,S.jsx)("span",{ref:e,children:n}),(0,S.jsxs)("span",{children:[": ",r,": ",o]})]}),(0,S.jsxs)("span",{className:Ot,children:[(0,S.jsx)(zt,{className:Rt,style:Ut,caption:"Dn",onClick:i}),(0,S.jsx)(zt,{className:Rt,style:Ut,caption:"Up",onClick:s}),(0,S.jsx)(zt,{style:Ut,caption:"CL",onClick:a})]})]})})),Bt={display:"block"},Xt={display:"none"},Yt=t=>{let{refOptionsElement:e,refIndexElement:n,optionsStyle:r,width:o,isShowOption:i,indexActiveOption:s,nFiltered:a,nAll:l,onStepUp:c,onStepDown:u,onClear:h,children:d}=t;const p=Wt(o,i?Bt:Xt);return(0,S.jsxs)("div",{className:jt,style:p,"data-scrollable":!0,children:[(0,S.jsx)("div",{ref:e,className:Nt,style:{...r,...p},children:d}),(0,S.jsx)(Ht,{ref:n,indexActiveOption:s,nAll:l,nFiltered:a,onStepUp:c,onStepDown:u,onClear:h})]})},Zt=t=>{let{options:e,indexActiveOption:n,propCaption:r,ItemOptionComp:o,onClick:i}=t;return e.map(((t,e)=>(0,S.jsx)("div",{role:"option","aria-selected":n===e,tabIndex:"-1",className:Et,"data-index":e,onClick:e=>i(t,e),children:(0,S.jsx)(o,{item:t,propCaption:r})},e)))},$t={position:"absolute",top:10,right:0,width:35,paddingRight:5,textAlign:"center",verticalAlign:"middle",cursor:"pointer"},Vt={position:"relative",top:2,display:"inline-block",height:0,width:0,borderColor:"#999 transparent transparent",borderStyle:"solid",borderWidth:"10px 8px 4px"},qt=(0,o.forwardRef)(((t,e)=>{let{arrowStyle:n,onClick:r}=t;const i=(0,o.useRef)(),s=(0,o.useRef)();return(0,o.useImperativeHandle)(e,(()=>({startAnimation:()=>{a(i).animation="circle infinite 1.25s linear",a(s).borderColor="#1b75bb transparent transparent"},stopAnimation:()=>{a(i).animation=""}}))),(0,S.jsx)("button",{type:"button",ref:i,style:$t,tabIndex:"-1",onClick:r,children:(0,S.jsx)("span",{ref:s,style:{...Vt,...n}})})})),Gt={borderColor:"#1b75bb transparent transparent"},Kt=(t,e,n,r)=>{const{isLoading:o,isLoadingFailed:i,placeholder:s,optionName:a="",onLoadOption:l}=t,{isShowOption:c,optionNames:u}=e;return o||i?o?["Loading "+u+"...",(0,S.jsx)("span",{className:Tt,"data-loader":"circle"})]:i?["Loading "+u+" Failed",(0,S.jsx)(zt,{className:_t,"data-loader":"circle-failed",onClick:l})]:[]:[s||"Select "+a+"...",(0,S.jsx)(qt,{ref:n,arrowStyle:c?Gt:void 0,onClick:r})]},Jt="From input:",Qt=(t,e,n,r)=>{const o=((t,e,n)=>{const r=e.toLowerCase();return(t||[]).filter((t=>-1!==t[n].toLowerCase().indexOf(r)))})(e,t,n);return 0===o.length&&o.push(((t,e,n)=>{const r=String(t).replace(Jt,"").trim();return{[e]:n?Jt+" "+r:"No results found",value:"noresult",inputValue:r}})(t,n,r)),o},te=(t,e)=>{const n=(0,o.useRef)(t);return(0,o.useMemo)((()=>[t=>{n.current=t},()=>void 0===n.current?e:n.current]),[])},ee=t=>"number"==typeof t&&t-t==0,ne=t=>{const{dataset:e}=t,{index:n}=e||{};return Number(n)},re=(t,e)=>(0,o.useMemo)((()=>[e=>{if(e){e.classList.add(It);const n=ne(e),r=i(t);r&&ee(n)&&(r.textContent=n+1)}},t=>{const n=t||e();n&&n.classList.remove(It)}]),[]),oe=t=>(t.children||{}).length,ie=()=>{const t=(0,o.useRef)(),e=(0,o.useRef)(),[n,r]=te(0),s=(0,o.useMemo)((()=>()=>((i(t)||{}).childNodes||[])[r()]),[]),[a,l]=re(e,s);return[t,e,n,r,s,a,l,...(0,o.useMemo)((()=>[()=>{const e=s();if(e){l(e);const o=i(t);n(r()+1),r()>=oe(o)&&(n(0),o.scrollTop=0);const c=s();a(c);const u=c.offsetTop,h=o.scrollTop;u-h>70&&(o.scrollTop+=u-h-70)}},()=>{const e=s();if(e){l(e);const o=i(t);if(n(r()-1),r()<0){n(oe(o)-1);const t=s();o.scrollTop=t.offsetTop}const c=s();a(c);const u=c.offsetTop,h=o.scrollTop;u-h<70&&(o.scrollTop-=70-(u-h))}}]),[])]},se=[],ae=t=>{let{optionName:e,optionNames:n,options:r=se}=t;return{value:"",initialOptions:r,options:r,optionNames:n||e||""}},le=()=>{},ce=t=>{const{style:e,width:n,optionsStyle:r,propCaption:i="caption",ItemOptionComp:s=Dt,isWithInput:a=!1,onSelect:l=le}=t,c=(0,o.useRef)(),u=(0,o.useRef)(),[h,d]=(0,o.useState)((()=>ae(t))),{value:p,options:f,initialOptions:g}=h,[m,y]=O(!1),[v,x,w,b,k,C,D,A,M]=ie(),T=(0,o.useCallback)((()=>{D(),d((()=>ae(t))),y(!1),w(0),l()}),[t.options,l]),_=(0,o.useCallback)(((t,e)=>{D(),w(ne(e.currentTarget)),y(!1),d((e=>({...e,value:t[i]}))),l(t)}),[]),P=(0,o.useMemo)((()=>(0,S.jsx)(Zt,{options:f,indexActiveOption:b(),propCaption:i,ItemOptionComp:s,onClick:_})),[f]);(0,o.useEffect)((()=>{if(m){const t=k();C(t),(t=>{if(t){const{offsetTop:e}=t,n=t.parentElement,{scrollTop:r}=n;e-r>70&&(n.scrollTop+=e-r-70),e-r<0&&(n.scrollTop=0)}})(t)}}),[m]),(0,o.useEffect)((()=>{t.options!==g&&T()}),[t.options]);const j=b(),N=Wt(n,e),[E,I]=Kt(t,h,c,y),[F,L]=((t,e)=>[t[0]&&"noresult"!==t[0].value?t.length:0,e?e.length:0])(f,g);return(0,S.jsxs)("div",{className:At,style:N,children:[(0,S.jsx)("input",{ref:u,className:Mt,type:"text",name:"select",autoCorrect:"off",autoCapitalize:"off",spellCheck:!1,value:p,placeholder:E,onChange:t=>{const e=t.target.value,n=e.length,r=p.length;n!==r&&(0!==b()&&(D(),w(0)),d((t=>({...t,value:e,options:Qt(e,n>r?f:g,i,a)}))),y(!0))},onKeyDown:t=>{switch(t.keyCode){case 13:{const t=b();if(ee(t)){const e=f[t];e&&e[i]&&(l(((t,e,n)=>"noresult"!==t.value?t:n?{[e]:"From Input",value:t.inputValue}:void 0)(e,i,a)),y(!1),d((t=>({...t,value:e[i]}))))}else l();break}case 27:case 46:t.preventDefault(),m?y(!1):T();break;case 40:m?(t.preventDefault(),A()):y(!0);break;case 38:m&&(t.preventDefault(),M());break;default:return}}}),I,(0,S.jsx)("hr",{className:Pt}),(0,S.jsx)(Yt,{refOptionsElement:v,refIndexElement:x,optionsStyle:r,width:n,isShowOption:m,indexActiveOption:j,nFiltered:F,nAll:L,onStepUp:M,onStepDown:A,onClear:T,children:P})]})},ue={display:"flex",alignItems:"center",marginRight:5,marginTop:5,marginLeft:5,marginBottom:5},he={marginLeft:12,marginRight:12},de={color:"#1b75bb",display:"inline-block",textAlign:"right",width:100,paddingRight:5,fontSize:"16px",fontWeight:"bold",userSelect:"none"},pe={display:"none"},fe=t=>{let{isShowLabels:e=!0,caption:n="",captionStyle:r,...o}=t;const i=(t=>t&&-1===t.indexOf(":")?t+":":t)(n),[s,a]=function(t){return void 0===t&&(t=!0),t?[{...ue},{...de}]:[{...ue,...he},{...de,...pe}]}(e),l={width:270,...o,optionName:e?"":n.replace(":","")};return(0,S.jsxs)("div",{style:s,children:[(0,S.jsx)("span",{style:{...a,...r},children:i}),(0,S.jsx)(ce,{...l})]})},ge=t=>{let{style:e,exchanges:n,onSelectExchange:r,isMarkets:o={},markets:i,onSelectMarket:s,timeframes:a,onSelectTimeframe:l}=t;return(0,S.jsxs)("div",{style:e,children:[(0,S.jsx)(fe,{isShowLabels:!1,placeholder:"Exchanges",options:n,onSelect:r}),(0,S.jsx)(fe,{isShowLabels:!1,placeholder:"Time Frames (Default: 1d)",options:a,onSelect:l}),(0,S.jsx)(fe,{isShowLabels:!1,placeholder:"Markets",isLoading:o.loading,isLoadingFailed:o.failed,options:i,onSelect:s})]})},me="MARKET_LOADING",ye="MARKET_LOADED",ve="MARKET_LOADING_FAIL",xe="EXCHANGES_SET",we="EXCHANGE_SET",be="PAIR_SET",ke=(t,e)=>{switch(e.type){case me:return{...t,isMarkets:{loading:!0,failed:!1}};case ye:return{...t,exchange:e.exchange,markets:e.markets,isMarkets:{loading:!1,failed:!1}};case ve:return{...t,isMarkets:{loading:!1,failed:!0}};case xe:return{...t,exchanges:e.exchanges};case we:return{...t,exchange:e.exchange,pair:void 0};case be:return{...t,pair:e.pair};default:throw new TypeError("Not existed action "+e.type)}},Ce={exchange:"",pair:"",isMarkets:{loading:!1,failed:!1},exchanges:[],markets:[]},Se=t=>{let{dispatch:e,exchImpl:n,exchange:r,proxy:o}=t;e({type:me}),n.fetchMarkets(o).then((t=>{e({type:ye,exchange:r,markets:t})})).catch((t=>{e({type:ve}),console.log(t.message)}))},De=t=>{let{exchImpl:e,exchange:n,pair:r,timeframe:o,dataAction:i,proxy:s}=t;i.loading();const{v:a,tf:l}="object"==typeof o?o:{v:o,tf:o};e.fetchOHLCV(r,a,s).then((t=>{0!==t.length&&i.loadData({providerTitle:n,itemTitle:r,data:t,timeframe:l})})).catch((t=>{i.loadFailed(),console.log(t.message)}))},Ae=t=>fetch(t).then((t=>{const{status:e}=t;if(e>=200&&e<400)return t.json();throw new Error("Response is incorrect: "+e)})),Me=Array.isArray,Te=(t,e)=>{const n=e?(t||{})[e]:t;return Me(n)?n:[]},_e=(t,e)=>t.caption<e.caption?-1:t.caption>e.caption?1:0,Pe=t=>"object"==typeof t,je="https://api.binance.com/api/v3",Ne=je+"/exchangeInfo",Ee=je+"/klines",Ie={fetchMarkets:()=>Ae(Ne).then((t=>Te(t,"symbols").reduce(((t,e)=>{const{baseAsset:n,quoteAsset:r,status:o}=e||{};return"TRADING"===o&&t.push({caption:n+"/"+r,value:""+n+r}),t}),[]).sort(_e))),getTimeframes:()=>[{caption:"1m",value:"1m"},{caption:"3m",value:"3m"},{caption:"5m",value:"5m"},{caption:"15m",value:"15m"},{caption:"30m",value:"30m"},{caption:"1h",value:"1h"},{caption:"2h",value:"2h"},{caption:"4h",value:"4h"},{caption:"8h",value:"8h"},{caption:"12h",value:"12h"},{caption:"1d",value:"1d"},{caption:"3d",value:"3d"},{caption:"1w",value:"1w"},{caption:"1M",value:"1M"}],fetchOHLCV:(t,e)=>Ae(((t,e)=>Ee+"?symbol="+t+"&interval="+e)(t,e)).then((t=>Te(t).reduce(((t,e)=>(Pe(e)&&t.push({date:e[0],open:parseFloat(e[1]),high:parseFloat(e[2]),low:parseFloat(e[3]),close:parseFloat(e[4]),volume:parseFloat(e[5])}),t)),[])))},Fe="https://www.bitstamp.net/api/v2",Le=Fe+"/trading-pairs-info/",Oe=Fe+"/ohlc",Re={binance:Ie,bitstamp:{isRequireProxy:!0,fetchMarkets:t=>Ae(t+"/"+Le).then((t=>Te(t).reduce(((t,e)=>{const{trading:n,name:r,url_symbol:o}=e||{};if("Enabled"===n)return t.push({caption:r,value:o}),t}),[]))),getTimeframes:()=>[{caption:"1m",value:{v:"60",tf:"1m"}},{caption:"3m",value:{v:"180",tf:"3m"}},{caption:"5m",value:{v:"300",tf:"5m"}},{caption:"15m",value:{v:"900",tf:"15m"}},{caption:"30m",value:{v:"1800",tf:"30m"}},{caption:"1h",value:{v:"3600",tf:"1h"}},{caption:"2h",value:{v:"7200",tf:"2h"}},{caption:"4h",value:{v:"14400",tf:"4h"}},{caption:"10h",value:{v:"21600",tf:"10h"}},{caption:"12h",value:{v:"43200",tf:"12h"}},{caption:"1d",value:{v:"86400",tf:"1d"}},{caption:"3d",value:{v:"259200",tf:"3d"}}],fetchOHLCV:(t,e,n)=>Ae(((t,e,n)=>n+"/"+Oe+"/"+t+"?step="+e+"&limit=300")(t,e,n)).then((t=>Te((t||{}).data,"ohlc").reduce(((t,e)=>(Pe(e)&&t.push({date:1e3*parseFloat(e.timestamp),open:parseFloat(e.open),high:parseFloat(e.high),low:parseFloat(e.low),close:parseFloat(e.close),volume:parseFloat(e.volume)}),t)),[])))}},We=[{caption:"Binance",value:"binance"},{caption:"Bitstamp",value:"bitstamp"}],ze="1d",Ue={height:400},He={paddingLeft:8},Be=(t,e)=>"binance"===t&&"1m"===e,Xe=(t,e)=>t.isRequireProxy&&!e,Ye=t=>{let{style:e,onPrevPage:n}=t;const{appSettings:r,dataAction:i,onLiveUpdate:s,onStopUpdate:a}=(0,o.useContext)(c),{isLiveUpdating:l}=(0,o.useContext)(h),[u,d]=(0,o.useReducer)(ke,Ce),{exchange:p,pair:f,isMarkets:g,exchanges:m,markets:y}=u,[v,x]=(0,o.useState)([]),[w,b]=(0,o.useState)(ze),k=(0,o.useRef)(null);(0,o.useEffect)((()=>{d({type:xe,exchanges:We})}),[]),(0,o.useEffect)((()=>{if(p){k.current=(t=>Re[t])(p);const t=k.current,e=r.proxy();if(Xe(t,e))return;b(ze),x(t.getTimeframes()),Se({dispatch:d,exchange:p,exchImpl:t,proxy:e})}}),[p]),(0,o.useEffect)((()=>{if(f&&w){const t=k.current,e=r.proxy();if(Xe(t,e))return;De({exchange:p,pair:f,timeframe:w,exchImpl:t,dataAction:i,proxy:e})}}),[f,w]);return(0,S.jsxs)("div",{style:{...Ue,...e},children:[(0,S.jsx)(St,{onClick:n}),(0,S.jsx)(ge,{exchanges:m,onSelectExchange:t=>{t&&t.value&&d({type:we,exchange:t.value})},isMarkets:g,markets:y,onSelectMarket:t=>{d({type:be,pair:t&&t.value||void 0})},timeframes:v,onSelectTimeframe:t=>{b(t&&t.value||ze)}}),Be(p,w)&&(0,S.jsx)("div",{style:He,children:(0,S.jsx)(wt,{caption:l?"Stop Updating":"Live Updating 1min",onClick:l?a:()=>s(f)})})]})},Ze={display:"inline",color:"green",height:26,width:40,paddingLeft:5,margin:"0 5px",fontSize:"16px",fontWeight:"bold",border:"medium none",outline:"medium none",background:"transparent none repeat scroll 0 0",backgroundColor:"#e1e1cb"},$e="text",Ve="off",qe=()=>{},Ge=(0,o.forwardRef)(((t,e)=>{let{initValue:n,style:r,spellCheck:i,placeholder:s,type:a=$e,maxLenght:l=125,onEnter:c=qe}=t;const u=(0,o.useRef)(),[h,d]=(0,o.useState)((()=>null!=n?n:"")),p=(0,o.useCallback)((t=>{const{value:e}=t.target;e.length<=l&&d(e)}),[l]),f=(0,o.useCallback)((t=>{switch(t.keyCode){case 27:case 46:t.preventDefault(),d("");break;case 13:c(t.target.value);break;default:return}}),[]);(0,o.useImperativeHandle)(e,(()=>({getValue:()=>(u.current||{}).value,setValue:t=>d(t)})),[]);const g=i?"on":Ve,m=!!i;return(0,S.jsx)("input",{ref:u,style:{...Ze,...r},type:a,name:$e,autoCapitalize:Ve,autoComplete:Ve,autoCorrect:g,spellCheck:m,translate:"false",value:h,placeholder:s,maxLength:l,onChange:p,onKeyDown:f})})),Ke=Ge,Je={paddingLeft:4},Qe={color:"#265782",display:"inline-block",padding:"0 0 4px 8px",fontWeight:"bold"},tn={display:"block",width:"92%",height:32,padding:"8px 0 8px 4px"},en={float:"right",padding:"6px 22px 0 0"},nn="http://127.0.0.1",rn=t=>!!(t=>"string"==typeof t)(t)&&-1!==t.indexOf(nn),on=t=>{let{style:e,onPrevPage:n}=t;const{appSettings:r}=(0,o.useContext)(c),s=(0,o.useRef)(),[a,l]=(0,o.useState)(0),u=r.proxy();return(0,S.jsxs)("div",{style:{...Je,...e},children:[(0,S.jsx)(St,{onClick:n}),(0,S.jsxs)("div",{children:[(0,S.jsx)("span",{style:Qe,children:"Local Proxy Server"}),(0,S.jsx)(Ke,{ref:s,style:tn,initValue:u,placeholder:nn,onEnter:t=>{rn(t)?r.proxy(t):i(s).setValue("")}},a),(0,S.jsxs)("div",{style:en,children:[(0,S.jsx)(wt,{caption:"Clear",onClick:()=>{r.clearProxy(),l((t=>t+1))}}),(0,S.jsx)(wt,{caption:"Apply",onClick:()=>{const t=i(s),e=t.getValue();rn(e)?r.proxy(e):t.setValue("")}})]})]})]})},sn={p1:Ct,"p1-1":on,"p1-2":Ye},an="drawer__list",ln=t=>{let{onCloseDrawer:e}=t;const{theme:n,setThemeId:r}=(0,o.useContext)(c),i=(0,o.useContext)(u),s=n.getDrawerStyle(i);return(0,S.jsxs)("div",{className:an,style:s,children:[(0,S.jsx)(J,{setThemeId:r,onClose:e}),(0,S.jsx)(st,{pageRouter:sn,initialPageId:"p1",maxPages:4})]})},cn=t=>(0,S.jsx)(B,{children:(0,S.jsx)(ln,{...t})}),un={position:"relative",top:6,left:8,display:"inline-block",verticalAlign:"middle",cursor:"pointer"},hn={color:"#80c040",display:"inline-block",paddingLeft:6,fontSize:16,fontWeight:"bold"},dn=t=>{let{spinnerCn:e,onStopUpdate:n}=t;const{isLiveUpdating:r,sec:i}=(0,o.useContext)(h);return r&&(0,S.jsxs)("button",{style:un,onClick:n,children:[(0,S.jsx)("span",{className:e,"data-loader":"circle"}),(0,S.jsx)("span",{style:hn,children:i})]})},pn="header",fn=pn+"__logo-notes",gn=pn+"__title-gap",mn=pn+"__title",yn=pn+"__spinner",vn=t=>t.charAt(0).toUpperCase()+t.slice(1),xn=t=>{let{text:e,is:n}=t;return(0,S.jsxs)("span",{className:mn,children:[vn(e),!n&&(0,S.jsx)("span",{children:":Â "})]})},wn=t=>{let{fetchStatus:e,providerTitle:n="",itemTitle:r="",timeframe:i="",isLiveUpdating:s,...a}=t;const{theme:l,onStopUpdate:h}=(0,o.useContext)(c),d=(0,o.useContext)(u),p=l.getHeaderStyle(d);return(0,S.jsxs)("header",{className:pn,style:p,children:[(0,S.jsx)(L,{fetchStatus:e}),(0,S.jsx)(A,{className:fn}),(0,S.jsx)("span",{className:gn}),(0,S.jsx)(xn,{text:n}),(0,S.jsx)(xn,{text:r}),(0,S.jsx)(xn,{text:i,is:!0}),(0,S.jsx)(dn,{spinnerCn:yn,onStopUpdate:h}),(0,S.jsx)(cn,{...a})]})},bn=Math.sqrt,kn=(t,e)=>{let n,r;if(void 0===e)for(const e of t)null!=e&&(void 0===n?e>=e&&(n=r=e):(n>e&&(n=e),r<e&&(r=e)));else{let o=-1;for(let i of t)null!=(i=e(i,++o,t))&&(void 0===n?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)))}return[n,r]},Cn=(t,e)=>{let n;if(void 0===e)for(const e of t)null!=e&&(n<e||void 0===n&&e>=e)&&(n=e);else{let r=-1;for(let o of t)null!=(o=e(o,++r,t))&&(n<o||void 0===n&&o>=o)&&(n=o)}return n},Sn=(t,e)=>{let n;if(void 0===e)for(const e of t)null!=e&&(n>e||void 0===n&&e>=e)&&(n=e);else{let r=-1;for(let o of t)null!=(o=e(o,++r,t))&&(n>o||void 0===n&&o>=o)&&(n=o)}return n},Dn=(t,e)=>{let n=0,r=0;if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(++n,r+=e);else{let o=-1;for(let i of t)null!=(i=e(i,++o,t))&&(i=+i)>=i&&(++n,r+=i)}if(n)return r/n},An=Math.max,Mn=Math.ceil,Tn=t=>t.length,_n=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return(t=>{let e=t.length;if(!e)return[];let n,r,o=-1,i=Sn(t,Tn),s=new Array(i);for(;++o<i;)for(n=-1,r=s[o]=new Array(e);++n<e;)r[n]=t[n][o];return s})(e)},Pn=t=>t;function jn(){let t=Pn;const e=t=>t.length;function n(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];const i=r.length;if(!i)return[];const s=Sn(r,e),a=new Array(s);for(let e=-1;++e<s;){for(let t=-1,n=a[e]=new Array(i);++t<i;)n[t]=r[t][e];a[e]=t.apply(this,a[e])}return a}return n.combine=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],n):t},n}const Nn=Array.isArray,En=function(t){void 0===t&&(t=[]);const e=Nn(t)?t:[t],n=e.length;return function(t,r){if(0===n)return null!=t?t:r;let o=0;for(;null!=t&&o<n;)t=t[e[o++]];return o===n?t:r}},In=t=>"function"==typeof t?t:()=>t;function Fn(){let t,e,n,r,o=10,i=()=>{},s=0,a=function(a){const l=n||En(e),c=In(o).apply(this,arguments),u=a.slice(s,c+s).map(l);let h=0;const d=In(t);return a.map(((t,e)=>e<s+c-1?d(l(t),e,r):(e>=s+c&&(u.shift(),u.push(l(t,e))),i(u,e,h++,r))))};return a.undefinedValue=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],a):t},a.windowSize=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],a):o},a.misc=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],a):r},a.accumulator=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],a):i},a.skipInitial=function(){return arguments.length?(s=arguments.length<=0?void 0:arguments[0],a):s},a.sourcePath=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],a):e},a.source=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],a):n},a}const Ln=t=>{switch(t){default:case"Solid":return"none";case"ShortDash":return"6, 2";case"ShortDash2":return"6, 3";case"ShortDot":return"2, 2";case"ShortDashDot":return"6, 2, 2, 2";case"ShortDashDotDot":return"6, 2, 2, 2, 2, 2";case"Dot":return"2, 6";case"Dash":return"4, 6";case"LongDash":return"16, 6";case"DashDot":return"8, 6, 2, 6";case"LongDashDot":return"16, 6, 2, 6";case"LongDashDotDot":return"16, 6, 2, 6, 2, 6"}},On=t=>{const e=Ln(t).split(",");return 1===e.length?[]:e.map((t=>Number(t)))};class Rn extends Map{constructor(t,e=Hn){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const[e,n]of t)this.set(e,n)}get(t){return super.get(Wn(this,t))}has(t){return super.has(Wn(this,t))}set(t,e){return super.set(zn(this,t),e)}delete(t){return super.delete(Un(this,t))}}function Wn({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function zn({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function Un({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function Hn(t){return null!==t&&"object"==typeof t?t.valueOf():t}function Bn(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}const Xn=Symbol("implicit");const Yn=(t,e,n)=>{const r=e[n];if("function"!=typeof r)throw new Error("Attempt to rebind "+n+" which isn't a function on the source object");return function(){for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];const s=r.apply(e,o);return s===e?t:s}},Zn=function(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];for(const n of r)t[n]=Yn(t,e,n);return t};function $n(){let t=Pn,e=!0,n=()=>{};function r(r){const o=jn().combine(((t,r)=>{const o=e&&void 0===r?t:n(t,r);return void 0===o?t:o}));return o(r,t(r))}return r.algorithm=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],r):t},r.merge=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],r):n},r.skipUndefined=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],r):e},r}const Vn=t=>"translate("+t[0]+", "+t[1]+")",qn=function t(){var e=new Rn,n=[],r=[],o=Xn;function i(t){let i=e.get(t);if(void 0===i){if(o!==Xn)return o;e.set(t,i=n.push(t)-1)}return r[i%r.length]}return i.domain=function(t){if(!arguments.length)return n.slice();n=[],e=new Rn;for(const r of t)e.has(r)||e.set(r,n.push(r)-1);return i},i.range=function(t){return arguments.length?(r=Array.from(t),i):r.slice()},i.unknown=function(t){return arguments.length?(o=t,i):o},i.copy=function(){return t(n,r).unknown(o)},Bn.apply(i,arguments),i}(["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"]);const Gn=(t,e)=>{const n=t.replace("#","");if(t.indexOf("#")>-1&&(3===n.length||6===n.length)){const t=3===n.length?1:2;return"rgba("+parseInt(n.substring(0,1*t),16)+", "+parseInt(n.substring(1*t,2*t),16)+", "+parseInt(n.substring(2*t,3*t),16)+", "+e+")"}return t},Kn=(t,e)=>{if(e&&t){let n;for(let r=t.length-1;r>=0;r--)if(n=t[r],null!=e(n))return n;return}const n=t?t.length:0;return n?t[n-1]:void 0},Jn=(t,e)=>{if(!e||!t)return t?t[0]:void 0;{let n;for(let r=0;r<t.length;r++)if(n=t[r],null!=e(n))return n}},Qn=Jn,tr=(t,e)=>{const{widthRatio:n}=t,{xScale:r}=e,[o,i]=r.range(),s=Math.abs(i-o);let a;if(null!=r.invert){const[t,e]=r.domain();a=s/Math.abs(t-e)}else a=s/r.domain().length;return a*n},er=(t,e,n)=>{let r=0,o=t.length-1;for(;o-r>1;){const i=Math.round((r+o)/2);n(t[i])<=e?r=i:o=i}const i=n(t[r]),s=n(t[o]);return(null==i?void 0:i.valueOf())===(null==e?void 0:e.valueOf())&&(o=r),(null==s?void 0:s.valueOf())===(null==e?void 0:e.valueOf())&&(r=o),i<e&&s<e&&(r=o),i>e&&s>e&&(o=r),{left:r,right:o}},nr=(t,e)=>{if(t===e)return!0;if(!(t instanceof Object&&e instanceof Object))return!1;const n=Object.keys(t),r=n.length;for(let t=0;t<r;t++)if(!(n[t]in e))return!1;for(let o=0;o<r;o++)if(t[n[o]]!==e[n[o]])return!1;return r===Object.keys(e).length};o.Component;const rr=Array.isArray,or=t=>(t>0)-(t<0),ir=t=>t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView),sr="mouseenter.interaction",ar="mouseleave.interaction",lr="mousemove.pan",cr="mouseup.pan",ur="touchmove.pan",hr="touchend.pan touchcancel.pan",dr=t=>({pageX:t.pageX,pageY:t.pageY,clientX:t.clientX,clientY:t.clientY}),pr=(t,e,n)=>[Math.round(t.clientX-e.left-n.clientLeft),Math.round(t.clientY-e.top-n.clientTop)],fr=(t,e)=>{const n=e.currentTarget,r=n.getBoundingClientRect();return pr(t,r,n)},gr=(t,e)=>{const n=t.currentTarget,r=null!=e?e:n.getBoundingClientRect();return pr(t,r,n)},mr=(t,e)=>{t.forEach((t=>{t.setTransform(1,0,0,1,0,0),t.clearRect(-1,-1,t.canvas.width+2,t.canvas.height+2),t.scale(e,e)}))};var yr=n(779),vr=n.n(yr),xr=Math.sqrt(50),wr=Math.sqrt(10),br=Math.sqrt(2);function kr(t,e,n){var r=(e-t)/Math.max(0,n),o=Math.floor(Math.log(r)/Math.LN10),i=r/Math.pow(10,o);return o>=0?(i>=xr?10:i>=wr?5:i>=br?2:1)*Math.pow(10,o):-Math.pow(10,-o)/(i>=xr?10:i>=wr?5:i>=br?2:1)}function Cr(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),o=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),i=r/o;return i>=xr?o*=10:i>=wr?o*=5:i>=br&&(o*=2),e<t?-o:o}function Sr(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Dr(t,e){return null==t||null==e?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Ar(t){let e,n,r;function o(t,r,o=0,i=t.length){if(o<i){if(0!==e(r,r))return i;do{const e=o+i>>>1;n(t[e],r)<0?o=e+1:i=e}while(o<i)}return o}return 2!==t.length?(e=Sr,n=(e,n)=>Sr(t(e),n),r=(e,n)=>t(e)-n):(e=t===Sr||t===Dr?t:Mr,n=t,r=t),{left:o,center:function(t,e,n=0,i=t.length){const s=o(t,e,n,i-1);return s>n&&r(t[s-1],e)>-r(t[s],e)?s-1:s},right:function(t,r,o=0,i=t.length){if(o<i){if(0!==e(r,r))return i;do{const e=o+i>>>1;n(t[e],r)<=0?o=e+1:i=e}while(o<i)}return o}}}function Mr(){return 0}const Tr=Ar(Sr),_r=Tr.right,Pr=(Tr.left,Ar((function(t){return null===t?NaN:+t})).center,_r);function jr(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Nr(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Er(){}var Ir=.7,Fr=1/Ir,Lr="\\s*([+-]?\\d+)\\s*",Or="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Rr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Wr=/^#([0-9a-f]{3,8})$/,zr=new RegExp(`^rgb\\(${Lr},${Lr},${Lr}\\)$`),Ur=new RegExp(`^rgb\\(${Rr},${Rr},${Rr}\\)$`),Hr=new RegExp(`^rgba\\(${Lr},${Lr},${Lr},${Or}\\)$`),Br=new RegExp(`^rgba\\(${Rr},${Rr},${Rr},${Or}\\)$`),Xr=new RegExp(`^hsl\\(${Or},${Rr},${Rr}\\)$`),Yr=new RegExp(`^hsla\\(${Or},${Rr},${Rr},${Or}\\)$`),Zr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function $r(){return this.rgb().formatHex()}function Vr(){return this.rgb().formatRgb()}function qr(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Wr.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?Gr(e):3===n?new Qr(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?Kr(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?Kr(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=zr.exec(t))?new Qr(e[1],e[2],e[3],1):(e=Ur.exec(t))?new Qr(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Hr.exec(t))?Kr(e[1],e[2],e[3],e[4]):(e=Br.exec(t))?Kr(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Xr.exec(t))?io(e[1],e[2]/100,e[3]/100,1):(e=Yr.exec(t))?io(e[1],e[2]/100,e[3]/100,e[4]):Zr.hasOwnProperty(t)?Gr(Zr[t]):"transparent"===t?new Qr(NaN,NaN,NaN,0):null}function Gr(t){return new Qr(t>>16&255,t>>8&255,255&t,1)}function Kr(t,e,n,r){return r<=0&&(t=e=n=NaN),new Qr(t,e,n,r)}function Jr(t,e,n,r){return 1===arguments.length?((o=t)instanceof Er||(o=qr(o)),o?new Qr((o=o.rgb()).r,o.g,o.b,o.opacity):new Qr):new Qr(t,e,n,null==r?1:r);var o}function Qr(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function to(){return`#${oo(this.r)}${oo(this.g)}${oo(this.b)}`}function eo(){const t=no(this.opacity);return`${1===t?"rgb(":"rgba("}${ro(this.r)}, ${ro(this.g)}, ${ro(this.b)}${1===t?")":`, ${t})`}`}function no(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function ro(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function oo(t){return((t=ro(t))<16?"0":"")+t.toString(16)}function io(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new ao(t,e,n,r)}function so(t){if(t instanceof ao)return new ao(t.h,t.s,t.l,t.opacity);if(t instanceof Er||(t=qr(t)),!t)return new ao;if(t instanceof ao)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,o=Math.min(e,n,r),i=Math.max(e,n,r),s=NaN,a=i-o,l=(i+o)/2;return a?(s=e===i?(n-r)/a+6*(n<r):n===i?(r-e)/a+2:(e-n)/a+4,a/=l<.5?i+o:2-i-o,s*=60):a=l>0&&l<1?0:s,new ao(s,a,l,t.opacity)}function ao(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function lo(t){return(t=(t||0)%360)<0?t+360:t}function co(t){return Math.max(0,Math.min(1,t||0))}function uo(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function ho(t,e,n,r,o){var i=t*t,s=i*t;return((1-3*t+3*i-s)*e+(4-6*i+3*s)*n+(1+3*t+3*i-3*s)*r+s*o)/6}jr(Er,qr,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:$r,formatHex:$r,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return so(this).formatHsl()},formatRgb:Vr,toString:Vr}),jr(Qr,Jr,Nr(Er,{brighter(t){return t=null==t?Fr:Math.pow(Fr,t),new Qr(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?Ir:Math.pow(Ir,t),new Qr(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Qr(ro(this.r),ro(this.g),ro(this.b),no(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:to,formatHex:to,formatHex8:function(){return`#${oo(this.r)}${oo(this.g)}${oo(this.b)}${oo(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:eo,toString:eo})),jr(ao,(function(t,e,n,r){return 1===arguments.length?so(t):new ao(t,e,n,null==r?1:r)}),Nr(Er,{brighter(t){return t=null==t?Fr:Math.pow(Fr,t),new ao(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?Ir:Math.pow(Ir,t),new ao(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,o=2*n-r;return new Qr(uo(t>=240?t-240:t+120,o,r),uo(t,o,r),uo(t<120?t+240:t-120,o,r),this.opacity)},clamp(){return new ao(lo(this.h),co(this.s),co(this.l),no(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=no(this.opacity);return`${1===t?"hsl(":"hsla("}${lo(this.h)}, ${100*co(this.s)}%, ${100*co(this.l)}%${1===t?")":`, ${t})`}`}}));const po=t=>()=>t;function fo(t,e){return function(n){return t+n*e}}function go(t){return 1==(t=+t)?mo:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):po(isNaN(e)?n:e)}}function mo(t,e){var n=e-t;return n?fo(t,n):po(isNaN(t)?e:t)}const yo=function t(e){var n=go(e);function r(t,e){var r=n((t=Jr(t)).r,(e=Jr(e)).r),o=n(t.g,e.g),i=n(t.b,e.b),s=mo(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=o(e),t.b=i(e),t.opacity=s(e),t+""}}return r.gamma=t,r}(1);function vo(t){return function(e){var n,r,o=e.length,i=new Array(o),s=new Array(o),a=new Array(o);for(n=0;n<o;++n)r=Jr(e[n]),i[n]=r.r||0,s[n]=r.g||0,a[n]=r.b||0;return i=t(i),s=t(s),a=t(a),r.opacity=1,function(t){return r.r=i(t),r.g=s(t),r.b=a(t),r+""}}}vo((function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),o=t[r],i=t[r+1],s=r>0?t[r-1]:2*o-i,a=r<e-1?t[r+2]:2*i-o;return ho((n-r/e)*e,s,o,i,a)}})),vo((function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),o=t[(r+e-1)%e],i=t[r%e],s=t[(r+1)%e],a=t[(r+2)%e];return ho((n-r/e)*e,o,i,s,a)}}));function xo(t,e){var n,r=e?e.length:0,o=t?Math.min(r,t.length):0,i=new Array(o),s=new Array(r);for(n=0;n<o;++n)i[n]=Mo(t[n],e[n]);for(;n<r;++n)s[n]=e[n];return function(t){for(n=0;n<o;++n)s[n]=i[n](t);return s}}function wo(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function bo(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function ko(t,e){var n,r={},o={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?r[n]=Mo(t[n],e[n]):o[n]=e[n];return function(t){for(n in r)o[n]=r[n](t);return o}}var Co=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,So=new RegExp(Co.source,"g");function Do(t,e){var n,r,o,i=Co.lastIndex=So.lastIndex=0,s=-1,a=[],l=[];for(t+="",e+="";(n=Co.exec(t))&&(r=So.exec(e));)(o=r.index)>i&&(o=e.slice(i,o),a[s]?a[s]+=o:a[++s]=o),(n=n[0])===(r=r[0])?a[s]?a[s]+=r:a[++s]=r:(a[++s]=null,l.push({i:s,x:bo(n,r)})),i=So.lastIndex;return i<e.length&&(o=e.slice(i),a[s]?a[s]+=o:a[++s]=o),a.length<2?l[0]?function(t){return function(e){return t(e)+""}}(l[0].x):function(t){return function(){return t}}(e):(e=l.length,function(t){for(var n,r=0;r<e;++r)a[(n=l[r]).i]=n.x(t);return a.join("")})}function Ao(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,o=e.slice();return function(i){for(n=0;n<r;++n)o[n]=t[n]*(1-i)+e[n]*i;return o}}function Mo(t,e){var n,r,o=typeof e;return null==e||"boolean"===o?po(e):("number"===o?bo:"string"===o?(n=qr(e))?(e=n,yo):Do:e instanceof qr?yo:e instanceof Date?wo:(r=e,!ArrayBuffer.isView(r)||r instanceof DataView?Array.isArray(e)?xo:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?ko:bo:Ao))(t,e)}function To(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function _o(t){return+t}var Po=[0,1];function jo(t){return t}function No(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:(n=isNaN(e)?NaN:.5,function(){return n});var n}function Eo(t,e,n){var r=t[0],o=t[1],i=e[0],s=e[1];return o<r?(r=No(o,r),i=n(s,i)):(r=No(r,o),i=n(i,s)),function(t){return i(r(t))}}function Io(t,e,n){var r=Math.min(t.length,e.length)-1,o=new Array(r),i=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)o[s]=No(t[s],t[s+1]),i[s]=n(e[s],e[s+1]);return function(e){var n=Pr(t,e,1,r)-1;return i[n](o[n](e))}}function Fo(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Lo(){var t,e,n,r,o,i,s=Po,a=Po,l=Mo,c=jo;function u(){var t,e,n,l=Math.min(s.length,a.length);return c!==jo&&(t=s[0],e=s[l-1],t>e&&(n=t,t=e,e=n),c=function(n){return Math.max(t,Math.min(e,n))}),r=l>2?Io:Eo,o=i=null,h}function h(e){return null==e||isNaN(e=+e)?n:(o||(o=r(s.map(t),a,l)))(t(c(e)))}return h.invert=function(n){return c(e((i||(i=r(a,s.map(t),bo)))(n)))},h.domain=function(t){return arguments.length?(s=Array.from(t,_o),u()):s.slice()},h.range=function(t){return arguments.length?(a=Array.from(t),u()):a.slice()},h.rangeRound=function(t){return a=Array.from(t),l=To,u()},h.clamp=function(t){return arguments.length?(c=!!t||jo,u()):c!==jo},h.interpolate=function(t){return arguments.length?(l=t,u()):l},h.unknown=function(t){return arguments.length?(n=t,h):n},function(n,r){return t=n,e=r,u()}}function Oo(){return Lo()(jo,jo)}var Ro=n(196),Wo=n(85);var zo=n(602);function Uo(t,e,n,r){var o,i=Cr(t,e,n);switch((r=(0,Ro.Z)(null==r?",f":r)).type){case"s":var s=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(o=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor((0,Wo.Z)(e)/3)))-(0,Wo.Z)(Math.abs(t)))}(i,s))||(r.precision=o),(0,zo.jH)(r,s);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(o=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,(0,Wo.Z)(e)-(0,Wo.Z)(t))+1}(i,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=o-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(o=function(t){return Math.max(0,-(0,Wo.Z)(Math.abs(t)))}(i))||(r.precision=o-2*("%"===r.type))}return(0,zo.WU)(r)}function Ho(t){var e=t.domain;return t.ticks=function(t){var n=e();return function(t,e,n){var r,o,i,s,a=-1;if(n=+n,(t=+t)==(e=+e)&&n>0)return[t];if((r=e<t)&&(o=t,t=e,e=o),0===(s=kr(t,e,n))||!isFinite(s))return[];if(s>0){let n=Math.round(t/s),r=Math.round(e/s);for(n*s<t&&++n,r*s>e&&--r,i=new Array(o=r-n+1);++a<o;)i[a]=(n+a)*s}else{s=-s;let n=Math.round(t*s),r=Math.round(e*s);for(n/s<t&&++n,r/s>e&&--r,i=new Array(o=r-n+1);++a<o;)i[a]=(n+a)/s}return r&&i.reverse(),i}(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return Uo(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r,o,i=e(),s=0,a=i.length-1,l=i[s],c=i[a],u=10;for(c<l&&(o=l,l=c,c=o,o=s,s=a,a=o);u-- >0;){if((o=kr(l,c,n))===r)return i[s]=l,i[a]=c,e(i);if(o>0)l=Math.floor(l/o)*o,c=Math.ceil(c/o)*o;else{if(!(o<0))break;l=Math.ceil(l*o)/o,c=Math.floor(c*o)/o}r=o}return t},t}const Bo=t=>"chart_"+t,Xo=(t,e)=>(t||[]).find((t=>{let{id:n}=t;return n===e})),Yo=()=>{},Zo={amIOnTop:()=>!1,chartConfigs:[],chartId:0,displayXAccessor:()=>0,fullData:[],getMutableState:()=>({}),height:0,margin:{},plotData:[],setCursorClass:Yo,subscribe:Yo,unsubscribe:Yo,width:0,xAccessor:()=>0,xScale:Yo},$o=(0,o.createContext)({...Zo,chartConfig:{},chartId:0}),Vo=(0,o.memo)((t=>{let{id:e=0,onContextMenu:n,onDoubleClick:r,children:i}=t;const s=(0,o.useContext)(Pa),{subscribe:a,unsubscribe:l,chartConfigs:c}=s,u=(0,o.useCallback)(((t,o,i,s)=>{switch(t){case"contextmenu":{if(void 0===n)return;const{currentCharts:t}=o;t.indexOf(e)>-1&&n(s,o);break}case"dblclick":{if(void 0===r)return;const{currentCharts:t}=o;t.indexOf(e)>-1&&r(s,o);break}default:return}}),[n,r,e]),h=Xo(c,e),d=(0,o.useMemo)((()=>({...s,chartId:e,chartConfig:h})),[s,e,h]),p=Vn(h.origin);return(0,o.useEffect)((()=>(a(Bo(e),{listener:u}),()=>{l(Bo(e))})),[]),(0,S.jsx)($o.Provider,{value:d,children:(0,S.jsx)("g",{transform:p,children:i})})})),qo={id:0,flipYScale:!1,origin:[0,0],padding:0,yPan:!0,yPanEnabled:!1,yScale:function t(){var e=Oo();return e.copy=function(){return Fo(e,t())},Bn.apply(e,arguments),Ho(e)}()},Go=Array.isArray,Ko=Math.abs,Jo=t=>e=>{const n=t(e);return(t=>t&&"object"==typeof t&&!rr(t))(n)?function(t,e){void 0===t&&(t={}),void 0===e&&(e=t=>t);const n=Object.keys(t),r=new Array(n.length);return n.forEach(((n,o)=>{r[o]=e(t[n],n,t)})),r}(n):n},Qo=t=>{if(Go(t)&&2===t.length){const[e,n]=t;return"number"==typeof e&&"number"==typeof n}return!1},ti=function(t,e,n){return void 0===n&&(n=[]),o.Children.map(e,(e=>{if(null!=e&&(void 0!==(r=e.props)&&void 0!==r.id)){const r={...qo,...e.props},{id:o,origin:i,padding:s,yExtents:a,yScale:l=qo.yScale,flipYScale:c,yExtentsCalculator:u}=r,h=l.copy(),{width:d,height:p,availableHeight:f}=((t,e)=>{let{width:n,height:r}=t;return{availableHeight:r,width:n,height:e.height||r}})(t,r),{yPan:g}=r,m=a?(Go(a)?a:[a]).map(In):void 0,y=n.find((t=>t.id===o));let{yPanEnabled:v}=r;if(Qo(a))if(y&&y.yPan&&y.yPanEnabled&&g&&v&&nr(y.originalYExtentsProp,a))h.domain(y.yScale.domain());else{const[t,e]=a;h.domain([t,e])}else y&&y.yPanEnabled&&(Qo(y.originalYExtentsProp)||(h.domain(y.yScale.domain()),v=!0));return{id:o,origin:In(i)(d,f),padding:s,originalYExtentsProp:a,yExtents:m,yExtentsCalculator:u,flipYScale:c,yScale:h,yPan:g,yPanEnabled:v,width:d,height:p}}var r})).filter((t=>void 0!==t))},ei=(t,e)=>t.filter((t=>{const n=t.origin[1],r=n+t.height;return e[1]>n&&e[1]<r})).map((t=>t.id)),ni=(t,e,n,r,o)=>{let{plotData:i,xAccessor:s,displayXAccessor:a,fullData:l}=e;const c=t.map((t=>{let{yExtentsCalculator:e,yExtents:o,yScale:c}=t;const u=e?e({plotData:i,xDomain:n,xAccessor:s,displayXAccessor:a,fullData:l}):((t,e,n)=>{const r=t.map((t=>n.map(Jo(t)))),o=vr()(r);return e.invert?kn(o):[...new Set(o).values()]})(o,c,i),h=void 0!==r?c.range().map((t=>t-r)).map(c.invert):c.domain();return{realYDomain:u,yDomainDY:h,prevYDomain:c.domain()}})),u=jn().combine(((t,e)=>{let{realYDomain:n,yDomainDY:r,prevYDomain:i}=e;const{id:s,padding:a,height:l,yScale:c,yPan:u,flipYScale:h,yPanEnabled:d=!1}=t,p=void 0===o||o.indexOf(s)>-1,f=u&&d?p?r:i:n,g=((t,e,n,r)=>{if(t.rangeRoundPoints||null==t.invert){if(isNaN(n))throw new Error("padding has to be a number for ordinal scale");t.rangeRoundPoints&&t.rangeRoundPoints(r?[0,e]:[e,0],n),t.rangeRound&&t.range(r?[0,e]:[e,0]).padding(n)}else{const{top:o,bottom:i}=isNaN(n)?n:{top:n,bottom:n};t.range(r?[o,e-i]:[e-i,o])}return t})(c.copy().domain(f),l,a,h);return{...t,yScale:g,realYDomain:n}}));return u(t,c)},ri=(t,e,n,r)=>{let o;if(t.invert){o=((t,e,n)=>{const{left:r,right:o}=er(t,e,n);if(r===o)return t[r];const i=n(t[r]),s=n(t[o]);return Math.abs(i.valueOf()-e.valueOf())<Math.abs(s.valueOf()-e.valueOf())?t[r]:t[o]})(r,t.invert(n[0]),e)}else{const e=t.range().map(((t,e)=>({x:Ko(t-n[0]),idx:e}))).reduce(((t,e)=>t.x<e.x?t:e));o=void 0!==e?r[e.idx]:r[0]}return o};function oi(){}function ii(t){return null==t?oi:function(){return this.querySelector(t)}}function si(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function ai(){return[]}function li(t){return function(e){return e.matches(t)}}var ci=Array.prototype.find;function ui(){return this.firstElementChild}var hi=Array.prototype.filter;function di(){return this.children}function pi(t){return new Array(t.length)}function fi(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function gi(t,e,n,r,o,i){for(var s,a=0,l=e.length,c=i.length;a<c;++a)(s=e[a])?(s.__data__=i[a],r[a]=s):n[a]=new fi(t,i[a]);for(;a<l;++a)(s=e[a])&&(o[a]=s)}function mi(t,e,n,r,o,i,s){var a,l,c,u=new Map,h=e.length,d=i.length,p=new Array(h);for(a=0;a<h;++a)(l=e[a])&&(p[a]=c=s.call(l,l.__data__,a,e)+"",u.has(c)?o[a]=l:u.set(c,l));for(a=0;a<d;++a)c=s.call(t,i[a],a,i)+"",(l=u.get(c))?(r[a]=l,l.__data__=i[a],u.delete(c)):n[a]=new fi(t,i[a]);for(a=0;a<h;++a)(l=e[a])&&u.get(p[a])===l&&(o[a]=l)}function yi(t){return t.__data__}function vi(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}fi.prototype={constructor:fi,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var xi="http://www.w3.org/1999/xhtml";const wi={svg:"http://www.w3.org/2000/svg",xhtml:xi,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function bi(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),wi.hasOwnProperty(e)?{space:wi[e],local:t}:t}function ki(t){return function(){this.removeAttribute(t)}}function Ci(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Si(t,e){return function(){this.setAttribute(t,e)}}function Di(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Ai(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function Mi(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Ti(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function _i(t){return function(){this.style.removeProperty(t)}}function Pi(t,e,n){return function(){this.style.setProperty(t,e,n)}}function ji(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Ni(t){return function(){delete this[t]}}function Ei(t,e){return function(){this[t]=e}}function Ii(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function Fi(t){return t.trim().split(/^|\s+/)}function Li(t){return t.classList||new Oi(t)}function Oi(t){this._node=t,this._names=Fi(t.getAttribute("class")||"")}function Ri(t,e){for(var n=Li(t),r=-1,o=e.length;++r<o;)n.add(e[r])}function Wi(t,e){for(var n=Li(t),r=-1,o=e.length;++r<o;)n.remove(e[r])}function zi(t){return function(){Ri(this,t)}}function Ui(t){return function(){Wi(this,t)}}function Hi(t,e){return function(){(e.apply(this,arguments)?Ri:Wi)(this,t)}}function Bi(){this.textContent=""}function Xi(t){return function(){this.textContent=t}}function Yi(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function Zi(){this.innerHTML=""}function $i(t){return function(){this.innerHTML=t}}function Vi(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function qi(){this.nextSibling&&this.parentNode.appendChild(this)}function Gi(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ki(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===xi&&e.documentElement.namespaceURI===xi?e.createElement(t):e.createElementNS(n,t)}}function Ji(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Qi(t){var e=bi(t);return(e.local?Ji:Ki)(e)}function ts(){return null}function es(){var t=this.parentNode;t&&t.removeChild(this)}function ns(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function rs(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function os(t){return function(){var e=this.__on;if(e){for(var n,r=0,o=-1,i=e.length;r<i;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++o]=n:this.removeEventListener(n.type,n.listener,n.options);++o?e.length=o:delete this.__on}}}function is(t,e,n){return function(){var r,o=this.__on,i=function(t){return function(e){t.call(this,e,this.__data__)}}(e);if(o)for(var s=0,a=o.length;s<a;++s)if((r=o[s]).type===t.type&&r.name===t.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=i,r.options=n),void(r.value=e);this.addEventListener(t.type,i,n),r={type:t.type,name:t.name,value:e,listener:i,options:n},o?o.push(r):this.__on=[r]}}function ss(t,e,n){var r=Ti(t),o=r.CustomEvent;"function"==typeof o?o=new o(e,n):(o=r.document.createEvent("Event"),n?(o.initEvent(e,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(e,!1,!1)),t.dispatchEvent(o)}function as(t,e){return function(){return ss(this,t,e)}}function ls(t,e){return function(){return ss(this,t,e.apply(this,arguments))}}Oi.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var cs=[null];function us(t,e){this._groups=t,this._parents=e}function hs(){return new us([[document.documentElement]],cs)}us.prototype=hs.prototype={constructor:us,select:function(t){"function"!=typeof t&&(t=ii(t));for(var e=this._groups,n=e.length,r=new Array(n),o=0;o<n;++o)for(var i,s,a=e[o],l=a.length,c=r[o]=new Array(l),u=0;u<l;++u)(i=a[u])&&(s=t.call(i,i.__data__,u,a))&&("__data__"in i&&(s.__data__=i.__data__),c[u]=s);return new us(r,this._parents)},selectAll:function(t){t="function"==typeof t?function(t){return function(){var e=t.apply(this,arguments);return null==e?[]:si(e)}}(t):function(t){return null==t?ai:function(){return this.querySelectorAll(t)}}(t);for(var e=this._groups,n=e.length,r=[],o=[],i=0;i<n;++i)for(var s,a=e[i],l=a.length,c=0;c<l;++c)(s=a[c])&&(r.push(t.call(s,s.__data__,c,a)),o.push(s));return new us(r,o)},selectChild:function(t){return this.select(null==t?ui:function(t){return function(){return ci.call(this.children,t)}}("function"==typeof t?t:li(t)))},selectChildren:function(t){return this.selectAll(null==t?di:function(t){return function(){return hi.call(this.children,t)}}("function"==typeof t?t:li(t)))},filter:function(t){"function"!=typeof t&&(t=function(t){return function(){return this.matches(t)}}(t));for(var e=this._groups,n=e.length,r=new Array(n),o=0;o<n;++o)for(var i,s=e[o],a=s.length,l=r[o]=[],c=0;c<a;++c)(i=s[c])&&t.call(i,i.__data__,c,s)&&l.push(i);return new us(r,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,yi);var n,r=e?mi:gi,o=this._parents,i=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var s=i.length,a=new Array(s),l=new Array(s),c=new Array(s),u=0;u<s;++u){var h=o[u],d=i[u],p=d.length,f=si(t.call(h,h&&h.__data__,u,o)),g=f.length,m=l[u]=new Array(g),y=a[u]=new Array(g);r(h,d,m,y,c[u]=new Array(p),f,e);for(var v,x,w=0,b=0;w<g;++w)if(v=m[w]){for(w>=b&&(b=w+1);!(x=y[b])&&++b<g;);v._next=x||null}}return(a=new us(a,o))._enter=l,a._exit=c,a},enter:function(){return new us(this._enter||this._groups.map(pi),this._parents)},exit:function(){return new us(this._exit||this._groups.map(pi),this._parents)},join:function(t,e,n){var r=this.enter(),o=this,i=this.exit();return r="function"==typeof t?t(r):r.append(t+""),null!=e&&(o=e(o)),null==n?i.remove():n(i),r&&o?r.merge(o).order():o},merge:function(t){if(!(t instanceof us))throw new Error("invalid merge");for(var e=this._groups,n=t._groups,r=e.length,o=n.length,i=Math.min(r,o),s=new Array(r),a=0;a<i;++a)for(var l,c=e[a],u=n[a],h=c.length,d=s[a]=new Array(h),p=0;p<h;++p)(l=c[p]||u[p])&&(d[p]=l);for(;a<r;++a)s[a]=e[a];return new us(s,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,o=t[e],i=o.length-1,s=o[i];--i>=0;)(r=o[i])&&(s&&4^r.compareDocumentPosition(s)&&s.parentNode.insertBefore(r,s),s=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=vi);for(var n=this._groups,r=n.length,o=new Array(r),i=0;i<r;++i){for(var s,a=n[i],l=a.length,c=o[i]=new Array(l),u=0;u<l;++u)(s=a[u])&&(c[u]=s);c.sort(e)}return new us(o,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],o=0,i=r.length;o<i;++o){var s=r[o];if(s)return s}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var o,i=e[n],s=0,a=i.length;s<a;++s)(o=i[s])&&t.call(o,o.__data__,s,i);return this},attr:function(t,e){var n=bi(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?Ci:ki:"function"==typeof e?n.local?Mi:Ai:n.local?Di:Si)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?_i:"function"==typeof e?ji:Pi)(t,e,null==n?"":n)):function(t,e){return t.style.getPropertyValue(e)||Ti(t).getComputedStyle(t,null).getPropertyValue(e)}(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?Ni:"function"==typeof e?Ii:Ei)(t,e)):this.node()[t]},classed:function(t,e){var n=Fi(t+"");if(arguments.length<2){for(var r=Li(this.node()),o=-1,i=n.length;++o<i;)if(!r.contains(n[o]))return!1;return!0}return this.each(("function"==typeof e?Hi:e?zi:Ui)(n,e))},text:function(t){return arguments.length?this.each(null==t?Bi:("function"==typeof t?Yi:Xi)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?Zi:("function"==typeof t?Vi:$i)(t)):this.node().innerHTML},raise:function(){return this.each(qi)},lower:function(){return this.each(Gi)},append:function(t){var e="function"==typeof t?t:Qi(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:Qi(t),r=null==e?ts:"function"==typeof e?e:ii(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(es)},clone:function(t){return this.select(t?rs:ns)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,o,i=function(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}(t+""),s=i.length;if(!(arguments.length<2)){for(a=e?is:os,r=0;r<s;++r)this.each(a(i[r],e,n));return this}var a=this.node().__on;if(a)for(var l,c=0,u=a.length;c<u;++c)for(r=0,l=a[c];r<s;++r)if((o=i[r]).type===l.type&&o.name===l.name)return l.value},dispatch:function(t,e){return this.each(("function"==typeof e?ls:as)(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r,o=t[e],i=0,s=o.length;i<s;++i)(r=o[i])&&(yield r)}};function ds(t){return"string"==typeof t?new us([[document.querySelector(t)]],[document.documentElement]):new us([[t]],cs)}function ps(t){let e;for(;e=t.sourceEvent;)t=e;return t}function fs(t,e){if(t=ps(t),void 0===e&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,[(r=r.matrixTransform(e.getScreenCTM().inverse())).x,r.y]}if(e.getBoundingClientRect){var o=e.getBoundingClientRect();return[t.clientX-o.left-e.clientLeft,t.clientY-o.top-e.clientTop]}}return[t.pageX,t.pageY]}function gs(t,e){return t.target&&(t=ps(t),void 0===e&&(e=t.currentTarget),t=t.touches||[t]),Array.from(t,(t=>fs(t,e)))}const ms="zhn-charts",ys="tooltip",vs=ms+"-"+ys,xs=ms+"-"+ys+"-label",ws=ms+"-"+ys+"-hover",bs=ms+"-bb-"+ys,ks=ms+"-ma-"+ys,Cs=ms+"-ohlc-"+ys,Ss="cursor",Ds=ms+"-grabbing-"+Ss,As=ms+"-crosshair-"+Ss,Ms=ms+"-default-"+Ss,Ts=ms+"-move-"+Ss,_s=ms+"-pointer-"+Ss,Ps=ms+"-ns-resize-"+Ss,js=ms+"-ew-resize-"+Ss,Ns="interaction",Es=ms+"-avoid-"+Ns,Is=ms+"-enable-"+Ns,Fs="axis",Ls=ms+"-x-"+Fs,Os=ms+"-y-"+Fs,Rs=ms+"-"+Fs+"-domain",Ws="series",zs=ms+"-bb-"+Ws,Us=ms+"-bb-"+Ws+"-area",Hs=ms+"-rsi-"+Ws,Bs="candlestick",Xs=ms+"-"+Bs,Ys=ms+"-"+Bs+"-wick",Zs=ms+"-"+Bs+"-candle",$s=ms+"-up",Vs=ms+"-down",qs=ms+"-crosshair",Gs=ms+"-cross_hair",Ks=ms+"-text-background",Js="line",Qs=ms+"-"+Js,ta=ms+"-"+Js+"-stroke",ea=ms+"-bar",na="-apple-system, system-ui, Roboto, 'Helvetica Neue', Ubuntu, sans-serif",ra=function(t,e,n){if(void 0===n&&(n=null),!t.panInProgress&&!t.dragInProgress){ds(ir(e.current)).on(lr,n)}};class oa extends o.Component{constructor(t){super(t),this.clicked=void 0,this.dx=0,this.dy=0,this.dragHappened=void 0,this.focus=void 0,this.lastNewPos=void 0,this.mouseInside=!1,this.mouseInteraction=!0,this.panEndTimeout=void 0,this.panHappened=void 0,this.ref=o.createRef(),this.handleEnter=t=>{const{onMouseEnter:e}=this.props;void 0!==e&&(this.mouseInside=!0,ra(this.state,this.ref,this.handleMouseMove),e(t))},this.handleLeave=t=>{const{onMouseLeave:e}=this.props;void 0!==e&&(this.mouseInside=!1,ra(this.state,this.ref),e(t))},this.handleWheel=t=>{const{pan:e,onPan:n,zoom:r,onZoom:o}=this.props;if(!e&&!r)return;const{panInProgress:i}=this.state,s=Math.abs(t.deltaY)>Math.abs(t.deltaX)&&Math.abs(t.deltaY)>0,a=gr(t);if(t.preventDefault(),r&&this.focus&&s&&!i){const e=t.deltaY>0?1:-1;void 0!==o&&o(e,a,t)}else if(this.focus){if(this.shouldPan()&&void 0!==this.state.panStart){const{panStartXScale:e,chartsToPan:r}=this.state.panStart;this.lastNewPos=a,this.panHappened=!0,void 0===this.dx&&(this.dx=0),void 0===this.dy&&(this.dy=0),this.dx-=t.deltaX,this.dy+=t.deltaY;const o={dx:this.dx,dy:this.dy};void 0!==n&&n(a,e,o,r,t)}else{const{xScale:t,chartConfig:e}=this.props,n=ei(e,a);this.dx=0,this.dy=0,this.setState({panInProgress:!0,panStart:{panStartXScale:t,panOrigin:a,chartsToPan:n}})}this.queuePanEnd(t)}},this.handleMouseMove=t=>{const{onMouseMove:e,mouseMove:n}=this.props;if(void 0!==e&&this.mouseInteraction&&n&&!this.state.panInProgress){e(fs(t,this.ref.current),"mouse",t)}},this.handleClick=t=>{const e=gr(t),{onClick:n,onDoubleClick:r}=this.props;this.panHappened||this.dragHappened||(this.clicked&&void 0!==r?(r(e,t),this.clicked=!1):void 0!==n&&(n(e,t),this.clicked=!0,setTimeout((()=>{this.clicked&&(this.clicked=!1)}),400)))},this.handleRightClick=t=>{t.stopPropagation(),t.preventDefault();const{onContextMenu:e,onPanEnd:n}=this.props,r=gr(t,this.ref.current.getBoundingClientRect());if(void 0!==this.state.panStart){const{panStartXScale:e,panOrigin:[o,i],chartsToPan:s}=this.state.panStart;this.panHappened&&void 0!==n&&n(r,e,{dx:o,dy:i},s,t);ds(ir(this.ref.current)).on(lr,null).on(cr,null),this.setState({panInProgress:!1,panStart:void 0})}void 0!==e&&e(r,t)},this.handleDrag=t=>{const{onDrag:e}=this.props;if(void 0===e)return;this.dragHappened=!0;const{dragStartPosition:n}=this.state;if(void 0===n)return;e({startPos:n,mouseXY:fs(t,this.ref.current)},t)},this.handleDragEnd=t=>{const e=fs(t,this.ref.current);if(ds(ir(this.ref.current)).on(lr,this.mouseInside?this.handleMouseMove:null).on(cr,null),this.dragHappened){const{onDragComplete:n}=this.props;void 0!==n&&n({mouseXY:e},t)}this.setState({dragInProgress:!1}),this.mouseInteraction=!0},this.canPan=()=>{const{getAllPanConditions:t}=this.props,{pan:e}=this.props,{panEnabled:n,draggable:r}=t().reduce(((t,e)=>({draggable:t.draggable||e.draggable,panEnabled:t.panEnabled&&e.panEnabled})),{draggable:!1,panEnabled:e});return{panEnabled:n,somethingSelected:r}},this.handleMouseDown=t=>{if(0!==t.button)return;const{xScale:e,chartConfig:n,onMouseDown:r}=this.props;if(this.panHappened=!1,this.dragHappened=!1,this.focus=!0,!this.state.panInProgress&&this.mouseInteraction){const o=gr(t),i=ei(n,o),{panEnabled:s,somethingSelected:a}=this.canPan(),l=s&&!a;if(l){this.setState({panInProgress:l,panStart:{panStartXScale:e,panOrigin:o,chartsToPan:i}});ds(ir(this.ref.current)).on(lr,this.handlePan).on(cr,this.handlePanEnd)}else if(a){this.setState({panInProgress:!1,dragInProgress:!0,panStart:void 0,dragStartPosition:o});const{onDragStart:e}=this.props;void 0!==e&&e({startPos:o},t);ds(ir(this.ref.current)).on(lr,this.handleDrag).on(cr,this.handleDragEnd)}void 0!==r&&r(o,i,t)}t.preventDefault()},this.shouldPan=()=>{const{pan:t,onPan:e}=this.props;return t&&e&&void 0!==this.state.panStart},this.handlePan=t=>{if(this.shouldPan()&&void 0!==this.state.panStart){this.panHappened=!0;const{panStartXScale:e,panOrigin:n,chartsToPan:r}=this.state.panStart;let o,i,s;this.mouseInteraction?(s=fs(t,this.ref.current),this.lastNewPos=s,o=s[0]-n[0],i=s[1]-n[1]):(s=gs(t,this.ref.current)[0],this.lastNewPos=s,o=n[0]-s[0],i=n[1]-s[1]),this.dx=o,this.dy=i;const{onPan:a}=this.props;void 0!==a&&a(s,e,{dx:o,dy:i},r,t)}},this.handlePanEnd=t=>{const{pan:e,onPanEnd:n}=this.props;if(void 0!==this.state.panStart){const{panStartXScale:r,chartsToPan:o}=this.state.panStart;if(ds(ir(this.ref.current)).on(lr,this.mouseInside?this.handleMouseMove:null).on(cr,null).on(ur,null).on(hr,null),this.panHappened&&e&&n){const{dx:e=0,dy:i=0}=this;delete this.dx,delete this.dy,void 0!==this.lastNewPos&&n(this.lastNewPos,r,{dx:e,dy:i},o,t)}this.setState({panInProgress:!1,panStart:void 0})}},this.handleTouchMove=t=>{const{onMouseMove:e}=this.props;if(void 0===e)return;const n=dr(t.touches[0]);e(fr(n,t),"touch",t)},this.handleTouchStart=t=>{this.mouseInteraction=!1;const{pan:e,chartConfig:n,onMouseMove:r,xScale:o,onPanEnd:i}=this.props;if(1===t.touches.length){this.panHappened=!1;const i=fr(dr(t.touches[0]),t);if(void 0!==r&&r(i,"touch",t),e){const t=ei(n,i);this.setState({panInProgress:!0,panStart:{panStartXScale:o,panOrigin:i,chartsToPan:t}});ds(ir(this.ref.current)).on(ur,this.handlePan,!1).on(hr,this.handlePanEnd,!1)}}else if(2===t.touches.length){const{panInProgress:n,panStart:r}=this.state;if(n&&e&&i&&void 0!==r){const{panStartXScale:n,panOrigin:[s,a],chartsToPan:l}=r;ds(ir(this.ref.current)).on(lr,this.mouseInside?this.handleMouseMove:null).on(cr,null).on(ur,this.handlePinchZoom,!1).on(hr,this.handlePinchZoomEnd,!1);const c=fr(dr(t.touches[0]),t),u=fr(dr(t.touches[1]),t);this.panHappened&&e&&i&&void 0!==this.lastNewPos&&i(this.lastNewPos,n,{dx:s,dy:a},l,t),this.setState({panInProgress:!1,pinchZoomStart:{xScale:o,touch1Pos:c,touch2Pos:u,range:o.range(),chartsToPan:l}})}}},this.handlePinchZoom=t=>{const{pinchZoomStart:e}=this.state;if(void 0===e)return;const{xScale:n,zoom:r,onPinchZoom:o}=this.props;if(!r||void 0===o)return;const[i,s]=gs(this.ref.current),{chartsToPan:a,...l}=e;o(l,{touch1Pos:i,touch2Pos:s,xScale:n},t)},this.handlePinchZoomEnd=t=>{ds(ir(this.ref.current)).on(ur,null).on(hr,null);const{pinchZoomStart:e}=this.state;if(void 0===e)return;const{chartsToPan:n,...r}=e,{zoom:o,onPinchZoomEnd:i}=this.props;o&&i&&i(r,t),this.setState({pinchZoomStart:void 0})},this.setCursorClass=t=>{t!==this.state.cursorOverrideClass&&this.setState({cursorOverrideClass:t})},this.focus=t.focus,this.state={panInProgress:!1}}componentDidMount(){const{disableInteraction:t}=this.props,{current:e}=this.ref;null!==e&&(t||(ds(e).on(sr,this.handleEnter).on(ar,this.handleLeave),e.addEventListener("wheel",this.handleWheel,{passive:!1})))}componentDidUpdate(){this.componentDidMount()}componentWillUnmount(){const{disableInteraction:t}=this.props,{current:e}=this.ref;if(null!==e&&!t){ds(e).on(sr,null).on(ar,null);ds(ir(e)).on(lr,null),e.removeEventListener("wheel",this.handleWheel,{passive:!1})}}queuePanEnd(t){void 0!==this.panEndTimeout&&window.clearTimeout(this.panEndTimeout),this.panEndTimeout=window.setTimeout((()=>{this.handlePanEnd(t)}),100)}cancelDrag(){ds(ir(this.ref.current)).on(lr,this.mouseInside?this.handleMouseMove:null).on(cr,null),this.setState({dragInProgress:!1}),this.mouseInteraction=!0}render(){const{height:t,width:e,disableInteraction:n,useCrossHairStyleCursor:r}=this.props,{cursorOverrideClass:o,panInProgress:i}=this.state,s=n?void 0:void 0!==o?o:r?i?Ds:As:void 0,a=n||{onMouseDown:this.handleMouseDown,onClick:this.handleClick,onContextMenu:this.handleRightClick,onTouchStart:this.handleTouchStart,onTouchMove:this.handleTouchMove};return(0,S.jsx)("rect",{ref:this.ref,className:s,width:e,height:t,style:{opacity:0},...a})}}oa.defaultProps={mouseMove:!1,zoom:!1,pan:!1,panSpeedMultiplier:1,focus:!1,disableInteraction:!1};const ia=t=>{var e,n;return null!=(e=null==(n=i(t))?void 0:n.getContext("2d"))?e:void 0},sa=(0,o.memo)((0,o.forwardRef)(((t,e)=>{let{style:n,width:r,height:i,ratio:s}=t;const a=(0,o.useRef)(),l=(0,o.useRef)(),c=(0,o.useRef)();(0,o.useImperativeHandle)(e,(()=>({getCanvasContexts:()=>({bg:ia(a),axes:ia(l),mouseCoord:ia(c)})})));const u=r*s,h=i*s,d={position:"absolute",width:r,height:i};return(0,S.jsxs)("div",{style:{...n,position:"absolute"},children:[(0,S.jsx)("canvas",{ref:a,width:u,height:h,style:d}),(0,S.jsx)("canvas",{ref:l,width:u,height:h,style:d}),(0,S.jsx)("canvas",{ref:c,width:u,height:h,style:d})]})}))),aa="chart-area-clip",la=t=>{let{configs:e}=t;return e.map(((t,e)=>(0,S.jsx)("clipPath",{id:aa+"-"+t.id,children:(0,S.jsx)("rect",{x:"0",y:"0",width:t.width,height:t.height})},e)))},ca=t=>{let{dimensions:e,chartConfig:n}=t;return(0,S.jsxs)("defs",{children:[(0,S.jsx)("clipPath",{id:aa,children:(0,S.jsx)("rect",{x:"0",y:"0",width:e.width,height:e.height})}),(0,S.jsx)(la,{configs:n})]})},ua=Math.floor,ha=Math.max,da=Math.ceil,pa=(t,e,n,r)=>{const{lastItem:o,lastItemX:i}=t,s=e(o),[a,l]=n.range();return(l-a)/(i.valueOf()-a)*(s.valueOf()-r.valueOf())+r.valueOf()},fa=(t,e,n,r)=>{const o=ga(t,r),i=ma(t,n);return e>=o&&e<i},ga=(t,e)=>ha(1,da(t*e)),ma=(t,e)=>ua(t*e),ya=(t,e)=>ua(.97*ma(t,e)),va=(t,e,n,r)=>t.slice(er(t,e,r).left,er(t,n,r).right+1);function xa(t){let{xScale:e,useWholeData:n,clamp:r,pointsPerPxThreshold:o,minPointsPerPxThreshold:i,flipXScale:s}=t;return((t,e,n,r,o)=>({filterData:function(i,s,a,l,c){let{currentPlotData:u,currentDomain:h,fallbackStart:d,fallbackEnd:p,ignoreThresholds:f=!1}=void 0===c?{}:c;if(t)return{plotData:i,domain:s};let g=Jn(s),m=Kn(s),y=s,v=va(i,g,m,a);1===v.length&&void 0!==d&&(g=d,m=pa(p,a,l,g),y=[g,m],v=va(i,g,m,a)),"function"==typeof e?y=e(y,[a(Jn(i)),a(Kn(i))]):("left"!==e&&"both"!==e&&!0!==e||(y=[Cn([g,a(Jn(i))]),y[1]]),"right"!==e&&"both"!==e&&!0!==e||(y=[y[0],Sn([m,a(Kn(i))])])),y!==s&&(v=va(i,y[0],y[1],a));const x=y,w=l.copy().domain(x);let b,k,C=ua(w(a(Kn(v)))-w(a(Jn(v))));o&&C<0&&(C*=-1);const S=Kn(w.range())-Jn(w.range());if(f&&v.length>1||fa(C,v.length,n,r))b=v,k=x;else if(S>ma(C,n)&&null!=p){b=v;const t=pa(p,a,l,Jn(x));k=[Jn(x),t]}else b=null!=u?u:v.slice(v.length-ya(C,n)),k=null!=h?h:[a(Jn(b)),a(Kn(b))];return{plotData:b,domain:k}}}))(n||null==e.invert,r,o,i,s)}const wa=["seriesName"],ba=()=>{const t="\n\t."+Ds+" {\n\t\tpointer-events: all;\n\t\tcursor: -moz-grabbing;\n\t\tcursor: -webkit-grabbing;\n\t\tcursor: grabbing;\n\t}\n\t."+As+" {\n\t\tpointer-events: all;\n\t\tcursor: arrow;\n\t}\n\t."+ws+" {\n\t\tpointer-events: all;\n\t\tcursor: pointer;\n\t}\n\t."+Es+" {\n\t\tpointer-events: none;\n\t}\n\t."+Is+" {\n\t\tpointer-events: all;\n\t}\n\t."+vs+" {\n\t\tpointer-events: all;\n\t\tcursor: pointer;\n\t}\n\t."+Ms+" {\n\t\tcursor: default;\n\t}\n\t."+Ts+" {\n\t\tcursor: move;\n\t}\n\t."+_s+" {\n\t\tcursor: pointer;\n\t}\n\t."+Ps+" {\n\t\tcursor: ns-resize;\n\t}\n\t."+js+" {\n\t\tcursor: ew-resize;\n\t}";return(0,S.jsx)("style",{type:"text/css",children:t})},ka=t=>{let{margin:{top:e,bottom:n,left:r,right:o},height:i,width:s}=t;return{height:i-e-n,width:s-r-o}},Ca=t=>{const{data:e,plotFull:n,xScale:r,clamp:o,pointsPerPxThreshold:i,flipXScale:s,xAccessor:a,displayXAccessor:l,minPointsPerPxThreshold:c}=t,u=void 0!==n?n:a===Pn,{filterData:h}=xa({xScale:r,useWholeData:u,clamp:o,pointsPerPxThreshold:i,minPointsPerPxThreshold:c,flipXScale:s});return{xAccessor:a,displayXAccessor:null!=l?l:a,xScale:r.copy(),fullData:e,filterData:h}},Sa=function(t,e,n,r){if(void 0===r&&(r=1),t.rangeRoundPoints){if(isNaN(n))throw new Error("padding has to be a number for ordinal scale");t.rangeRoundPoints([0,e.width],n)}else if(t.padding){if(isNaN(n))throw new Error("padding has to be a number for ordinal scale");t.range([0,e.width]),t.padding(n/2)}else{const{left:o,right:i}=isNaN(n)?n:{left:n,right:n};r>0?t.range([o,e.width-i]):t.range([e.width-i,o])}return t},Da=t=>t?-1:1,Aa=t=>{const e=(t=>{const{xAccessor:e,xExtents:n,data:r,padding:o,flipXScale:i}=t,s=Da(i),a=ka(t),l="function"==typeof n?n(r):kn(n.map((t=>In(t))).map((t=>t(r,e)))),{xAccessor:c,displayXAccessor:u,xScale:h,fullData:d,filterData:p}=Ca(t),f=Sa(h,a,o,s),{plotData:g,domain:m}=p(d,l,e,f);return{plotData:g,xScale:f.domain(m),xAccessor:c,displayXAccessor:u,fullData:d,filterData:p}})(t),{xAccessor:n,displayXAccessor:r,fullData:o,plotData:i,xScale:s}=e,{postCalculator:a,children:l}=t,c=void 0!==a?a(i):i,u=ka(t),h=ni(ti(u,l),{plotData:c,xAccessor:n,displayXAccessor:r,fullData:o},s.domain());return{...e,xScale:s,plotData:c,chartConfigs:h}},Ma=t=>{let{touch1Pos:e,touch2Pos:n}=t;return{topLeft:[Math.min(e[0],n[0]),Math.min(e[1],n[1])],bottomRight:[Math.max(e[0],n[0]),Math.max(e[1],n[1])]}},Ta=(t,e,n)=>!isNaN(t(e(Jn(n))))&&null!=t.invert,_a=(t,e,n,r,o)=>{const i=Jn(t),s=Jn(e.domain()),a=n(i),l=Kn(t),c=Kn(e.domain()),u=n(l);s<a&&void 0!==o&&o(s,a),u<c&&void 0!==r&&r(u,c)},Pa=(0,o.createContext)(Zo),ja=(t,e,n)=>t.map((t=>t.id===e?{...t,yScale:t.yScale.copy().domain(n),yPanEnabled:!0}:t));class Na extends o.Component{constructor(t){super(t),this.canvasContainerRef=(0,o.createRef)(),this.eventCaptureRef=(0,o.createRef)(),this.finalPinch=void 0,this.lastSubscriptionId=0,this.mutableState={},this.panInProgress=!1,this.prevMouseXY=void 0,this._isDidUpdateRedraw=!1,this._asyncRedrawId=void 0,this.subscriptions=[],this.waitingForPinchZoomAnimationFrame=void 0,this.waitingForPanAnimationFrame=void 0,this.waitingForMouseMoveAnimationFrame=void 0,this.hackyWayToStopPanBeyondBounds__plotData=void 0,this.hackyWayToStopPanBeyondBounds__domain=void 0,this.getMutableState=()=>this.mutableState,this.getCanvasContexts=()=>{var t;return null==(t=this.canvasContainerRef.current)?void 0:t.getCanvasContexts()},this.generateSubscriptionId=()=>(this.lastSubscriptionId++,this.lastSubscriptionId),this.subscribe=(t,e)=>{const{getPanConditions:n=In({draggable:!1,panEnabled:!0})}=e;this.subscriptions=this.subscriptions.concat({id:t,...e,getPanConditions:n})},this.unsubscribe=t=>{this.subscriptions=this.subscriptions.filter((e=>e.id!==t))},this.getAllPanConditions=()=>this.subscriptions.map((t=>t.getPanConditions())),this.setCursorClass=t=>{var e;null==(e=this.eventCaptureRef.current)||e.setCursorClass(t)},this.amIOnTop=t=>{const e=this.subscriptions.filter((t=>t.getPanConditions().draggable));return e.length>0&&Kn(e).id===t},this.handleContextMenu=(t,e)=>{const{xAccessor:n,chartConfigs:r,plotData:o,xScale:i}=this.state,s=ei(r,t),a=ri(i,n,t,o);this.triggerEvent("contextmenu",{mouseXY:t,currentItem:a,currentCharts:s},e)},this.calculateStateForDomain=t=>{const{fullData:e,xAccessor:n,displayXAccessor:r,xScale:o,chartConfigs:i,plotData:s,filterData:a}=this.state,{postCalculator:l}=this.props,{plotData:c,domain:u}=a(e,t,n,o,{currentPlotData:s,currentDomain:o.domain()}),h=l(c),d=o.copy().domain(u),p=ni(i,{plotData:h,xAccessor:n,displayXAccessor:r,fullData:e},d.domain());return{xScale:d,plotData:h,chartConfigs:p}},this.pinchZoomHelper=(t,e)=>{const{xScale:n}=t,{fullData:r,xScale:o,chartConfigs:i,plotData:s,xAccessor:a,displayXAccessor:l,filterData:c}=this.state,{postCalculator:u}=this.props,h=((t,e,n)=>{const{topLeft:r,bottomRight:o}=Ma(t),{topLeft:i,bottomRight:s}=Ma(e),a=n.range()[1],l=Math.round(-(o[0]*i[0]-r[0]*s[0])/(r[0]-o[0])),c=Math.round(a+((a-o[0])*(a-i[0])-(a-r[0])*(a-s[0]))/(a-r[0]-(a-o[0])));return[Math.round(-l*r[0]/(-l+i[0])),Math.round(a-(c-a)*(a-r[0])/(c+(a-i[0])))].map(n.invert)})(t,e,n),{plotData:d,domain:p}=c(r,h,a,n,{currentPlotData:s,currentDomain:o.domain()}),f=u(d),g=o.copy().domain(p),m=e.touch1Pos;return{chartConfigs:ni(i,{plotData:f,xAccessor:a,displayXAccessor:l,fullData:r},g.domain()),xScale:g,plotData:f,mouseXY:m,currentItem:ri(g,a,m,f)}},this.handlePinchZoom=(t,e,n)=>{if(!this.waitingForPinchZoomAnimationFrame){this.waitingForPinchZoomAnimationFrame=!0;const r=this.pinchZoomHelper(t,e);this.triggerEvent("pinchzoom",r,n),this.finalPinch=e,requestAnimationFrame((()=>{this.clearBothCanvas(),this.draw({trigger:"pinchzoom"}),this.waitingForPinchZoomAnimationFrame=!1}))}},this.handlePinchZoomEnd=(t,e)=>{const{fullData:n,xAccessor:r=Na.defaultProps.xAccessor}=this.state;if(this.finalPinch){const o=this.pinchZoomHelper(t,this.finalPinch),{xScale:i}=o,{onLoadAfter:s,onLoadBefore:a}=this.props;this.triggerEvent("pinchzoom",o,e),this.finalPinch=void 0,this.clearThreeCanvas(),this.setState(o,(()=>_a(n,i,r,s,a)))}},this._zoomXImpl=(t,e,n,r,o)=>{this.triggerEvent("zoom",{xScale:n,plotData:t,chartConfigs:e,...r,show:!0},o);const{fullData:i,xAccessor:s}=this.state,{onZoom:a,onLoadAfter:l,onLoadBefore:c}=this.props;a((t||[]).length),this._isDidUpdateRedraw=!0,this.setState({xScale:n,plotData:t,chartConfigs:e},(()=>_a(i,n,s,l,c)))},this.handleZoom=(t,e,n)=>{if(this.panInProgress)return;const{xAccessor:r,xScale:o,plotData:i}=this.state,{zoomMultiplier:s,zoomAnchor:a}=this.props,l=a({xScale:o,xAccessor:r,mouseXY:e,plotData:i}),c=((t,e)=>t>0?1*e:1/e)(t,s),u=((t,e,n)=>{const r=t(e);return t.range().map((t=>r+(t-r)*n)).map((e=>t.invert(e)))})(o,l,c),{xScale:h,plotData:d,chartConfigs:p}=this.calculateStateForDomain(u);this.mutableState={mouseXY:e,currentItem:ri(h,r,e,d),currentCharts:ei(p,e)},this._zoomXImpl(d,p,h,this.mutableState,n)},this.xAxisZoom=t=>{const{xScale:e,plotData:n,chartConfigs:r}=this.calculateStateForDomain(t);this._zoomXImpl(n,r,e)},this.yAxisZoom=(t,e)=>{this._isDidUpdateRedraw=!0,this.setState({chartConfigs:ja(this.state.chartConfigs,t,e)})},this.draw=t=>{this.subscriptions.forEach((e=>{e.draw&&e.draw(t)}))},this.redraw=()=>{this.clearThreeCanvas(),this.draw({force:!0})},this.panHelper=(t,e,n,r)=>{let{dx:o,dy:i}=n;const{fullData:s,xAccessor:a,displayXAccessor:l,chartConfigs:c,filterData:u}=this.state,{postCalculator:h}=this.props,d=e.range().map((t=>t-o)).map((t=>e.invert(t))),{plotData:p,domain:f}=u(s,d,a,e,{currentPlotData:this.hackyWayToStopPanBeyondBounds__plotData,currentDomain:this.hackyWayToStopPanBeyondBounds__domain,ignoreThresholds:!0}),g=e.copy().domain(f),m=h(p),y=ri(g,a,t,m),v=ni(c,{plotData:m,xAccessor:a,displayXAccessor:l,fullData:s},g.domain(),i,r);return{xScale:g,plotData:m,chartConfigs:v,mouseXY:t,currentCharts:ei(v,t),currentItem:y}},this.handlePan=(t,e,n,r,o)=>{if(!this.waitingForPanAnimationFrame){var i,s;this.waitingForPanAnimationFrame=!0,this.hackyWayToStopPanBeyondBounds__plotData=null!=(i=this.hackyWayToStopPanBeyondBounds__plotData)?i:this.state.plotData,this.hackyWayToStopPanBeyondBounds__domain=null!=(s=this.hackyWayToStopPanBeyondBounds__domain)?s:this.state.xScale.domain();const a=this.panHelper(t,e,n,r);this.hackyWayToStopPanBeyondBounds__plotData=a.plotData,this.hackyWayToStopPanBeyondBounds__domain=a.xScale.domain(),this.panInProgress=!0,this.triggerEvent("pan",a,o),this.mutableState={mouseXY:a.mouseXY,currentItem:a.currentItem,currentCharts:a.currentCharts},requestAnimationFrame((()=>{this.waitingForPanAnimationFrame=!1,this.clearBothCanvas(),this.draw({trigger:"pan"})}))}},this.handlePanEnd=(t,e,n,r,o)=>{const i=this.panHelper(t,e,n,r),{xScale:s,plotData:a,chartConfigs:l}=i;this.hackyWayToStopPanBeyondBounds__plotData=null,this.hackyWayToStopPanBeyondBounds__domain=null,this.panInProgress=!1,this.triggerEvent("panend",i,o),requestAnimationFrame((()=>{const{fullData:t,xAccessor:e}=this.state,{onLoadAfter:n,onLoadBefore:r}=this.props;this._isDidUpdateRedraw=!0,this.setState({xScale:s,plotData:a,chartConfigs:l},(()=>_a(t,s,e,n,r)))}))},this.handleMouseDown=(t,e,n)=>{this.triggerEvent("mousedown",this.mutableState,n)},this.handleMouseEnter=t=>{this.triggerEvent("mouseenter",{show:!0},t)},this.handleMouseMove=(t,e,n)=>{if(!this.waitingForMouseMoveAnimationFrame){this.waitingForMouseMoveAnimationFrame=!0;const{chartConfigs:e,plotData:r,xScale:o,xAccessor:i}=this.state,s=ei(e,t),a=ri(o,i,t,r);this.triggerEvent("mousemove",{show:!0,mouseXY:t,prevMouseXY:this.prevMouseXY,currentItem:a,currentCharts:s},n),this.prevMouseXY=t,this.mutableState={mouseXY:t,currentItem:a,currentCharts:s},requestAnimationFrame((()=>{this.clearMouseCanvas(),this.draw({trigger:"mousemove"}),this.waitingForMouseMoveAnimationFrame=!1}))}},this.handleMouseLeave=t=>{this.triggerEvent("mouseleave",{show:!1},t),this.clearMouseCanvas(),this.draw({trigger:"mouseleave"})},this.handleDragStart=(t,e)=>{let{startPos:n}=t;this.triggerEvent("dragstart",{startPos:n},e)},this.handleDrag=(t,e)=>{let{startPos:n,mouseXY:r}=t;const{chartConfigs:o,plotData:i,xScale:s,xAccessor:a}=this.state,l=ei(o,r),c=ri(s,a,r,i);this.triggerEvent("drag",{startPos:n,mouseXY:r,currentItem:c,currentCharts:l},e),this.mutableState={mouseXY:r,currentItem:c,currentCharts:l},requestAnimationFrame((()=>{this.clearMouseCanvas(),this.draw({trigger:"drag"})}))},this.handleDragEnd=(t,e)=>{let{mouseXY:n}=t;this.triggerEvent("dragend",{mouseXY:n},e),requestAnimationFrame((()=>{this.clearMouseCanvas(),this.draw({trigger:"dragend"})}))},this.handleClick=(t,e)=>{this.triggerEvent("click",this.mutableState,e),requestAnimationFrame((()=>{this.clearMouseCanvas(),this.draw({trigger:"click"})}))},this.handleDoubleClick=(t,e)=>{this.triggerEvent("dblclick",{},e)},this.resetYDomain=t=>{const{chartConfigs:e}=this.state;let n=!1;const r=e.map((e=>null!=t&&e.id!==t||nr(e.yScale.domain(),e.realYDomain)?e:(n=!0,{...e,yScale:e.yScale.domain(e.realYDomain),yPanEnabled:!1})));n&&(this.clearThreeCanvas(),this.setState({chartConfigs:r}))},this.state=Aa(t)}clearBothCanvas(){const{axes:t,mouseCoord:e}=this.getCanvasContexts()||{};t&&e&&mr([t,e],this.props.ratio)}clearMouseCanvas(){const{mouseCoord:t}=this.getCanvasContexts()||{};t&&mr([t],this.props.ratio)}clearThreeCanvas(){const{axes:t,mouseCoord:e,bg:n}=this.getCanvasContexts()||{};t&&e&&n&&mr([t,e,n],this.props.ratio)}cancelDrag(){var t;null==(t=this.eventCaptureRef.current)||t.cancelDrag(),this.triggerEvent("dragcancel")}triggerEvent(t,e,n){this.subscriptions.forEach((r=>{const o={...this.state,subscriptions:this.subscriptions};r.listener(t,e,o,n)}))}getContextValues(){const{margin:t,ratio:e}=this.props,{fullData:n,plotData:r,chartConfigs:o,xScale:i,xAccessor:s,displayXAccessor:a}=this.state,{width:l,height:c}=ka(this.props);return{chartId:-1,margin:t,ratio:e,plotData:r,chartConfigs:o,xScale:i,xAccessor:s,displayXAccessor:a,width:l,height:c,fullData:n||[],xAxisZoom:this.xAxisZoom,yAxisZoom:this.yAxisZoom,getCanvasContexts:this.getCanvasContexts,redraw:this.redraw,subscribe:this.subscribe,unsubscribe:this.unsubscribe,generateSubscriptionId:this.generateSubscriptionId,getMutableState:this.getMutableState,amIOnTop:this.amIOnTop,setCursorClass:this.setCursorClass}}static getDerivedStateFromProps(t,e){const{recentProps:n={},chartConfigs:r,plotData:o,xAccessor:i,xScale:s}=e,a=((t,e)=>!wa.every((n=>nr(t[n],e[n]))))(n,t);let l;if(Ta(s,i,o)&&!a&&nr(n.xExtents,t.xExtents)){const[n,o]=s.domain(),i=Kn(e.fullData),a=Ca(t),{xAccessor:c}=a,u=c(i);l=((t,e,n,r,o)=>{const{fullData:i,xScale:s,xAccessor:a,displayXAccessor:l,filterData:c}=t,u=Kn(i),h=a(u),[d,p]=e.domain(),{postCalculator:f,children:g,padding:m,flipXScale:y,maintainPointsPerPixelOnResize:v}=n,x=Da(y),w=ka(n),b=Sa(s,w,m,x);let k;if(!r||p>=h){const[t,n]=e.range(),[r,o]=b.range(),s=(o-r)/(n-t)*(p.valueOf()-d.valueOf()),l=c(i,[v?p.valueOf()-s:d,p],a,b,{fallbackStart:d,fallbackEnd:{lastItem:u,lastItemX:e(h)}});k=l.plotData,b.domain(l.domain)}else if(r&&p<h){const t=e(h)-e.range()[1],[n,r]=e.range().map((e=>e+t)).map((t=>e.invert(t))),o=c(i,[n,r],a,b);k=o.plotData,b.domain(o.domain)}const C=f(k),S=ti(w,g,o),D=ni(S,{plotData:C,xAccessor:a,displayXAccessor:l,fullData:i},b.domain());return{xScale:b,xAccessor:a,chartConfigs:D,plotData:C,fullData:i,filterData:c}})(a,s,t,u<=o&&u>=n,r)}else l=Aa(t);return{...l,recentProps:t}}componentDidUpdate(t){this._isDidUpdateRedraw?(this._isDidUpdateRedraw=!1,this.redraw()):t===this.props||this.panInProgress||(clearTimeout(this._asyncRedrawId),this._asyncRedrawId=setTimeout((()=>{this.redraw()}),0)),t.data!==this.props.data&&this.triggerEvent("dataupdated",{chartConfigs:this.state.chartConfigs,xScale:this.state.xScale,plotData:this.state.plotData})}shouldComponentUpdate(){return!this.panInProgress}render(){const{disableInteraction:t,disablePan:e,disableZoom:n,useCrossHairStyleCursor:r,height:o,width:i,margin:s,className:a,zIndex:l,defaultFocus:c,ratio:u,mouseMoveEvent:h,onClick:d,onDoubleClick:p,children:f}=this.props,{plotData:g,xScale:m,xAccessor:y,chartConfigs:v}=this.state,x=ka(this.props),w=Ta(m,y,g),b=r&&w;return(0,S.jsx)(Pa.Provider,{value:this.getContextValues(),children:(0,S.jsxs)("div",{className:a,style:{position:"relative",width:i,height:o},onClick:d,onDoubleClick:p,children:[(0,S.jsx)(sa,{ref:this.canvasContainerRef,ratio:u,width:i,height:o,style:{height:o,zIndex:l,width:i}}),(0,S.jsxs)("svg",{className:a,width:i,height:o,style:{position:"absolute",zIndex:l+5},children:[ba(),(0,S.jsx)(ca,{dimensions:x,chartConfig:v}),(0,S.jsxs)("g",{transform:"translate("+(s.left+.5)+", "+(s.top+.5)+")",children:[(0,S.jsx)(oa,{ref:this.eventCaptureRef,useCrossHairStyleCursor:b,mouseMove:h&&w,zoom:!n&&w,pan:!e&&w,width:x.width,height:x.height,chartConfig:v,xScale:m,xAccessor:y,focus:c,disableInteraction:t,getAllPanConditions:this.getAllPanConditions,onContextMenu:this.handleContextMenu,onClick:this.handleClick,onDoubleClick:this.handleDoubleClick,onMouseDown:this.handleMouseDown,onMouseMove:this.handleMouseMove,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onDragStart:this.handleDragStart,onDrag:this.handleDrag,onDragComplete:this.handleDragEnd,onZoom:this.handleZoom,onPinchZoom:this.handlePinchZoom,onPinchZoomEnd:this.handlePinchZoomEnd,onPan:this.handlePan,onPanEnd:this.handlePanEnd}),(0,S.jsx)("g",{className:Es,children:f})]})]})]})})}}Na.defaultProps={clamp:!1,className:ms,defaultFocus:!0,disablePan:!1,disableInteraction:!1,disableZoom:!1,flipXScale:!1,maintainPointsPerPixelOnResize:!0,margin:{top:0,right:40,bottom:40,left:0},minPointsPerPxThreshold:.01,mouseMoveEvent:!0,postCalculator:Pn,padding:0,pointsPerPxThreshold:2,useCrossHairStyleCursor:!0,xAccessor:Pn,xExtents:[Sn,Cn],zIndex:1,zoomAnchor:t=>{let{xScale:e,xAccessor:n,mouseXY:r,plotData:o}=t;return n(ri(e,n,r,o))},zoomMultiplier:1.1,onZoom:()=>{}};const Ea=t=>{const e=(0,o.useRef)(null);return(0,o.useLayoutEffect)((()=>{e.current=t})),(0,o.useCallback)((function(){const t=e.current;return t?t(...arguments):void 0}),[])},Ia=Object.assign,Fa={mouseleave:"mousemove",panend:"pan",pinchzoom:"pan",mousedown:"mousemove",click:"mousemove",contextmenu:"mousemove",dblclick:"mousemove",dragstart:"drag",dragend:"drag",dragcancel:"drag",zoom:"zoom"},La=t=>t.mouseCoord,Oa=(t,e)=>e?{clipPath:"url(#chart-area-clip"+(void 0!==t?"-"+t:"")+")"}:void 0,Ra=(0,o.memo)((0,o.forwardRef)(((t,e)=>{const{isHover:n,clip:r=!0,edgeClip:i=!1,canvasToDraw:s=La,canvasDraw:a,svgDraw:l,preCanvasDraw:c,postCanvasDraw:u,updateMoreProps:h,getMoreProps:d}=t,p=(0,o.useContext)(Pa),{chartId:f}=(0,o.useContext)($o),g=(0,o.useMemo)((()=>(null==p.generateSubscriptionId?void 0:p.generateSubscriptionId())||0),[]),m=_(),{getCanvasContexts:y,subscribe:v,unsubscribe:x}=p,w=(0,o.useRef)({chartId:p.chartId,hovering:!1,currentCharts:[],chartConfigs:p.chartConfigs,fullData:p.fullData,plotData:p.plotData,xScale:p.xScale,xAccessor:p.xAccessor}),b=(0,o.useRef)(!1),k=(0,o.useRef)(!1),C=(0,o.useRef)(!1),D=(0,o.useCallback)(((t,e)=>{Ia(e,t||{}),null==h||h(t,e)}),[h]),A=(0,o.useCallback)((()=>{const{chartConfigs:t,xAccessor:e,displayXAccessor:n,width:r,height:o,fullData:i}=p,s=null==d?void 0:d(w.current);return{displayXAccessor:n,width:r,height:o,...w.current,fullData:i,chartConfigs:t,xAccessor:e,...s,chartConfig:Xo(t,f)}}),[p,d,f]);(0,o.useImperativeHandle)(e,(()=>({getMoreProps:A})),[A]);const M=(0,o.useCallback)((t=>void 0!==n&&n(A(),t)),[n,A]),T=(0,o.useCallback)(((t,e)=>{null==c||c(t,e)}),[c]),P=(0,o.useCallback)(((t,e)=>{null==u||u(t,e)}),[u]),j=Ea(((e,n)=>{const r=Fa[e]||e;if(t.drawOn.includes(r)&&(!t.shouldTypeProceed||t.shouldTypeProceed(e,w.current)))switch(e){case"zoom":case"mouseenter":break;case"mouseleave":w.current.hovering=!1,t.onUnHover&&t.onUnHover(n,A());break;case"contextmenu":t.onContextMenu&&t.onContextMenu(n,A()),w.current.hovering&&t.onContextMenuWhenHover&&t.onContextMenuWhenHover(n,A());break;case"mousedown":t.onMouseDown&&t.onMouseDown(n,A());break;case"click":{const{onClick:e,onClickOutside:r,onClickWhenHover:o}=t,i=A();i.hovering&&void 0!==o?o(n,i):void 0!==r&&r(n,i),void 0!==e&&e(n,i);break}case"mousemove":{const e=w.current.hovering;w.current.hovering=M(n);const{amIOnTop:r,setCursorClass:o}=p;w.current.hovering&&!t.selected&&r(g)&&void 0!==t.onHover?(o("react-financial-charts-pointer-cursor"),C.current=!0):w.current.hovering&&t.selected&&r(g)?(o(t.interactiveCursorClass),C.current=!0):e&&!w.current.hovering&&C.current&&(C.current=!1,o(null));const i=A();w.current.hovering&&!e&&t.onHover&&t.onHover(n,i),e&&!w.current.hovering&&t.onUnHover&&t.onUnHover(n,i),t.onMouseMove&&t.onMouseMove(n,i);break}case"dblclick":{const e=A();t.onDoubleClick&&t.onDoubleClick(n,e),w.current.hovering&&t.onDoubleClickWhenHover&&t.onDoubleClickWhenHover(n,e);break}case"pan":w.current.hovering=!1,t.onPan&&t.onPan(n,A());break;case"panend":t.onPanEnd&&t.onPanEnd(n,A());break;case"dragstart":if(F().draggable){const{amIOnTop:e}=p;e(g)&&(b.current=!0,void 0!==t.onDragStart&&t.onDragStart(n,A()))}break;case"drag":b.current&&t.onDrag&&t.onDrag(n,A());break;case"dragend":b.current&&t.onDragComplete&&t.onDragComplete(n,A()),b.current=!1;break;case"dragcancel":if(b.current||C.current){const{setCursorClass:t}=p;t(null)}break;default:return}})),N=Ea(((t,e,n,r)=>{e&&D(e,w.current),k.current=!0,j(t,r),k.current=!1})),E=(0,o.useCallback)((()=>{if(void 0===a||void 0===s)return;const t=A(),e=null==y?void 0:y();if(void 0===e)return;const n=s(e);void 0!==n&&(T(n,t),a(n,t),P(n,t))}),[s,a,y,T,P,A]),I=Ea((e=>{let{trigger:n,force:r=!1}=e;const o=Fa[n]||n;(t.drawOn.indexOf(o)>-1||t.selected||r)&&(void 0===a?m():E())})),F=Ea((()=>({draggable:!!(w.current.hovering&&(t.selected||t.enableDragOnHover)),panEnabled:!t.disablePan})));return(0,o.useEffect)((()=>{const{setCursorClass:e}=p;t.selected&&w.current.hovering?(C.current=!0,e(t.interactiveCursorClass)):(C.current=!1,e(null))}),[t.selected]),(0,o.useEffect)((()=>{void 0===a||k.current||(D(void 0,w.current),E())})),(0,o.useEffect)((()=>(v(g,{chartId:f,clip:r,edgeClip:i,listener:N,draw:I,getPanConditions:F}),()=>{x(g),C.current&&p.setCursorClass(null)})),[f,g,i,r]),void 0!==a||void 0===l?null:(0,S.jsx)("g",{style:Oa(f,r),children:l(A())})}))),Wa=Array.isArray,za=["drag","dragend"],Ua=(t,e,n,r,o)=>{t.beginPath(),t.rect(e,n,r,o),t.clip()},Ha=[],Ba=t=>{let{refComp:e,drawOn:n=Ha,...r}=t;const i=(0,o.useContext)($o),{clip:s,edgeClip:a,disablePan:l}=r,{chartId:c,ratio:u,margin:{left:h,right:d,top:p}}=i,f=(0,o.useCallback)(((t,e)=>{const n=Xo(e.chartConfigs,c);if(!n)return;t.save();const{width:r,height:o,origin:i}=n,l=.5*u,f=l+i[0]+h,g=l+i[1]+p;t.setTransform(1,0,0,1,0,0),t.scale(u,u),a&&Ua(t,-1,g-10,r+h+d+1,o+20),t.translate(f,g),s&&Ua(t,-1,-1,r+1,o+1)}),[h,d,p,u,s,a,c]),g=(0,o.useCallback)(((t,e)=>{t.restore()}),[]),m=(0,o.useCallback)(((t,e)=>{const{chartConfig:n}=t||e;if(n&&Wa(n)&&(e.chartConfig=n.find((t=>t.id===c))),e.chartConfig){const{origin:[n,r]}=e.chartConfig,{mouseXY:o,startPos:i}=t;if(o){const[t,i]=o;e.mouseXY=[t-n,i-r]}if(i){const[t,o]=i;e.startPos=[t-n,o-r]}}}),[c]),y=(0,o.useCallback)(((t,e)=>{if(l&&("mousemove"===t||"click"===t))return!0;const{currentCharts:n}=e||{};return!n||-1!==za.indexOf(t)||n.indexOf(c)>-1}),[l,c]);return(0,S.jsx)(Ra,{...r,ref:e,drawOn:n,preCanvasDraw:f,postCanvasDraw:g,updateMoreProps:m,shouldTypeProceed:y})};class Xa extends o.Component{constructor(){super(...arguments),this.ref=(0,o.createRef)(),this.clicked=!1,this.dragHappened=!1,this.state={startPosition:null},this.handleDragEnd=t=>{const e=i(this.ref);if(e){if(!this.dragHappened)if(this.clicked){const n=fs(t,e),{onDoubleClick:r}=this.props;void 0!==r&&r(t,n)}else this.clicked=!0,setTimeout((()=>{this.clicked=!1}),300);ds(ir(e)).on(lr,null).on(cr,null).on(ur,null).on(hr,null),this.setState({startPosition:null})}},this.handleDrag=t=>{const e=i(this.ref);if(!e)return;this.dragHappened=!0;const{getMouseDelta:n,inverted:r}=this.props,{startPosition:o}=this.state;if(null!==o){const{startScale:i,startXY:s}=o,a=n(s,fs(t,e)),l=Dn(i.range());if(void 0===l)return;const c=i.range().map((t=>r?t-or(t-l)*a:t+or(t-l)*a)),u=c.map(i.invert);if(or(Kn(i.range())-Qn(i.range()))===or(Kn(c)-Qn(c))){const{axisZoomCallback:t}=this.props;void 0!==t&&t(u)}}},this.handleDragStartTouch=t=>{const e=i(this.ref);if(!e)return;this.dragHappened=!1;const n=this.props.getScale();if(1===t.touches.length&&void 0!==n.invert){ds(ir(e)).on(ur,this.handleDrag).on(hr,this.handleDragEnd);const r=fr(dr(t.touches[0]),t);this.setState({startPosition:{startScale:n,startXY:r}})}},this.handleDragStartMouse=t=>{t.preventDefault();const e=i(this.ref);if(!e)return;this.dragHappened=!1;const n=this.props.getScale();if(void 0!==n.invert){ds(ir(e)).on(lr,this.handleDrag,!1).on(cr,this.handleDragEnd,!1);const r=gr(t);this.setState({startPosition:{startXY:r,startScale:n}})}},this.handleRightClick=t=>{t.stopPropagation(),t.preventDefault();const e=i(this.ref),{onContextMenu:n}=this.props;if(!e||!n)return;const r=e.getBoundingClientRect(),o=gr(t,r);ds(ir(e)).on(lr,null).on(cr,null),this.setState({startPosition:null}),n(t,o)}}render(){const{bg:t,className:e,zoomCursorClassName:n}=this.props,r=null===this.state.startPosition?Ms:n||"";return(0,S.jsx)("rect",{ref:this.ref,className:Is+" "+r+" "+e,x:t.x,y:t.y,height:t.h,width:t.w,opacity:0,onContextMenu:this.handleRightClick,onMouseDown:this.handleDragStartMouse,onTouchStart:this.handleDragStartTouch})}}Xa.defaultProps={inverted:!0,className:""};const Ya=Xa,Za=t=>t.axes,$a=t=>t.mouseCoord;var Va=n(623);const qa=(t,e)=>{const{orient:n,innerTickSize:r=4,tickFormat:o,tickPadding:i=4,tickLabelFill:s,tickStrokeWidth:a,tickStrokeDasharray:l,fontSize:c=12,fontFamily:u,fontWeight:h,showTicks:d,showTickLabel:p,ticks:f,tickValues:g,tickStrokeStyle:m,tickInterval:y,tickIntervalFunction:v,...x}=t;let w;if(void 0!==g)w="function"==typeof g?g(e.domain()):g;else if(void 0!==y){const[t,n]=e.domain(),r=function(){let t=+(arguments.length<=0?void 0:arguments[0]),e=+(arguments.length<=1?void 0:arguments[1]),n=arguments.length,r=n<2?(e=t,t=0,1):n<3?1:+(arguments.length<=2?void 0:arguments[2]),o=new Array(n),i=-1;for(n=0|An(0,Mn((e-t)/r));++i<n;)o[i]=t+i*r;return o}(t,n,(n-t)/y);w=v?v(t,n,y):r}else w=void 0!==e.ticks?e.ticks(f):e.domain();const b=void 0===o?e.tickFormat(f):t=>o(t)||"",k="top"===n||"left"===n?-1:1,C=Math.max(r,0)+i;let S,D,A,M;if("bottom"===n||"top"===n){const t=k*r,n=k*C;if(D=k<0?"0em":".71em",A=k<0?0:.71*c,M="middle",S=w.map((r=>{const o=Math.round(e(r));return{value:r,x1:o,y1:0,x2:o,y2:t,labelX:o,labelY:n}})),d){const t=S.map((t=>({id:t.value,value:t.value,fy:t.y2,origX:t.x1}))),e=(0,Va.A4)(t).force("x",(0,Va.RU)((t=>t.origX)).strength(1)).force("collide",(0,Va.Hh)(22)).stop();for(let t=0;t<100;++t)e.tick();S=_n(S,t).map((t=>{const[e,n]=t;return Math.abs(n.x-n.origX)>.01?{...e,x2:n.x,labelX:n.x}:e}))}}else S=w.map((t=>{const n=Math.round(e(t));return{value:t,x1:0,y1:n,x2:k*r,y2:n,labelX:k*C,labelY:n}})),D=".32em",A=.32*c,M=k<0?"end":"start";return{orient:n,ticks:S,scale:e,tickStrokeStyle:m,tickLabelFill:s||m,tickStrokeWidth:a,tickStrokeDasharray:l,dy:D,canvas_dy:A,textAnchor:M,fontSize:c,fontFamily:u,fontWeight:h,format:b,showTickLabel:p,...x}},Ga=(t,e)=>{const{ticks:n,tickStrokeStyle:r}=e;void 0!==r&&(t.strokeStyle=r,t.fillStyle=r),n.forEach((n=>{((t,e,n)=>{const{tickStrokeWidth:r,tickStrokeDasharray:o}=n;t.beginPath(),t.moveTo(e.x1,e.y1),t.lineTo(e.x2,e.y2),t.lineWidth=r;const i=On(o);t.setLineDash(i),t.stroke()})(t,n,e)}))},Ka=(t,e,n)=>{e.ticks.forEach((r=>{((t,e,n,r)=>{const{orient:o,gridLinesStrokeWidth:i,gridLinesStrokeStyle:s,gridLinesStrokeDasharray:a}=n,{chartConfig:l}=r,{height:c,width:u}=l;void 0!==s&&(t.strokeStyle=s),t.beginPath();const h="top"===o||"left"===o?1:-1;switch(o){case"top":case"bottom":t.moveTo(e.x1,0),t.lineTo(e.x2,h*c);break;default:t.moveTo(0,e.y1),t.lineTo(h*u,e.y2)}t.lineWidth=i;const d=On(a);t.setLineDash(d),t.stroke()})(t,r,e,n)}))},Ja=["pan"],Qa=t=>{const{getScale:e,edgeClip:n,zoomEnabled:r,zoomCursorClassName:s,bg:a,className:l,inverted:c,transform:u,getMouseDelta:h,axisZoomCallback:d,onContextMenu:p,onDoubleClick:f}=t,g=(0,o.useRef)(),m=(0,o.useCallback)((()=>e(i(g).getMoreProps())),[e]);return(0,S.jsxs)("g",{transform:Vn(u),children:[r?(0,S.jsx)(Ya,{className:l,zoomCursorClassName:s,inverted:c,bg:a,axisZoomCallback:d,getScale:m,getMouseDelta:h,onContextMenu:p,onDoubleClick:f}):null,(0,S.jsx)(Ba,{refComp:g,clip:!1,edgeClip:n,canvasToDraw:Za,canvasDraw:(n,r)=>{((t,e)=>{t.save(),t.translate(e[0],e[1])})(n,u);const o=qa(t,e(r));t.showTicks&&Ga(n,o),t.showGridLines&&Ka(n,o,r),t.showTickLabel&&((t,e)=>{const{textAnchor:n,tickLabelFill:r}=e;t.font=(t=>{let{fontWeight:e,fontSize:n,fontFamily:r}=t;return e+" "+n+"px "+r})(e),void 0!==r&&(t.fillStyle=r),t.textAlign="middle"===n?"center":n,e.ticks.forEach((n=>{((t,e,n)=>{const{canvas_dy:r,format:o}=n,i=o(e.value);t.beginPath(),t.fillText(i,e.labelX,e.labelY+r)})(t,n,e)}))})(n,o),t.showDomain&&((t,e)=>{const{orient:n,outerTickSize:r,strokeStyle:o,strokeWidth:i,range:s}=e,a="top"===n||"left"===n?-1:1,l="bottom"===n||"top"===n;t.lineWidth=i,t.strokeStyle=o,t.beginPath();const c=Qn(s),u=Kn(s),h=a*r;l?(t.moveTo(c,h),t.lineTo(c,0),t.lineTo(u,0),t.lineTo(u,h)):(t.moveTo(h,c),t.lineTo(0,c),t.lineTo(0,u),t.lineTo(h,u)),t.stroke()})(n,t),n.restore()},drawOn:Ja})]})},tl=t=>t<400?2:t<500?6:8,el=t=>{let{xScale:e,width:n}=t;return e.invert?((t,e)=>{const n=e.map(t.invert);return t.copy().domain(n).range(e)})(e,[0,n]):e},nl=t=>{const{xAxisZoom:e,chartConfig:{width:n,height:r}}=(0,o.useContext)($o),{getMouseDelta:i,outerTickSize:s,showTicks:a,strokeStyle:l,strokeWidth:c,zoomEnabled:u,...h}=t,d=((t,e,n)=>{const{axisAt:r,xZoomHeight:o,orient:i,ticks:s}=t,a="top"===i?-o:0,l=o,c=e,u=((t,e)=>"top"===t?0:"bottom"===t?e:"middle"===t?e/2:t)(r,n);return{bg:{x:0,y:a,h:l,w:c},transform:[0,u],range:[0,e],getScale:el,ticks:null!=s?s:tl(e)}})(t,n,r);return(0,S.jsx)(Qa,{...h,...d,getMouseDelta:i,outerTickSize:s,showTicks:a,strokeStyle:l,strokeWidth:c,zoomEnabled:u&&a,axisZoomCallback:e})},rl="#000000";nl.defaultProps={axisAt:"bottom",className:Ls,domainClassName:Rs,fontFamily:na,fontSize:12,fontWeight:400,getMouseDelta:(t,e)=>t[0]-e[0],gridLinesStrokeStyle:"#e2e4ec",gridLinesStrokeWidth:1,orient:"bottom",outerTickSize:0,innerTickSize:4,showDomain:!0,showGridLines:!1,showTicks:!0,showTickLabel:!0,strokeStyle:rl,strokeWidth:1,tickPadding:4,tickLabelFill:rl,tickStrokeStyle:rl,xZoomHeight:25,zoomEnabled:!0,zoomCursorClassName:js};const ol=nl,il=t=>t<300?2:t<500?6:8,sl=t=>{const{yScale:e,flipYScale:n,height:r}=t.chartConfig;if(e.invert){const t=n?[0,r]:[r,0],o=t.map(e.invert);return e.copy().domain(o).range(t)}return e},al=t=>{const e=(0,o.useContext)($o),{chartId:n,chartConfig:{width:r,height:i,yPan:s},yAxisZoom:a}=e,l=(0,o.useCallback)((t=>{a(n,t)}),[n,a]),{getMouseDelta:c,outerTickSize:u,strokeStyle:h,strokeWidth:d,...p}=t,{zoomEnabled:f,...g}=((t,e,n,r)=>{const{axisAt:o,ticks:i,yZoomWidth:s,orient:a}=t,l=((t,e)=>"left"===t?0:"right"===t?e:"middle"===t?e/2:t)(o,e);return{transform:[l,0],range:[0,n],bg:{x:"left"===a?-s:0,y:0,h:n,w:s},getScale:sl,ticks:null!=i?i:il(n),zoomEnabled:r}})(t,r,i,s);return(0,S.jsx)(Qa,{...p,...g,edgeClip:!0,outerTickSize:u,strokeStyle:h,strokeWidth:d,zoomEnabled:t.zoomEnabled&&f,getMouseDelta:c,axisZoomCallback:l})},ll="#000000";al.defaultProps={axisAt:"right",className:Os,domainClassName:Rs,fontFamily:na,fontSize:12,fontWeight:400,getMouseDelta:(t,e)=>t[1]-e[1],gridLinesStrokeStyle:"#e2e4ec",gridLinesStrokeWidth:1,innerTickSize:4,outerTickSize:0,orient:"right",showDomain:!0,showGridLines:!1,showTicks:!0,showTickLabel:!0,strokeStyle:ll,strokeWidth:1,tickPadding:4,tickLabelFill:ll,tickStrokeStyle:ll,yZoomWidth:40,zoomEnabled:!0,zoomCursorClassName:Ps};const cl=al;function ul(t){this._context=t}function hl(t){return new ul(t)}function dl(t,e){return e||(e=t.slice(0)),t.raw=e,t}var pl,fl,gl,ml,yl,vl,xl,wl,bl,kl,Cl,Sl,Dl,Al;ul.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};const Ml=Math.PI,Tl=2*Ml,_l=1e-6,Pl=Tl-_l;function jl(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}class Nl{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==t?jl:function(t){let e=Math.floor(t);if(!(e>=0))throw new Error("invalid digits: "+t);if(e>15)return jl;const n=10**e;return function(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=Math.round(arguments[e]*n)/n+t[e]}}(t)}moveTo(t,e){this._append(pl||(pl=dl(["M",",",""])),this._x0=this._x1=+t,this._y0=this._y1=+e)}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append(fl||(fl=dl(["Z"]))))}lineTo(t,e){this._append(gl||(gl=dl(["L",",",""])),this._x1=+t,this._y1=+e)}quadraticCurveTo(t,e,n,r){this._append(ml||(ml=dl(["Q",",",",",",",""])),+t,+e,this._x1=+n,this._y1=+r)}bezierCurveTo(t,e,n,r,o,i){this._append(yl||(yl=dl(["C",",",",",",",",",",",""])),+t,+e,+n,+r,this._x1=+o,this._y1=+i)}arcTo(t,e,n,r,o){if(t=+t,e=+e,n=+n,r=+r,(o=+o)<0)throw new Error("negative radius: "+o);let i=this._x1,s=this._y1,a=n-t,l=r-e,c=i-t,u=s-e,h=c*c+u*u;if(null===this._x1)this._append(vl||(vl=dl(["M",",",""])),this._x1=t,this._y1=e);else if(h>_l)if(Math.abs(u*a-l*c)>_l&&o){let d=n-i,p=r-s,f=a*a+l*l,g=d*d+p*p,m=Math.sqrt(f),y=Math.sqrt(h),v=o*Math.tan((Ml-Math.acos((f+h-g)/(2*m*y)))/2),x=v/y,w=v/m;Math.abs(x-1)>_l&&this._append(wl||(wl=dl(["L",",",""])),t+x*c,e+x*u),this._append(bl||(bl=dl(["A",",",",0,0,",",",",",""])),o,o,+(u*d>c*p),this._x1=t+w*a,this._y1=e+w*l)}else this._append(xl||(xl=dl(["L",",",""])),this._x1=t,this._y1=e);else;}arc(t,e,n,r,o,i){if(t=+t,e=+e,i=!!i,(n=+n)<0)throw new Error("negative radius: "+n);let s=n*Math.cos(r),a=n*Math.sin(r),l=t+s,c=e+a,u=1^i,h=i?r-o:o-r;null===this._x1?this._append(kl||(kl=dl(["M",",",""])),l,c):(Math.abs(this._x1-l)>_l||Math.abs(this._y1-c)>_l)&&this._append(Cl||(Cl=dl(["L",",",""])),l,c),n&&(h<0&&(h=h%Tl+Tl),h>Pl?this._append(Sl||(Sl=dl(["A",",",",0,1,",",",",","A",",",",0,1,",",",",",""])),n,n,u,t-s,e-a,n,n,u,this._x1=l,this._y1=c):h>_l&&this._append(Dl||(Dl=dl(["A",",",",0,",",",",",",",""])),n,n,+(h>=Ml),u,this._x1=t+n*Math.cos(o),this._y1=e+n*Math.sin(o)))}rect(t,e,n,r){this._append(Al||(Al=dl(["M",",","h","v","h","Z"])),this._x0=this._x1=+t,this._y0=this._y1=+e,n=+n,+r,-n)}toString(){return this._}}Nl.prototype;const El=t=>"function"==typeof t,Il=t=>void 0===t;function Fl(t){return function(){return t}}const Ll=Array.from;function Ol(t){return"object"==typeof t&&"length"in t?t:Ll(t)}const Rl=Math.floor;function Wl(t){let e=3;return t.digits=function(n){if(Il(n))return e;if(null==n)e=null;else{const t=Rl(n);if(!(t>=0))throw new RangeError("invalid digits: "+n);e=t}return t},()=>new Nl(e)}function zl(t){return t[0]}function Ul(t){return t[1]}const Hl=(t,e)=>El(t)?t:void 0===t?e:Fl(t);function Bl(t,e){let n=Fl(!0),r=null,o=hl,i=null,s=Wl(a);function a(a){let l,c,u,h=(a=Ol(a)).length,d=!1;for(null==r&&(i=o(u=s())),l=0;l<=h;++l)!(l<h&&n(c=a[l],l,a))===d&&((d=!d)?i.lineStart():i.lineEnd()),d&&i.point(+t(c,l,a),+e(c,l,a));if(u)return i=null,u+""||null}return t=Hl(t,zl),e=Hl(e,Ul),a.x=e=>Il(e)?t:(t=El(e)?e:Fl(+e),a),a.y=t=>Il(t)?e:(e=El(t)?t:Fl(+t),a),a.defined=t=>Il(t)?n:(n=El(t)?t:Fl(!!t),a),a.curve=t=>Il(t)?o:(o=t,null!=r&&(i=o(r)),a),a.context=t=>Il(t)?r:(null==t?r=i=null:i=o(r=t),a),a}const Xl=(t,e)=>El(t)?t:Il(t)?e:Fl(+t);function Yl(t,e){if(!((i=t.length)>1))return;let n,r,o,i,s=t[e[0]],a=s.length;for(n=1;n<i;++n)for(o=s,s=t[e[n]],r=0;r<a;++r)s[r][1]+=s[r][0]=isNaN(o[r][1])?o[r][0]:o[r][1]}function Zl(t){let e=t.length,n=new Array(e);for(;--e>=0;)n[e]=e;return n}function $l(t,e){return t[e]}function Vl(t){const e=[];return e.key=t,e}function ql(){let t=Fl([]),e=Zl,n=Yl,r=$l;function o(o){let i,s,a=Ll(t.apply(this,arguments),Vl),l=a.length,c=-1;for(const t of o)for(i=0,++c;i<l;++i)(a[i][c]=[0,+r(t,a[i].key,c,o)]).data=t;for(i=0,s=Ol(e(a));i<l;++i)a[s[i]].index=i;return n(a,s),a}return o.keys=e=>Il(e)?t:(t=El(e)?e:Fl(Ll(e)),o),o.value=t=>Il(t)?r:(r=El(t)?t:Fl(+t),o),o.order=t=>Il(t)?e:(e=null==t?Zl:El(t)?t:Fl(Ll(t)),o),o.offset=t=>Il(t)?n:(n=null==t?Yl:t,o),o}const Gl=()=>{},Kl=Math.round,Jl=Math.pow,Ql=t=>{const{yAccessor:e,hoverTolerance:n,highlightOnHover:r,stroke:o,strokeOpacity:i,strokeWidth:s,strokeDasharray:a,hoverStrokeWidth:l,defined:c,connectNulls:u,interpolation:h,style:d,fill:p,className:f,canvasClip:g,onClick:m,onDoubleClick:y,onContextMenu:v,onHover:x,onUnHover:w}=t,b=r||x||w?{isHover:t=>{if(!r)return!1;const{mouseXY:o,currentItem:i,xScale:s,xAccessor:a,plotData:l,chartConfig:{yScale:c,origin:u}}=t,[h,d]=o,p=n,{left:f,right:g}=er(l,s.invert(h),a);if(f===g){const t=c(e(i))+u[1],n=s(a(i))+u[0];return Jl(h-n,2)+Jl(d-t,2)<Jl(p,2)}{const t=l[f],n=l[g],r=s(a(t))+u[0],o=c(e(t))+u[1],i=s(a(n))+u[0],m=(c(e(n))+u[1]-o)/(i-r),y=Kl(m*h+(-1*m*r+o));return d>=y-p&&d<=y+p}},drawOn:["mousemove","pan"],canvasToDraw:$a}:{drawOn:["pan"],canvasToDraw:Za};return(0,S.jsx)(Ba,{svgDraw:t=>{const{xAccessor:n,xScale:r,plotData:g,hovering:m,chartConfig:y}=t,{yScale:v}=y,x=Bl().x((t=>Kl(r(n(t))))).y((t=>Kl(v(e(t)))));return h&&x.curve(h),u||x.defined((t=>c(e(t)))),(0,S.jsx)("path",{style:d,className:f+" "+(o?"":ta),d:x(g),stroke:o,strokeOpacity:i,strokeWidth:m?l:s,strokeDasharray:Ln(a),fill:p})},canvasDraw:(t,n)=>{const{hovering:r,xScale:d,xAccessor:p,plotData:f,chartConfig:{yScale:m}}=n;g&&(t.save(),g(t,n)),t.lineWidth=r?l:s,t.strokeStyle=Gn(o,i),t.setLineDash(Ln(a).split(","));const y=Bl().x((t=>Kl(d(p(t))))).y((t=>Kl(m(e(t)))));h&&y.curve(h),u||y.defined((t=>c(e(t)))),t.beginPath(),y.context(t)(f),t.stroke(),g&&t.restore()},onClickWhenHover:m,onDoubleClickWhenHover:y,onContextMenuWhenHover:v,onHover:x,onUnHover:w,...b})};Ql.defaultProps={className:Qs,strokeWidth:1,strokeOpacity:1,hoverStrokeWidth:4,fill:"none",stroke:"#4682b4",strokeDasharray:"Solid",defined:t=>!isNaN(t),hoverTolerance:6,highlightOnHover:!1,connectNulls:!1,onClick:Gl,onDoubleClick:Gl,onContextMenu:Gl};const tc=Ql,ec=Math.round,nc=(t,e)=>ec(t(e)),rc=(t,e,n,r,o,i,s)=>"horizontal"===t?{x1:0,y1:nc(n,o),x2:i,y2:nc(n,o)}:{x1:nc(e,r),y1:0,x2:nc(e,r),y2:s},oc=["pan"],ic=t=>{const{type:e,className:n,opacity:r,stroke:o,strokeWidth:i,strokeDasharray:s,yValue:a,xValue:l}=t;return(0,S.jsx)(Ba,{svgDraw:t=>{const{width:c,height:u,xScale:h,chartConfig:{yScale:d}}=t,p=rc(e,h,d,l,a,c,u);return(0,S.jsx)("line",{className:n,strokeDasharray:Ln(s),stroke:o,strokeWidth:i,strokeOpacity:r,...p})},canvasDraw:(t,n)=>{const{xScale:c}=n,{chartConfig:{yScale:u,width:h,height:d}}=n,{x1:p,y1:f,x2:g,y2:m}=rc(e,c,u,l,a,h,d);t.beginPath(),t.strokeStyle=Gn(o,r),t.lineWidth=i,t.setLineDash((t=>Ln(t).split(","))(s)),t.moveTo(p,f),t.lineTo(g,m),t.stroke()},canvasToDraw:Za,drawOn:oc})};ic.defaultProps={type:"horizontal",className:Qs,opacity:.5,stroke:"#000000",strokeWidth:1,strokeDasharray:"Solid"};const sc=ic,ac=t=>{let{children:e}=t;return(0,S.jsx)(Ba,{svgDraw:e})},lc=()=>"rsi-clip-"+String(Math.round(1e4*Math.random()*1e4)),cc=t=>({clipPath:"url(#"+t+")"});class uc extends o.Component{constructor(t){super(t),this.topAndBottomClip=(t,e)=>{const{overSold:n,overBought:r}=this.props,{chartConfig:{yScale:o,width:i}}=e;t.beginPath(),t.rect(0,o(n),i,o(r)-o(n)),t.clip()},this.mainClip=(t,e)=>{const{overSold:n,overBought:r}=this.props,{chartConfig:{yScale:o,width:i,height:s}}=e;t.beginPath(),t.rect(0,0,i,o(n)),t.rect(0,o(r),i,s-o(r)),t.clip()},this.renderClip=t=>{const{overSold:e,overBought:n}=this.props,{chartConfig:{yScale:r,width:o,height:i}}=t;return(0,S.jsxs)("defs",{children:[(0,S.jsx)("clipPath",{id:this.clipPathId1,children:(0,S.jsx)("rect",{x:0,y:r(e),width:o,height:r(n)-r(e)})}),(0,S.jsxs)("clipPath",{id:this.clipPathId2,children:[(0,S.jsx)("rect",{x:0,y:0,width:o,height:r(e)}),(0,S.jsx)("rect",{x:0,y:r(n),width:o,height:i-r(n)})]})]})},this.clipPathId1=lc(),this.clipPathId2=lc()}render(){const{className:t,opacity:e,stroke:n,strokeDasharray:r,strokeWidth:o,yAccessor:i,overSold:s,middle:a,overBought:l}=this.props,c=cc(this.clipPathId1),u=cc(this.clipPathId2);return(0,S.jsxs)("g",{className:t,children:[(0,S.jsx)(ac,{children:this.renderClip}),(0,S.jsx)(sc,{opacity:e.top,stroke:n.top,strokeWidth:o.top,strokeDasharray:r.top,yValue:s}),(0,S.jsx)(sc,{opacity:e.middle,stroke:n.middle,strokeWidth:o.middle,strokeDasharray:r.middle,yValue:a}),(0,S.jsx)(sc,{opacity:e.bottom,stroke:n.bottom,strokeWidth:o.bottom,strokeDasharray:r.bottom,yValue:l}),(0,S.jsx)(tc,{style:c,canvasClip:this.topAndBottomClip,className:t,yAccessor:i,stroke:n.insideThreshold||n.line,strokeWidth:o.insideThreshold,strokeDasharray:r.line}),(0,S.jsx)(tc,{style:u,canvasClip:this.mainClip,className:t,yAccessor:i,stroke:n.outsideThreshold||n.line,strokeWidth:o.outsideThreshold,strokeDasharray:r.line})]})}}const hc="ShortDash";uc.defaultProps={className:Hs,stroke:{line:"#000000",top:"#b8b2bb",middle:"#8795a1",bottom:"#b8c2cc",outsideThreshold:"#b300b3",insideThreshold:"#ffccff"},opacity:{top:1,middle:1,bottom:1},strokeDasharray:{line:"Solid",top:hc,middle:hc,bottom:hc},strokeWidth:{outsideThreshold:1,insideThreshold:1,top:1,middle:1,bottom:1},overSold:70,middle:50,overBought:30};const dc=uc;var pc=n(654);const fc=t=>t.map(((t,e)=>{const n=t.wick,{stroke:r,x:o,y1:i,y2:s,y3:a,y4:l}=n;return(0,S.jsx)("path",{className:t.className,stroke:r,d:"M"+o+","+i+" L"+o+","+s+" M"+o+","+a+" L"+o+","+l},e)})),gc=(t,e)=>{const{opacity:n,candleStrokeWidth:r}=t;return e.map(((t,e)=>t.width<=1?(0,S.jsx)("line",{className:t.className,x1:t.x,y1:t.y,x2:t.x,y2:t.y+t.height,stroke:t.fill},e):0===t.height?(0,S.jsx)("line",{stroke:t.fill,x1:t.x,y1:t.y,x2:t.x+t.width,y2:t.y+t.height},e):(0,S.jsx)("rect",{className:t.className,fillOpacity:n,fill:t.fill,stroke:t.stroke,strokeWidth:r,x:t.x,y:t.y,width:t.width,height:t.height},e)))},mc=(t,e,n,r,o)=>{const{classNames:i,yAccessor:s,fill:a,stroke:l,wickStroke:c}=t,u=In(c),h=In(i),d=In(a),p=In(l),f=.5*In(t.width)(t,{xScale:n,xAccessor:e,plotData:o}),g=f>.7?Math.round(f):Math.floor(f);let m=[];for(let t=0;t<o.length;t++){const i=o[t],a=t>0?o[t-1]:{};if(null!=s(i).close){const t=Math.round(n(e(i))),o=s(i),l=s(a),c=Math.round(r(Math.max(o.open,o.close))),f=Math.round(Math.abs(r(o.open)-r(o.close)));m.push({x:t-g,y:c,wick:{stroke:u(o,l),x:t,y1:Math.round(r(o.high)),y2:c,y3:c+f,y4:Math.round(r(o.low))},height:f,width:2*g,className:h(o),fill:d(o,l),stroke:p(o,l),direction:o.close-o.open})}}return m},yc=["pan"],vc=t=>{const{className:e,wickClassName:n,candleClassName:r,clip:o}=t;return(0,S.jsx)(Ba,{clip:o,svgDraw:o=>{const{xAccessor:i,xScale:s,plotData:a,chartConfig:{yScale:l}}=o,c=mc(t,i,s,l,a);return(0,S.jsxs)("g",{className:e,children:[(0,S.jsx)("g",{className:n,children:fc(c)},"wicks"),(0,S.jsx)("g",{className:r,children:gc(t,c)},"candles")]})},canvasDraw:(e,n)=>{((t,e,n)=>{const{opacity:r,candleStrokeWidth:o}=e,{xAccessor:i,xScale:s,plotData:a,chartConfig:{yScale:l}}=n,c=mc(e,i,s,l,a);(0,pc.b1)().key((t=>t.wick.stroke)).entries(c).forEach((e=>{const{key:n,values:r}=e;t.strokeStyle=n,t.fillStyle=n,r.forEach((e=>{const n=e.wick;t.fillRect(n.x-.5,n.y1,1,n.y2-n.y1),t.fillRect(n.x-.5,n.y3,1,n.y4-n.y3)}))})),(0,pc.b1)().key((t=>t.stroke)).key((t=>t.fill)).entries(c).forEach((e=>{const{key:n,values:i}=e;"none"!==n&&(t.strokeStyle=n,t.lineWidth=o),i.forEach((e=>{const{key:o,values:i}=e,s=Jn(i).width<=1?o:Gn(o,r);t.fillStyle=s,i.forEach((e=>{e.width<=1?t.fillRect(e.x-.5,e.y,1,e.height):0===e.height?t.fillRect(e.x,e.y-.5,e.width,1):(t.fillRect(e.x,e.y,e.width,e.height),"none"!==n&&t.strokeRect(e.x,e.y,e.width,e.height))}))}))}))})(e,t,n)},canvasToDraw:Za,drawOn:yc})};vc.defaultProps={className:Xs,wickClassName:Ys,candleClassName:Zs,yAccessor:t=>({open:t.open,high:t.high,low:t.low,close:t.close}),classNames:t=>t.close>t.open?$s:Vs,width:tr,wickStroke:"#000000",fill:t=>t.close>t.open?"#6ba583":"#ff0000",stroke:"#000000",candleStrokeWidth:.5,widthRatio:.8,opacity:.5,clip:!0};const xc=vc,wc=Math.round,bc=(t,e,n,r,o,i,s)=>function(t,e,n){let r=null,o=Fl(!0),i=null,s=hl,a=null,l=Wl(c);function c(c){let u,h,d,p,f,g=(c=Ol(c)).length,m=!1,y=new Array(g),v=new Array(g);for(null==i&&(a=s(f=l())),u=0;u<=g;++u){if(!(u<g&&o(p=c[u],u,c))===m)if(m=!m)h=u,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),d=u-1;d>=h;--d)a.point(y[d],v[d]);a.lineEnd(),a.areaEnd()}m&&(y[u]=+t(p,u,c),v[u]=+e(p,u,c),a.point(r?+r(p,u,c):y[u],n?+n(p,u,c):v[u]))}if(f)return a=null,f+""||null}function u(){return Bl().defined(o).curve(s).context(i)}return t=Xl(t,zl),e=Xl(e,Fl(0)),n=Xl(n,Ul),c.x=e=>Il(e)?t:(t=El(e)?e:Fl(+e),r=null,c),c.x0=e=>Il(e)?t:(t=El(e)?e:Fl(+e),c),c.x1=t=>Il(t)?r:(r=null==t?null:El(t)?t:Fl(+t),c),c.y=t=>Il(t)?e:(e=El(t)?t:Fl(+t),n=null,c),c.y0=t=>Il(t)?e:(e=El(t)?t:Fl(+t),c),c.y1=t=>Il(t)?n:(n=null==t?null:El(t)?t:Fl(+t),c),c.lineX0=c.lineY0=()=>u().x(t).y(e),c.lineY1=()=>u().x(t).y(n),c.lineX1=()=>u().x(r).y(e),c.defined=t=>Il(t)?o:(o=El(t)?t:Fl(!!t),c),c.curve=t=>Il(t)?s:(s=t,null!=i&&(a=s(i)),c),c.context=t=>Il(t)?i:(null==t?i=a=null:a=s(i=t),c),c}().defined((t=>e(r(t)))).x((t=>wc(o(n(t))))).y0((e=>In(t)(i,e,s))).y1((t=>wc(i(r(t))))),kc=["pan"],Cc=t=>{const{yAccessor:e,defined:n,base:r,style:o,className:i,stroke:s,fill:a,opacity:l,interpolation:c,canvasGradient:u,canvasClip:h}=t;return(0,S.jsx)(Ba,{svgDraw:t=>{const{plotData:u,xScale:h,xAccessor:d,chartConfig:{yScale:p}}=t,f=bc(r,n,d,e,h,p,t);null!=c&&f.curve(c);const g=f(u),m=i.concat(null!=s?"":" "+ta);return(0,S.jsx)("path",{className:m,style:o,stroke:s,fill:Gn(a,l),d:g})},canvasDraw:(t,o)=>{const{xScale:i,plotData:d,xAccessor:p,chartConfig:{yScale:f}}=o;h&&(t.save(),h(t,o)),t.fillStyle=null!=u?u(o,t):Gn(a,l),t.strokeStyle=s,t.beginPath();const g=bc(r,n,p,e,i,f,o).context(t);null!=c&&g.curve(c),g(d),t.fill(),h&&t.restore()},canvasToDraw:Za,drawOn:kc})};Cc.defaultProps={className:Qs,fill:"none",opacity:1,defined:t=>!isNaN(t),base:t=>Qn(t.range())};const Sc=Cc;class Dc extends o.Component{constructor(){super(...arguments),this.yAccessorForTop=t=>{const{yAccessor:e}=this.props,n=e(t);return n&&n.top},this.yAccessorForMiddle=t=>{const{yAccessor:e}=this.props,n=e(t);return n&&n.middle},this.yAccessorForBottom=t=>{const{yAccessor:e}=this.props,n=e(t);return n&&n.bottom},this.yAccessorForScalledBottom=(t,e)=>{const{yAccessor:n}=this.props,r=n(e);return t(r&&r.bottom)}}render(){const{className:t,areaClassName:e,opacity:n,stroke:r,fill:o}=this.props;return(0,S.jsxs)("g",{className:t,children:[(0,S.jsx)(tc,{yAccessor:this.yAccessorForTop,stroke:r.top,fill:"none"}),(0,S.jsx)(tc,{yAccessor:this.yAccessorForMiddle,stroke:r.middle,fill:"none"}),(0,S.jsx)(tc,{yAccessor:this.yAccessorForBottom,stroke:r.bottom,fill:"none"}),(0,S.jsx)(Sc,{className:e,yAccessor:this.yAccessorForTop,base:this.yAccessorForScalledBottom,opacity:n,stroke:"none",fill:o})]})}}Dc.defaultProps={className:zs,areaClassName:Us,opacity:.2};const Ac=Dc,Mc=Array.isArray,Tc=Math.round,_c=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];let r=[];function o(t){const e=r.map(((e,n)=>{let r=t.map((t=>{let n=[0,t[e]];return n.data=t,n}));return r.key=e,r.index=n,r}));return e}return o.keys=function(t){return e.length?(r=t,o):r},o},Pc=function(t,e,n,r,o,i,s,a){void 0===s&&(s=_c),void 0===a&&(a=Pn);const{baseAt:l,className:c,fill:u,stroke:h,spaceBetweenBar:d=0}=t,p=In(c),f=In(u),g=In(l),m=In(t.width)(t,{xScale:r,xAccessor:e,plotData:i}),y=Tc(m),v=(y-d*(n.length-1))/n.length,x=1===y?0:.5*m,w=i.map((t=>{let r={appearance:{},x:e(t)};return n.forEach(((e,n)=>{const o="y"+n;r[o]=e(t);const i={className:p(t,n),stroke:h?f(t,n):"none",fill:f(t,n)};r.appearance[o]=i})),r})),b=n.map(((t,e)=>"y"+e)),k=s().keys(b)(w).map(((t,e)=>{const n=t.key;return t.map((t=>{let r=[t[0],t[1]];return r.data={x:t.data.x,i:e,appearance:t.data.appearance[n]},r}))})),C=(t=>{let e,n,r,o=t.length,i=-1,s=0;for(;++i<o;)s+=t[i].length;for(n=new Array(s);--o>=0;)for(r=t[o],e=r.length;--e>=0;)n[--s]=r[e];return n})(k).map((t=>{let e=o(t[1]),n=g(r,o,t.data)-o(t[1]-t[0]);return n<0&&(e+=n,n=-n),{...t.data.appearance,x:Tc(r(t.data.x)-m/2),y:e,groupOffset:Tc(x-(t.data.i>0?(v+d)*t.data.i:0)),groupWidth:Tc(v),offset:Tc(x),height:n,width:y}})).filter((t=>!isNaN(t.y)));return a(C)},jc=t=>Mc(t)?t:[t],Nc=(t,e,n,r,o,i,s,a)=>{const[l,c,u,h,d]=t.swapScales?[jc(t.xAccessor),t.yAccessor,o,r,s]:[jc(t.yAccessor),e,r,o,a];return Pc(t,c,l,u,h,n,i,d)},Ec=t=>t.map((t=>({...t,x:t.y,y:t.x,height:t.width,width:t.height}))),Ic=(t,e,n)=>{const{stroke:r}=e;(0,pc.b1)().key((t=>t.fill)).entries(n).forEach((n=>{const{key:o,values:i}=n;Jn(i).width>1&&(t.strokeStyle=o),t.fillStyle=Jn(i).width<=1?o:Gn(o,e.opacity),i.forEach((e=>{e.width<=1?t.fillRect(e.x-.5,e.y,1,e.height):(t.fillRect(e.x,e.y,e.width,e.height),r&&t.strokeRect(e.x,e.y,e.width,e.height))}))}))},Fc=function(t,e,n,r,o,i){void 0===o&&(o=Pn),void 0===i&&(i=Ec);const{xAccessor:s,plotData:a,xScale:l,chartConfig:{yScale:c}}=n,u=Nc(e,s,a,l,c,r,i,o);Ic(t,e,u)},Lc=function(t,e,n,r,o){void 0===r&&(r=Pn),void 0===o&&(o=Ec);const{xAccessor:i,plotData:s,xScale:a,chartConfig:{yScale:l}}=e,c=Nc(t,i,s,a,l,n,o,r);return Oc(t,c)},Oc=(t,e)=>{let{opacity:n}=t;return e.map(((t,e)=>t.width<=1?(0,S.jsx)("line",{className:t.className,stroke:t.fill,x1:t.x,y1:t.y,x2:t.x,y2:t.y+t.height},e):(0,S.jsx)("rect",{className:t.className,stroke:t.stroke,fill:t.fill,x:t.x,y:t.y,width:t.width,fillOpacity:n,height:t.height},e)))},Rc=["pan"],Wc=t=>(0,S.jsx)(Ba,{clip:t.clip,svgDraw:e=>(0,S.jsx)("g",{children:Lc(t,e,ql)}),canvasDraw:(e,n)=>{Fc(e,t,n,ql)},canvasToDraw:Za,drawOn:Rc});Wc.defaultProps={baseAt:(t,e)=>Jn(e.range()),direction:"up",className:ea,stroke:!0,fill:"#4682b4",opacity:.5,width:tr,widthRatio:.8,clip:!0,swapScales:!1};const zc=Wc,Uc=Math.round,Hc=Math.floor,Bc=(t,e)=>{const{baseAt:n,fill:r,stroke:o,yAccessor:i}=t,{xScale:s,xAccessor:a,plotData:l,chartConfig:{yScale:c}}=e,u=In(n),h=In(t.width)(t,{xScale:s,xAccessor:a,plotData:l}),d=Hc(.5*h);return l.filter((t=>null!=i(t))).map(((t,e,n)=>{const l=n[e-1]||t,h=i(t),p=Uc(s(a(t)))-d;let f=c(h),g=u(s,c,t)-c(h);return g<0&&(f+=g,g=-g),{x:p,y:Uc(f),height:Uc(g),width:2*d,fill:r(t,l),stroke:o(t,l)}}))},Xc=["pan"],Yc=t=>{const{swapScales:e,clip:n}=t;return(0,S.jsx)(Ba,{clip:n,svgDraw:n=>(0,S.jsx)("g",{children:e?Lc(t,n,_c):Oc(t,Bc(t,n))}),canvasToDraw:Za,canvasDraw:(n,r)=>{e?Fc(n,t,r,_c):Ic(n,t,Bc(t,r))},drawOn:Xc})};Yc.defaultProps=zc.defaultProps;const Zc=Yc,$c=Array.isArray,Vc=Math.round,qc=(t,e)=>{const{mouseXY:n,currentItem:r,show:o,height:i,width:s}=e,{customX:a,stroke:l,opacity:c,strokeDasharray:u}=t;if(!o||null==r)return null;const h={x1:0,x2:s,y1:n[1],y2:n[1],stroke:l,strokeDasharray:u,opacity:c},d=a(t,e);return[h,{x1:d,x2:d,y1:0,y2:i,stroke:l,strokeDasharray:u,opacity:c}]},Gc=t=>{const e=(0,o.useContext)(Pa);return(0,S.jsx)(Ra,{clip:!1,canvasDraw:(n,r)=>{const o=qc(t,r);if($c(o)){const{margin:t,ratio:r}=e,i=.5*r+t.left,s=.5*r+t.top;n.save(),n.setTransform(1,0,0,1,0,0),n.scale(r,r),n.translate(i,s),o.forEach((t=>{const e=Ln(t.strokeDasharray).split(",").map((t=>+t));n.strokeStyle=Gn(t.stroke,t.opacity),n.setLineDash(e),n.beginPath(),n.moveTo(t.x1,t.y1),n.lineTo(t.x2,t.y2),n.stroke()})),n.restore()}},canvasToDraw:$a,drawOn:["mousemove","pan","drag"],svgDraw:e=>{const n=qc(t,e);return $c(n)?(0,S.jsx)("g",{className:ht(qs,t.className),children:n.map(((t,e)=>{let{strokeDasharray:n,...r}=t;return(0,S.jsx)("line",{strokeDasharray:Ln(n),...r},e)}))}):null}})};Gc.defaultProps={customX:(t,e)=>{let{xScale:n,xAccessor:r,currentItem:o,mouseXY:i}=e;return t.snapX?Vc(n(r(o))):i[0]},opacity:.3,snapX:!0,stroke:"#000000",strokeDasharray:"ShortDash"};const Kc=Gc;function Jc(t){const{coordinate:e,show:n,type:r,orient:o,edgeAt:i,hideLine:s,lineStrokeDasharray:a}=t,{fill:l,opacity:c,fontFamily:u,fontSize:h,textFill:d,lineStroke:p,lineOpacity:f}=t,{stroke:g,strokeOpacity:m,strokeWidth:y}=t,{arrowWidth:v,rectWidth:x,rectHeight:w,rectRadius:b}=t,{x1:k,y1:C,x2:S,y2:D,dx:A}=t;if(!n)return null;let M,T;if(null!=e){let t,n,s,a;if("horizontal"===r)t=A+("right"===o?i+1:i-x-1),n=C-w/2-y,s=A+("right"===o?i+x/2:i-x/2),a=C;else{const e="bottom"===o?y-1:1-y;t=k-x/2,n=("bottom"===o?i:i-w)+e,s=k,a=("bottom"===o?i+w/2:i-w/2)+e}M={edgeXRect:t,edgeYRect:n,rectHeight:w+y,rectWidth:x,rectRadius:b,fill:l,opacity:c,arrowWidth:v,stroke:g,strokeOpacity:m,strokeWidth:y},T={edgeXText:s,edgeYText:a,textAnchor:"middle",fontFamily:u,fontSize:h,textFill:d,displayCoordinate:e}}return{coordinateBase:M,coordinate:T,orient:o,line:s?void 0:{opacity:f,stroke:p,strokeDasharray:a,x1:k,y1:C,x2:S,y2:D}}}const Qc=["mousemove","pan","drag"],tu=t=>e=>(0,S.jsx)(Ba,{clip:!1,svgDraw:n=>{const r=t(e,n);return null==r?null:function(t){const{className:e}=t,n=Jc(t);if(null===n)return null;let r,o,i;if(n.line&&(r=(0,S.jsx)("line",{className:Gs,strokeOpacity:n.line.opacity,stroke:n.line.stroke,strokeDasharray:Ln(n.line.strokeDasharray),x1:n.line.x1,y1:n.line.y1,x2:n.line.x2,y2:n.line.y2})),n.coordinateBase){const{rectWidth:t,rectHeight:e,arrowWidth:r}=n.coordinateBase,s="left"===n.orient?"M0,0L0,"+e+"L"+t+","+e+"L"+(t+r)+",10L"+t+",0L0,0L0,0":"M0,"+r+"L"+r+","+e+"L"+(t+r)+","+e+"L"+(t+r)+",0L"+r+",0L0,"+r;o="left"===n.orient||"right"===n.orient?(0,S.jsx)("g",{transform:"translate("+n.coordinateBase.edgeXRect+","+n.coordinateBase.edgeYRect+")",children:(0,S.jsx)("path",{d:s,className:Ks,height:e,width:t,stroke:n.coordinateBase.stroke,strokeLinejoin:"miter",strokeOpacity:n.coordinateBase.strokeOpacity,strokeWidth:n.coordinateBase.strokeWidth,fill:n.coordinateBase.fill,fillOpacity:n.coordinateBase.opacity})},1):(0,S.jsx)("rect",{className:Ks,x:n.coordinateBase.edgeXRect,y:n.coordinateBase.edgeYRect,height:e,width:t,fill:n.coordinateBase.fill,opacity:n.coordinateBase.opacity},1);const{edgeXText:a,edgeYText:l,textAnchor:c,fontFamily:u,fontSize:h,textFill:d,displayCoordinate:p}=n.coordinate;i=(0,S.jsx)("text",{x:a,y:l,textAnchor:c,fontFamily:u,fontSize:h,dy:".32em",fill:d,children:null!=p?p:""},2)}return(0,S.jsxs)("g",{className:e,children:[r,o,i]})}(r)},canvasDraw:(n,r)=>{const o=t(e,r);if(null==o)return null;!function(t,e){const{fontSize:n,fontFamily:r}=e;t.font=n+"px "+r,t.textBaseline="middle";const o=Math.round(t.measureText(e.coordinate).width+10),i=Jc({...e,rectWidth:o});if(null!==i){if(i.line){const e=Ln(i.line.strokeDasharray).split(",").map((t=>+t));t.setLineDash(e),t.strokeStyle=Gn(i.line.stroke,i.line.opacity),t.lineWidth=1,t.beginPath(),t.moveTo(i.line.x1,i.line.y1),t.lineTo(i.line.x2,i.line.y2),t.stroke()}if(t.setLineDash([]),i.coordinateBase){const{rectWidth:e,rectHeight:n,rectRadius:r,arrowWidth:o}=i.coordinateBase;t.fillStyle=Gn(i.coordinateBase.fill,i.coordinateBase.opacity),i.coordinateBase.stroke&&(t.strokeStyle=Gn(i.coordinateBase.stroke,i.coordinateBase.strokeOpacity),t.lineWidth=i.coordinateBase.strokeWidth);let s=i.coordinateBase.edgeXRect;const a=i.coordinateBase.edgeYRect,l=n/2;t.beginPath(),"right"===i.orient?(s-=o,t.moveTo(s,a+l),t.lineTo(s+o,a),t.lineTo(s+e+o,a),t.lineTo(s+e+o,a+n),t.lineTo(s+o,a+n),t.closePath()):"left"===i.orient?(t.moveTo(s,a),t.lineTo(s+e,a),t.lineTo(s+e+o,a+l),t.lineTo(s+e,a+n),t.lineTo(s,a+n),t.closePath()):r?function(t,e,n,r,o,i){t.beginPath(),t.moveTo(e+i,n),t.lineTo(e+r-i,n),t.quadraticCurveTo(e+r,n,e+r,n+i),t.lineTo(e+r,n+o-i),t.quadraticCurveTo(e+r,n+o,e+r-i,n+o),t.lineTo(e+i,n+o),t.quadraticCurveTo(e,n+o,e,n+o-i),t.lineTo(e,n+i),t.quadraticCurveTo(e,n,e+i,n),t.closePath()}(t,s,a,e,n,3):t.rect(s,a,e,n),t.fill(),i.coordinateBase.stroke&&t.stroke(),t.fillStyle=i.coordinate.textFill,t.textAlign="middle"===i.coordinate.textAnchor?"center":i.coordinate.textAnchor,t.fillText(i.coordinate.displayCoordinate,i.coordinate.edgeXText,i.coordinate.edgeYText)}}}(n,o)},canvasToDraw:$a,drawOn:Qc}),eu="#525252",nu="#ffffff",ru="Helvetica Neue, Helvetica, Arial, sans-serif",ou=tu(((t,e)=>{const{show:n,currentItem:r,chartConfig:{height:o}}=e;if(null==r)return null;const{orient:i,at:s,stroke:a,strokeOpacity:l,strokeWidth:c,rectRadius:u,rectWidth:h,rectHeight:d,fill:p,opacity:f,fontFamily:g,fontSize:m,textFill:y,customX:v}=t,{x,coordinate:w}=v(t,e);return{type:"vertical",hideLine:!0,edgeAt:"bottom"===s?o:0,coordinate:w,show:n,orient:i,fill:p,opacity:f,fontFamily:g,fontSize:m,textFill:y,stroke:a,strokeOpacity:l,strokeWidth:c,rectWidth:h,rectHeight:d,rectRadius:u,arrowWidth:0,x1:x,x2:x,y1:0,y2:o}}));ou.defaultProps={fill:eu,textFill:nu,fontFamily:ru,fontSize:13,yAxisPad:0,rectWidth:80,rectHeight:20,strokeOpacity:1,strokeWidth:1,orient:"bottom",at:"bottom",opacity:1,snapX:!0,customX:(t,e)=>{const{snapX:n,displayFormat:r}=t,{xScale:o,xAccessor:i,currentItem:s,mouseXY:a,displayXAccessor:l}=e,[c,u]=n?[o(i(s)),l(s)]:[a[0],o.invert(c)];return{x:c,coordinate:r(u)}}};const iu=ou,su=tu(((t,e)=>{const{displayFormat:n,yAccessor:r}=t,{chartConfig:o,currentCharts:i,currentItem:s,mouseXY:a,show:l}=e,{id:c,yScale:u}=o||{};if(null==a||i.indexOf(c)<0||!l||r&&!s)return null;const h=r?u(r(s)):a[1]-o.origin[1];return((t,e,n,r)=>{const{width:o}=r,{orient:i,at:s,rectWidth:a,rectHeight:l,dx:c,fill:u,opacity:h,fontFamily:d,fontSize:p,textFill:f,arrowWidth:g,stroke:m,strokeOpacity:y,strokeWidth:v}=n;return{coordinate:"NaNundefined"===e?"no data":e,show:!0,type:"horizontal",hideLine:!0,edgeAt:"right"===s?o:0,orient:i,fill:u,opacity:h,fontFamily:d,fontSize:p,textFill:f,stroke:m,strokeOpacity:y,strokeWidth:v,rectWidth:a,rectHeight:l,arrowWidth:g,dx:c,x1:0,x2:o,y1:t,y2:t}})(h,n(u.invert(h)),t,e)}));su.defaultProps={fill:eu,textFill:nu,fontFamily:ru,fontSize:13,yAxisPad:0,rectWidth:50,rectHeight:20,orient:"left",at:"left",dx:0,arrowWidth:10,opacity:1,strokeOpacity:1,strokeWidth:1};const au=su,lu=11,cu="-apple-system, system-ui, 'Helvetica Neue', Ubuntu, sans-serif",uu=t=>{let{className:e=vs,fontFamily:n=cu,fontSize:r=lu,children:o,...i}=t;return(0,S.jsx)("text",{className:e,fontFamily:n,fontSize:r,...i,children:o})},hu="#4682b4",du=t=>{let{className:e=xs,fill:n=hu,children:r,...o}=t;return(0,S.jsx)("tspan",{className:e,fill:n,...o,children:r})},pu=["mousemove"],fu=t=>(0,S.jsx)(Ba,{clip:!1,svgDraw:e=>{var n;const{onClick:r,displayFormat:o,yAccessor:i,options:s,origin:a,textFill:l,labelFill:c,labelFontWeight:u,className:h,displayValuesFor:d,displayInit:p,fontFamily:f,fontSize:g,fontWeight:m}=t,{chartConfig:{width:y,height:v},fullData:x}=e,w=null!=(n=d(t,e))?n:Kn(x);let b=p,k=p,C=p;if(void 0!==w){const t=i(w);void 0!==t&&(b=o(t.top),k=o(t.middle),C=o(t.bottom))}const D=In(a),[A,M]=D(y,v),{sourcePath:T,windowSize:_,multiplier:P,movingAverageType:j}=s,N="BB("+T+", "+_+", "+P+", "+j+")",E=b+", "+k+", "+C,I=Vn([A,M]);return(0,S.jsx)("g",{transform:I,className:h,onClick:r,children:(0,S.jsxs)(uu,{x:0,y:0,fontFamily:f,fontSize:g,fontWeight:m,children:[(0,S.jsx)(du,{fill:c,fontWeight:u,children:N}),(0,S.jsx)("tspan",{x:0,dy:15,fill:l,children:E})]})})},drawOn:pu});fu.defaultProps={className:bs,displayFormat:(0,zo.WU)(".2f"),displayValuesFor:(t,e)=>e.currentItem,displayInit:"n/a",origin:[8,8],yAccessor:t=>t.bb};const gu=fu,mu=t=>{let{color:e,displayName:n,fontSize:r,fontFamily:i,fontWeight:s,textFill:a,labelFill:l,labelFontWeight:c,value:u,origin:h,onClick:d,forChart:p,options:f}=t;const g=(0,o.useCallback)((t=>{void 0!==d&&d(t,{chartId:p,...f})}),[d,p,f]),m=Vn(h);return(0,S.jsxs)("g",{transform:m,children:[(0,S.jsx)("line",{x1:0,y1:2,x2:0,y2:28,stroke:e,strokeWidth:4}),(0,S.jsxs)(uu,{x:5,y:11,fontFamily:i,fontSize:r,fontWeight:s,children:[(0,S.jsx)(du,{fill:l,fontWeight:c,children:n}),(0,S.jsx)("tspan",{x:5,dy:15,fill:a,children:u})]}),(0,S.jsx)("rect",{x:0,y:0,width:55,height:30,fill:"none",stroke:"none",onClick:g})]})},yu=["mousemove"],vu=t=>(0,S.jsx)(Ba,{clip:!1,svgDraw:e=>{var n;const{chartId:r,chartConfig:o,chartConfig:{height:i},fullData:s}=e,{className:a,displayInit:l,onClick:c,width:u,fontFamily:h,fontSize:d,fontWeight:p,textFill:f,labelFill:g,origin:m,displayFormat:y,displayValuesFor:v,options:x}=t,w=null!=(n=v(t,e))?n:Kn(s),b=In(m),[k,C]=b(u,i),[D,A]=o.origin,M=Vn([D+k,A+C]);return(0,S.jsx)("g",{transform:M,className:a,children:x.map(((t,e)=>{const n=w&&t.yAccessor(w),o=t.type+" ("+t.windowSize+")",i=n?y(n):l;return(0,S.jsx)(mu,{origin:[u*e,0],color:t.stroke,displayName:o,value:i,options:t,forChart:r,onClick:c,fontFamily:h,fontSize:d,fontWeight:p,textFill:f,labelFill:g},e)}))})},drawOn:yu});vu.defaultProps={className:ks,displayFormat:(0,zo.WU)(".2f"),displayInit:"n/a",displayValuesFor:(t,e)=>e.currentItem,origin:[0,10],width:65};const xu=vu,wu=t=>{let{labelFill:e,labelFontWeight:n,text:r,valueFill:o,value:i}=t;return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(du,{fill:e,fontWeight:n,children:r}),(0,S.jsx)("tspan",{fill:o,children:i},"value_O")]})},bu=["mousemove"],ku=t=>(0,S.jsx)(Ba,{clip:!1,svgDraw:e=>{var n;const{accessor:r,changeFormat:o,className:i,displayTexts:s,displayValuesFor:a,fontFamily:l,fontSize:c,fontWeight:u,labelFill:h,labelFontWeight:d,ohlcFormat:p,onClick:f,percentFormat:g,textFill:m}=t,{chartConfig:{width:y,height:v},fullData:x}=e,w=null!=(n=a(t,e))?n:Kn(x),{na:b}=s;let k=b,C=b,D=b,A=b,M=b;if(void 0!==w&&void 0!==r){const t=r(w);void 0!==t&&(k=p(t.open),C=p(t.high),D=p(t.low),A=p(t.close),M=o(t.close-t.open)+" ("+g((t.close-t.open)/t.open)+")")}const{origin:T}=t,[_,P]=In(T)(y,v),j=In(m)(w),N=Vn([_,P]);return(0,S.jsx)("g",{className:i,transform:N,onClick:f,children:(0,S.jsxs)(uu,{x:0,y:0,fontFamily:l,fontSize:c,fontWeight:u,children:[(0,S.jsx)(wu,{fill:h,fontWeight:d,text:s.o,valueFill:j,value:k}),(0,S.jsx)(wu,{fill:h,fontWeight:d,text:s.h,valueFill:j,value:C}),(0,S.jsx)(wu,{fill:h,fontWeight:d,text:s.l,valueFill:j,value:D}),(0,S.jsx)(wu,{fill:h,fontWeight:d,text:s.c,valueFill:j,value:A}),(0,S.jsx)("tspan",{fill:j,children:" "+M},"value_Change")]})})},drawOn:bu});ku.defaultProps={className:Cs,fontFamily:na,fontWeight:"bold",accessor:t=>t,changeFormat:(0,zo.WU)("+.2f"),displayTexts:{o:"O: ",h:" H: ",l:" L: ",c:" C: ",na:"n/a"},displayValuesFor:(t,e)=>e.currentItem,ohlcFormat:(0,zo.WU)(".2f"),origin:[0,0],percentFormat:(0,zo.WU)("+.2%")};const Cu=ku,Su=(0,zo.WU)(".2f"),Du="n/a",Au=(t,e)=>e.currentItem,Mu=[0,0],Tu=["mousemove"],_u=t=>{const{className:e=vs,displayInit:n=Du,displayFormat:r=Su,displayValuesFor:o=Au,origin:i=Mu,fontFamily:s,fontSize:a,fontWeight:l,yAccessor:c,options:u,labelFill:h,labelFontWeight:d,textFill:p,onClick:f}=t;return(0,S.jsx)(Ba,{clip:!1,svgDraw:g=>{const{chartConfig:{width:m,height:y}}=g,v=o(t,g),x=v&&c(v),w=x&&r(x)||n,b=In(i),[k,C]=b(m,y),D="RSI ("+u.windowSize+"): ";return(0,S.jsx)("g",{className:e,transform:"translate("+k+", "+C+")",onClick:f,children:(0,S.jsxs)(uu,{x:0,y:0,fontFamily:s,fontSize:a,fontWeight:l,children:[(0,S.jsx)(du,{fill:h,fontWeight:d,children:D}),(0,S.jsx)("tspan",{fill:p,children:w})]})})},drawOn:Tu})},Pu={sourcePath:"close",multiplier:2,movingAverageType:"sma",windowSize:20},ju={sourcePath:"close",windowSize:10},Nu={sourcePath:"close",windowSize:14},Eu={sourcePath:"close",windowSize:10};function Iu(){let t=Pu;const e=e=>{const{windowSize:n,multiplier:r,movingAverageType:o,sourcePath:i}=t,s=En(i),a="ema"===o?function(){let t=ju;const e=e=>{const{windowSize:n,sourcePath:r}=t,o=En(r),i=2/(n+1);let s,a=0,l=0;return e.map(((t,e)=>{const r=o(t,e);if(void 0!==s||void 0!==r){if(!(e<n+l-1)){if(e===n+l-1){a+=r;const t=a/n;return s=t,t}{const t=r*i+(1-i)*s;return s=t,t}}a+=r}else l++}))};return e.undefinedLength=()=>t.windowSize-1,e.options=function(){return arguments.length?(t={...ju,...arguments.length<=0?void 0:arguments[0]},e):t},e}().options({windowSize:n,sourcePath:i}):Fn().windowSize(n).accumulator((t=>Dn(t))).sourcePath(i),l=Fn().windowSize(n).accumulator((t=>{const e=t[t.length-1].mean,n=((t,e)=>{const n=((t,e)=>{let n,r=0,o=0,i=0;if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(n=e-o,o+=n/++r,i+=n*(e-o));else{let s=-1;for(let a of t)null!=(a=e(a,++s,t))&&(a=+a)>=a&&(n=a-o,o+=n/++r,i+=n*(a-o))}if(r>1)return i/(r-1)})(t,e);return n?bn(n):n})(t,(t=>s(t.datum)));return void 0===n?void 0:{top:e+r*n,middle:e,bottom:e-r*n}})),c=jn().combine(((t,e)=>({datum:t,mean:e})));return l(c(e,a(e)))};return e.undefinedLength=()=>t.windowSize-1,e.options=function(){return arguments.length?(t={...Pu,...arguments.length<=0?void 0:arguments[0]},e):t},e}let Fu=0;function Lu(){let t,e,n,r,o,i=Fu++;function s(){}return s.id=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],s):i},s.accessor=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],s):t},s.stroke=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],s):e||(e=qn(i))},s.fill=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],s):n||(n=qn(i))},s.echo=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],s):r},s.type=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],s):o},s}const Ou={merge:!0},Ru=(t,e,n,r)=>{const o=function(o,i){if(void 0===i&&(i=Ou),i.merge){if(!e.accessor())throw new Error("Set an accessor to "+t+" before calculating");return r(o)}return n(o)};return Zn(o,e,"id","accessor","stroke","fill","echo","type"),Zn(o,n,"options","undefinedLength"),Zn(o,r,"merge","skipUndefined"),o},Wu="BollingerBand",zu=function(t){let{id:e,minWidth:n=100,initialWidth:r=1e3}=void 0===t?{}:t;const s=(0,o.useRef)(),[a,l]=(0,o.useState)(r),c=(0,o.useCallback)((()=>{const t=e?document.getElementById(e):i(s);if(t){const{width:e,paddingLeft:r,paddingRight:o}=window.getComputedStyle(t),i=parseFloat(e)-(parseFloat(r)+parseFloat(o));l(Math.round(Math.max(i,n)))}}),[]);return(0,o.useLayoutEffect)(c,[]),(0,o.useEffect)((()=>(window.addEventListener("resize",c),()=>window.removeEventListener("resize",c))),[]),[a,s]},Uu=Math.round,Hu={pointerEvents:"all",transform:"translate(0, 50px)"},Bu={transform:"translate(-40px, 0)"},Xu={transform:"translate(-56px, 0)"},Yu=(t,e,n)=>"translate ("+(t-20)+", "+(e-8+n/4)+")",Zu=t=>{let{zoomMultiplier:e,heightFromBase:n,r,fill:i,fillOpacity:s,stroke:a,strokeWidth:l,textFill:c}=t;const u=(0,o.useContext)($o),h=t=>{const{xAxisZoom:n,xScale:r,plotData:o,xAccessor:i}=u,s=r(i(Kn(o))),a=t>0?1*e:1/e,[l,c]=r.domain(),[h,d]=r.range().map((t=>s+(t-s)*a)).map(r.invert),p=bo(l,h),f=bo(c,d);n([p(.2),f(.2)])},{chartConfig:{width:d,height:p}}=u,f=Uu(d/2),g=p-n,m=f-8,y=f+16+2*r,v=Yu(f-16-2*r,g,r),x=Yu(m,g,r),w=g+r/2,b=m-r/2,k=y-r/2;return(0,S.jsxs)("g",{style:Hu,children:[(0,S.jsx)("g",{transform:v,children:(0,S.jsx)("path",{d:"M19,13H5V11H19V13Z",fill:c})}),(0,S.jsx)("circle",{style:Bu,cx:b,cy:w,fill:i,fillOpacity:s,stroke:a,strokeWidth:l,r,onClick:()=>h(1)}),(0,S.jsx)("g",{transform:x,children:(0,S.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z",fill:c})}),(0,S.jsx)("circle",{style:Xu,cx:k,cy:w,fill:i,fillOpacity:s,stroke:a,strokeWidth:l,r,onClick:()=>h(-1)})]})};Zu.defaultProps={fill:"#ffffff",fillOpacity:.4,heightFromBase:32,r:16,stroke:"grey",strokeWidth:1,textFill:"#000000",zoomMultiplier:1.5};const $u={ChartCanvas:Na,Chart:Vo,XAxis:ol,YAxis:cl,LineSeries:tc,RSISeries:dc,CandlestickSeries:xc,BollingerSeries:Ac,BarSeries:Zc,CrossHairCursor:Kc,MouseCoordinateX:iu,MouseCoordinateY:au,RSITooltip:_u,OHLCTooltip:Cu,MovingAverageTooltip:xu,BollingerBandTooltip:gu,sma:()=>{const t=Lu().type("SMA").accessor((t=>t.sma)),e=function(){let t=Eu;function e(e){const{windowSize:n,sourcePath:r}=t,o=Fn().windowSize(n).sourcePath(r).accumulator((t=>Dn(t)));return o(e)}return e.undefinedLength=()=>t.windowSize-1,e.options=function(){return arguments.length?(t={...Eu,...arguments.length<=0?void 0:arguments[0]},e):t},e}(),n=$n().algorithm(e).merge(((t,e)=>{t.sma=e}));return Ru("SMA",t,e,n)},rsi:()=>{const t=Lu().type("RSI").accessor((t=>t.rsi)),e=function(){let t=Nu;const e=e=>{let n,r;const{windowSize:o,sourcePath:i}=t,s=En(i),a=Fn().windowSize(o).accumulator((t=>{const e=void 0!==n?(n*(o-1)+t[t.length-1].gain)/o:Dn(t,(t=>t.gain));if(void 0===e)return;const i=void 0!==r?(r*(o-1)+t[t.length-1].loss)/o:Dn(t,(t=>t.loss));return void 0!==i?(n=e,r=i,100-100/(1+e/i)):void 0}));return a(Fn().windowSize(2).undefinedValue((()=>[0,0])).accumulator((t=>{const e=t[0],n=t[1],r=s(n)-s(e);return{gain:Math.max(r,0),loss:Math.abs(Math.min(r,0))}}))(e))};return e.undefinedLength=()=>t.windowSize-1,e.options=function(){return arguments.length?(t={...Nu,...arguments.length<=0?void 0:arguments[0]},e):t},e}(),n=$n().algorithm(e).merge(((t,e)=>{t.rsi=e}));return Ru("RSI",t,e,n)},bollingerBand:()=>{const t=Lu().type(Wu),e=Iu(),n=$n().algorithm(e).merge(((t,e)=>{t.bollingerBand=e}));return Ru(Wu,t,e,n)},useElementWidth:zu,ZoomButtons:Zu},Vu=$u,qu=1e3,Gu=6e4,Ku=36e5,Ju=864e5,Qu=6048e5,th=2592e6,eh=31536e6;var nh=new Date,rh=new Date;function oh(t,e,n,r){function o(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return o.floor=function(e){return t(e=new Date(+e)),e},o.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},o.round=function(t){var e=o(t),n=o.ceil(t);return t-e<n-t?e:n},o.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},o.range=function(n,r,i){var s,a=[];if(n=o.ceil(n),i=null==i?1:Math.floor(i),!(n<r&&i>0))return a;do{a.push(s=new Date(+n)),e(n,i),t(n)}while(s<n&&n<r);return a},o.filter=function(n){return oh((function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),(function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););}))},n&&(o.count=function(e,r){return nh.setTime(+e),rh.setTime(+r),t(nh),t(rh),Math.floor(n(nh,rh))},o.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?o.filter(r?function(e){return r(e)%t==0}:function(e){return o.count(0,e)%t==0}):o:null}),o}var ih=oh((function(){}),(function(t,e){t.setTime(+t+e)}),(function(t,e){return e-t}));ih.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?oh((function(e){e.setTime(Math.floor(e/t)*t)}),(function(e,n){e.setTime(+e+n*t)}),(function(e,n){return(n-e)/t})):ih:null};const sh=ih;ih.range;var ah=oh((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,e){t.setTime(+t+e*qu)}),(function(t,e){return(e-t)/qu}),(function(t){return t.getUTCSeconds()}));const lh=ah;ah.range;var ch=oh((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*qu)}),(function(t,e){t.setTime(+t+e*Gu)}),(function(t,e){return(e-t)/Gu}),(function(t){return t.getMinutes()}));const uh=ch;ch.range;var hh=oh((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*qu-t.getMinutes()*Gu)}),(function(t,e){t.setTime(+t+e*Ku)}),(function(t,e){return(e-t)/Ku}),(function(t){return t.getHours()}));const dh=hh;hh.range;var ph=oh((t=>t.setHours(0,0,0,0)),((t,e)=>t.setDate(t.getDate()+e)),((t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Gu)/Ju),(t=>t.getDate()-1));const fh=ph;ph.range;function gh(t){return oh((function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+7*e)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Gu)/Qu}))}var mh=gh(0),yh=gh(1),vh=gh(2),xh=gh(3),wh=gh(4),bh=gh(5),kh=gh(6),Ch=(mh.range,yh.range,vh.range,xh.range,wh.range,bh.range,kh.range,oh((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,e){t.setMonth(t.getMonth()+e)}),(function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()})));const Sh=Ch;Ch.range;var Dh=oh((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));Dh.every=function(t){return isFinite(t=Math.floor(t))&&t>0?oh((function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,n){e.setFullYear(e.getFullYear()+n*t)})):null};const Ah=Dh;Dh.range;var Mh=oh((function(t){t.setUTCSeconds(0,0)}),(function(t,e){t.setTime(+t+e*Gu)}),(function(t,e){return(e-t)/Gu}),(function(t){return t.getUTCMinutes()}));const Th=Mh;Mh.range;var _h=oh((function(t){t.setUTCMinutes(0,0,0)}),(function(t,e){t.setTime(+t+e*Ku)}),(function(t,e){return(e-t)/Ku}),(function(t){return t.getUTCHours()}));const Ph=_h;_h.range;var jh=oh((function(t){t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/Ju}),(function(t){return t.getUTCDate()-1}));const Nh=jh;jh.range;function Eh(t){return oh((function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+7*e)}),(function(t,e){return(e-t)/Qu}))}var Ih=Eh(0),Fh=Eh(1),Lh=Eh(2),Oh=Eh(3),Rh=Eh(4),Wh=Eh(5),zh=Eh(6),Uh=(Ih.range,Fh.range,Lh.range,Oh.range,Rh.range,Wh.range,zh.range,oh((function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCMonth(t.getUTCMonth()+e)}),(function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())}),(function(t){return t.getUTCMonth()})));const Hh=Uh;Uh.range;var Bh=oh((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)}),(function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()}));Bh.every=function(t){return isFinite(t=Math.floor(t))&&t>0?oh((function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null};const Xh=Bh;Bh.range;function Yh(t,e,n,r,o,i){const s=[[lh,1,qu],[lh,5,5e3],[lh,15,15e3],[lh,30,3e4],[i,1,Gu],[i,5,3e5],[i,15,9e5],[i,30,18e5],[o,1,Ku],[o,3,108e5],[o,6,216e5],[o,12,432e5],[r,1,Ju],[r,2,1728e5],[n,1,Qu],[e,1,th],[e,3,7776e6],[t,1,eh]];function a(e,n,r){const o=Math.abs(n-e)/r,i=Ar((([,,t])=>t)).right(s,o);if(i===s.length)return t.every(Cr(e/eh,n/eh,r));if(0===i)return sh.every(Math.max(Cr(e,n,r),1));const[a,l]=s[o/s[i-1][2]<s[i][2]/o?i-1:i];return a.every(l)}return[function(t,e,n){const r=e<t;r&&([t,e]=[e,t]);const o=n&&"function"==typeof n.range?n:a(t,e,n),i=o?o.range(t,+e+1):[];return r?i.reverse():i},a]}const[Zh,$h]=Yh(Xh,Hh,Ih,Nh,Ph,Th),[Vh,qh]=Yh(Ah,Sh,mh,fh,dh,uh);var Gh=n(152);function Kh(t){return new Date(t)}function Jh(t){return t instanceof Date?+t:+new Date(+t)}function Qh(t,e,n,r,o,i,s,a,l,c){var u=Oo(),h=u.invert,d=u.domain,p=c(".%L"),f=c(":%S"),g=c("%I:%M"),m=c("%I %p"),y=c("%a %d"),v=c("%b %d"),x=c("%B"),w=c("%Y");function b(t){return(l(t)<t?p:a(t)<t?f:s(t)<t?g:i(t)<t?m:r(t)<t?o(t)<t?y:v:n(t)<t?x:w)(t)}return u.invert=function(t){return new Date(h(t))},u.domain=function(t){return arguments.length?d(Array.from(t,Jh)):d().map(Kh)},u.ticks=function(e){var n=d();return t(n[0],n[n.length-1],null==e?10:e)},u.tickFormat=function(t,e){return null==e?b:c(e)},u.nice=function(t){var n=d();return t&&"function"==typeof t.range||(t=e(n[0],n[n.length-1],null==t?10:t)),t?d(function(t,e){var n,r=0,o=(t=t.slice()).length-1,i=t[r],s=t[o];return s<i&&(n=r,r=o,o=n,n=i,i=s,s=n),t[r]=e.floor(i),t[o]=e.ceil(s),t}(n,t)):u},u.copy=function(){return Fo(u,Qh(t,e,n,r,o,i,s,a,l,c))},u}const td=t=>function(e,n){const{widthRatio:r}=e,{xScale:o,xAccessor:i,plotData:s}=n,a=i(((t,e)=>{if(!e||!t)return t?t[0]:void 0;for(let n=0;n<t.length;n++){const r=t[n];if(null!=e(r))return r}})(s));return Math.abs(o(t.offset(a,1))-o(a))*r},ed={UP:"black",DOWN:"#980032",TRANSPARENT:"transparent"};var nd=n(692),rd=n(829),od=n(222),id=(0,rd.Z)((function(t){t.setUTCSeconds(0,0)}),(function(t,e){t.setTime(+t+e*od.yB)}),(function(t,e){return(e-t)/od.yB}),(function(t){return t.getUTCMinutes()}));const sd=id;id.range;var ad=(0,rd.Z)((function(t){t.setUTCMinutes(0,0,0)}),(function(t,e){t.setTime(+t+e*od.Y2)}),(function(t,e){return(e-t)/od.Y2}),(function(t){return t.getUTCHours()}));const ld=ad;ad.range;var cd=n(326),ud=(0,rd.Z)((function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCMonth(t.getUTCMonth()+e)}),(function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())}),(function(t){return t.getUTCMonth()}));const hd=ud;ud.range;const dd=t=>"string"==typeof t,pd=(t,e)=>-1!==t.indexOf(e),fd=(0,zo.WU)(".8~"),gd=(0,zo.WU)(".4f"),md=(0,zo.WU)(".2f"),yd=(0,zo.WU)(".4s"),vd=(0,zo.WU)(".0s"),xd=t=>{if(!t||!dd(t))return nd.Z;const e=parseInt(t,10);return pd(t,"m")?sd.every(e):pd(t,"h")?ld.every(e):pd(t,"d")?nd.Z.every(e):pd(t,"w")?cd.Ox.every(e):pd(t,"M")?hd.every(e):nd.Z},wd=t=>dd(t)&&(pd(t,"m")||pd(t,"h"))?(0,Gh.i$)("%m-%d %H:%M"):(0,Gh.i$)("%Y-%m-%d");let bd,kd,Cd=[];const Sd=document&&"ontouchstart"in document.documentElement,Dd=t=>(0,o.useMemo)((()=>td(t)),[t]),Ad="rs-tooltip",Md=(t,e)=>(t||{}).close>(e||{}).close?ed.UP:ed.DOWN,Td=(t,e)=>(t||{}).close>(t||{}).open?ed.TRANSPARENT:Md(t,e),_d={top:"#964b00",middle:"#000000",bottom:"#964b00"},Pd=(t,e)=>({type:"SMA",yAccessor:t,stroke:e.stroke,windowSize:e.windowSize}),jd=[5,-90],Nd=[5,320],Ed=[190,432],Id=t=>t.bb,Fd=t=>{let{id:e,height:n,timeInterval:r,timeFormat:i,sma20:s,sma50:a,bb:l,yExtents:c,origin:u}=t;const h=Dd(r),[d,p]=(0,o.useMemo)((()=>[s.accessor(),s.options()]),[s]),[f,g]=(0,o.useMemo)((()=>[a.accessor(),a.options()]),[a]),m=(0,o.useMemo)((()=>[Pd(d,p),Pd(f,g)]),[d,p,f,g]),y=(0,o.useMemo)((()=>l.options()),[l]);return(0,S.jsxs)(Vu.Chart,{id:e,height:n,yExtents:c,origin:u,children:[(0,S.jsx)(Vu.YAxis,{axisAt:"right",orient:"right",ticks:5,stroke:"black"}),(0,S.jsx)(Vu.BollingerSeries,{yAccessor:Id,stroke:_d,fill:"#4682b4"}),(0,S.jsx)(Vu.LineSeries,{yAccessor:d,stroke:p.stroke}),(0,S.jsx)(Vu.LineSeries,{yAccessor:f,stroke:g.stroke}),(0,S.jsx)(Vu.CandlestickSeries,{width:h,fill:Td,stroke:Md,wickStroke:Md,candleStrokeWidth:.8}),(0,S.jsx)(Vu.MouseCoordinateY,{at:"right",orient:"right",displayFormat:gd}),(0,S.jsx)(Vu.OHLCTooltip,{fontSize:15,xDisplayFormat:i,textFill:"black",ohlcFormat:fd,forChart:3,origin:jd}),(0,S.jsx)(Vu.MovingAverageTooltip,{className:Ad,width:100,fontSize:15,origin:Nd,options:m}),(0,S.jsx)(Vu.BollingerBandTooltip,{className:Ad,fontSize:15,origin:Ed,yAccessor:Id,options:y}),Sd&&(0,S.jsx)(Vu.ZoomButtons,{})]})},Ld=(t,e)=>(t||{}).close>(e||{}).close?ed.UP:ed.DOWN,Od=t=>t.volume,Rd=t=>{let{id:e,height:n,timeInterval:r,timeFormat:o,yExtents:i,origin:s}=t;const a=Dd(r);return(0,S.jsxs)(Vu.Chart,{id:e,height:n,yExtents:i,origin:s,children:[(0,S.jsx)(Vu.YAxis,{axisAt:"left",orient:"left",ticks:3,tickFormat:vd,stroke:"black"}),(0,S.jsx)(Vu.MouseCoordinateY,{at:"left",orient:"left",displayFormat:yd}),(0,S.jsx)(Vu.BarSeries,{width:a,yAccessor:Od,fill:Ld,stroke:Ld}),(0,S.jsx)(Vu.XAxis,{axisAt:"bottom",orient:"bottom",ticks:6}),(0,S.jsx)(Vu.MouseCoordinateX,{at:"bottom",orient:"bottom",displayFormat:o})]})},Wd={line:"#000000",top:"#b8b2bb",middle:"transparent",bottom:"#b8c2cc",outsideThreshold:"#b300b3",insideThreshold:"#4699cb"},zd=[30,50,70],Ud=t=>t.rsi,Hd=t=>{let{id:e,height:n,width:r,rsi:i,yExtents:s,origin:a}=t;const l=(0,o.useMemo)((()=>[r-160,10]),[r]),c=(0,o.useMemo)((()=>i.options()),[i]);return(0,S.jsxs)(Vu.Chart,{id:e,height:n,yExtents:s,origin:a,children:[(0,S.jsx)(Vu.YAxis,{axisAt:"right",orient:"right",stroke:"black",tickStroke:"#4699cb",tickValues:zd}),(0,S.jsx)(Vu.MouseCoordinateY,{at:"right",orient:"right",displayFormat:md}),(0,S.jsx)(Vu.RSISeries,{yAccessor:Ud,stroke:Wd}),(0,S.jsx)(Vu.RSITooltip,{className:"rs-tooltip",fontSize:15,yAccessor:Ud,origin:l,options:c})]})},Bd=t=>t.close,Xd=t=>{let{id:e,height:n,yExtents:r,origin:o}=t;return(0,S.jsxs)(Vu.Chart,{id:e,height:n,yExtents:r,origin:o,children:[(0,S.jsx)(Vu.YAxis,{axisAt:"left",orient:"left",stroke:"black",ticks:5}),(0,S.jsx)(Vu.LineSeries,{yAccessor:Bd,stroke:"black"}),(0,S.jsx)(Vu.MouseCoordinateY,{at:"left",orient:"left",displayFormat:md})]})},{sma:Yd,rsi:Zd,bollingerBand:$d,useElementWidth:Vd}=Vu,qd={left:50,right:80,top:0,bottom:30},Gd={width:"98%"},Kd=t=>t?t.date:0,Jd=function(){return Bn.apply(Qh(Vh,qh,Ah,Sh,mh,fh,dh,uh,lh,Gh.i$).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}(),Qd=(t,e)=>[0,e-510],tp=[0,100],ep=t=>[t.high,t.low],np=(t,e)=>[0,e-420],rp=t=>t.volume,op=(t,e)=>[0,e-120],ip=Yd().options({windowSize:20,stroke:"green"}).merge(((t,e)=>{t.sma20=e})).accessor((t=>t.sma20)),sp=Yd().options({windowSize:50,stroke:"orange"}).merge(((t,e)=>{t.sma50=e})).accessor((t=>t.sma50)),ap=$d().merge(((t,e)=>{t.bb=e})).accessor((t=>t.bb)),lp=Zd().options({windowSize:14}).merge(((t,e)=>{t.rsi=e})).accessor((t=>t.rsi)),cp=(0,o.memo)((t=>{let{id:e,style:n,data:r,height:s,timeframe:a}=t;const[l]=Vd({id:e}),c=(0,o.useRef)(150),u=(0,o.useMemo)((()=>sp(ip(ap(lp(r))))),[r]),[h,d]=(0,o.useMemo)((()=>[xd(a),wd(a)]),[a]),p=(0,o.useMemo)((()=>((t,e,n)=>{const r=t.length-1,o=r<n?(t[0]||{}).date:(t[r-n]||{}).date,i=(t.slice(-1)[0]||{}).date,s="1m"===e?i+3e5:i;return o===bd&&s===kd||(bd=o),kd=s,Cd=[o,s]})(u,a,i(c))),[u,a]),f=(0,o.useMemo)((()=>t=>{c.current=t}),[]);return(0,S.jsx)("div",{id:e,style:{...Gd,...n},children:(0,S.jsxs)(Vu.ChartCanvas,{ratio:2,width:l,height:s,margin:qd,data:u,xAccessor:Kd,displayXAccessor:Kd,xScale:Jd,xExtents:p,onZoom:f,children:[(0,S.jsx)(Hd,{id:1,height:100,width:l,rsi:lp,yExtents:tp,origin:Qd}),(0,S.jsx)(Xd,{id:2,height:100,yExtents:ep,origin:Qd}),(0,S.jsx)(Fd,{id:3,height:300,timeInterval:h,timeFormat:d,sma20:ip,sma50:sp,bb:ap,yExtents:ep,origin:np}),(0,S.jsx)(Rd,{id:4,height:100,timeInterval:h,timeFormat:d,yExtents:rp,origin:op}),(0,S.jsx)(Vu.CrossHairCursor,{})]})})})),up={providerTitle:y.INITIAL_PROVIDER_TITLE,itemTitle:y.INITIAL_ITEM_TITLE,data:y.DF_DATA,timeframe:y.DF_TIMEFRAME,fetchStatus:M.INITIAL,isLiveUpdating:!1},hp=Object.freeze({LOADING:"DATA_LOADING",LOADED:"DATA_LOADED",LOAD_FAILED:"DATA_LOAD_FAILED",UPDATE:"DATA_UPDATE"}),dp=(t,e)=>{switch(e.type){case hp.LOADING:return{...t,fetchStatus:M.LOADING};case hp.LOADED:{const{data:n}=e;return(t=>Array.isArray(t)||t.length>20)(n)?{...t,data:e.data,providerTitle:e.providerTitle,itemTitle:e.itemTitle,timeframe:e.timeframe,fetchStatus:M.SUCCESS}:t}case hp.LOAD_FAILED:return{...t,fetchStatus:M.FAILED};case hp.UPDATE:return{...t,data:[...t.data,e.point]};default:throw new TypeError("Not existed action "+e.type)}},pp="wss://stream.binance.com:9443/ws/",fp="@kline_1m";let gp;function mp(t,e,n,r,o){let i;gp=new WebSocket(""+pp+t+fp),gp.addEventListener("open",(function(){i=(new Date).getMinutes(),n()})),gp.addEventListener("message",(function(t){try{const{E:n,k:r}=JSON.parse(t.data),s=new Date(n),a=s.getMinutes();i!==a?(i=a,e(((t,e)=>({date:t,high:parseFloat(e.h),low:parseFloat(e.l),open:parseFloat(e.o),close:parseFloat(e.c),volume:parseFloat(e.v)}))(n,r)),o("")):o(s.getSeconds())}catch(t){console.log(t)}})),gp.addEventListener("error",(function(t){r()})),gp.addEventListener("close",(function(t){r()}))}const yp={startLiveUpdate:t=>{let{pair:e,onMessage:n,onOpen:r,onClose:o,onSecond:i}=t;mp((t=>(""+t).replace("/","").toLowerCase())(e),n,r,o,i)},stopLiveUpdate:()=>{try{void 0===(t=1e3)&&(t=1005),gp&&gp.close(t)}catch(t){console.log(t)}var t}},vp=t=>{let{appSettings:e,theme:n,setThemeId:r,dispatch:o,setLiveUpdating:i}=t;return{appSettings:e,theme:n,setThemeId:r,dataAction:{loading:()=>o({type:hp.LOADING}),loadData:t=>{let{timeframe:e=y.DF_TIMEFRAME,...n}=t;i({isLiveUpdating:!1}),yp.stopLiveUpdate(),o({type:hp.LOADED,timeframe:e,...n})},loadFailed:()=>o({type:hp.LOAD_FAILED})},onLiveUpdate:t=>{yp.startLiveUpdate({pair:t,onMessage:(t,e)=>o({type:hp.UPDATE,point:t}),onOpen:()=>i({isLiveUpdating:!0}),onClose:()=>i({isLiveUpdating:!1}),onSecond:t=>i({isLiveUpdating:!0,sec:t})})},onStopUpdate:()=>{yp.stopLiveUpdate()}}},xp={paddingTop:8},wp={isLiveUpdating:!1,sec:""},bp=()=>{const[t,e]=(0,o.useState)(1),[n,r]=(0,o.useReducer)(dp,up),{providerTitle:i,itemTitle:s,data:a,timeframe:d,fetchStatus:p}=n,[f,g]=(0,o.useState)(wp),m=l((()=>vp({appSettings:x,theme:C,setThemeId:e,dispatch:r,setLiveUpdating:g})));return(0,S.jsx)(c.Provider,{value:m,children:(0,S.jsx)(u.Provider,{value:t,children:(0,S.jsxs)(h.Provider,{value:f,children:[(0,S.jsx)(wn,{fetchStatus:p,providerTitle:i,itemTitle:s,timeframe:d}),(0,S.jsx)("main",{style:xp,children:(0,S.jsx)(cp,{id:"chart_wrapper",height:550,data:a,timeframe:d})})]})})})};(0,r.s)(document.getElementById("app")).render((0,S.jsx)(bp,{}))},745:(t,e,n)=>{var r=n(935);e.s=r.createRoot,r.hydrateRoot},251:(t,e,n)=>{var r=n(294),o=Symbol.for("react.element"),i=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(t,e,n){var r,i={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==e.key&&(c=""+e.key),void 0!==e.ref&&(u=e.ref),e)s.call(e,r)&&!l.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps)void 0===i[r]&&(i[r]=e[r]);return{$$typeof:o,type:t,key:c,ref:u,props:i,_owner:a.current}}e.Fragment=i,e.jsx=c,e.jsxs=c},893:(t,e,n)=>{t.exports=n(251)}},t=>{var e;e=178,t(t.s=e)}]);